var YO=Object.defineProperty;var KO=(O,w,p)=>w in O?YO(O,w,{enumerable:!0,configurable:!0,writable:!0,value:p}):O[w]=p;var vn=(O,w,p)=>(KO(O,typeof w!="symbol"?w+"":w,p),p),S1=(O,w,p)=>{if(!w.has(O))throw TypeError("Cannot "+p)};var no=(O,w,p)=>(S1(O,w,"read from private field"),p?p.call(O):w.get(O)),cs=(O,w,p)=>{if(w.has(O))throw TypeError("Cannot add the same private member more than once");w instanceof WeakSet?w.add(O):w.set(O,p)};var Mn=(O,w,p)=>(S1(O,w,"access private method"),p);(function(){const w=document.createElement("link").relList;if(w&&w.supports&&w.supports("modulepreload"))return;for(const x of document.querySelectorAll('link[rel="modulepreload"]'))v(x);new MutationObserver(x=>{for(const k of x)if(k.type==="childList")for(const R of k.addedNodes)R.tagName==="LINK"&&R.rel==="modulepreload"&&v(R)}).observe(document,{childList:!0,subtree:!0});function p(x){const k={};return x.integrity&&(k.integrity=x.integrity),x.referrerPolicy&&(k.referrerPolicy=x.referrerPolicy),x.crossOrigin==="use-credentials"?k.credentials="include":x.crossOrigin==="anonymous"?k.credentials="omit":k.credentials="same-origin",k}function v(x){if(x.ep)return;x.ep=!0;const k=p(x);fetch(x.href,k)}})();var Cu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function XO(O){return O&&O.__esModule&&Object.prototype.hasOwnProperty.call(O,"default")?O.default:O}(()=>{var O=Object.create,w=Object.defineProperty,p=Object.defineProperties,v=Object.getOwnPropertyDescriptor,x=Object.getOwnPropertyDescriptors,k=Object.getOwnPropertyNames,R=Object.getOwnPropertySymbols,M=Object.getPrototypeOf,B=Object.prototype.hasOwnProperty,Y=Object.prototype.propertyIsEnumerable,ne=(e,t,i)=>t in e?w(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,A=(e,t)=>{for(var i in t||(t={}))B.call(t,i)&&ne(e,i,t[i]);if(R)for(var i of R(t))Y.call(t,i)&&ne(e,i,t[i]);return e},D=(e,t)=>p(e,x(t)),Ae=e=>w(e,"__esModule",{value:!0}),le=(e,t)=>{var i={};for(var n in e)B.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(e!=null&&R)for(var n of R(e))t.indexOf(n)<0&&Y.call(e,n)&&(i[n]=e[n]);return i},lt=(e,t)=>()=>(e&&(t=e(e=0)),t),Ze=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Et=(e,t)=>{for(var i in t)w(e,i,{get:t[i],enumerable:!0})},Fe=(e,t,i,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of k(t))!B.call(e,s)&&(i||s!=="default")&&w(e,s,{get:()=>t[s],enumerable:!(n=v(t,s))||n.enumerable});return e},Be=(e,t)=>Fe(Ae(w(e!=null?O(M(e)):{},"default",!t&&e&&e.__esModule?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e),Gt=(e=>(t,i)=>e&&e.get(t)||(i=Fe(Ae({}),t,1),e&&e.set(t,i),i))(typeof WeakMap<"u"?new WeakMap:0),Qe=(e,t,i)=>(ne(e,typeof t!="symbol"?t+"":t,i),i);function jt(e,t){for(var i in t)e[i]=t[i];return e}function bi(e){var t=e.parentNode;t&&t.removeChild(e)}function $(e,t,i){var n,s,a,l={};for(a in t)a=="key"?n=t[a]:a=="ref"?s=t[a]:l[a]=t[a];if(arguments.length>2&&(l.children=arguments.length>3?uo.call(arguments,2):i),typeof e=="function"&&e.defaultProps!=null)for(a in e.defaultProps)l[a]===void 0&&(l[a]=e.defaultProps[a]);return Oi(e,l,n,s,null)}function Oi(e,t,i,n,s){var a={type:e,props:t,key:i,ref:n,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:s??++wp};return s==null&&Ce.vnode!=null&&Ce.vnode(a),a}function bn(){return{current:null}}function Je(e){return e.children}function Xt(e,t){this.props=e,this.context=t}function Ot(e,t){if(t==null)return e.__?Ot(e.__,e.__.__k.indexOf(e)+1):null;for(var i;t<e.__k.length;t++)if((i=e.__k[t])!=null&&i.__e!=null)return i.__e;return typeof e.type=="function"?Ot(e):null}function Fi(e){var t,i;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((i=e.__k[t])!=null&&i.__e!=null){e.__e=e.__c.base=i.__e;break}return Fi(e)}}function ln(e){(!e.__d&&(e.__d=!0)&&co.push(e)&&!Vi.__r++||_p!==Ce.debounceRendering)&&((_p=Ce.debounceRendering)||xp)(Vi)}function Vi(){for(var e;Vi.__r=co.length;)e=co.sort(function(t,i){return t.__v.__b-i.__v.__b}),co=[],e.some(function(t){var i,n,s,a,l,c;t.__d&&(l=(a=(i=t).__v).__e,(c=i.__P)&&(n=[],(s=jt({},a)).__v=a.__v+1,wi(c,a,s,i.__n,c.ownerSVGElement!==void 0,a.__h!=null?[l]:null,n,l??Ot(a),a.__h),ft(n,a),a.__e!=l&&Fi(a)))})}function Xi(e,t,i,n,s,a,l,c,h,m){var f,y,S,C,_,P,I,L=n&&n.__k||Mu,E=L.length;for(i.__k=[],f=0;f<t.length;f++)if((C=i.__k[f]=(C=t[f])==null||typeof C=="boolean"?null:typeof C=="string"||typeof C=="number"||typeof C=="bigint"?Oi(null,C,null,null,C):Array.isArray(C)?Oi(Je,{children:C},null,null,null):C.__b>0?Oi(C.type,C.props,C.key,null,C.__v):C)!=null){if(C.__=i,C.__b=i.__b+1,(S=L[f])===null||S&&C.key==S.key&&C.type===S.type)L[f]=void 0;else for(y=0;y<E;y++){if((S=L[y])&&C.key==S.key&&C.type===S.type){L[y]=void 0;break}S=null}wi(e,C,S=S||ho,s,a,l,c,h,m),_=C.__e,(y=C.ref)&&S.ref!=y&&(I||(I=[]),S.ref&&I.push(S.ref,null,C),I.push(y,C.__c||_,C)),_!=null?(P==null&&(P=_),typeof C.type=="function"&&C.__k===S.__k?C.__d=h=un(C,h,e):h=X(e,C,S,L,_,h),typeof i.type=="function"&&(i.__d=h)):h&&S.__e==h&&h.parentNode!=e&&(h=Ot(S))}for(i.__e=P,f=E;f--;)L[f]!=null&&(typeof i.type=="function"&&L[f].__e!=null&&L[f].__e==i.__d&&(i.__d=Ot(n,f+1)),bp(L[f],L[f]));if(I)for(f=0;f<I.length;f++)ya(I[f],I[++f],I[++f])}function un(e,t,i){for(var n,s=e.__k,a=0;s&&a<s.length;a++)(n=s[a])&&(n.__=e,t=typeof n.type=="function"?un(n,t,i):X(i,n,n,s,n.__e,t));return t}function fe(e,t){return t=t||[],e==null||typeof e=="boolean"||(Array.isArray(e)?e.some(function(i){fe(i,t)}):t.push(e)),t}function X(e,t,i,n,s,a){var l,c,h;if(t.__d!==void 0)l=t.__d,t.__d=void 0;else if(i==null||s!=a||s.parentNode==null)e:if(a==null||a.parentNode!==e)e.appendChild(s),l=null;else{for(c=a,h=0;(c=c.nextSibling)&&h<n.length;h+=2)if(c==s)break e;e.insertBefore(s,a),l=a}return l!==void 0?l:s.nextSibling}function re(e,t,i,n,s){var a;for(a in i)a==="children"||a==="key"||a in t||ee(e,a,null,i[a],n);for(a in t)s&&typeof t[a]!="function"||a==="children"||a==="key"||a==="value"||a==="checked"||i[a]===t[a]||ee(e,a,t[a],i[a],n)}function ce(e,t,i){t[0]==="-"?e.setProperty(t,i):e[t]=i==null?"":typeof i!="number"||Ep.test(t)?i:i+"px"}function ee(e,t,i,n,s){var a;e:if(t==="style")if(typeof i=="string")e.style.cssText=i;else{if(typeof n=="string"&&(e.style.cssText=n=""),n)for(t in n)i&&t in i||ce(e.style,t,"");if(i)for(t in i)n&&i[t]===n[t]||ce(e.style,t,i[t])}else if(t[0]==="o"&&t[1]==="n")a=t!==(t=t.replace(/Capture$/,"")),t=t.toLowerCase()in e?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+a]=i,i?n||e.addEventListener(t,a?rt:Te,a):e.removeEventListener(t,a?rt:Te,a);else if(t!=="dangerouslySetInnerHTML"){if(s)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!=="href"&&t!=="list"&&t!=="form"&&t!=="tabIndex"&&t!=="download"&&t in e)try{e[t]=i??"";break e}catch{}typeof i=="function"||(i!=null&&(i!==!1||t[0]==="a"&&t[1]==="r")?e.setAttribute(t,i):e.removeAttribute(t))}}function Te(e){this.l[e.type+!1](Ce.event?Ce.event(e):e)}function rt(e){this.l[e.type+!0](Ce.event?Ce.event(e):e)}function wi(e,t,i,n,s,a,l,c,h){var m,f,y,S,C,_,P,I,L,E,N,F=t.type;if(t.constructor!==void 0)return null;i.__h!=null&&(h=i.__h,c=t.__e=i.__e,t.__h=null,a=[c]),(m=Ce.__b)&&m(t);try{e:if(typeof F=="function"){if(I=t.props,L=(m=F.contextType)&&n[m.__c],E=m?L?L.props.value:m.__:n,i.__c?P=(f=t.__c=i.__c).__=f.__E:("prototype"in F&&F.prototype.render?t.__c=f=new F(I,E):(t.__c=f=new Xt(I,E),f.constructor=F,f.render=Lu),L&&L.sub(f),f.props=I,f.state||(f.state={}),f.context=E,f.__n=n,y=f.__d=!0,f.__h=[]),f.__s==null&&(f.__s=f.state),F.getDerivedStateFromProps!=null&&(f.__s==f.state&&(f.__s=jt({},f.__s)),jt(f.__s,F.getDerivedStateFromProps(I,f.__s))),S=f.props,C=f.state,y)F.getDerivedStateFromProps==null&&f.componentWillMount!=null&&f.componentWillMount(),f.componentDidMount!=null&&f.__h.push(f.componentDidMount);else{if(F.getDerivedStateFromProps==null&&I!==S&&f.componentWillReceiveProps!=null&&f.componentWillReceiveProps(I,E),!f.__e&&f.shouldComponentUpdate!=null&&f.shouldComponentUpdate(I,f.__s,E)===!1||t.__v===i.__v){f.props=I,f.state=f.__s,t.__v!==i.__v&&(f.__d=!1),f.__v=t,t.__e=i.__e,t.__k=i.__k,t.__k.forEach(function(U){U&&(U.__=t)}),f.__h.length&&l.push(f);break e}f.componentWillUpdate!=null&&f.componentWillUpdate(I,f.__s,E),f.componentDidUpdate!=null&&f.__h.push(function(){f.componentDidUpdate(S,C,_)})}f.context=E,f.props=I,f.state=f.__s,(m=Ce.__r)&&m(t),f.__d=!1,f.__v=t,f.__P=e,m=f.render(f.props,f.state,f.context),f.state=f.__s,f.getChildContext!=null&&(n=jt(jt({},n),f.getChildContext())),y||f.getSnapshotBeforeUpdate==null||(_=f.getSnapshotBeforeUpdate(S,C)),N=m!=null&&m.type===Je&&m.key==null?m.props.children:m,Xi(e,Array.isArray(N)?N:[N],t,i,n,s,a,l,c,h),f.base=t.__e,t.__h=null,f.__h.length&&l.push(f),P&&(f.__E=f.__=null),f.__e=!1}else a==null&&t.__v===i.__v?(t.__k=i.__k,t.__e=i.__e):t.__e=ms(i.__e,t,i,n,s,a,l,h);(m=Ce.diffed)&&m(t)}catch(U){t.__v=null,(h||a!=null)&&(t.__e=c,t.__h=!!h,a[a.indexOf(c)]=null),Ce.__e(U,t,i)}}function ft(e,t){Ce.__c&&Ce.__c(t,e),e.some(function(i){try{e=i.__h,i.__h=[],e.some(function(n){n.call(i)})}catch(n){Ce.__e(n,i.__v)}})}function ms(e,t,i,n,s,a,l,c){var h,m,f,y=i.props,S=t.props,C=t.type,_=0;if(C==="svg"&&(s=!0),a!=null){for(;_<a.length;_++)if((h=a[_])&&"setAttribute"in h==!!C&&(C?h.localName===C:h.nodeType===3)){e=h,a[_]=null;break}}if(e==null){if(C===null)return document.createTextNode(S);e=s?document.createElementNS("http://www.w3.org/2000/svg",C):document.createElement(C,S.is&&S),a=null,c=!1}if(C===null)y===S||c&&e.data===S||(e.data=S);else{if(a=a&&uo.call(e.childNodes),m=(y=i.props||ho).dangerouslySetInnerHTML,f=S.dangerouslySetInnerHTML,!c){if(a!=null)for(y={},_=0;_<e.attributes.length;_++)y[e.attributes[_].name]=e.attributes[_].value;(f||m)&&(f&&(m&&f.__html==m.__html||f.__html===e.innerHTML)||(e.innerHTML=f&&f.__html||""))}if(re(e,S,y,s,c),f)t.__k=[];else if(_=t.props.children,Xi(e,Array.isArray(_)?_:[_],t,i,n,s&&C!=="foreignObject",a,l,a?a[0]:i.__k&&Ot(i,0),c),a!=null)for(_=a.length;_--;)a[_]!=null&&bi(a[_]);c||("value"in S&&(_=S.value)!==void 0&&(_!==e.value||C==="progress"&&!_||C==="option"&&_!==y.value)&&ee(e,"value",_,y.value,!1),"checked"in S&&(_=S.checked)!==void 0&&_!==e.checked&&ee(e,"checked",_,y.checked,!1))}return e}function ya(e,t,i){try{typeof e=="function"?e(t):e.current=t}catch(n){Ce.__e(n,i)}}function bp(e,t,i){var n,s;if(Ce.unmount&&Ce.unmount(e),(n=e.ref)&&(n.current&&n.current!==e.__e||ya(n,null,t)),(n=e.__c)!=null){if(n.componentWillUnmount)try{n.componentWillUnmount()}catch(a){Ce.__e(a,t)}n.base=n.__P=null}if(n=e.__k)for(s=0;s<n.length;s++)n[s]&&bp(n[s],t,typeof e.type!="function");i||e.__e==null||bi(e.__e),e.__e=e.__d=void 0}function Lu(e,t,i){return this.constructor(e,i)}function wn(e,t,i){var n,s,a;Ce.__&&Ce.__(e,t),s=(n=typeof i=="function")?null:i&&i.__k||t.__k,a=[],wi(t,e=(!n&&i||t).__k=$(Je,null,[e]),s||ho,ho,t.ownerSVGElement!==void 0,!n&&i?[i]:s?null:t.firstChild?uo.call(t.childNodes):null,a,!n&&i?i:s?s.__e:t.firstChild,n),ft(a,e)}function $u(e,t){wn(e,t,$u)}function Nu(e,t,i){var n,s,a,l=jt({},e.props);for(a in t)a=="key"?n=t[a]:a=="ref"?s=t[a]:l[a]=t[a];return arguments.length>2&&(l.children=arguments.length>3?uo.call(arguments,2):i),Oi(e.type,l,n||e.key,s||e.ref,null)}function ii(e,t){var i={__c:t="__cC"+Sp++,__:e,Consumer:function(n,s){return n.children(s)},Provider:function(n){var s,a;return this.getChildContext||(s=[],(a={})[t]=this,this.getChildContext=function(){return a},this.shouldComponentUpdate=function(l){this.props.value!==l.value&&s.some(ln)},this.sub=function(l){s.push(l);var c=l.componentWillUnmount;l.componentWillUnmount=function(){s.splice(s.indexOf(l),1),c&&c.call(l)}}),n.children}};return i.Provider.__=i.Consumer.contextType=i}var uo,Ce,wp,co,xp,_p,Sp,ho,Mu,Ep,Ye=lt(()=>{ho={},Mu=[],Ep=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,uo=Mu.slice,Ce={__e:function(e,t,i,n){for(var s,a,l;t=t.__;)if((s=t.__c)&&!s.__)try{if((a=s.constructor)&&a.getDerivedStateFromError!=null&&(s.setState(a.getDerivedStateFromError(e)),l=s.__d),s.componentDidCatch!=null&&(s.componentDidCatch(e,n||{}),l=s.__d),l)return s.__E=s}catch(c){e=c}throw e}},wp=0,Xt.prototype.setState=function(e,t){var i;i=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=jt({},this.state),typeof e=="function"&&(e=e(jt({},i),this.props)),e&&jt(i,e),e!=null&&this.__v&&(t&&this.__h.push(t),ln(this))},Xt.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),ln(this))},Xt.prototype.render=Je,co=[],xp=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Vi.__r=0,Sp=0});function vs(e,t){Ce.__h&&Ce.__h(hi,e,Ar||t),Ar=0;var i=hi.__H||(hi.__H={__:[],__h:[]});return e>=i.__.length&&i.__.push({}),i.__[e]}function Ne(e){return Ar=1,ys(Ap,e)}function ys(e,t,i){var n=vs(kr++,2);return n.t=e,n.__c||(n.__=[i?i(t):Ap(void 0,t),function(s){var a=n.t(n.__[0],s);n.__[0]!==a&&(n.__=[a,n.__[1]],n.__c.setState({}))}],n.__c=hi),n.__}function de(e,t){var i=vs(kr++,3);!Ce.__s&&zu(i.__H,t)&&(i.__=e,i.__H=t,hi.__H.__h.push(i))}function It(e,t){var i=vs(kr++,4);!Ce.__s&&zu(i.__H,t)&&(i.__=e,i.__H=t,hi.__h.push(i))}function Se(e){return Ar=5,Ee(function(){return{current:e}},[])}function Cp(e,t,i){Ar=6,It(function(){return typeof e=="function"?(e(t()),function(){return e(null)}):e?(e.current=t(),function(){return e.current=null}):void 0},i==null?i:i.concat(e))}function Ee(e,t){var i=vs(kr++,7);return zu(i.__H,t)&&(i.__=e(),i.__H=t,i.__h=e),i.__}function je(e,t){return Ar=8,Ee(function(){return e},t)}function Zt(e){var t=hi.context[e.__c],i=vs(kr++,9);return i.c=e,t?(i.__==null&&(i.__=!0,t.sub(hi)),t.props.value):e.__}function kp(e,t){Ce.useDebugValue&&Ce.useDebugValue(t?t(e):e)}function iw(e){var t=vs(kr++,10),i=Ne();return t.__=e,hi.componentDidCatch||(hi.componentDidCatch=function(n){t.__&&t.__(n),i[1](n)}),[i[0],function(){i[1](void 0)}]}function nw(){for(var e;e=Bu.shift();)if(e.__P)try{e.__H.__h.forEach(ba),e.__H.__h.forEach(Fu),e.__H.__h=[]}catch(t){e.__H.__h=[],Ce.__e(t,e.__v)}}function ba(e){var t=hi,i=e.__c;typeof i=="function"&&(e.__c=void 0,i()),hi=t}function Fu(e){var t=hi;e.__c=e.__(),hi=t}function zu(e,t){return!e||e.length!==t.length||t.some(function(i,n){return i!==e[n]})}function Ap(e,t){return typeof t=="function"?t(e):t}var kr,hi,Tp,Ar,Bu,ju,Du,Uu,Wu,Hu,qu,Pp=lt(()=>{Ye(),Ar=0,Bu=[],ju=Ce.__b,Du=Ce.__r,Uu=Ce.diffed,Wu=Ce.__c,Hu=Ce.unmount,Ce.__b=function(e){hi=null,ju&&ju(e)},Ce.__r=function(e){Du&&Du(e),kr=0;var t=(hi=e.__c).__H;t&&(t.__h.forEach(ba),t.__h.forEach(Fu),t.__h=[])},Ce.diffed=function(e){Uu&&Uu(e);var t=e.__c;t&&t.__H&&t.__H.__h.length&&(Bu.push(t)!==1&&Tp===Ce.requestAnimationFrame||((Tp=Ce.requestAnimationFrame)||function(i){var n,s=function(){clearTimeout(a),qu&&cancelAnimationFrame(n),setTimeout(i)},a=setTimeout(s,100);qu&&(n=requestAnimationFrame(s))})(nw)),hi=null},Ce.__c=function(e,t){t.some(function(i){try{i.__h.forEach(ba),i.__h=i.__h.filter(function(n){return!n.__||Fu(n)})}catch(n){t.some(function(s){s.__h&&(s.__h=[])}),t=[],Ce.__e(n,i.__v)}}),Wu&&Wu(e,t)},Ce.unmount=function(e){Hu&&Hu(e);var t,i=e.__c;i&&i.__H&&(i.__H.__.forEach(function(n){try{ba(n)}catch(s){t=s}}),t&&Ce.__e(t,i.__v))},qu=typeof requestAnimationFrame=="function"}),bs={};Et(bs,{Children:()=>Zn,Component:()=>Xt,Fragment:()=>Je,PureComponent:()=>wa,StrictMode:()=>Hp,Suspense:()=>po,SuspenseList:()=>ws,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:()=>nc,cloneElement:()=>xa,createContext:()=>ii,createElement:()=>$,createFactory:()=>Np,createPortal:()=>Lp,createRef:()=>bn,default:()=>Z,findDOMNode:()=>Fp,flushSync:()=>sc,forwardRef:()=>di,hydrate:()=>$p,isValidElement:()=>fo,lazy:()=>Ip,memo:()=>Vu,render:()=>xs,unmountComponentAtNode:()=>Mp,unstable_batchedUpdates:()=>rc,useCallback:()=>je,useContext:()=>Zt,useDebugValue:()=>kp,useEffect:()=>de,useErrorBoundary:()=>iw,useImperativeHandle:()=>Cp,useLayoutEffect:()=>It,useMemo:()=>Ee,useReducer:()=>ys,useRef:()=>Se,useState:()=>Ne,version:()=>_a});function Rp(e,t){for(var i in t)e[i]=t[i];return e}function Qu(e,t){for(var i in e)if(i!=="__source"&&!(i in t))return!0;for(var n in t)if(n!=="__source"&&e[n]!==t[n])return!0;return!1}function wa(e){this.props=e}function Vu(e,t){function i(s){var a=this.props.ref,l=a==s.ref;return!l&&a&&(a.call?a(null):a.current=null),t?!t(this.props,s)||!l:Qu(this.props,s)}function n(s){return this.shouldComponentUpdate=i,$(e,s)}return n.displayName="Memo("+(e.displayName||e.name)+")",n.prototype.isReactComponent=!0,n.__f=!0,n}function di(e){function t(i){var n=Rp({},i);return delete n.ref,e(n,i.ref||null)}return t.$$typeof=zp,t.render=t,t.prototype.isReactComponent=t.__f=!0,t.displayName="ForwardRef("+(e.displayName||e.name)+")",t}function po(){this.__u=0,this.t=null,this.__b=null}function Op(e){var t=e.__.__c;return t&&t.__e&&t.__e(e)}function Ip(e){var t,i,n;function s(a){if(t||(t=e()).then(function(l){i=l.default||l},function(l){n=l}),n)throw n;if(!i)throw t;return $(i,a)}return s.displayName="Lazy",s.__f=!0,s}function ws(){this.u=null,this.o=null}function rw(e){return this.getChildContext=function(){return e.context},e.children}function sw(e){var t=this,i=e.i;t.componentWillUnmount=function(){wn(null,t.l),t.l=null,t.i=null},t.i&&t.i!==i&&t.componentWillUnmount(),e.__v?(t.l||(t.i=i,t.l={nodeType:1,parentNode:i,childNodes:[],appendChild:function(n){this.childNodes.push(n),t.i.appendChild(n)},insertBefore:function(n,s){this.childNodes.push(n),t.i.appendChild(n)},removeChild:function(n){this.childNodes.splice(this.childNodes.indexOf(n)>>>1,1),t.i.removeChild(n)}}),wn($(rw,{context:t.context},e.__v),t.l)):t.l&&t.componentWillUnmount()}function Lp(e,t){return $(sw,{__v:e,i:t})}function xs(e,t,i){return t.__k==null&&(t.textContent=""),wn(e,t),typeof i=="function"&&i(),e?e.__c:null}function $p(e,t,i){return $u(e,t),typeof i=="function"&&i(),e?e.__c:null}function ow(){}function aw(){return this.cancelBubble}function lw(){return this.defaultPrevented}function Np(e){return $.bind(null,e)}function fo(e){return!!e&&e.$$typeof===Zu}function xa(e){return fo(e)?Nu.apply(null,arguments):e}function Mp(e){return!!e.__k&&(wn(null,e),!0)}function Fp(e){return e&&(e.base||e.nodeType===1&&e)||null}var Gu,zp,Yu,Zn,Bp,Ku,Xu,Zu,jp,Dp,Up,Ju,Wp,ec,tc,ic,nc,_a,rc,sc,Hp,Z,qe=lt(()=>{Pp(),Pp(),Ye(),Ye(),(wa.prototype=new Xt).isPureReactComponent=!0,wa.prototype.shouldComponentUpdate=function(e,t){return Qu(this.props,e)||Qu(this.state,t)},Gu=Ce.__b,Ce.__b=function(e){e.type&&e.type.__f&&e.ref&&(e.props.ref=e.ref,e.ref=null),Gu&&Gu(e)},zp=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.forward_ref")||3911,Yu=function(e,t){return e==null?null:fe(fe(e).map(t))},Zn={map:Yu,forEach:Yu,count:function(e){return e?fe(e).length:0},only:function(e){var t=fe(e);if(t.length!==1)throw"Children.only";return t[0]},toArray:fe},Bp=Ce.__e,Ce.__e=function(e,t,i,n){if(e.then){for(var s,a=t;a=a.__;)if((s=a.__c)&&s.__c)return t.__e==null&&(t.__e=i.__e,t.__k=i.__k),s.__c(e,t)}Bp(e,t,i,n)},Ku=Ce.unmount,Ce.unmount=function(e){var t=e.__c;t&&t.__R&&t.__R(),t&&e.__h===!0&&(e.type=null),Ku&&Ku(e)},(po.prototype=new Xt).__c=function(e,t){var i=t.__c,n=this;n.t==null&&(n.t=[]),n.t.push(i);var s=Op(n.__v),a=!1,l=function(){a||(a=!0,i.__R=null,s?s(c):c())};i.__R=l;var c=function(){if(!--n.__u){if(n.state.__e){var m=n.state.__e;n.__v.__k[0]=function y(S,C,_){return S&&(S.__v=null,S.__k=S.__k&&S.__k.map(function(P){return y(P,C,_)}),S.__c&&S.__c.__P===C&&(S.__e&&_.insertBefore(S.__e,S.__d),S.__c.__e=!0,S.__c.__P=_)),S}(m,m.__c.__P,m.__c.__O)}var f;for(n.setState({__e:n.__b=null});f=n.t.pop();)f.forceUpdate()}},h=t.__h===!0;n.__u++||h||n.setState({__e:n.__b=n.__v.__k[0]}),e.then(l,l)},po.prototype.componentWillUnmount=function(){this.t=[]},po.prototype.render=function(e,t){if(this.__b){if(this.__v.__k){var i=document.createElement("div"),n=this.__v.__k[0].__c;this.__v.__k[0]=function a(l,c,h){return l&&(l.__c&&l.__c.__H&&(l.__c.__H.__.forEach(function(m){typeof m.__c=="function"&&m.__c()}),l.__c.__H=null),(l=Rp({},l)).__c!=null&&(l.__c.__P===h&&(l.__c.__P=c),l.__c=null),l.__k=l.__k&&l.__k.map(function(m){return a(m,c,h)})),l}(this.__b,i,n.__O=n.__P)}this.__b=null}var s=t.__e&&$(Je,null,e.fallback);return s&&(s.__h=null),[$(Je,null,t.__e?null:e.children),s]},Xu=function(e,t,i){if(++i[1]===i[0]&&e.o.delete(t),e.props.revealOrder&&(e.props.revealOrder[0]!=="t"||!e.o.size))for(i=e.u;i;){for(;i.length>3;)i.pop()();if(i[1]<i[0])break;e.u=i=i[2]}},(ws.prototype=new Xt).__e=function(e){var t=this,i=Op(t.__v),n=t.o.get(e);return n[0]++,function(s){var a=function(){t.props.revealOrder?(n.push(s),Xu(t,e,n)):s()};i?i(a):a()}},ws.prototype.render=function(e){this.u=null,this.o=new Map;var t=fe(e.children);e.revealOrder&&e.revealOrder[0]==="b"&&t.reverse();for(var i=t.length;i--;)this.o.set(t[i],this.u=[1,0,this.u]);return e.children},ws.prototype.componentDidUpdate=ws.prototype.componentDidMount=function(){var e=this;this.o.forEach(function(t,i){Xu(e,i,t)})},Zu=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,jp=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|marker(?!H|W|U)|overline|paint|stop|strikethrough|stroke|text(?!L)|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,Dp=typeof document<"u",Up=function(e){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/i:/fil|che|ra/i).test(e)},Xt.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(e){Object.defineProperty(Xt.prototype,e,{configurable:!0,get:function(){return this["UNSAFE_"+e]},set:function(t){Object.defineProperty(this,e,{configurable:!0,writable:!0,value:t})}})}),Ju=Ce.event,Ce.event=function(e){return Ju&&(e=Ju(e)),e.persist=ow,e.isPropagationStopped=aw,e.isDefaultPrevented=lw,e.nativeEvent=e},ec={configurable:!0,get:function(){return this.class}},tc=Ce.vnode,Ce.vnode=function(e){var t=e.type,i=e.props,n=i;if(typeof t=="string"){var s=t.indexOf("-")===-1;for(var a in n={},i){var l=i[a];Dp&&a==="children"&&t==="noscript"||a==="value"&&"defaultValue"in i&&l==null||(a==="defaultValue"&&"value"in i&&i.value==null?a="value":a==="download"&&l===!0?l="":/ondoubleclick/i.test(a)?a="ondblclick":/^onchange(textarea|input)/i.test(a+t)&&!Up(i.type)?a="oninput":/^onfocus$/i.test(a)?a="onfocusin":/^onblur$/i.test(a)?a="onfocusout":/^on(Ani|Tra|Tou|BeforeInp|Compo)/.test(a)?a=a.toLowerCase():s&&jp.test(a)?a=a.replace(/[A-Z0-9]/,"-$&").toLowerCase():l===null&&(l=void 0),n[a]=l)}t=="select"&&n.multiple&&Array.isArray(n.value)&&(n.value=fe(i.children).forEach(function(c){c.props.selected=n.value.indexOf(c.props.value)!=-1})),t=="select"&&n.defaultValue!=null&&(n.value=fe(i.children).forEach(function(c){c.props.selected=n.multiple?n.defaultValue.indexOf(c.props.value)!=-1:n.defaultValue==c.props.value})),e.props=n,i.class!=i.className&&(ec.enumerable="className"in i,i.className!=null&&(n.class=i.className),Object.defineProperty(n,"className",ec))}e.$$typeof=Zu,tc&&tc(e)},ic=Ce.__r,Ce.__r=function(e){ic&&ic(e),Wp=e.__c},nc={ReactCurrentDispatcher:{current:{readContext:function(e){return Wp.__n[e.__c].props.value}}}},_a="17.0.2",rc=function(e,t){return e(t)},sc=function(e,t){return e(t)},Hp=Je,Z={useState:Ne,useReducer:ys,useEffect:de,useLayoutEffect:It,useRef:Se,useImperativeHandle:Cp,useMemo:Ee,useCallback:je,useContext:Zt,useDebugValue:kp,version:"17.0.2",Children:Zn,render:xs,hydrate:$p,unmountComponentAtNode:Mp,createPortal:Lp,createElement:$,createContext:ii,createFactory:Np,cloneElement:xa,createRef:bn,Fragment:Je,isValidElement:fo,findDOMNode:Fp,Component:Xt,PureComponent:wa,memo:Vu,forwardRef:di,flushSync:sc,unstable_batchedUpdates:rc,StrictMode:Je,Suspense:po,SuspenseList:ws,lazy:Ip,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:nc}}),uw=Ze(e=>{function t(J,ke){var Ie=J.length;J.push(ke);e:for(;0<Ie;){var Ve=Ie-1>>>1,it=J[Ve];if(0<s(it,ke))J[Ve]=ke,J[Ie]=it,Ie=Ve;else break e}}function i(J){return J.length===0?null:J[0]}function n(J){if(J.length===0)return null;var ke=J[0],Ie=J.pop();if(Ie!==ke){J[0]=Ie;e:for(var Ve=0,it=J.length,te=it>>>1;Ve<te;){var Oe=2*(Ve+1)-1,Nt=J[Oe],Qt=Oe+1,Ht=J[Qt];if(0>s(Nt,Ie))Qt<it&&0>s(Ht,Nt)?(J[Ve]=Ht,J[Qt]=Ie,Ve=Qt):(J[Ve]=Nt,J[Oe]=Ie,Ve=Oe);else if(Qt<it&&0>s(Ht,Ie))J[Ve]=Ht,J[Qt]=Ie,Ve=Qt;else break e}}return ke}function s(J,ke){var Ie=J.sortIndex-ke.sortIndex;return Ie!==0?Ie:J.id-ke.id}typeof performance=="object"&&typeof performance.now=="function"?(a=performance,e.unstable_now=function(){return a.now()}):(l=Date,c=l.now(),e.unstable_now=function(){return l.now()-c});var a,l,c,h=[],m=[],f=1,y=null,S=3,C=!1,_=!1,P=!1,I=typeof setTimeout=="function"?setTimeout:null,L=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function N(J){for(var ke=i(m);ke!==null;){if(ke.callback===null)n(m);else if(ke.startTime<=J)n(m),ke.sortIndex=ke.expirationTime,t(h,ke);else break;ke=i(m)}}function F(J){if(P=!1,N(J),!_)if(i(h)!==null)_=!0,_e(U);else{var ke=i(m);ke!==null&&et(F,ke.startTime-J)}}function U(J,ke){_=!1,P&&(P=!1,L(V),V=-1),C=!0;var Ie=S;try{for(N(ke),y=i(h);y!==null&&(!(y.expirationTime>ke)||J&&!se());){var Ve=y.callback;if(typeof Ve=="function"){y.callback=null,S=y.priorityLevel;var it=Ve(y.expirationTime<=ke);ke=e.unstable_now(),typeof it=="function"?y.callback=it:y===i(h)&&n(h),N(ke)}else n(h);y=i(h)}if(y!==null)var te=!0;else{var Oe=i(m);Oe!==null&&et(F,Oe.startTime-ke),te=!1}return te}finally{y=null,S=Ie,C=!1}}var q=!1,G=null,V=-1,ae=5,W=-1;function se(){return!(e.unstable_now()-W<ae)}function pe(){if(G!==null){var J=e.unstable_now();W=J;var ke=!0;try{ke=G(!0,J)}finally{ke?ue():(q=!1,G=null)}}else q=!1}var ue;typeof E=="function"?ue=function(){E(pe)}:typeof MessageChannel<"u"?(we=new MessageChannel,he=we.port2,we.port1.onmessage=pe,ue=function(){he.postMessage(null)}):ue=function(){I(pe,0)};var we,he;function _e(J){G=J,q||(q=!0,ue())}function et(J,ke){V=I(function(){J(e.unstable_now())},ke)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(J){J.callback=null},e.unstable_continueExecution=function(){_||C||(_=!0,_e(U))},e.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ae=0<J?Math.floor(1e3/J):5},e.unstable_getCurrentPriorityLevel=function(){return S},e.unstable_getFirstCallbackNode=function(){return i(h)},e.unstable_next=function(J){switch(S){case 1:case 2:case 3:var ke=3;break;default:ke=S}var Ie=S;S=ke;try{return J()}finally{S=Ie}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(J,ke){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var Ie=S;S=J;try{return ke()}finally{S=Ie}},e.unstable_scheduleCallback=function(J,ke,Ie){var Ve=e.unstable_now();switch(typeof Ie=="object"&&Ie!==null?(Ie=Ie.delay,Ie=typeof Ie=="number"&&0<Ie?Ve+Ie:Ve):Ie=Ve,J){case 1:var it=-1;break;case 2:it=250;break;case 5:it=1073741823;break;case 4:it=1e4;break;default:it=5e3}return it=Ie+it,J={id:f++,callback:ke,priorityLevel:J,startTime:Ie,expirationTime:it,sortIndex:-1},Ie>Ve?(J.sortIndex=Ie,t(m,J),i(h)===null&&J===i(m)&&(P?(L(V),V=-1):P=!0,et(F,Ie-Ve))):(J.sortIndex=it,t(h,J),_||C||(_=!0,_e(U))),J},e.unstable_shouldYield=se,e.unstable_wrapCallback=function(J){var ke=S;return function(){var Ie=S;S=ke;try{return J.apply(this,arguments)}finally{S=Ie}}}}),cw=Ze((e,t)=>{t.exports=uw()}),hw=Ze((e,t)=>{t.exports=function(i){var n={},s=(qe(),Gt(bs)),a=cw(),l=Object.assign;function c(r){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+r,u=1;u<arguments.length;u++)o+="&args[]="+encodeURIComponent(arguments[u]);return"Minified React error #"+r+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var h=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,m=Symbol.for("react.element"),f=Symbol.for("react.portal"),y=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),_=Symbol.for("react.provider"),P=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),L=Symbol.for("react.suspense"),E=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),F=Symbol.for("react.lazy"),U=Symbol.for("react.offscreen"),q=Symbol.iterator;function G(r){return r===null||typeof r!="object"?null:(r=q&&r[q]||r["@@iterator"],typeof r=="function"?r:null)}function V(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case y:return"Fragment";case f:return"Portal";case C:return"Profiler";case S:return"StrictMode";case L:return"Suspense";case E:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case P:return(r.displayName||"Context")+".Consumer";case _:return(r._context.displayName||"Context")+".Provider";case I:var o=r.render;return r=r.displayName,r||(r=o.displayName||o.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case N:return o=r.displayName||null,o!==null?o:V(r.type)||"Memo";case F:o=r._payload,r=r._init;try{return V(r(o))}catch{}}return null}function ae(r){var o=r.type;switch(r.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=o.render,r=r.displayName||r.name||"",o.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return V(o);case 8:return o===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function W(r){var o=r,u=r;if(r.alternate)for(;o.return;)o=o.return;else{r=o;do o=r,o.flags&4098&&(u=o.return),r=o.return;while(r)}return o.tag===3?u:null}function se(r){if(W(r)!==r)throw Error(c(188))}function pe(r){var o=r.alternate;if(!o){if(o=W(r),o===null)throw Error(c(188));return o!==r?null:r}for(var u=r,d=o;;){var g=u.return;if(g===null)break;var b=g.alternate;if(b===null){if(d=g.return,d!==null){u=d;continue}break}if(g.child===b.child){for(b=g.child;b;){if(b===u)return se(g),r;if(b===d)return se(g),o;b=b.sibling}throw Error(c(188))}if(u.return!==d.return)u=g,d=b;else{for(var T=!1,z=g.child;z;){if(z===u){T=!0,u=g,d=b;break}if(z===d){T=!0,d=g,u=b;break}z=z.sibling}if(!T){for(z=b.child;z;){if(z===u){T=!0,u=b,d=g;break}if(z===d){T=!0,d=b,u=g;break}z=z.sibling}if(!T)throw Error(c(189))}}if(u.alternate!==d)throw Error(c(190))}if(u.tag!==3)throw Error(c(188));return u.stateNode.current===u?r:o}function ue(r){return r=pe(r),r!==null?we(r):null}function we(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var o=we(r);if(o!==null)return o;r=r.sibling}return null}function he(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){if(r.tag!==4){var o=he(r);if(o!==null)return o}r=r.sibling}return null}var _e=Array.isArray,et=i.getPublicInstance,J=i.getRootHostContext,ke=i.getChildHostContext,Ie=i.prepareForCommit,Ve=i.resetAfterCommit,it=i.createInstance,te=i.appendInitialChild,Oe=i.finalizeInitialChildren,Nt=i.prepareUpdate,Qt=i.shouldSetTextContent,Ht=i.createTextInstance,yt=i.scheduleTimeout,Ct=i.cancelTimeout,oi=i.noTimeout,Jt=i.isPrimaryRenderer,Mt=i.supportsMutation,Yt=i.supportsPersistence,mt=i.supportsHydration,$e=i.getInstanceFromNode,Ue=i.preparePortalMount,nt=i.getCurrentEventPriority,De=i.detachDeletedInstance,Ke=i.supportsMicrotasks,ot=i.scheduleMicrotask,tt=i.supportsTestSelectors,Ni=i.findFiberRoot,Xr=i.getBoundingRect,Zr=i.getTextContent,Jr=i.isHiddenSubtree,ji=i.matchAccessibilityRole,Ol=i.setFocusIfFocusable,Fh=i.setupIntersectionObserver,zh=i.appendChild,Bo=i.appendChildToContainer,Us=i.commitTextUpdate,jo=i.commitMount,Il=i.commitUpdate,ve=i.insertBefore,Me=i.insertInContainerBefore,bt=i.removeChild,Ft=i.removeChildFromContainer,kt=i.resetTextContent,ie=i.hideInstance,Re=i.hideTextInstance,at=i.unhideInstance,wt=i.unhideTextInstance,pt=i.clearContainer,Bh=i.cloneInstance,N0=i.createContainerChildSet,M0=i.appendChildToContainerChildSet,FR=i.finalizeContainerChildren,jh=i.replaceContainerChildren,F0=i.cloneHiddenInstance,z0=i.cloneHiddenTextInstance,zR=i.canHydrateInstance,BR=i.canHydrateTextInstance,jR=i.canHydrateSuspenseInstance,B0=i.isSuspenseInstancePending,Dh=i.isSuspenseInstanceFallback,DR=i.getSuspenseInstanceFallbackErrorDetails,UR=i.registerSuspenseInstanceRetry,Ll=i.getNextHydratableSibling,WR=i.getFirstHydratableChild,HR=i.getFirstHydratableChildWithinContainer,qR=i.getFirstHydratableChildWithinSuspenseInstance,QR=i.hydrateInstance,VR=i.hydrateTextInstance,GR=i.hydrateSuspenseInstance,YR=i.getNextHydratableInstanceAfterSuspenseInstance,KR=i.commitHydratedContainer,XR=i.commitHydratedSuspenseInstance,ZR=i.clearSuspenseBoundary,JR=i.clearSuspenseBoundaryFromContainer,eO=i.shouldDeleteUnhydratedTailInstances,tO=i.didNotMatchHydratedContainerTextInstance,iO=i.didNotMatchHydratedTextInstance,Uh;function Do(r){if(Uh===void 0)try{throw Error()}catch(u){var o=u.stack.trim().match(/\n( *(at )?)/);Uh=o&&o[1]||""}return`
`+Uh+r}var Wh=!1;function Hh(r,o){if(!r||Wh)return"";Wh=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(oe){var d=oe}Reflect.construct(r,[],o)}else{try{o.call()}catch(oe){d=oe}r.call(o.prototype)}else{try{throw Error()}catch(oe){d=oe}r()}}catch(oe){if(oe&&d&&typeof oe.stack=="string"){for(var g=oe.stack.split(`
`),b=d.stack.split(`
`),T=g.length-1,z=b.length-1;1<=T&&0<=z&&g[T]!==b[z];)z--;for(;1<=T&&0<=z;T--,z--)if(g[T]!==b[z]){if(T!==1||z!==1)do if(T--,z--,0>z||g[T]!==b[z]){var Q=`
`+g[T].replace(" at new "," at ");return r.displayName&&Q.includes("<anonymous>")&&(Q=Q.replace("<anonymous>",r.displayName)),Q}while(1<=T&&0<=z);break}}}finally{Wh=!1,Error.prepareStackTrace=u}return(r=r?r.displayName||r.name:"")?Do(r):""}var nO=Object.prototype.hasOwnProperty,qh=[],Ws=-1;function gr(r){return{current:r}}function At(r){0>Ws||(r.current=qh[Ws],qh[Ws]=null,Ws--)}function St(r,o){Ws++,qh[Ws]=r.current,r.current=o}var mr={},ki=gr(mr),Di=gr(!1),es=mr;function Hs(r,o){var u=r.type.contextTypes;if(!u)return mr;var d=r.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===o)return d.__reactInternalMemoizedMaskedChildContext;var g={},b;for(b in u)g[b]=o[b];return d&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=o,r.__reactInternalMemoizedMaskedChildContext=g),g}function Ui(r){return r=r.childContextTypes,r!=null}function $l(){At(Di),At(ki)}function j0(r,o,u){if(ki.current!==mr)throw Error(c(168));St(ki,o),St(Di,u)}function D0(r,o,u){var d=r.stateNode;if(o=o.childContextTypes,typeof d.getChildContext!="function")return u;d=d.getChildContext();for(var g in d)if(!(g in o))throw Error(c(108,ae(r)||"Unknown",g));return l({},u,d)}function Nl(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||mr,es=ki.current,St(ki,r),St(Di,Di.current),!0}function U0(r,o,u){var d=r.stateNode;if(!d)throw Error(c(169));u?(r=D0(r,o,es),d.__reactInternalMemoizedMergedChildContext=r,At(Di),At(ki),St(ki,r)):At(Di),St(Di,u)}var hn=Math.clz32?Math.clz32:oO,rO=Math.log,sO=Math.LN2;function oO(r){return r>>>=0,r===0?32:31-(rO(r)/sO|0)|0}var Ml=64,Fl=4194304;function Uo(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function zl(r,o){var u=r.pendingLanes;if(u===0)return 0;var d=0,g=r.suspendedLanes,b=r.pingedLanes,T=u&268435455;if(T!==0){var z=T&~g;z!==0?d=Uo(z):(b&=T,b!==0&&(d=Uo(b)))}else T=u&~g,T!==0?d=Uo(T):b!==0&&(d=Uo(b));if(d===0)return 0;if(o!==0&&o!==d&&!(o&g)&&(g=d&-d,b=o&-o,g>=b||g===16&&(b&4194240)!==0))return o;if(d&4&&(d|=u&16),o=r.entangledLanes,o!==0)for(r=r.entanglements,o&=d;0<o;)u=31-hn(o),g=1<<u,d|=r[u],o&=~g;return d}function aO(r,o){switch(r){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function lO(r,o){for(var u=r.suspendedLanes,d=r.pingedLanes,g=r.expirationTimes,b=r.pendingLanes;0<b;){var T=31-hn(b),z=1<<T,Q=g[T];Q===-1?(!(z&u)||z&d)&&(g[T]=aO(z,o)):Q<=o&&(r.expiredLanes|=z),b&=~z}}function Qh(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function W0(){var r=Ml;return Ml<<=1,!(Ml&4194240)&&(Ml=64),r}function Vh(r){for(var o=[],u=0;31>u;u++)o.push(r);return o}function Wo(r,o,u){r.pendingLanes|=o,o!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,o=31-hn(o),r[o]=u}function uO(r,o){var u=r.pendingLanes&~o;r.pendingLanes=o,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=o,r.mutableReadLanes&=o,r.entangledLanes&=o,o=r.entanglements;var d=r.eventTimes;for(r=r.expirationTimes;0<u;){var g=31-hn(u),b=1<<g;o[g]=0,d[g]=-1,r[g]=-1,u&=~b}}function Gh(r,o){var u=r.entangledLanes|=o;for(r=r.entanglements;u;){var d=31-hn(u),g=1<<d;g&o|r[d]&o&&(r[d]|=o),u&=~g}}var ut=0;function H0(r){return r&=-r,1<r?4<r?r&268435455?16:536870912:4:1}var Yh=a.unstable_scheduleCallback,q0=a.unstable_cancelCallback,cO=a.unstable_shouldYield,hO=a.unstable_requestPaint,ai=a.unstable_now,Kh=a.unstable_ImmediatePriority,dO=a.unstable_UserBlockingPriority,Xh=a.unstable_NormalPriority,pO=a.unstable_IdlePriority,Bl=null,Tn=null;function fO(r){if(Tn&&typeof Tn.onCommitFiberRoot=="function")try{Tn.onCommitFiberRoot(Bl,r,void 0,(r.current.flags&128)===128)}catch{}}function gO(r,o){return r===o&&(r!==0||1/r===1/o)||r!==r&&o!==o}var dn=typeof Object.is=="function"?Object.is:gO,qn=null,jl=!1,Zh=!1;function Q0(r){qn===null?qn=[r]:qn.push(r)}function mO(r){jl=!0,Q0(r)}function Pn(){if(!Zh&&qn!==null){Zh=!0;var r=0,o=ut;try{var u=qn;for(ut=1;r<u.length;r++){var d=u[r];do d=d(!0);while(d!==null)}qn=null,jl=!1}catch(g){throw qn!==null&&(qn=qn.slice(r+1)),Yh(Kh,Pn),g}finally{ut=o,Zh=!1}}return null}var qs=[],Qs=0,Dl=null,Ul=0,Ji=[],en=0,ts=null,Qn=1,Vn="";function is(r,o){qs[Qs++]=Ul,qs[Qs++]=Dl,Dl=r,Ul=o}function V0(r,o,u){Ji[en++]=Qn,Ji[en++]=Vn,Ji[en++]=ts,ts=r;var d=Qn;r=Vn;var g=32-hn(d)-1;d&=~(1<<g),u+=1;var b=32-hn(o)+g;if(30<b){var T=g-g%5;b=(d&(1<<T)-1).toString(32),d>>=T,g-=T,Qn=1<<32-hn(o)+g|u<<g|d,Vn=b+r}else Qn=1<<b|u<<g|d,Vn=r}function Jh(r){r.return!==null&&(is(r,1),V0(r,1,0))}function ed(r){for(;r===Dl;)Dl=qs[--Qs],qs[Qs]=null,Ul=qs[--Qs],qs[Qs]=null;for(;r===ts;)ts=Ji[--en],Ji[en]=null,Vn=Ji[--en],Ji[en]=null,Qn=Ji[--en],Ji[en]=null}var Yi=null,tn=null,Pt=!1,Ho=!1,pn=null;function G0(r,o){var u=an(5,null,null,0);u.elementType="DELETED",u.stateNode=o,u.return=r,o=r.deletions,o===null?(r.deletions=[u],r.flags|=16):o.push(u)}function Y0(r,o){switch(r.tag){case 5:return o=zR(o,r.type,r.pendingProps),o!==null?(r.stateNode=o,Yi=r,tn=WR(o),!0):!1;case 6:return o=BR(o,r.pendingProps),o!==null?(r.stateNode=o,Yi=r,tn=null,!0):!1;case 13:if(o=jR(o),o!==null){var u=ts!==null?{id:Qn,overflow:Vn}:null;return r.memoizedState={dehydrated:o,treeContext:u,retryLane:1073741824},u=an(18,null,null,0),u.stateNode=o,u.return=r,r.child=u,Yi=r,tn=null,!0}return!1;default:return!1}}function td(r){return(r.mode&1)!==0&&(r.flags&128)===0}function id(r){if(Pt){var o=tn;if(o){var u=o;if(!Y0(r,o)){if(td(r))throw Error(c(418));o=Ll(u);var d=Yi;o&&Y0(r,o)?G0(d,u):(r.flags=r.flags&-4097|2,Pt=!1,Yi=r)}}else{if(td(r))throw Error(c(418));r.flags=r.flags&-4097|2,Pt=!1,Yi=r}}}function K0(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;Yi=r}function Wl(r){if(!mt||r!==Yi)return!1;if(!Pt)return K0(r),Pt=!0,!1;if(r.tag!==3&&(r.tag!==5||eO(r.type)&&!Qt(r.type,r.memoizedProps))){var o=tn;if(o){if(td(r))throw X0(),Error(c(418));for(;o;)G0(r,o),o=Ll(o)}}if(K0(r),r.tag===13){if(!mt)throw Error(c(316));if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(c(317));tn=YR(r)}else tn=Yi?Ll(r.stateNode):null;return!0}function X0(){for(var r=tn;r;)r=Ll(r)}function Vs(){mt&&(tn=Yi=null,Ho=Pt=!1)}function nd(r){pn===null?pn=[r]:pn.push(r)}var vO=h.ReactCurrentBatchConfig;function Hl(r,o){if(dn(r,o))return!0;if(typeof r!="object"||r===null||typeof o!="object"||o===null)return!1;var u=Object.keys(r),d=Object.keys(o);if(u.length!==d.length)return!1;for(d=0;d<u.length;d++){var g=u[d];if(!nO.call(o,g)||!dn(r[g],o[g]))return!1}return!0}function yO(r){switch(r.tag){case 5:return Do(r.type);case 16:return Do("Lazy");case 13:return Do("Suspense");case 19:return Do("SuspenseList");case 0:case 2:case 15:return r=Hh(r.type,!1),r;case 11:return r=Hh(r.type.render,!1),r;case 1:return r=Hh(r.type,!0),r;default:return""}}function fn(r,o){if(r&&r.defaultProps){o=l({},o),r=r.defaultProps;for(var u in r)o[u]===void 0&&(o[u]=r[u]);return o}return o}var ql=gr(null),Ql=null,Gs=null,rd=null;function sd(){rd=Gs=Ql=null}function Z0(r,o,u){Jt?(St(ql,o._currentValue),o._currentValue=u):(St(ql,o._currentValue2),o._currentValue2=u)}function od(r){var o=ql.current;At(ql),Jt?r._currentValue=o:r._currentValue2=o}function ad(r,o,u){for(;r!==null;){var d=r.alternate;if((r.childLanes&o)!==o?(r.childLanes|=o,d!==null&&(d.childLanes|=o)):d!==null&&(d.childLanes&o)!==o&&(d.childLanes|=o),r===u)break;r=r.return}}function Ys(r,o){Ql=r,rd=Gs=null,r=r.dependencies,r!==null&&r.firstContext!==null&&(r.lanes&o&&(Wi=!0),r.firstContext=null)}function nn(r){var o=Jt?r._currentValue:r._currentValue2;if(rd!==r)if(r={context:r,memoizedValue:o,next:null},Gs===null){if(Ql===null)throw Error(c(308));Gs=r,Ql.dependencies={lanes:0,firstContext:r}}else Gs=Gs.next=r;return o}var ns=null;function ld(r){ns===null?ns=[r]:ns.push(r)}function J0(r,o,u,d){var g=o.interleaved;return g===null?(u.next=u,ld(o)):(u.next=g.next,g.next=u),o.interleaved=u,Rn(r,d)}function Rn(r,o){r.lanes|=o;var u=r.alternate;for(u!==null&&(u.lanes|=o),u=r,r=r.return;r!==null;)r.childLanes|=o,u=r.alternate,u!==null&&(u.childLanes|=o),u=r,r=r.return;return u.tag===3?u.stateNode:null}var vr=!1;function ud(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function eb(r,o){r=r.updateQueue,o.updateQueue===r&&(o.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function Gn(r,o){return{eventTime:r,lane:o,tag:0,payload:null,callback:null,next:null}}function yr(r,o,u){var d=r.updateQueue;if(d===null)return null;if(d=d.shared,(Xe&2)!==0){var g=d.pending;return g===null?o.next=o:(o.next=g.next,g.next=o),d.pending=o,Rn(r,u)}return g=d.interleaved,g===null?(o.next=o,ld(d)):(o.next=g.next,g.next=o),d.interleaved=o,Rn(r,u)}function Vl(r,o,u){if(o=o.updateQueue,o!==null&&(o=o.shared,(u&4194240)!==0)){var d=o.lanes;d&=r.pendingLanes,u|=d,o.lanes=u,Gh(r,u)}}function tb(r,o){var u=r.updateQueue,d=r.alternate;if(d!==null&&(d=d.updateQueue,u===d)){var g=null,b=null;if(u=u.firstBaseUpdate,u!==null){do{var T={eventTime:u.eventTime,lane:u.lane,tag:u.tag,payload:u.payload,callback:u.callback,next:null};b===null?g=b=T:b=b.next=T,u=u.next}while(u!==null);b===null?g=b=o:b=b.next=o}else g=b=o;u={baseState:d.baseState,firstBaseUpdate:g,lastBaseUpdate:b,shared:d.shared,effects:d.effects},r.updateQueue=u;return}r=u.lastBaseUpdate,r===null?u.firstBaseUpdate=o:r.next=o,u.lastBaseUpdate=o}function Gl(r,o,u,d){var g=r.updateQueue;vr=!1;var b=g.firstBaseUpdate,T=g.lastBaseUpdate,z=g.shared.pending;if(z!==null){g.shared.pending=null;var Q=z,oe=Q.next;Q.next=null,T===null?b=oe:T.next=oe,T=Q;var xe=r.alternate;xe!==null&&(xe=xe.updateQueue,z=xe.lastBaseUpdate,z!==T&&(z===null?xe.firstBaseUpdate=oe:z.next=oe,xe.lastBaseUpdate=Q))}if(b!==null){var We=g.baseState;T=0,xe=oe=Q=null,z=b;do{var ge=z.lane,Tt=z.eventTime;if((d&ge)===ge){xe!==null&&(xe=xe.next={eventTime:Tt,lane:0,tag:z.tag,payload:z.payload,callback:z.callback,next:null});e:{var xt=r,Qi=z;switch(ge=o,Tt=u,Qi.tag){case 1:if(xt=Qi.payload,typeof xt=="function"){We=xt.call(Tt,We,ge);break e}We=xt;break e;case 3:xt.flags=xt.flags&-65537|128;case 0:if(xt=Qi.payload,ge=typeof xt=="function"?xt.call(Tt,We,ge):xt,ge==null)break e;We=l({},We,ge);break e;case 2:vr=!0}}z.callback!==null&&z.lane!==0&&(r.flags|=64,ge=g.effects,ge===null?g.effects=[z]:ge.push(z))}else Tt={eventTime:Tt,lane:ge,tag:z.tag,payload:z.payload,callback:z.callback,next:null},xe===null?(oe=xe=Tt,Q=We):xe=xe.next=Tt,T|=ge;if(z=z.next,z===null){if(z=g.shared.pending,z===null)break;ge=z,z=ge.next,ge.next=null,g.lastBaseUpdate=ge,g.shared.pending=null}}while(1);if(xe===null&&(Q=We),g.baseState=Q,g.firstBaseUpdate=oe,g.lastBaseUpdate=xe,o=g.shared.interleaved,o!==null){g=o;do T|=g.lane,g=g.next;while(g!==o)}else b===null&&(g.shared.lanes=0);ss|=T,r.lanes=T,r.memoizedState=We}}function ib(r,o,u){if(r=o.effects,o.effects=null,r!==null)for(o=0;o<r.length;o++){var d=r[o],g=d.callback;if(g!==null){if(d.callback=null,d=u,typeof g!="function")throw Error(c(191,g));g.call(d)}}}var nb=new s.Component().refs;function cd(r,o,u,d){o=r.memoizedState,u=u(d,o),u=u==null?o:l({},o,u),r.memoizedState=u,r.lanes===0&&(r.updateQueue.baseState=u)}var Yl={isMounted:function(r){return(r=r._reactInternals)?W(r)===r:!1},enqueueSetState:function(r,o,u){r=r._reactInternals;var d=Ri(),g=xr(r),b=Gn(d,g);b.payload=o,u!=null&&(b.callback=u),o=yr(r,b,g),o!==null&&(on(o,r,g,d),Vl(o,r,g))},enqueueReplaceState:function(r,o,u){r=r._reactInternals;var d=Ri(),g=xr(r),b=Gn(d,g);b.tag=1,b.payload=o,u!=null&&(b.callback=u),o=yr(r,b,g),o!==null&&(on(o,r,g,d),Vl(o,r,g))},enqueueForceUpdate:function(r,o){r=r._reactInternals;var u=Ri(),d=xr(r),g=Gn(u,d);g.tag=2,o!=null&&(g.callback=o),o=yr(r,g,d),o!==null&&(on(o,r,d,u),Vl(o,r,d))}};function rb(r,o,u,d,g,b,T){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(d,b,T):o.prototype&&o.prototype.isPureReactComponent?!Hl(u,d)||!Hl(g,b):!0}function sb(r,o,u){var d=!1,g=mr,b=o.contextType;return typeof b=="object"&&b!==null?b=nn(b):(g=Ui(o)?es:ki.current,d=o.contextTypes,b=(d=d!=null)?Hs(r,g):mr),o=new o(u,b),r.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=Yl,r.stateNode=o,o._reactInternals=r,d&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=g,r.__reactInternalMemoizedMaskedChildContext=b),o}function ob(r,o,u,d){r=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(u,d),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(u,d),o.state!==r&&Yl.enqueueReplaceState(o,o.state,null)}function hd(r,o,u,d){var g=r.stateNode;g.props=u,g.state=r.memoizedState,g.refs=nb,ud(r);var b=o.contextType;typeof b=="object"&&b!==null?g.context=nn(b):(b=Ui(o)?es:ki.current,g.context=Hs(r,b)),g.state=r.memoizedState,b=o.getDerivedStateFromProps,typeof b=="function"&&(cd(r,o,b,u),g.state=r.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(o=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),o!==g.state&&Yl.enqueueReplaceState(g,g.state,null),Gl(r,u,g,d),g.state=r.memoizedState),typeof g.componentDidMount=="function"&&(r.flags|=4194308)}function qo(r,o,u){if(r=u.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(u._owner){if(u=u._owner,u){if(u.tag!==1)throw Error(c(309));var d=u.stateNode}if(!d)throw Error(c(147,r));var g=d,b=""+r;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===b?o.ref:(o=function(T){var z=g.refs;z===nb&&(z=g.refs={}),T===null?delete z[b]:z[b]=T},o._stringRef=b,o)}if(typeof r!="string")throw Error(c(284));if(!u._owner)throw Error(c(290,r))}return r}function Kl(r,o){throw r=Object.prototype.toString.call(o),Error(c(31,r==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":r))}function ab(r){var o=r._init;return o(r._payload)}function lb(r){function o(H,j){if(r){var K=H.deletions;K===null?(H.deletions=[j],H.flags|=16):K.push(j)}}function u(H,j){if(!r)return null;for(;j!==null;)o(H,j),j=j.sibling;return null}function d(H,j){for(H=new Map;j!==null;)j.key!==null?H.set(j.key,j):H.set(j.index,j),j=j.sibling;return H}function g(H,j){return H=Sr(H,j),H.index=0,H.sibling=null,H}function b(H,j,K){return H.index=K,r?(K=H.alternate,K!==null?(K=K.index,K<j?(H.flags|=2,j):K):(H.flags|=2,j)):(H.flags|=1048576,j)}function T(H){return r&&H.alternate===null&&(H.flags|=2),H}function z(H,j,K,me){return j===null||j.tag!==6?(j=Xd(K,H.mode,me),j.return=H,j):(j=g(j,K),j.return=H,j)}function Q(H,j,K,me){var Le=K.type;return Le===y?xe(H,j,K.props.children,me,K.key):j!==null&&(j.elementType===Le||typeof Le=="object"&&Le!==null&&Le.$$typeof===F&&ab(Le)===j.type)?(me=g(j,K.props),me.ref=qo(H,j,K),me.return=H,me):(me=_u(K.type,K.key,K.props,null,H.mode,me),me.ref=qo(H,j,K),me.return=H,me)}function oe(H,j,K,me){return j===null||j.tag!==4||j.stateNode.containerInfo!==K.containerInfo||j.stateNode.implementation!==K.implementation?(j=Zd(K,H.mode,me),j.return=H,j):(j=g(j,K.children||[]),j.return=H,j)}function xe(H,j,K,me,Le){return j===null||j.tag!==7?(j=us(K,H.mode,me,Le),j.return=H,j):(j=g(j,K),j.return=H,j)}function We(H,j,K){if(typeof j=="string"&&j!==""||typeof j=="number")return j=Xd(""+j,H.mode,K),j.return=H,j;if(typeof j=="object"&&j!==null){switch(j.$$typeof){case m:return K=_u(j.type,j.key,j.props,null,H.mode,K),K.ref=qo(H,null,j),K.return=H,K;case f:return j=Zd(j,H.mode,K),j.return=H,j;case F:var me=j._init;return We(H,me(j._payload),K)}if(_e(j)||G(j))return j=us(j,H.mode,K,null),j.return=H,j;Kl(H,j)}return null}function ge(H,j,K,me){var Le=j!==null?j.key:null;if(typeof K=="string"&&K!==""||typeof K=="number")return Le!==null?null:z(H,j,""+K,me);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case m:return K.key===Le?Q(H,j,K,me):null;case f:return K.key===Le?oe(H,j,K,me):null;case F:return Le=K._init,ge(H,j,Le(K._payload),me)}if(_e(K)||G(K))return Le!==null?null:xe(H,j,K,me,null);Kl(H,K)}return null}function Tt(H,j,K,me,Le){if(typeof me=="string"&&me!==""||typeof me=="number")return H=H.get(K)||null,z(j,H,""+me,Le);if(typeof me=="object"&&me!==null){switch(me.$$typeof){case m:return H=H.get(me.key===null?K:me.key)||null,Q(j,H,me,Le);case f:return H=H.get(me.key===null?K:me.key)||null,oe(j,H,me,Le);case F:var Ge=me._init;return Tt(H,j,K,Ge(me._payload),Le)}if(_e(me)||G(me))return H=H.get(K)||null,xe(j,H,me,Le,null);Kl(j,me)}return null}function xt(H,j,K,me){for(var Le=null,Ge=null,He=j,ct=j=0,ci=null;He!==null&&ct<K.length;ct++){He.index>ct?(ci=He,He=null):ci=He.sibling;var ht=ge(H,He,K[ct],me);if(ht===null){He===null&&(He=ci);break}r&&He&&ht.alternate===null&&o(H,He),j=b(ht,j,ct),Ge===null?Le=ht:Ge.sibling=ht,Ge=ht,He=ci}if(ct===K.length)return u(H,He),Pt&&is(H,ct),Le;if(He===null){for(;ct<K.length;ct++)He=We(H,K[ct],me),He!==null&&(j=b(He,j,ct),Ge===null?Le=He:Ge.sibling=He,Ge=He);return Pt&&is(H,ct),Le}for(He=d(H,He);ct<K.length;ct++)ci=Tt(He,H,ct,K[ct],me),ci!==null&&(r&&ci.alternate!==null&&He.delete(ci.key===null?ct:ci.key),j=b(ci,j,ct),Ge===null?Le=ci:Ge.sibling=ci,Ge=ci);return r&&He.forEach(function(Er){return o(H,Er)}),Pt&&is(H,ct),Le}function Qi(H,j,K,me){var Le=G(K);if(typeof Le!="function")throw Error(c(150));if(K=Le.call(K),K==null)throw Error(c(151));for(var Ge=Le=null,He=j,ct=j=0,ci=null,ht=K.next();He!==null&&!ht.done;ct++,ht=K.next()){He.index>ct?(ci=He,He=null):ci=He.sibling;var Er=ge(H,He,ht.value,me);if(Er===null){He===null&&(He=ci);break}r&&He&&Er.alternate===null&&o(H,He),j=b(Er,j,ct),Ge===null?Le=Er:Ge.sibling=Er,Ge=Er,He=ci}if(ht.done)return u(H,He),Pt&&is(H,ct),Le;if(He===null){for(;!ht.done;ct++,ht=K.next())ht=We(H,ht.value,me),ht!==null&&(j=b(ht,j,ct),Ge===null?Le=ht:Ge.sibling=ht,Ge=ht);return Pt&&is(H,ct),Le}for(He=d(H,He);!ht.done;ct++,ht=K.next())ht=Tt(He,H,ct,ht.value,me),ht!==null&&(r&&ht.alternate!==null&&He.delete(ht.key===null?ct:ht.key),j=b(ht,j,ct),Ge===null?Le=ht:Ge.sibling=ht,Ge=ht);return r&&He.forEach(function(GO){return o(H,GO)}),Pt&&is(H,ct),Le}function Xn(H,j,K,me){if(typeof K=="object"&&K!==null&&K.type===y&&K.key===null&&(K=K.props.children),typeof K=="object"&&K!==null){switch(K.$$typeof){case m:e:{for(var Le=K.key,Ge=j;Ge!==null;){if(Ge.key===Le){if(Le=K.type,Le===y){if(Ge.tag===7){u(H,Ge.sibling),j=g(Ge,K.props.children),j.return=H,H=j;break e}}else if(Ge.elementType===Le||typeof Le=="object"&&Le!==null&&Le.$$typeof===F&&ab(Le)===Ge.type){u(H,Ge.sibling),j=g(Ge,K.props),j.ref=qo(H,Ge,K),j.return=H,H=j;break e}u(H,Ge);break}else o(H,Ge);Ge=Ge.sibling}K.type===y?(j=us(K.props.children,H.mode,me,K.key),j.return=H,H=j):(me=_u(K.type,K.key,K.props,null,H.mode,me),me.ref=qo(H,j,K),me.return=H,H=me)}return T(H);case f:e:{for(Ge=K.key;j!==null;){if(j.key===Ge)if(j.tag===4&&j.stateNode.containerInfo===K.containerInfo&&j.stateNode.implementation===K.implementation){u(H,j.sibling),j=g(j,K.children||[]),j.return=H,H=j;break e}else{u(H,j);break}else o(H,j);j=j.sibling}j=Zd(K,H.mode,me),j.return=H,H=j}return T(H);case F:return Ge=K._init,Xn(H,j,Ge(K._payload),me)}if(_e(K))return xt(H,j,K,me);if(G(K))return Qi(H,j,K,me);Kl(H,K)}return typeof K=="string"&&K!==""||typeof K=="number"?(K=""+K,j!==null&&j.tag===6?(u(H,j.sibling),j=g(j,K),j.return=H,H=j):(u(H,j),j=Xd(K,H.mode,me),j.return=H,H=j),T(H)):u(H,j)}return Xn}var Ks=lb(!0),ub=lb(!1),Qo={},rn=gr(Qo),Vo=gr(Qo),Xs=gr(Qo);function On(r){if(r===Qo)throw Error(c(174));return r}function dd(r,o){St(Xs,o),St(Vo,r),St(rn,Qo),r=J(o),At(rn),St(rn,r)}function Zs(){At(rn),At(Vo),At(Xs)}function cb(r){var o=On(Xs.current),u=On(rn.current);o=ke(u,r.type,o),u!==o&&(St(Vo,r),St(rn,o))}function pd(r){Vo.current===r&&(At(rn),At(Vo))}var zt=gr(0);function Xl(r){for(var o=r;o!==null;){if(o.tag===13){var u=o.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||B0(u)||Dh(u)))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if(o.flags&128)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var fd=[];function gd(){for(var r=0;r<fd.length;r++){var o=fd[r];Jt?o._workInProgressVersionPrimary=null:o._workInProgressVersionSecondary=null}fd.length=0}var Zl=h.ReactCurrentDispatcher,md=h.ReactCurrentBatchConfig,rs=0,Bt=null,ei=null,li=null,Jl=!1,Go=!1,Yo=0,bO=0;function Ai(){throw Error(c(321))}function vd(r,o){if(o===null)return!1;for(var u=0;u<o.length&&u<r.length;u++)if(!dn(r[u],o[u]))return!1;return!0}function yd(r,o,u,d,g,b){if(rs=b,Bt=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,Zl.current=r===null||r.memoizedState===null?SO:EO,r=u(d,g),Go){b=0;do{if(Go=!1,Yo=0,25<=b)throw Error(c(301));b+=1,li=ei=null,o.updateQueue=null,Zl.current=CO,r=u(d,g)}while(Go)}if(Zl.current=iu,o=ei!==null&&ei.next!==null,rs=0,li=ei=Bt=null,Jl=!1,o)throw Error(c(300));return r}function bd(){var r=Yo!==0;return Yo=0,r}function In(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return li===null?Bt.memoizedState=li=r:li=li.next=r,li}function sn(){if(ei===null){var r=Bt.alternate;r=r!==null?r.memoizedState:null}else r=ei.next;var o=li===null?Bt.memoizedState:li.next;if(o!==null)li=o,ei=r;else{if(r===null)throw Error(c(310));ei=r,r={memoizedState:ei.memoizedState,baseState:ei.baseState,baseQueue:ei.baseQueue,queue:ei.queue,next:null},li===null?Bt.memoizedState=li=r:li=li.next=r}return li}function Ko(r,o){return typeof o=="function"?o(r):o}function wd(r){var o=sn(),u=o.queue;if(u===null)throw Error(c(311));u.lastRenderedReducer=r;var d=ei,g=d.baseQueue,b=u.pending;if(b!==null){if(g!==null){var T=g.next;g.next=b.next,b.next=T}d.baseQueue=g=b,u.pending=null}if(g!==null){b=g.next,d=d.baseState;var z=T=null,Q=null,oe=b;do{var xe=oe.lane;if((rs&xe)===xe)Q!==null&&(Q=Q.next={lane:0,action:oe.action,hasEagerState:oe.hasEagerState,eagerState:oe.eagerState,next:null}),d=oe.hasEagerState?oe.eagerState:r(d,oe.action);else{var We={lane:xe,action:oe.action,hasEagerState:oe.hasEagerState,eagerState:oe.eagerState,next:null};Q===null?(z=Q=We,T=d):Q=Q.next=We,Bt.lanes|=xe,ss|=xe}oe=oe.next}while(oe!==null&&oe!==b);Q===null?T=d:Q.next=z,dn(d,o.memoizedState)||(Wi=!0),o.memoizedState=d,o.baseState=T,o.baseQueue=Q,u.lastRenderedState=d}if(r=u.interleaved,r!==null){g=r;do b=g.lane,Bt.lanes|=b,ss|=b,g=g.next;while(g!==r)}else g===null&&(u.lanes=0);return[o.memoizedState,u.dispatch]}function xd(r){var o=sn(),u=o.queue;if(u===null)throw Error(c(311));u.lastRenderedReducer=r;var d=u.dispatch,g=u.pending,b=o.memoizedState;if(g!==null){u.pending=null;var T=g=g.next;do b=r(b,T.action),T=T.next;while(T!==g);dn(b,o.memoizedState)||(Wi=!0),o.memoizedState=b,o.baseQueue===null&&(o.baseState=b),u.lastRenderedState=b}return[b,d]}function hb(){}function db(r,o){var u=Bt,d=sn(),g=o(),b=!dn(d.memoizedState,g);if(b&&(d.memoizedState=g,Wi=!0),d=d.queue,_d(gb.bind(null,u,d,r),[r]),d.getSnapshot!==o||b||li!==null&&li.memoizedState.tag&1){if(u.flags|=2048,Xo(9,fb.bind(null,u,d,g,o),void 0,null),ui===null)throw Error(c(349));rs&30||pb(u,o,g)}return g}function pb(r,o,u){r.flags|=16384,r={getSnapshot:o,value:u},o=Bt.updateQueue,o===null?(o={lastEffect:null,stores:null},Bt.updateQueue=o,o.stores=[r]):(u=o.stores,u===null?o.stores=[r]:u.push(r))}function fb(r,o,u,d){o.value=u,o.getSnapshot=d,mb(o)&&vb(r)}function gb(r,o,u){return u(function(){mb(o)&&vb(r)})}function mb(r){var o=r.getSnapshot;r=r.value;try{var u=o();return!dn(r,u)}catch{return!0}}function vb(r){var o=Rn(r,1);o!==null&&on(o,r,1,-1)}function yb(r){var o=In();return typeof r=="function"&&(r=r()),o.memoizedState=o.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ko,lastRenderedState:r},o.queue=r,r=r.dispatch=_O.bind(null,Bt,r),[o.memoizedState,r]}function Xo(r,o,u,d){return r={tag:r,create:o,destroy:u,deps:d,next:null},o=Bt.updateQueue,o===null?(o={lastEffect:null,stores:null},Bt.updateQueue=o,o.lastEffect=r.next=r):(u=o.lastEffect,u===null?o.lastEffect=r.next=r:(d=u.next,u.next=r,r.next=d,o.lastEffect=r)),r}function bb(){return sn().memoizedState}function eu(r,o,u,d){var g=In();Bt.flags|=r,g.memoizedState=Xo(1|o,u,void 0,d===void 0?null:d)}function tu(r,o,u,d){var g=sn();d=d===void 0?null:d;var b=void 0;if(ei!==null){var T=ei.memoizedState;if(b=T.destroy,d!==null&&vd(d,T.deps)){g.memoizedState=Xo(o,u,b,d);return}}Bt.flags|=r,g.memoizedState=Xo(1|o,u,b,d)}function wb(r,o){return eu(8390656,8,r,o)}function _d(r,o){return tu(2048,8,r,o)}function xb(r,o){return tu(4,2,r,o)}function _b(r,o){return tu(4,4,r,o)}function Sb(r,o){if(typeof o=="function")return r=r(),o(r),function(){o(null)};if(o!=null)return r=r(),o.current=r,function(){o.current=null}}function Eb(r,o,u){return u=u!=null?u.concat([r]):null,tu(4,4,Sb.bind(null,o,r),u)}function Sd(){}function Cb(r,o){var u=sn();o=o===void 0?null:o;var d=u.memoizedState;return d!==null&&o!==null&&vd(o,d[1])?d[0]:(u.memoizedState=[r,o],r)}function kb(r,o){var u=sn();o=o===void 0?null:o;var d=u.memoizedState;return d!==null&&o!==null&&vd(o,d[1])?d[0]:(r=r(),u.memoizedState=[r,o],r)}function Ab(r,o,u){return rs&21?(dn(u,o)||(u=W0(),Bt.lanes|=u,ss|=u,r.baseState=!0),o):(r.baseState&&(r.baseState=!1,Wi=!0),r.memoizedState=u)}function wO(r,o){var u=ut;ut=u!==0&&4>u?u:4,r(!0);var d=md.transition;md.transition={};try{r(!1),o()}finally{ut=u,md.transition=d}}function Tb(){return sn().memoizedState}function xO(r,o,u){var d=xr(r);if(u={lane:d,action:u,hasEagerState:!1,eagerState:null,next:null},Pb(r))Rb(o,u);else if(u=J0(r,o,u,d),u!==null){var g=Ri();on(u,r,d,g),Ob(u,o,d)}}function _O(r,o,u){var d=xr(r),g={lane:d,action:u,hasEagerState:!1,eagerState:null,next:null};if(Pb(r))Rb(o,g);else{var b=r.alternate;if(r.lanes===0&&(b===null||b.lanes===0)&&(b=o.lastRenderedReducer,b!==null))try{var T=o.lastRenderedState,z=b(T,u);if(g.hasEagerState=!0,g.eagerState=z,dn(z,T)){var Q=o.interleaved;Q===null?(g.next=g,ld(o)):(g.next=Q.next,Q.next=g),o.interleaved=g;return}}catch{}finally{}u=J0(r,o,g,d),u!==null&&(g=Ri(),on(u,r,d,g),Ob(u,o,d))}}function Pb(r){var o=r.alternate;return r===Bt||o!==null&&o===Bt}function Rb(r,o){Go=Jl=!0;var u=r.pending;u===null?o.next=o:(o.next=u.next,u.next=o),r.pending=o}function Ob(r,o,u){if(u&4194240){var d=o.lanes;d&=r.pendingLanes,u|=d,o.lanes=u,Gh(r,u)}}var iu={readContext:nn,useCallback:Ai,useContext:Ai,useEffect:Ai,useImperativeHandle:Ai,useInsertionEffect:Ai,useLayoutEffect:Ai,useMemo:Ai,useReducer:Ai,useRef:Ai,useState:Ai,useDebugValue:Ai,useDeferredValue:Ai,useTransition:Ai,useMutableSource:Ai,useSyncExternalStore:Ai,useId:Ai,unstable_isNewReconciler:!1},SO={readContext:nn,useCallback:function(r,o){return In().memoizedState=[r,o===void 0?null:o],r},useContext:nn,useEffect:wb,useImperativeHandle:function(r,o,u){return u=u!=null?u.concat([r]):null,eu(4194308,4,Sb.bind(null,o,r),u)},useLayoutEffect:function(r,o){return eu(4194308,4,r,o)},useInsertionEffect:function(r,o){return eu(4,2,r,o)},useMemo:function(r,o){var u=In();return o=o===void 0?null:o,r=r(),u.memoizedState=[r,o],r},useReducer:function(r,o,u){var d=In();return o=u!==void 0?u(o):o,d.memoizedState=d.baseState=o,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:o},d.queue=r,r=r.dispatch=xO.bind(null,Bt,r),[d.memoizedState,r]},useRef:function(r){var o=In();return r={current:r},o.memoizedState=r},useState:yb,useDebugValue:Sd,useDeferredValue:function(r){return In().memoizedState=r},useTransition:function(){var r=yb(!1),o=r[0];return r=wO.bind(null,r[1]),In().memoizedState=r,[o,r]},useMutableSource:function(){},useSyncExternalStore:function(r,o,u){var d=Bt,g=In();if(Pt){if(u===void 0)throw Error(c(407));u=u()}else{if(u=o(),ui===null)throw Error(c(349));rs&30||pb(d,o,u)}g.memoizedState=u;var b={value:u,getSnapshot:o};return g.queue=b,wb(gb.bind(null,d,b,r),[r]),d.flags|=2048,Xo(9,fb.bind(null,d,b,u,o),void 0,null),u},useId:function(){var r=In(),o=ui.identifierPrefix;if(Pt){var u=Vn,d=Qn;u=(d&~(1<<32-hn(d)-1)).toString(32)+u,o=":"+o+"R"+u,u=Yo++,0<u&&(o+="H"+u.toString(32)),o+=":"}else u=bO++,o=":"+o+"r"+u.toString(32)+":";return r.memoizedState=o},unstable_isNewReconciler:!1},EO={readContext:nn,useCallback:Cb,useContext:nn,useEffect:_d,useImperativeHandle:Eb,useInsertionEffect:xb,useLayoutEffect:_b,useMemo:kb,useReducer:wd,useRef:bb,useState:function(){return wd(Ko)},useDebugValue:Sd,useDeferredValue:function(r){var o=sn();return Ab(o,ei.memoizedState,r)},useTransition:function(){var r=wd(Ko)[0],o=sn().memoizedState;return[r,o]},useMutableSource:hb,useSyncExternalStore:db,useId:Tb,unstable_isNewReconciler:!1},CO={readContext:nn,useCallback:Cb,useContext:nn,useEffect:_d,useImperativeHandle:Eb,useInsertionEffect:xb,useLayoutEffect:_b,useMemo:kb,useReducer:xd,useRef:bb,useState:function(){return xd(Ko)},useDebugValue:Sd,useDeferredValue:function(r){var o=sn();return ei===null?o.memoizedState=r:Ab(o,ei.memoizedState,r)},useTransition:function(){var r=xd(Ko)[0],o=sn().memoizedState;return[r,o]},useMutableSource:hb,useSyncExternalStore:db,useId:Tb,unstable_isNewReconciler:!1};function Js(r,o){try{var u="",d=o;do u+=yO(d),d=d.return;while(d);var g=u}catch(b){g=`
Error generating stack: `+b.message+`
`+b.stack}return{value:r,source:o,stack:g,digest:null}}function Ed(r,o,u){return{value:r,source:null,stack:u??null,digest:o??null}}function Cd(r,o){try{console.error(o.value)}catch(u){setTimeout(function(){throw u})}}var kO=typeof WeakMap=="function"?WeakMap:Map;function Ib(r,o,u){u=Gn(-1,u),u.tag=3,u.payload={element:null};var d=o.value;return u.callback=function(){mu||(mu=!0,Hd=d),Cd(r,o)},u}function Lb(r,o,u){u=Gn(-1,u),u.tag=3;var d=r.type.getDerivedStateFromError;if(typeof d=="function"){var g=o.value;u.payload=function(){return d(g)},u.callback=function(){Cd(r,o)}}var b=r.stateNode;return b!==null&&typeof b.componentDidCatch=="function"&&(u.callback=function(){Cd(r,o),typeof d!="function"&&(br===null?br=new Set([this]):br.add(this));var T=o.stack;this.componentDidCatch(o.value,{componentStack:T!==null?T:""})}),u}function $b(r,o,u){var d=r.pingCache;if(d===null){d=r.pingCache=new kO;var g=new Set;d.set(o,g)}else g=d.get(o),g===void 0&&(g=new Set,d.set(o,g));g.has(u)||(g.add(u),r=jO.bind(null,r,o,u),o.then(r,r))}function Nb(r){do{var o;if((o=r.tag===13)&&(o=r.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return r;r=r.return}while(r!==null);return null}function Mb(r,o,u,d,g){return r.mode&1?(r.flags|=65536,r.lanes=g,r):(r===o?r.flags|=65536:(r.flags|=128,u.flags|=131072,u.flags&=-52805,u.tag===1&&(u.alternate===null?u.tag=17:(o=Gn(-1,1),o.tag=2,yr(u,o,1))),u.lanes|=1),r)}var AO=h.ReactCurrentOwner,Wi=!1;function Mi(r,o,u,d){o.child=r===null?ub(o,null,u,d):Ks(o,r.child,u,d)}function Fb(r,o,u,d,g){u=u.render;var b=o.ref;return Ys(o,g),d=yd(r,o,u,d,b,g),u=bd(),r!==null&&!Wi?(o.updateQueue=r.updateQueue,o.flags&=-2053,r.lanes&=~g,Yn(r,o,g)):(Pt&&u&&Jh(o),o.flags|=1,Mi(r,o,d,g),o.child)}function zb(r,o,u,d,g){if(r===null){var b=u.type;return typeof b=="function"&&!Kd(b)&&b.defaultProps===void 0&&u.compare===null&&u.defaultProps===void 0?(o.tag=15,o.type=b,Bb(r,o,b,d,g)):(r=_u(u.type,null,d,o,o.mode,g),r.ref=o.ref,r.return=o,o.child=r)}if(b=r.child,(r.lanes&g)===0){var T=b.memoizedProps;if(u=u.compare,u=u!==null?u:Hl,u(T,d)&&r.ref===o.ref)return Yn(r,o,g)}return o.flags|=1,r=Sr(b,d),r.ref=o.ref,r.return=o,o.child=r}function Bb(r,o,u,d,g){if(r!==null){var b=r.memoizedProps;if(Hl(b,d)&&r.ref===o.ref)if(Wi=!1,o.pendingProps=d=b,(r.lanes&g)!==0)r.flags&131072&&(Wi=!0);else return o.lanes=r.lanes,Yn(r,o,g)}return kd(r,o,u,d,g)}function jb(r,o,u){var d=o.pendingProps,g=d.children,b=r!==null?r.memoizedState:null;if(d.mode==="hidden")if(!(o.mode&1))o.memoizedState={baseLanes:0,cachePool:null,transitions:null},St(to,Ki),Ki|=u;else{if(!(u&1073741824))return r=b!==null?b.baseLanes|u:u,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:r,cachePool:null,transitions:null},o.updateQueue=null,St(to,Ki),Ki|=r,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},d=b!==null?b.baseLanes:u,St(to,Ki),Ki|=d}else b!==null?(d=b.baseLanes|u,o.memoizedState=null):d=u,St(to,Ki),Ki|=d;return Mi(r,o,g,u),o.child}function Db(r,o){var u=o.ref;(r===null&&u!==null||r!==null&&r.ref!==u)&&(o.flags|=512,o.flags|=2097152)}function kd(r,o,u,d,g){var b=Ui(u)?es:ki.current;return b=Hs(o,b),Ys(o,g),u=yd(r,o,u,d,b,g),d=bd(),r!==null&&!Wi?(o.updateQueue=r.updateQueue,o.flags&=-2053,r.lanes&=~g,Yn(r,o,g)):(Pt&&d&&Jh(o),o.flags|=1,Mi(r,o,u,g),o.child)}function Ub(r,o,u,d,g){if(Ui(u)){var b=!0;Nl(o)}else b=!1;if(Ys(o,g),o.stateNode===null)ru(r,o),sb(o,u,d),hd(o,u,d,g),d=!0;else if(r===null){var T=o.stateNode,z=o.memoizedProps;T.props=z;var Q=T.context,oe=u.contextType;typeof oe=="object"&&oe!==null?oe=nn(oe):(oe=Ui(u)?es:ki.current,oe=Hs(o,oe));var xe=u.getDerivedStateFromProps,We=typeof xe=="function"||typeof T.getSnapshotBeforeUpdate=="function";We||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(z!==d||Q!==oe)&&ob(o,T,d,oe),vr=!1;var ge=o.memoizedState;T.state=ge,Gl(o,d,T,g),Q=o.memoizedState,z!==d||ge!==Q||Di.current||vr?(typeof xe=="function"&&(cd(o,u,xe,d),Q=o.memoizedState),(z=vr||rb(o,u,z,d,ge,Q,oe))?(We||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount()),typeof T.componentDidMount=="function"&&(o.flags|=4194308)):(typeof T.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=d,o.memoizedState=Q),T.props=d,T.state=Q,T.context=oe,d=z):(typeof T.componentDidMount=="function"&&(o.flags|=4194308),d=!1)}else{T=o.stateNode,eb(r,o),z=o.memoizedProps,oe=o.type===o.elementType?z:fn(o.type,z),T.props=oe,We=o.pendingProps,ge=T.context,Q=u.contextType,typeof Q=="object"&&Q!==null?Q=nn(Q):(Q=Ui(u)?es:ki.current,Q=Hs(o,Q));var Tt=u.getDerivedStateFromProps;(xe=typeof Tt=="function"||typeof T.getSnapshotBeforeUpdate=="function")||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(z!==We||ge!==Q)&&ob(o,T,d,Q),vr=!1,ge=o.memoizedState,T.state=ge,Gl(o,d,T,g);var xt=o.memoizedState;z!==We||ge!==xt||Di.current||vr?(typeof Tt=="function"&&(cd(o,u,Tt,d),xt=o.memoizedState),(oe=vr||rb(o,u,oe,d,ge,xt,Q)||!1)?(xe||typeof T.UNSAFE_componentWillUpdate!="function"&&typeof T.componentWillUpdate!="function"||(typeof T.componentWillUpdate=="function"&&T.componentWillUpdate(d,xt,Q),typeof T.UNSAFE_componentWillUpdate=="function"&&T.UNSAFE_componentWillUpdate(d,xt,Q)),typeof T.componentDidUpdate=="function"&&(o.flags|=4),typeof T.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof T.componentDidUpdate!="function"||z===r.memoizedProps&&ge===r.memoizedState||(o.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||z===r.memoizedProps&&ge===r.memoizedState||(o.flags|=1024),o.memoizedProps=d,o.memoizedState=xt),T.props=d,T.state=xt,T.context=Q,d=oe):(typeof T.componentDidUpdate!="function"||z===r.memoizedProps&&ge===r.memoizedState||(o.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||z===r.memoizedProps&&ge===r.memoizedState||(o.flags|=1024),d=!1)}return Ad(r,o,u,d,b,g)}function Ad(r,o,u,d,g,b){Db(r,o);var T=(o.flags&128)!==0;if(!d&&!T)return g&&U0(o,u,!1),Yn(r,o,b);d=o.stateNode,AO.current=o;var z=T&&typeof u.getDerivedStateFromError!="function"?null:d.render();return o.flags|=1,r!==null&&T?(o.child=Ks(o,r.child,null,b),o.child=Ks(o,null,z,b)):Mi(r,o,z,b),o.memoizedState=d.state,g&&U0(o,u,!0),o.child}function Wb(r){var o=r.stateNode;o.pendingContext?j0(r,o.pendingContext,o.pendingContext!==o.context):o.context&&j0(r,o.context,!1),dd(r,o.containerInfo)}function Hb(r,o,u,d,g){return Vs(),nd(g),o.flags|=256,Mi(r,o,u,d),o.child}var Td={dehydrated:null,treeContext:null,retryLane:0};function Pd(r){return{baseLanes:r,cachePool:null,transitions:null}}function qb(r,o,u){var d=o.pendingProps,g=zt.current,b=!1,T=(o.flags&128)!==0,z;if((z=T)||(z=r!==null&&r.memoizedState===null?!1:(g&2)!==0),z?(b=!0,o.flags&=-129):(r===null||r.memoizedState!==null)&&(g|=1),St(zt,g&1),r===null)return id(o),r=o.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?(o.mode&1?Dh(r)?o.lanes=8:o.lanes=1073741824:o.lanes=1,null):(T=d.children,r=d.fallback,b?(d=o.mode,b=o.child,T={mode:"hidden",children:T},!(d&1)&&b!==null?(b.childLanes=0,b.pendingProps=T):b=Su(T,d,0,null),r=us(r,d,u,null),b.return=o,r.return=o,b.sibling=r,o.child=b,o.child.memoizedState=Pd(u),o.memoizedState=Td,r):Rd(o,T));if(g=r.memoizedState,g!==null&&(z=g.dehydrated,z!==null))return TO(r,o,T,d,z,g,u);if(b){b=d.fallback,T=o.mode,g=r.child,z=g.sibling;var Q={mode:"hidden",children:d.children};return!(T&1)&&o.child!==g?(d=o.child,d.childLanes=0,d.pendingProps=Q,o.deletions=null):(d=Sr(g,Q),d.subtreeFlags=g.subtreeFlags&14680064),z!==null?b=Sr(z,b):(b=us(b,T,u,null),b.flags|=2),b.return=o,d.return=o,d.sibling=b,o.child=d,d=b,b=o.child,T=r.child.memoizedState,T=T===null?Pd(u):{baseLanes:T.baseLanes|u,cachePool:null,transitions:T.transitions},b.memoizedState=T,b.childLanes=r.childLanes&~u,o.memoizedState=Td,d}return b=r.child,r=b.sibling,d=Sr(b,{mode:"visible",children:d.children}),!(o.mode&1)&&(d.lanes=u),d.return=o,d.sibling=null,r!==null&&(u=o.deletions,u===null?(o.deletions=[r],o.flags|=16):u.push(r)),o.child=d,o.memoizedState=null,d}function Rd(r,o){return o=Su({mode:"visible",children:o},r.mode,0,null),o.return=r,r.child=o}function nu(r,o,u,d){return d!==null&&nd(d),Ks(o,r.child,null,u),r=Rd(o,o.pendingProps.children),r.flags|=2,o.memoizedState=null,r}function TO(r,o,u,d,g,b,T){if(u)return o.flags&256?(o.flags&=-257,d=Ed(Error(c(422))),nu(r,o,T,d)):o.memoizedState!==null?(o.child=r.child,o.flags|=128,null):(b=d.fallback,g=o.mode,d=Su({mode:"visible",children:d.children},g,0,null),b=us(b,g,T,null),b.flags|=2,d.return=o,b.return=o,d.sibling=b,o.child=d,o.mode&1&&Ks(o,r.child,null,T),o.child.memoizedState=Pd(T),o.memoizedState=Td,b);if(!(o.mode&1))return nu(r,o,T,null);if(Dh(g))return d=DR(g).digest,b=Error(c(419)),d=Ed(b,d,void 0),nu(r,o,T,d);if(u=(T&r.childLanes)!==0,Wi||u){if(d=ui,d!==null){switch(T&-T){case 4:g=2;break;case 16:g=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:g=32;break;case 536870912:g=268435456;break;default:g=0}g=g&(d.suspendedLanes|T)?0:g,g!==0&&g!==b.retryLane&&(b.retryLane=g,Rn(r,g),on(d,r,g,-1))}return Yd(),d=Ed(Error(c(421))),nu(r,o,T,d)}return B0(g)?(o.flags|=128,o.child=r.child,o=DO.bind(null,r),UR(g,o),null):(r=b.treeContext,mt&&(tn=qR(g),Yi=o,Pt=!0,pn=null,Ho=!1,r!==null&&(Ji[en++]=Qn,Ji[en++]=Vn,Ji[en++]=ts,Qn=r.id,Vn=r.overflow,ts=o)),o=Rd(o,d.children),o.flags|=4096,o)}function Qb(r,o,u){r.lanes|=o;var d=r.alternate;d!==null&&(d.lanes|=o),ad(r.return,o,u)}function Od(r,o,u,d,g){var b=r.memoizedState;b===null?r.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:d,tail:u,tailMode:g}:(b.isBackwards=o,b.rendering=null,b.renderingStartTime=0,b.last=d,b.tail=u,b.tailMode=g)}function Vb(r,o,u){var d=o.pendingProps,g=d.revealOrder,b=d.tail;if(Mi(r,o,d.children,u),d=zt.current,(d&2)!==0)d=d&1|2,o.flags|=128;else{if(r!==null&&r.flags&128)e:for(r=o.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&Qb(r,u,o);else if(r.tag===19)Qb(r,u,o);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===o)break e;for(;r.sibling===null;){if(r.return===null||r.return===o)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}d&=1}if(St(zt,d),(o.mode&1)===0)o.memoizedState=null;else switch(g){case"forwards":for(u=o.child,g=null;u!==null;)r=u.alternate,r!==null&&Xl(r)===null&&(g=u),u=u.sibling;u=g,u===null?(g=o.child,o.child=null):(g=u.sibling,u.sibling=null),Od(o,!1,g,u,b);break;case"backwards":for(u=null,g=o.child,o.child=null;g!==null;){if(r=g.alternate,r!==null&&Xl(r)===null){o.child=g;break}r=g.sibling,g.sibling=u,u=g,g=r}Od(o,!0,u,null,b);break;case"together":Od(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function ru(r,o){!(o.mode&1)&&r!==null&&(r.alternate=null,o.alternate=null,o.flags|=2)}function Yn(r,o,u){if(r!==null&&(o.dependencies=r.dependencies),ss|=o.lanes,(u&o.childLanes)===0)return null;if(r!==null&&o.child!==r.child)throw Error(c(153));if(o.child!==null){for(r=o.child,u=Sr(r,r.pendingProps),o.child=u,u.return=o;r.sibling!==null;)r=r.sibling,u=u.sibling=Sr(r,r.pendingProps),u.return=o;u.sibling=null}return o.child}function PO(r,o,u){switch(o.tag){case 3:Wb(o),Vs();break;case 5:cb(o);break;case 1:Ui(o.type)&&Nl(o);break;case 4:dd(o,o.stateNode.containerInfo);break;case 10:Z0(o,o.type._context,o.memoizedProps.value);break;case 13:var d=o.memoizedState;if(d!==null)return d.dehydrated!==null?(St(zt,zt.current&1),o.flags|=128,null):u&o.child.childLanes?qb(r,o,u):(St(zt,zt.current&1),r=Yn(r,o,u),r!==null?r.sibling:null);St(zt,zt.current&1);break;case 19:if(d=(u&o.childLanes)!==0,(r.flags&128)!==0){if(d)return Vb(r,o,u);o.flags|=128}var g=o.memoizedState;if(g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),St(zt,zt.current),d)break;return null;case 22:case 23:return o.lanes=0,jb(r,o,u)}return Yn(r,o,u)}function Ln(r){r.flags|=4}function Gb(r,o){if(r!==null&&r.child===o.child)return!0;if(o.flags&16)return!1;for(r=o.child;r!==null;){if(r.flags&12854||r.subtreeFlags&12854)return!1;r=r.sibling}return!0}var Zo,Jo,su,ou;if(Mt)Zo=function(r,o){for(var u=o.child;u!==null;){if(u.tag===5||u.tag===6)te(r,u.stateNode);else if(u.tag!==4&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===o)break;for(;u.sibling===null;){if(u.return===null||u.return===o)return;u=u.return}u.sibling.return=u.return,u=u.sibling}},Jo=function(){},su=function(r,o,u,d,g){if(r=r.memoizedProps,r!==d){var b=o.stateNode,T=On(rn.current);u=Nt(b,u,r,d,g,T),(o.updateQueue=u)&&Ln(o)}},ou=function(r,o,u,d){u!==d&&Ln(o)};else if(Yt){Zo=function(r,o,u,d){for(var g=o.child;g!==null;){if(g.tag===5){var b=g.stateNode;u&&d&&(b=F0(b,g.type,g.memoizedProps,g)),te(r,b)}else if(g.tag===6)b=g.stateNode,u&&d&&(b=z0(b,g.memoizedProps,g)),te(r,b);else if(g.tag!==4){if(g.tag===22&&g.memoizedState!==null)b=g.child,b!==null&&(b.return=g),Zo(r,g,!0,!0);else if(g.child!==null){g.child.return=g,g=g.child;continue}}if(g===o)break;for(;g.sibling===null;){if(g.return===null||g.return===o)return;g=g.return}g.sibling.return=g.return,g=g.sibling}};var Yb=function(r,o,u,d){for(var g=o.child;g!==null;){if(g.tag===5){var b=g.stateNode;u&&d&&(b=F0(b,g.type,g.memoizedProps,g)),M0(r,b)}else if(g.tag===6)b=g.stateNode,u&&d&&(b=z0(b,g.memoizedProps,g)),M0(r,b);else if(g.tag!==4){if(g.tag===22&&g.memoizedState!==null)b=g.child,b!==null&&(b.return=g),Yb(r,g,!0,!0);else if(g.child!==null){g.child.return=g,g=g.child;continue}}if(g===o)break;for(;g.sibling===null;){if(g.return===null||g.return===o)return;g=g.return}g.sibling.return=g.return,g=g.sibling}};Jo=function(r,o){var u=o.stateNode;if(!Gb(r,o)){r=u.containerInfo;var d=N0(r);Yb(d,o,!1,!1),u.pendingChildren=d,Ln(o),FR(r,d)}},su=function(r,o,u,d,g){var b=r.stateNode,T=r.memoizedProps;if((r=Gb(r,o))&&T===d)o.stateNode=b;else{var z=o.stateNode,Q=On(rn.current),oe=null;T!==d&&(oe=Nt(z,u,T,d,g,Q)),r&&oe===null?o.stateNode=b:(b=Bh(b,oe,u,T,d,o,r,z),Oe(b,u,d,g,Q)&&Ln(o),o.stateNode=b,r?Ln(o):Zo(b,o,!1,!1))}},ou=function(r,o,u,d){u!==d?(r=On(Xs.current),u=On(rn.current),o.stateNode=Ht(d,r,u,o),Ln(o)):o.stateNode=r.stateNode}}else Jo=function(){},su=function(){},ou=function(){};function ea(r,o){if(!Pt)switch(r.tailMode){case"hidden":o=r.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?r.tail=null:u.sibling=null;break;case"collapsed":u=r.tail;for(var d=null;u!==null;)u.alternate!==null&&(d=u),u=u.sibling;d===null?o||r.tail===null?r.tail=null:r.tail.sibling=null:d.sibling=null}}function Ti(r){var o=r.alternate!==null&&r.alternate.child===r.child,u=0,d=0;if(o)for(var g=r.child;g!==null;)u|=g.lanes|g.childLanes,d|=g.subtreeFlags&14680064,d|=g.flags&14680064,g.return=r,g=g.sibling;else for(g=r.child;g!==null;)u|=g.lanes|g.childLanes,d|=g.subtreeFlags,d|=g.flags,g.return=r,g=g.sibling;return r.subtreeFlags|=d,r.childLanes=u,o}function RO(r,o,u){var d=o.pendingProps;switch(ed(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ti(o),null;case 1:return Ui(o.type)&&$l(),Ti(o),null;case 3:return u=o.stateNode,Zs(),At(Di),At(ki),gd(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(r===null||r.child===null)&&(Wl(o)?Ln(o):r===null||r.memoizedState.isDehydrated&&!(o.flags&256)||(o.flags|=1024,pn!==null&&(Vd(pn),pn=null))),Jo(r,o),Ti(o),null;case 5:pd(o),u=On(Xs.current);var g=o.type;if(r!==null&&o.stateNode!=null)su(r,o,g,d,u),r.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!d){if(o.stateNode===null)throw Error(c(166));return Ti(o),null}if(r=On(rn.current),Wl(o)){if(!mt)throw Error(c(175));r=QR(o.stateNode,o.type,o.memoizedProps,u,r,o,!Ho),o.updateQueue=r,r!==null&&Ln(o)}else{var b=it(g,d,u,r,o);Zo(b,o,!1,!1),o.stateNode=b,Oe(b,g,d,u,r)&&Ln(o)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return Ti(o),null;case 6:if(r&&o.stateNode!=null)ou(r,o,r.memoizedProps,d);else{if(typeof d!="string"&&o.stateNode===null)throw Error(c(166));if(r=On(Xs.current),u=On(rn.current),Wl(o)){if(!mt)throw Error(c(176));if(r=o.stateNode,u=o.memoizedProps,(d=VR(r,u,o,!Ho))&&(g=Yi,g!==null))switch(g.tag){case 3:tO(g.stateNode.containerInfo,r,u,(g.mode&1)!==0);break;case 5:iO(g.type,g.memoizedProps,g.stateNode,r,u,(g.mode&1)!==0)}d&&Ln(o)}else o.stateNode=Ht(d,r,u,o)}return Ti(o),null;case 13:if(At(zt),d=o.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(Pt&&tn!==null&&o.mode&1&&!(o.flags&128))X0(),Vs(),o.flags|=98560,g=!1;else if(g=Wl(o),d!==null&&d.dehydrated!==null){if(r===null){if(!g)throw Error(c(318));if(!mt)throw Error(c(344));if(g=o.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(c(317));GR(g,o)}else Vs(),!(o.flags&128)&&(o.memoizedState=null),o.flags|=4;Ti(o),g=!1}else pn!==null&&(Vd(pn),pn=null),g=!0;if(!g)return o.flags&65536?o:null}return o.flags&128?(o.lanes=u,o):(u=d!==null,u!==(r!==null&&r.memoizedState!==null)&&u&&(o.child.flags|=8192,o.mode&1&&(r===null||zt.current&1?ti===0&&(ti=3):Yd())),o.updateQueue!==null&&(o.flags|=4),Ti(o),null);case 4:return Zs(),Jo(r,o),r===null&&Ue(o.stateNode.containerInfo),Ti(o),null;case 10:return od(o.type._context),Ti(o),null;case 17:return Ui(o.type)&&$l(),Ti(o),null;case 19:if(At(zt),g=o.memoizedState,g===null)return Ti(o),null;if(d=(o.flags&128)!==0,b=g.rendering,b===null)if(d)ea(g,!1);else{if(ti!==0||r!==null&&r.flags&128)for(r=o.child;r!==null;){if(b=Xl(r),b!==null){for(o.flags|=128,ea(g,!1),r=b.updateQueue,r!==null&&(o.updateQueue=r,o.flags|=4),o.subtreeFlags=0,r=u,u=o.child;u!==null;)d=u,g=r,d.flags&=14680066,b=d.alternate,b===null?(d.childLanes=0,d.lanes=g,d.child=null,d.subtreeFlags=0,d.memoizedProps=null,d.memoizedState=null,d.updateQueue=null,d.dependencies=null,d.stateNode=null):(d.childLanes=b.childLanes,d.lanes=b.lanes,d.child=b.child,d.subtreeFlags=0,d.deletions=null,d.memoizedProps=b.memoizedProps,d.memoizedState=b.memoizedState,d.updateQueue=b.updateQueue,d.type=b.type,g=b.dependencies,d.dependencies=g===null?null:{lanes:g.lanes,firstContext:g.firstContext}),u=u.sibling;return St(zt,zt.current&1|2),o.child}r=r.sibling}g.tail!==null&&ai()>Wd&&(o.flags|=128,d=!0,ea(g,!1),o.lanes=4194304)}else{if(!d)if(r=Xl(b),r!==null){if(o.flags|=128,d=!0,r=r.updateQueue,r!==null&&(o.updateQueue=r,o.flags|=4),ea(g,!0),g.tail===null&&g.tailMode==="hidden"&&!b.alternate&&!Pt)return Ti(o),null}else 2*ai()-g.renderingStartTime>Wd&&u!==1073741824&&(o.flags|=128,d=!0,ea(g,!1),o.lanes=4194304);g.isBackwards?(b.sibling=o.child,o.child=b):(r=g.last,r!==null?r.sibling=b:o.child=b,g.last=b)}return g.tail!==null?(o=g.tail,g.rendering=o,g.tail=o.sibling,g.renderingStartTime=ai(),o.sibling=null,r=zt.current,St(zt,d?r&1|2:r&1),o):(Ti(o),null);case 22:case 23:return Gd(),u=o.memoizedState!==null,r!==null&&r.memoizedState!==null!==u&&(o.flags|=8192),u&&o.mode&1?Ki&1073741824&&(Ti(o),Mt&&o.subtreeFlags&6&&(o.flags|=8192)):Ti(o),null;case 24:return null;case 25:return null}throw Error(c(156,o.tag))}function OO(r,o){switch(ed(o),o.tag){case 1:return Ui(o.type)&&$l(),r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 3:return Zs(),At(Di),At(ki),gd(),r=o.flags,r&65536&&!(r&128)?(o.flags=r&-65537|128,o):null;case 5:return pd(o),null;case 13:if(At(zt),r=o.memoizedState,r!==null&&r.dehydrated!==null){if(o.alternate===null)throw Error(c(340));Vs()}return r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 19:return At(zt),null;case 4:return Zs(),null;case 10:return od(o.type._context),null;case 22:case 23:return Gd(),null;case 24:return null;default:return null}}var au=!1,Pi=!1,IO=typeof WeakSet=="function"?WeakSet:Set,ye=null;function eo(r,o){var u=r.ref;if(u!==null)if(typeof u=="function")try{u(null)}catch(d){Rt(r,o,d)}else u.current=null}function Kb(r,o,u){try{u()}catch(d){Rt(r,o,d)}}var Xb=!1;function LO(r,o){for(Ie(r.containerInfo),ye=o;ye!==null;)if(r=ye,o=r.child,(r.subtreeFlags&1028)!==0&&o!==null)o.return=r,ye=o;else for(;ye!==null;){r=ye;try{var u=r.alternate;if(r.flags&1024)switch(r.tag){case 0:case 11:case 15:break;case 1:if(u!==null){var d=u.memoizedProps,g=u.memoizedState,b=r.stateNode,T=b.getSnapshotBeforeUpdate(r.elementType===r.type?d:fn(r.type,d),g);b.__reactInternalSnapshotBeforeUpdate=T}break;case 3:Mt&&pt(r.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(c(163))}}catch(z){Rt(r,r.return,z)}if(o=r.sibling,o!==null){o.return=r.return,ye=o;break}ye=r.return}return u=Xb,Xb=!1,u}function ta(r,o,u){var d=o.updateQueue;if(d=d!==null?d.lastEffect:null,d!==null){var g=d=d.next;do{if((g.tag&r)===r){var b=g.destroy;g.destroy=void 0,b!==void 0&&Kb(o,u,b)}g=g.next}while(g!==d)}}function lu(r,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var u=o=o.next;do{if((u.tag&r)===r){var d=u.create;u.destroy=d()}u=u.next}while(u!==o)}}function Id(r){var o=r.ref;if(o!==null){var u=r.stateNode;switch(r.tag){case 5:r=et(u);break;default:r=u}typeof o=="function"?o(r):o.current=r}}function Zb(r){var o=r.alternate;o!==null&&(r.alternate=null,Zb(o)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(o=r.stateNode,o!==null&&De(o)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function Jb(r){return r.tag===5||r.tag===3||r.tag===4}function e1(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||Jb(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function Ld(r,o,u){var d=r.tag;if(d===5||d===6)r=r.stateNode,o?Me(u,r,o):Bo(u,r);else if(d!==4&&(r=r.child,r!==null))for(Ld(r,o,u),r=r.sibling;r!==null;)Ld(r,o,u),r=r.sibling}function $d(r,o,u){var d=r.tag;if(d===5||d===6)r=r.stateNode,o?ve(u,r,o):zh(u,r);else if(d!==4&&(r=r.child,r!==null))for($d(r,o,u),r=r.sibling;r!==null;)$d(r,o,u),r=r.sibling}var vi=null,gn=!1;function $n(r,o,u){for(u=u.child;u!==null;)Nd(r,o,u),u=u.sibling}function Nd(r,o,u){if(Tn&&typeof Tn.onCommitFiberUnmount=="function")try{Tn.onCommitFiberUnmount(Bl,u)}catch{}switch(u.tag){case 5:Pi||eo(u,o);case 6:if(Mt){var d=vi,g=gn;vi=null,$n(r,o,u),vi=d,gn=g,vi!==null&&(gn?Ft(vi,u.stateNode):bt(vi,u.stateNode))}else $n(r,o,u);break;case 18:Mt&&vi!==null&&(gn?JR(vi,u.stateNode):ZR(vi,u.stateNode));break;case 4:Mt?(d=vi,g=gn,vi=u.stateNode.containerInfo,gn=!0,$n(r,o,u),vi=d,gn=g):(Yt&&(d=u.stateNode.containerInfo,g=N0(d),jh(d,g)),$n(r,o,u));break;case 0:case 11:case 14:case 15:if(!Pi&&(d=u.updateQueue,d!==null&&(d=d.lastEffect,d!==null))){g=d=d.next;do{var b=g,T=b.destroy;b=b.tag,T!==void 0&&(b&2||b&4)&&Kb(u,o,T),g=g.next}while(g!==d)}$n(r,o,u);break;case 1:if(!Pi&&(eo(u,o),d=u.stateNode,typeof d.componentWillUnmount=="function"))try{d.props=u.memoizedProps,d.state=u.memoizedState,d.componentWillUnmount()}catch(z){Rt(u,o,z)}$n(r,o,u);break;case 21:$n(r,o,u);break;case 22:u.mode&1?(Pi=(d=Pi)||u.memoizedState!==null,$n(r,o,u),Pi=d):$n(r,o,u);break;default:$n(r,o,u)}}function t1(r){var o=r.updateQueue;if(o!==null){r.updateQueue=null;var u=r.stateNode;u===null&&(u=r.stateNode=new IO),o.forEach(function(d){var g=UO.bind(null,r,d);u.has(d)||(u.add(d),d.then(g,g))})}}function mn(r,o){var u=o.deletions;if(u!==null)for(var d=0;d<u.length;d++){var g=u[d];try{var b=r,T=o;if(Mt){var z=T;e:for(;z!==null;){switch(z.tag){case 5:vi=z.stateNode,gn=!1;break e;case 3:vi=z.stateNode.containerInfo,gn=!0;break e;case 4:vi=z.stateNode.containerInfo,gn=!0;break e}z=z.return}if(vi===null)throw Error(c(160));Nd(b,T,g),vi=null,gn=!1}else Nd(b,T,g);var Q=g.alternate;Q!==null&&(Q.return=null),g.return=null}catch(oe){Rt(g,o,oe)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)i1(o,r),o=o.sibling}function i1(r,o){var u=r.alternate,d=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(mn(o,r),Nn(r),d&4){try{ta(3,r,r.return),lu(3,r)}catch(ge){Rt(r,r.return,ge)}try{ta(5,r,r.return)}catch(ge){Rt(r,r.return,ge)}}break;case 1:mn(o,r),Nn(r),d&512&&u!==null&&eo(u,u.return);break;case 5:if(mn(o,r),Nn(r),d&512&&u!==null&&eo(u,u.return),Mt){if(r.flags&32){var g=r.stateNode;try{kt(g)}catch(ge){Rt(r,r.return,ge)}}if(d&4&&(g=r.stateNode,g!=null)){var b=r.memoizedProps;if(u=u!==null?u.memoizedProps:b,d=r.type,o=r.updateQueue,r.updateQueue=null,o!==null)try{Il(g,o,d,u,b,r)}catch(ge){Rt(r,r.return,ge)}}}break;case 6:if(mn(o,r),Nn(r),d&4&&Mt){if(r.stateNode===null)throw Error(c(162));g=r.stateNode,b=r.memoizedProps,u=u!==null?u.memoizedProps:b;try{Us(g,u,b)}catch(ge){Rt(r,r.return,ge)}}break;case 3:if(mn(o,r),Nn(r),d&4){if(Mt&&mt&&u!==null&&u.memoizedState.isDehydrated)try{KR(o.containerInfo)}catch(ge){Rt(r,r.return,ge)}if(Yt){g=o.containerInfo,b=o.pendingChildren;try{jh(g,b)}catch(ge){Rt(r,r.return,ge)}}}break;case 4:if(mn(o,r),Nn(r),d&4&&Yt){b=r.stateNode,g=b.containerInfo,b=b.pendingChildren;try{jh(g,b)}catch(ge){Rt(r,r.return,ge)}}break;case 13:mn(o,r),Nn(r),g=r.child,g.flags&8192&&(b=g.memoizedState!==null,g.stateNode.isHidden=b,!b||g.alternate!==null&&g.alternate.memoizedState!==null||(Ud=ai())),d&4&&t1(r);break;case 22:var T=u!==null&&u.memoizedState!==null;if(r.mode&1?(Pi=(u=Pi)||T,mn(o,r),Pi=u):mn(o,r),Nn(r),d&8192){if(u=r.memoizedState!==null,(r.stateNode.isHidden=u)&&!T&&(r.mode&1)!==0)for(ye=r,d=r.child;d!==null;){for(o=ye=d;ye!==null;){T=ye;var z=T.child;switch(T.tag){case 0:case 11:case 14:case 15:ta(4,T,T.return);break;case 1:eo(T,T.return);var Q=T.stateNode;if(typeof Q.componentWillUnmount=="function"){var oe=T,xe=T.return;try{var We=oe;Q.props=We.memoizedProps,Q.state=We.memoizedState,Q.componentWillUnmount()}catch(ge){Rt(oe,xe,ge)}}break;case 5:eo(T,T.return);break;case 22:if(T.memoizedState!==null){s1(o);continue}}z!==null?(z.return=T,ye=z):s1(o)}d=d.sibling}if(Mt){e:if(d=null,Mt)for(o=r;;){if(o.tag===5){if(d===null){d=o;try{g=o.stateNode,u?ie(g):at(o.stateNode,o.memoizedProps)}catch(ge){Rt(r,r.return,ge)}}}else if(o.tag===6){if(d===null)try{b=o.stateNode,u?Re(b):wt(b,o.memoizedProps)}catch(ge){Rt(r,r.return,ge)}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===r)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===r)break e;for(;o.sibling===null;){if(o.return===null||o.return===r)break e;d===o&&(d=null),o=o.return}d===o&&(d=null),o.sibling.return=o.return,o=o.sibling}}}break;case 19:mn(o,r),Nn(r),d&4&&t1(r);break;case 21:break;default:mn(o,r),Nn(r)}}function Nn(r){var o=r.flags;if(o&2){try{if(Mt){e:{for(var u=r.return;u!==null;){if(Jb(u)){var d=u;break e}u=u.return}throw Error(c(160))}switch(d.tag){case 5:var g=d.stateNode;d.flags&32&&(kt(g),d.flags&=-33);var b=e1(r);$d(r,b,g);break;case 3:case 4:var T=d.stateNode.containerInfo,z=e1(r);Ld(r,z,T);break;default:throw Error(c(161))}}}catch(Q){Rt(r,r.return,Q)}r.flags&=-3}o&4096&&(r.flags&=-4097)}function $O(r,o,u){ye=r,n1(r)}function n1(r,o,u){for(var d=(r.mode&1)!==0;ye!==null;){var g=ye,b=g.child;if(g.tag===22&&d){var T=g.memoizedState!==null||au;if(!T){var z=g.alternate,Q=z!==null&&z.memoizedState!==null||Pi;z=au;var oe=Pi;if(au=T,(Pi=Q)&&!oe)for(ye=g;ye!==null;)T=ye,Q=T.child,T.tag===22&&T.memoizedState!==null?o1(g):Q!==null?(Q.return=T,ye=Q):o1(g);for(;b!==null;)ye=b,n1(b),b=b.sibling;ye=g,au=z,Pi=oe}r1(r)}else g.subtreeFlags&8772&&b!==null?(b.return=g,ye=b):r1(r)}}function r1(r){for(;ye!==null;){var o=ye;if(o.flags&8772){var u=o.alternate;try{if(o.flags&8772)switch(o.tag){case 0:case 11:case 15:Pi||lu(5,o);break;case 1:var d=o.stateNode;if(o.flags&4&&!Pi)if(u===null)d.componentDidMount();else{var g=o.elementType===o.type?u.memoizedProps:fn(o.type,u.memoizedProps);d.componentDidUpdate(g,u.memoizedState,d.__reactInternalSnapshotBeforeUpdate)}var b=o.updateQueue;b!==null&&ib(o,b,d);break;case 3:var T=o.updateQueue;if(T!==null){if(u=null,o.child!==null)switch(o.child.tag){case 5:u=et(o.child.stateNode);break;case 1:u=o.child.stateNode}ib(o,T,u)}break;case 5:var z=o.stateNode;u===null&&o.flags&4&&jo(z,o.type,o.memoizedProps,o);break;case 6:break;case 4:break;case 12:break;case 13:if(mt&&o.memoizedState===null){var Q=o.alternate;if(Q!==null){var oe=Q.memoizedState;if(oe!==null){var xe=oe.dehydrated;xe!==null&&XR(xe)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(c(163))}Pi||o.flags&512&&Id(o)}catch(We){Rt(o,o.return,We)}}if(o===r){ye=null;break}if(u=o.sibling,u!==null){u.return=o.return,ye=u;break}ye=o.return}}function s1(r){for(;ye!==null;){var o=ye;if(o===r){ye=null;break}var u=o.sibling;if(u!==null){u.return=o.return,ye=u;break}ye=o.return}}function o1(r){for(;ye!==null;){var o=ye;try{switch(o.tag){case 0:case 11:case 15:var u=o.return;try{lu(4,o)}catch(Q){Rt(o,u,Q)}break;case 1:var d=o.stateNode;if(typeof d.componentDidMount=="function"){var g=o.return;try{d.componentDidMount()}catch(Q){Rt(o,g,Q)}}var b=o.return;try{Id(o)}catch(Q){Rt(o,b,Q)}break;case 5:var T=o.return;try{Id(o)}catch(Q){Rt(o,T,Q)}}}catch(Q){Rt(o,o.return,Q)}if(o===r){ye=null;break}var z=o.sibling;if(z!==null){z.return=o.return,ye=z;break}ye=o.return}}var uu=0,cu=1,hu=2,du=3,pu=4;if(typeof Symbol=="function"&&Symbol.for){var ia=Symbol.for;uu=ia("selector.component"),cu=ia("selector.has_pseudo_class"),hu=ia("selector.role"),du=ia("selector.test_id"),pu=ia("selector.text")}function Md(r){var o=$e(r);if(o!=null){if(typeof o.memoizedProps["data-testname"]!="string")throw Error(c(364));return o}if(r=Ni(r),r===null)throw Error(c(362));return r.stateNode.current}function Fd(r,o){switch(o.$$typeof){case uu:if(r.type===o.value)return!0;break;case cu:e:{o=o.value,r=[r,0];for(var u=0;u<r.length;){var d=r[u++],g=r[u++],b=o[g];if(d.tag!==5||!Jr(d)){for(;b!=null&&Fd(d,b);)g++,b=o[g];if(g===o.length){o=!0;break e}else for(d=d.child;d!==null;)r.push(d,g),d=d.sibling}}o=!1}return o;case hu:if(r.tag===5&&ji(r.stateNode,o.value))return!0;break;case pu:if((r.tag===5||r.tag===6)&&(r=Zr(r),r!==null&&0<=r.indexOf(o.value)))return!0;break;case du:if(r.tag===5&&(r=r.memoizedProps["data-testname"],typeof r=="string"&&r.toLowerCase()===o.value.toLowerCase()))return!0;break;default:throw Error(c(365))}return!1}function zd(r){switch(r.$$typeof){case uu:return"<"+(V(r.value)||"Unknown")+">";case cu:return":has("+(zd(r)||"")+")";case hu:return'[role="'+r.value+'"]';case pu:return'"'+r.value+'"';case du:return'[data-testname="'+r.value+'"]';default:throw Error(c(365))}}function a1(r,o){var u=[];r=[r,0];for(var d=0;d<r.length;){var g=r[d++],b=r[d++],T=o[b];if(g.tag!==5||!Jr(g)){for(;T!=null&&Fd(g,T);)b++,T=o[b];if(b===o.length)u.push(g);else for(g=g.child;g!==null;)r.push(g,b),g=g.sibling}}return u}function Bd(r,o){if(!tt)throw Error(c(363));r=Md(r),r=a1(r,o),o=[],r=Array.from(r);for(var u=0;u<r.length;){var d=r[u++];if(d.tag===5)Jr(d)||o.push(d.stateNode);else for(d=d.child;d!==null;)r.push(d),d=d.sibling}return o}var NO=Math.ceil,fu=h.ReactCurrentDispatcher,jd=h.ReactCurrentOwner,Vt=h.ReactCurrentBatchConfig,Xe=0,ui=null,Kt=null,yi=0,Ki=0,to=gr(0),ti=0,na=null,ss=0,gu=0,Dd=0,ra=null,Hi=null,Ud=0,Wd=1/0,Kn=null;function io(){Wd=ai()+500}var mu=!1,Hd=null,br=null,vu=!1,wr=null,yu=0,sa=0,qd=null,bu=-1,wu=0;function Ri(){return Xe&6?ai():bu!==-1?bu:bu=ai()}function xr(r){return r.mode&1?Xe&2&&yi!==0?yi&-yi:vO.transition!==null?(wu===0&&(wu=W0()),wu):(r=ut,r!==0?r:nt()):1}function on(r,o,u,d){if(50<sa)throw sa=0,qd=null,Error(c(185));Wo(r,u,d),(!(Xe&2)||r!==ui)&&(r===ui&&(!(Xe&2)&&(gu|=u),ti===4&&_r(r,yi)),qi(r,d),u===1&&Xe===0&&!(o.mode&1)&&(io(),jl&&Pn()))}function qi(r,o){var u=r.callbackNode;lO(r,o);var d=zl(r,r===ui?yi:0);if(d===0)u!==null&&q0(u),r.callbackNode=null,r.callbackPriority=0;else if(o=d&-d,r.callbackPriority!==o){if(u!=null&&q0(u),o===1)r.tag===0?mO(u1.bind(null,r)):Q0(u1.bind(null,r)),Ke?ot(function(){!(Xe&6)&&Pn()}):Yh(Kh,Pn),u=null;else{switch(H0(d)){case 1:u=Kh;break;case 4:u=dO;break;case 16:u=Xh;break;case 536870912:u=pO;break;default:u=Xh}u=y1(u,l1.bind(null,r))}r.callbackPriority=o,r.callbackNode=u}}function l1(r,o){if(bu=-1,wu=0,(Xe&6)!==0)throw Error(c(327));var u=r.callbackNode;if(ls()&&r.callbackNode!==u)return null;var d=zl(r,r===ui?yi:0);if(d===0)return null;if(d&30||d&r.expiredLanes||o)o=xu(r,d);else{o=d;var g=Xe;Xe|=2;var b=d1();(ui!==r||yi!==o)&&(Kn=null,io(),os(r,o));do try{zO();break}catch(z){h1(r,z)}while(1);sd(),fu.current=b,Xe=g,Kt!==null?o=0:(ui=null,yi=0,o=ti)}if(o!==0){if(o===2&&(g=Qh(r),g!==0&&(d=g,o=Qd(r,g))),o===1)throw u=na,os(r,0),_r(r,d),qi(r,ai()),u;if(o===6)_r(r,d);else{if(g=r.current.alternate,(d&30)===0&&!MO(g)&&(o=xu(r,d),o===2&&(b=Qh(r),b!==0&&(d=b,o=Qd(r,b))),o===1))throw u=na,os(r,0),_r(r,d),qi(r,ai()),u;switch(r.finishedWork=g,r.finishedLanes=d,o){case 0:case 1:throw Error(c(345));case 2:as(r,Hi,Kn);break;case 3:if(_r(r,d),(d&130023424)===d&&(o=Ud+500-ai(),10<o)){if(zl(r,0)!==0)break;if(g=r.suspendedLanes,(g&d)!==d){Ri(),r.pingedLanes|=r.suspendedLanes&g;break}r.timeoutHandle=yt(as.bind(null,r,Hi,Kn),o);break}as(r,Hi,Kn);break;case 4:if(_r(r,d),(d&4194240)===d)break;for(o=r.eventTimes,g=-1;0<d;){var T=31-hn(d);b=1<<T,T=o[T],T>g&&(g=T),d&=~b}if(d=g,d=ai()-d,d=(120>d?120:480>d?480:1080>d?1080:1920>d?1920:3e3>d?3e3:4320>d?4320:1960*NO(d/1960))-d,10<d){r.timeoutHandle=yt(as.bind(null,r,Hi,Kn),d);break}as(r,Hi,Kn);break;case 5:as(r,Hi,Kn);break;default:throw Error(c(329))}}}return qi(r,ai()),r.callbackNode===u?l1.bind(null,r):null}function Qd(r,o){var u=ra;return r.current.memoizedState.isDehydrated&&(os(r,o).flags|=256),r=xu(r,o),r!==2&&(o=Hi,Hi=u,o!==null&&Vd(o)),r}function Vd(r){Hi===null?Hi=r:Hi.push.apply(Hi,r)}function MO(r){for(var o=r;;){if(o.flags&16384){var u=o.updateQueue;if(u!==null&&(u=u.stores,u!==null))for(var d=0;d<u.length;d++){var g=u[d],b=g.getSnapshot;g=g.value;try{if(!dn(b(),g))return!1}catch{return!1}}}if(u=o.child,o.subtreeFlags&16384&&u!==null)u.return=o,o=u;else{if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function _r(r,o){for(o&=~Dd,o&=~gu,r.suspendedLanes|=o,r.pingedLanes&=~o,r=r.expirationTimes;0<o;){var u=31-hn(o),d=1<<u;r[u]=-1,o&=~d}}function u1(r){if(Xe&6)throw Error(c(327));ls();var o=zl(r,0);if(!(o&1))return qi(r,ai()),null;var u=xu(r,o);if(r.tag!==0&&u===2){var d=Qh(r);d!==0&&(o=d,u=Qd(r,d))}if(u===1)throw u=na,os(r,0),_r(r,o),qi(r,ai()),u;if(u===6)throw Error(c(345));return r.finishedWork=r.current.alternate,r.finishedLanes=o,as(r,Hi,Kn),qi(r,ai()),null}function c1(r){wr!==null&&wr.tag===0&&!(Xe&6)&&ls();var o=Xe;Xe|=1;var u=Vt.transition,d=ut;try{if(Vt.transition=null,ut=1,r)return r()}finally{ut=d,Vt.transition=u,Xe=o,!(Xe&6)&&Pn()}}function Gd(){Ki=to.current,At(to)}function os(r,o){r.finishedWork=null,r.finishedLanes=0;var u=r.timeoutHandle;if(u!==oi&&(r.timeoutHandle=oi,Ct(u)),Kt!==null)for(u=Kt.return;u!==null;){var d=u;switch(ed(d),d.tag){case 1:d=d.type.childContextTypes,d!=null&&$l();break;case 3:Zs(),At(Di),At(ki),gd();break;case 5:pd(d);break;case 4:Zs();break;case 13:At(zt);break;case 19:At(zt);break;case 10:od(d.type._context);break;case 22:case 23:Gd()}u=u.return}if(ui=r,Kt=r=Sr(r.current,null),yi=Ki=o,ti=0,na=null,Dd=gu=ss=0,Hi=ra=null,ns!==null){for(o=0;o<ns.length;o++)if(u=ns[o],d=u.interleaved,d!==null){u.interleaved=null;var g=d.next,b=u.pending;if(b!==null){var T=b.next;b.next=g,d.next=T}u.pending=d}ns=null}return r}function h1(r,o){do{var u=Kt;try{if(sd(),Zl.current=iu,Jl){for(var d=Bt.memoizedState;d!==null;){var g=d.queue;g!==null&&(g.pending=null),d=d.next}Jl=!1}if(rs=0,li=ei=Bt=null,Go=!1,Yo=0,jd.current=null,u===null||u.return===null){ti=1,na=o,Kt=null;break}e:{var b=r,T=u.return,z=u,Q=o;if(o=yi,z.flags|=32768,Q!==null&&typeof Q=="object"&&typeof Q.then=="function"){var oe=Q,xe=z,We=xe.tag;if(!(xe.mode&1)&&(We===0||We===11||We===15)){var ge=xe.alternate;ge?(xe.updateQueue=ge.updateQueue,xe.memoizedState=ge.memoizedState,xe.lanes=ge.lanes):(xe.updateQueue=null,xe.memoizedState=null)}var Tt=Nb(T);if(Tt!==null){Tt.flags&=-257,Mb(Tt,T,z,b,o),Tt.mode&1&&$b(b,oe,o),o=Tt,Q=oe;var xt=o.updateQueue;if(xt===null){var Qi=new Set;Qi.add(Q),o.updateQueue=Qi}else xt.add(Q);break e}else{if(!(o&1)){$b(b,oe,o),Yd();break e}Q=Error(c(426))}}else if(Pt&&z.mode&1){var Xn=Nb(T);if(Xn!==null){!(Xn.flags&65536)&&(Xn.flags|=256),Mb(Xn,T,z,b,o),nd(Js(Q,z));break e}}b=Q=Js(Q,z),ti!==4&&(ti=2),ra===null?ra=[b]:ra.push(b),b=T;do{switch(b.tag){case 3:b.flags|=65536,o&=-o,b.lanes|=o;var H=Ib(b,Q,o);tb(b,H);break e;case 1:z=Q;var j=b.type,K=b.stateNode;if(!(b.flags&128)&&(typeof j.getDerivedStateFromError=="function"||K!==null&&typeof K.componentDidCatch=="function"&&(br===null||!br.has(K)))){b.flags|=65536,o&=-o,b.lanes|=o;var me=Lb(b,z,o);tb(b,me);break e}}b=b.return}while(b!==null)}f1(u)}catch(Le){o=Le,Kt===u&&u!==null&&(Kt=u=u.return);continue}break}while(1)}function d1(){var r=fu.current;return fu.current=iu,r===null?iu:r}function Yd(){(ti===0||ti===3||ti===2)&&(ti=4),ui===null||!(ss&268435455)&&!(gu&268435455)||_r(ui,yi)}function xu(r,o){var u=Xe;Xe|=2;var d=d1();(ui!==r||yi!==o)&&(Kn=null,os(r,o));do try{FO();break}catch(g){h1(r,g)}while(1);if(sd(),Xe=u,fu.current=d,Kt!==null)throw Error(c(261));return ui=null,yi=0,ti}function FO(){for(;Kt!==null;)p1(Kt)}function zO(){for(;Kt!==null&&!cO();)p1(Kt)}function p1(r){var o=v1(r.alternate,r,Ki);r.memoizedProps=r.pendingProps,o===null?f1(r):Kt=o,jd.current=null}function f1(r){var o=r;do{var u=o.alternate;if(r=o.return,(o.flags&32768)===0){if(u=RO(u,o,Ki),u!==null){Kt=u;return}}else{if(u=OO(u,o),u!==null){u.flags&=32767,Kt=u;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{ti=6,Kt=null;return}}if(o=o.sibling,o!==null){Kt=o;return}Kt=o=r}while(o!==null);ti===0&&(ti=5)}function as(r,o,u){var d=ut,g=Vt.transition;try{Vt.transition=null,ut=1,BO(r,o,u,d)}finally{Vt.transition=g,ut=d}return null}function BO(r,o,u,d){do ls();while(wr!==null);if(Xe&6)throw Error(c(327));u=r.finishedWork;var g=r.finishedLanes;if(u===null)return null;if(r.finishedWork=null,r.finishedLanes=0,u===r.current)throw Error(c(177));r.callbackNode=null,r.callbackPriority=0;var b=u.lanes|u.childLanes;if(uO(r,b),r===ui&&(Kt=ui=null,yi=0),!(u.subtreeFlags&2064)&&!(u.flags&2064)||vu||(vu=!0,y1(Xh,function(){return ls(),null})),b=(u.flags&15990)!==0,(u.subtreeFlags&15990)!==0||b){b=Vt.transition,Vt.transition=null;var T=ut;ut=1;var z=Xe;Xe|=4,jd.current=null,LO(r,u),i1(u,r),Ve(r.containerInfo),r.current=u,$O(u),hO(),Xe=z,ut=T,Vt.transition=b}else r.current=u;if(vu&&(vu=!1,wr=r,yu=g),b=r.pendingLanes,b===0&&(br=null),fO(u.stateNode),qi(r,ai()),o!==null)for(d=r.onRecoverableError,u=0;u<o.length;u++)g=o[u],d(g.value,{componentStack:g.stack,digest:g.digest});if(mu)throw mu=!1,r=Hd,Hd=null,r;return yu&1&&r.tag!==0&&ls(),b=r.pendingLanes,b&1?r===qd?sa++:(sa=0,qd=r):sa=0,Pn(),null}function ls(){if(wr!==null){var r=H0(yu),o=Vt.transition,u=ut;try{if(Vt.transition=null,ut=16>r?16:r,wr===null)var d=!1;else{if(r=wr,wr=null,yu=0,(Xe&6)!==0)throw Error(c(331));var g=Xe;for(Xe|=4,ye=r.current;ye!==null;){var b=ye,T=b.child;if(ye.flags&16){var z=b.deletions;if(z!==null){for(var Q=0;Q<z.length;Q++){var oe=z[Q];for(ye=oe;ye!==null;){var xe=ye;switch(xe.tag){case 0:case 11:case 15:ta(8,xe,b)}var We=xe.child;if(We!==null)We.return=xe,ye=We;else for(;ye!==null;){xe=ye;var ge=xe.sibling,Tt=xe.return;if(Zb(xe),xe===oe){ye=null;break}if(ge!==null){ge.return=Tt,ye=ge;break}ye=Tt}}}var xt=b.alternate;if(xt!==null){var Qi=xt.child;if(Qi!==null){xt.child=null;do{var Xn=Qi.sibling;Qi.sibling=null,Qi=Xn}while(Qi!==null)}}ye=b}}if(b.subtreeFlags&2064&&T!==null)T.return=b,ye=T;else e:for(;ye!==null;){if(b=ye,(b.flags&2048)!==0)switch(b.tag){case 0:case 11:case 15:ta(9,b,b.return)}var H=b.sibling;if(H!==null){H.return=b.return,ye=H;break e}ye=b.return}}var j=r.current;for(ye=j;ye!==null;){T=ye;var K=T.child;if(T.subtreeFlags&2064&&K!==null)K.return=T,ye=K;else e:for(T=j;ye!==null;){if(z=ye,(z.flags&2048)!==0)try{switch(z.tag){case 0:case 11:case 15:lu(9,z)}}catch(Le){Rt(z,z.return,Le)}if(z===T){ye=null;break e}var me=z.sibling;if(me!==null){me.return=z.return,ye=me;break e}ye=z.return}}if(Xe=g,Pn(),Tn&&typeof Tn.onPostCommitFiberRoot=="function")try{Tn.onPostCommitFiberRoot(Bl,r)}catch{}d=!0}return d}finally{ut=u,Vt.transition=o}}return!1}function g1(r,o,u){o=Js(u,o),o=Ib(r,o,1),r=yr(r,o,1),o=Ri(),r!==null&&(Wo(r,1,o),qi(r,o))}function Rt(r,o,u){if(r.tag===3)g1(r,r,u);else for(;o!==null;){if(o.tag===3){g1(o,r,u);break}else if(o.tag===1){var d=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(br===null||!br.has(d))){r=Js(u,r),r=Lb(o,r,1),o=yr(o,r,1),r=Ri(),o!==null&&(Wo(o,1,r),qi(o,r));break}}o=o.return}}function jO(r,o,u){var d=r.pingCache;d!==null&&d.delete(o),o=Ri(),r.pingedLanes|=r.suspendedLanes&u,ui===r&&(yi&u)===u&&(ti===4||ti===3&&(yi&130023424)===yi&&500>ai()-Ud?os(r,0):Dd|=u),qi(r,o)}function m1(r,o){o===0&&(r.mode&1?(o=Fl,Fl<<=1,!(Fl&130023424)&&(Fl=4194304)):o=1);var u=Ri();r=Rn(r,o),r!==null&&(Wo(r,o,u),qi(r,u))}function DO(r){var o=r.memoizedState,u=0;o!==null&&(u=o.retryLane),m1(r,u)}function UO(r,o){var u=0;switch(r.tag){case 13:var d=r.stateNode,g=r.memoizedState;g!==null&&(u=g.retryLane);break;case 19:d=r.stateNode;break;default:throw Error(c(314))}d!==null&&d.delete(o),m1(r,u)}var v1;v1=function(r,o,u){if(r!==null)if(r.memoizedProps!==o.pendingProps||Di.current)Wi=!0;else{if(!(r.lanes&u)&&!(o.flags&128))return Wi=!1,PO(r,o,u);Wi=(r.flags&131072)!==0}else Wi=!1,Pt&&o.flags&1048576&&V0(o,Ul,o.index);switch(o.lanes=0,o.tag){case 2:var d=o.type;ru(r,o),r=o.pendingProps;var g=Hs(o,ki.current);Ys(o,u),g=yd(null,o,d,r,g,u);var b=bd();return o.flags|=1,typeof g=="object"&&g!==null&&typeof g.render=="function"&&g.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,Ui(d)?(b=!0,Nl(o)):b=!1,o.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,ud(o),g.updater=Yl,o.stateNode=g,g._reactInternals=o,hd(o,d,r,u),o=Ad(null,o,d,!0,b,u)):(o.tag=0,Pt&&b&&Jh(o),Mi(null,o,g,u),o=o.child),o;case 16:d=o.elementType;e:{switch(ru(r,o),r=o.pendingProps,g=d._init,d=g(d._payload),o.type=d,g=o.tag=HO(d),r=fn(d,r),g){case 0:o=kd(null,o,d,r,u);break e;case 1:o=Ub(null,o,d,r,u);break e;case 11:o=Fb(null,o,d,r,u);break e;case 14:o=zb(null,o,d,fn(d.type,r),u);break e}throw Error(c(306,d,""))}return o;case 0:return d=o.type,g=o.pendingProps,g=o.elementType===d?g:fn(d,g),kd(r,o,d,g,u);case 1:return d=o.type,g=o.pendingProps,g=o.elementType===d?g:fn(d,g),Ub(r,o,d,g,u);case 3:e:{if(Wb(o),r===null)throw Error(c(387));d=o.pendingProps,b=o.memoizedState,g=b.element,eb(r,o),Gl(o,d,null,u);var T=o.memoizedState;if(d=T.element,mt&&b.isDehydrated)if(b={element:d,isDehydrated:!1,cache:T.cache,pendingSuspenseBoundaries:T.pendingSuspenseBoundaries,transitions:T.transitions},o.updateQueue.baseState=b,o.memoizedState=b,o.flags&256){g=Js(Error(c(423)),o),o=Hb(r,o,d,u,g);break e}else if(d!==g){g=Js(Error(c(424)),o),o=Hb(r,o,d,u,g);break e}else for(mt&&(tn=HR(o.stateNode.containerInfo),Yi=o,Pt=!0,pn=null,Ho=!1),u=ub(o,null,d,u),o.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(Vs(),d===g){o=Yn(r,o,u);break e}Mi(r,o,d,u)}o=o.child}return o;case 5:return cb(o),r===null&&id(o),d=o.type,g=o.pendingProps,b=r!==null?r.memoizedProps:null,T=g.children,Qt(d,g)?T=null:b!==null&&Qt(d,b)&&(o.flags|=32),Db(r,o),Mi(r,o,T,u),o.child;case 6:return r===null&&id(o),null;case 13:return qb(r,o,u);case 4:return dd(o,o.stateNode.containerInfo),d=o.pendingProps,r===null?o.child=Ks(o,null,d,u):Mi(r,o,d,u),o.child;case 11:return d=o.type,g=o.pendingProps,g=o.elementType===d?g:fn(d,g),Fb(r,o,d,g,u);case 7:return Mi(r,o,o.pendingProps,u),o.child;case 8:return Mi(r,o,o.pendingProps.children,u),o.child;case 12:return Mi(r,o,o.pendingProps.children,u),o.child;case 10:e:{if(d=o.type._context,g=o.pendingProps,b=o.memoizedProps,T=g.value,Z0(o,d,T),b!==null)if(dn(b.value,T)){if(b.children===g.children&&!Di.current){o=Yn(r,o,u);break e}}else for(b=o.child,b!==null&&(b.return=o);b!==null;){var z=b.dependencies;if(z!==null){T=b.child;for(var Q=z.firstContext;Q!==null;){if(Q.context===d){if(b.tag===1){Q=Gn(-1,u&-u),Q.tag=2;var oe=b.updateQueue;if(oe!==null){oe=oe.shared;var xe=oe.pending;xe===null?Q.next=Q:(Q.next=xe.next,xe.next=Q),oe.pending=Q}}b.lanes|=u,Q=b.alternate,Q!==null&&(Q.lanes|=u),ad(b.return,u,o),z.lanes|=u;break}Q=Q.next}}else if(b.tag===10)T=b.type===o.type?null:b.child;else if(b.tag===18){if(T=b.return,T===null)throw Error(c(341));T.lanes|=u,z=T.alternate,z!==null&&(z.lanes|=u),ad(T,u,o),T=b.sibling}else T=b.child;if(T!==null)T.return=b;else for(T=b;T!==null;){if(T===o){T=null;break}if(b=T.sibling,b!==null){b.return=T.return,T=b;break}T=T.return}b=T}Mi(r,o,g.children,u),o=o.child}return o;case 9:return g=o.type,d=o.pendingProps.children,Ys(o,u),g=nn(g),d=d(g),o.flags|=1,Mi(r,o,d,u),o.child;case 14:return d=o.type,g=fn(d,o.pendingProps),g=fn(d.type,g),zb(r,o,d,g,u);case 15:return Bb(r,o,o.type,o.pendingProps,u);case 17:return d=o.type,g=o.pendingProps,g=o.elementType===d?g:fn(d,g),ru(r,o),o.tag=1,Ui(d)?(r=!0,Nl(o)):r=!1,Ys(o,u),sb(o,d,g),hd(o,d,g,u),Ad(null,o,d,!0,r,u);case 19:return Vb(r,o,u);case 22:return jb(r,o,u)}throw Error(c(156,o.tag))};function y1(r,o){return Yh(r,o)}function WO(r,o,u,d){this.tag=r,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function an(r,o,u,d){return new WO(r,o,u,d)}function Kd(r){return r=r.prototype,!(!r||!r.isReactComponent)}function HO(r){if(typeof r=="function")return Kd(r)?1:0;if(r!=null){if(r=r.$$typeof,r===I)return 11;if(r===N)return 14}return 2}function Sr(r,o){var u=r.alternate;return u===null?(u=an(r.tag,o,r.key,r.mode),u.elementType=r.elementType,u.type=r.type,u.stateNode=r.stateNode,u.alternate=r,r.alternate=u):(u.pendingProps=o,u.type=r.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=r.flags&14680064,u.childLanes=r.childLanes,u.lanes=r.lanes,u.child=r.child,u.memoizedProps=r.memoizedProps,u.memoizedState=r.memoizedState,u.updateQueue=r.updateQueue,o=r.dependencies,u.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},u.sibling=r.sibling,u.index=r.index,u.ref=r.ref,u}function _u(r,o,u,d,g,b){var T=2;if(d=r,typeof r=="function")Kd(r)&&(T=1);else if(typeof r=="string")T=5;else e:switch(r){case y:return us(u.children,g,b,o);case S:T=8,g|=8;break;case C:return r=an(12,u,o,g|2),r.elementType=C,r.lanes=b,r;case L:return r=an(13,u,o,g),r.elementType=L,r.lanes=b,r;case E:return r=an(19,u,o,g),r.elementType=E,r.lanes=b,r;case U:return Su(u,g,b,o);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case _:T=10;break e;case P:T=9;break e;case I:T=11;break e;case N:T=14;break e;case F:T=16,d=null;break e}throw Error(c(130,r==null?r:typeof r,""))}return o=an(T,u,o,g),o.elementType=r,o.type=d,o.lanes=b,o}function us(r,o,u,d){return r=an(7,r,d,o),r.lanes=u,r}function Su(r,o,u,d){return r=an(22,r,d,o),r.elementType=U,r.lanes=u,r.stateNode={isHidden:!1},r}function Xd(r,o,u){return r=an(6,r,null,o),r.lanes=u,r}function Zd(r,o,u){return o=an(4,r.children!==null?r.children:[],r.key,o),o.lanes=u,o.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},o}function qO(r,o,u,d,g){this.tag=o,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=oi,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Vh(0),this.expirationTimes=Vh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Vh(0),this.identifierPrefix=d,this.onRecoverableError=g,mt&&(this.mutableSourceEagerHydrationData=null)}function b1(r,o,u,d,g,b,T,z,Q){return r=new qO(r,o,u,z,Q),o===1?(o=1,b===!0&&(o|=8)):o=0,b=an(3,null,null,o),r.current=b,b.stateNode=r,b.memoizedState={element:d,isDehydrated:u,cache:null,transitions:null,pendingSuspenseBoundaries:null},ud(b),r}function w1(r){if(!r)return mr;r=r._reactInternals;e:{if(W(r)!==r||r.tag!==1)throw Error(c(170));var o=r;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if(Ui(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(o!==null);throw Error(c(171))}if(r.tag===1){var u=r.type;if(Ui(u))return D0(r,u,o)}return o}function x1(r){var o=r._reactInternals;if(o===void 0)throw typeof r.render=="function"?Error(c(188)):(r=Object.keys(r).join(","),Error(c(268,r)));return r=ue(o),r===null?null:r.stateNode}function _1(r,o){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var u=r.retryLane;r.retryLane=u!==0&&u<o?u:o}}function Eu(r,o){_1(r,o),(r=r.alternate)&&_1(r,o)}function QO(r){return r=ue(r),r===null?null:r.stateNode}function VO(){return null}return n.attemptContinuousHydration=function(r){if(r.tag===13){var o=Rn(r,134217728);if(o!==null){var u=Ri();on(o,r,134217728,u)}Eu(r,134217728)}},n.attemptDiscreteHydration=function(r){if(r.tag===13){var o=Rn(r,1);if(o!==null){var u=Ri();on(o,r,1,u)}Eu(r,1)}},n.attemptHydrationAtCurrentPriority=function(r){if(r.tag===13){var o=xr(r),u=Rn(r,o);if(u!==null){var d=Ri();on(u,r,o,d)}Eu(r,o)}},n.attemptSynchronousHydration=function(r){switch(r.tag){case 3:var o=r.stateNode;if(o.current.memoizedState.isDehydrated){var u=Uo(o.pendingLanes);u!==0&&(Gh(o,u|1),qi(o,ai()),!(Xe&6)&&(io(),Pn()))}break;case 13:c1(function(){var d=Rn(r,1);if(d!==null){var g=Ri();on(d,r,1,g)}}),Eu(r,1)}},n.batchedUpdates=function(r,o){var u=Xe;Xe|=1;try{return r(o)}finally{Xe=u,Xe===0&&(io(),jl&&Pn())}},n.createComponentSelector=function(r){return{$$typeof:uu,value:r}},n.createContainer=function(r,o,u,d,g,b,T){return b1(r,o,!1,null,u,d,g,b,T)},n.createHasPseudoClassSelector=function(r){return{$$typeof:cu,value:r}},n.createHydrationContainer=function(r,o,u,d,g,b,T,z,Q){return r=b1(u,d,!0,r,g,b,T,z,Q),r.context=w1(null),u=r.current,d=Ri(),g=xr(u),b=Gn(d,g),b.callback=o??null,yr(u,b,g),r.current.lanes=g,Wo(r,g,d),qi(r,d),r},n.createPortal=function(r,o,u){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:f,key:d==null?null:""+d,children:r,containerInfo:o,implementation:u}},n.createRoleSelector=function(r){return{$$typeof:hu,value:r}},n.createTestNameSelector=function(r){return{$$typeof:du,value:r}},n.createTextSelector=function(r){return{$$typeof:pu,value:r}},n.deferredUpdates=function(r){var o=ut,u=Vt.transition;try{return Vt.transition=null,ut=16,r()}finally{ut=o,Vt.transition=u}},n.discreteUpdates=function(r,o,u,d,g){var b=ut,T=Vt.transition;try{return Vt.transition=null,ut=1,r(o,u,d,g)}finally{ut=b,Vt.transition=T,Xe===0&&io()}},n.findAllNodes=Bd,n.findBoundingRects=function(r,o){if(!tt)throw Error(c(363));o=Bd(r,o),r=[];for(var u=0;u<o.length;u++)r.push(Xr(o[u]));for(o=r.length-1;0<o;o--){u=r[o];for(var d=u.x,g=d+u.width,b=u.y,T=b+u.height,z=o-1;0<=z;z--)if(o!==z){var Q=r[z],oe=Q.x,xe=oe+Q.width,We=Q.y,ge=We+Q.height;if(d>=oe&&b>=We&&g<=xe&&T<=ge){r.splice(o,1);break}else if(d!==oe||u.width!==Q.width||ge<b||We>T){if(!(b!==We||u.height!==Q.height||xe<d||oe>g)){oe>d&&(Q.width+=oe-d,Q.x=d),xe<g&&(Q.width=g-oe),r.splice(o,1);break}}else{We>b&&(Q.height+=We-b,Q.y=b),ge<T&&(Q.height=T-We),r.splice(o,1);break}}}return r},n.findHostInstance=x1,n.findHostInstanceWithNoPortals=function(r){return r=pe(r),r=r!==null?he(r):null,r===null?null:r.stateNode},n.findHostInstanceWithWarning=function(r){return x1(r)},n.flushControlled=function(r){var o=Xe;Xe|=1;var u=Vt.transition,d=ut;try{Vt.transition=null,ut=1,r()}finally{ut=d,Vt.transition=u,Xe=o,Xe===0&&(io(),Pn())}},n.flushPassiveEffects=ls,n.flushSync=c1,n.focusWithin=function(r,o){if(!tt)throw Error(c(363));for(r=Md(r),o=a1(r,o),o=Array.from(o),r=0;r<o.length;){var u=o[r++];if(!Jr(u)){if(u.tag===5&&Ol(u.stateNode))return!0;for(u=u.child;u!==null;)o.push(u),u=u.sibling}}return!1},n.getCurrentUpdatePriority=function(){return ut},n.getFindAllNodesFailureDescription=function(r,o){if(!tt)throw Error(c(363));var u=0,d=[];r=[Md(r),0];for(var g=0;g<r.length;){var b=r[g++],T=r[g++],z=o[T];if((b.tag!==5||!Jr(b))&&(Fd(b,z)&&(d.push(zd(z)),T++,T>u&&(u=T)),T<o.length))for(b=b.child;b!==null;)r.push(b,T),b=b.sibling}if(u<o.length){for(r=[];u<o.length;u++)r.push(zd(o[u]));return`findAllNodes was able to match part of the selector:
  `+(d.join(" > ")+`

No matching component was found for:
  `)+r.join(" > ")}return null},n.getPublicRootInstance=function(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return et(r.child.stateNode);default:return r.child.stateNode}},n.injectIntoDevTools=function(r){if(r={bundleType:r.bundleType,version:r.version,rendererPackageName:r.rendererPackageName,rendererConfig:r.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:h.ReactCurrentDispatcher,findHostInstanceByFiber:QO,findFiberByHostInstance:r.findFiberByHostInstance||VO,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")r=!1;else{var o=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(o.isDisabled||!o.supportsFiber)r=!0;else{try{Bl=o.inject(r),Tn=o}catch{}r=!!o.checkDCE}}return r},n.isAlreadyRendering=function(){return!1},n.observeVisibleRects=function(r,o,u,d){if(!tt)throw Error(c(363));r=Bd(r,o);var g=Fh(r,u,d).disconnect;return{disconnect:function(){g()}}},n.registerMutableSourceForHydration=function(r,o){var u=o._getVersion;u=u(o._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[o,u]:r.mutableSourceEagerHydrationData.push(o,u)},n.runWithPriority=function(r,o){var u=ut;try{return ut=r,o()}finally{ut=u}},n.shouldError=function(){return null},n.shouldSuspend=function(){return!1},n.updateContainer=function(r,o,u,d){var g=o.current,b=Ri(),T=xr(g);return u=w1(u),o.context===null?o.context=u:o.pendingContext=u,o=Gn(b,T),o.payload={element:r},d=d===void 0?null:d,d!==null&&(o.callback=d),r=yr(g,o,T),r!==null&&(on(r,g,T,b),Vl(r,g,T)),T},n}}),dw=Ze((e,t)=>{t.exports=hw()}),qp=Ze(e=>{var t=(qe(),Gt(bs));e.createRoot=t.createRoot,e.hydrateRoot=t.hydrateRoot}),oc=Ze((e,t)=>{(function(i,n){n(typeof e=="object"&&typeof t<"u"?e:(i=i||self).TypesafeActions={})})(e,function(i){function n(E){return E==null}function s(E){throw new Error("Argument "+E+" is empty.")}function a(E){return typeof E=="function"&&"getType"in E}function l(E){throw new Error("Argument "+E+' is invalid, it should be an action-creator instance from "typesafe-actions"')}function c(E,N){if(E==null)throw new Error("Argument contains array with empty element at index "+N);if(E.getType==null)throw new Error("Argument contains array with invalid element at index "+N+', it should be an action-creator instance from "typesafe-actions"')}function h(E){return typeof E=="string"||typeof E=="symbol"}function m(E){return!h(E)}function f(E){throw new Error("Argument "+E+" is invalid, it should be an action type of type: string | symbol")}function y(E,N){if(E==null)throw new Error("Argument contains array with empty element at index "+N);if(typeof E!="string"&&typeof E!="symbol")throw new Error("Argument contains array with invalid element at index "+N+", it should be of type: string | symbol")}function S(E,N,F,U){return n(E)&&s(1),m(E)&&l(1),{type:E,payload:N,meta:F,error:U}}function C(E,N){return n(E)&&s(1),m(E)&&f(1),Object.assign(function(){var F=N!=null?N.apply(void 0,arguments):void 0;return Object.assign({type:E},F)},{getType:function(){return E},toString:function(){return E}})}function _(E,N,F){return n(E)&&s(1),m(E)&&f(1),function(){return C(E,function(){var U=arguments.length<=0?void 0:arguments[0],q=arguments.length<=1?void 0:arguments[1];return N==null&&F==null||(U=N!=null?N.apply(void 0,arguments):void 0,q=F!=null?F.apply(void 0,arguments):void 0),Object.assign({},U!==void 0&&{payload:U},{},q!==void 0&&{meta:q})})}}function P(E){return n(E)&&s(1),a(E)||l(1),E.getType()}function I(E,N){n(E)&&s(1),m(E)&&f(1);var F=N!=null?N(E):function(){return{type:E}};return Object.assign(F,{getType:function(){return E},toString:function(){return E}})}var L={createAction:function(E,N){var F=N==null?function(){return S(E)}:N(S.bind(null,E));return Object.assign(F,{getType:function(){return E},toString:function(){return E}})},createCustomAction:I,createStandardAction:function(E){return n(E)&&s(1),m(E)&&f(1),Object.assign(function(){return I(E,function(N){return function(F,U){return{type:N,payload:F,meta:U}}})},{map:function(N){return I(E,function(F){return function(U,q){return Object.assign(N(U,q),{type:F})}})}})}};i.action=S,i.createAction=_,i.createAsyncAction=function(E,N,F,U){return function(){var q=[E,N,F,U].map(function(G,V){return Array.isArray(G)?_(G[0],G[1],G[2])():typeof G=="string"||typeof G=="symbol"?_(G)():void(V<3&&function(ae){throw new Error("Argument "+ae+' is invalid, it should be an action type of "string | symbol" or a tuple of "[string | symbol, Function, Function?]"')}(V))});return{request:q[0],success:q[1],failure:q[2],cancel:q[3]}}},i.createCustomAction=C,i.createReducer=function E(N,F){F===void 0&&(F={});var U=Object.assign({},F),q=function(G,V){var ae=Array.isArray(G)?G:[G],W={};return ae.map(function(se,pe){return a(se)?P(se):h(se)?se:function(ue){throw new Error("Argument "+ue+' is invalid, it should be an action-creator instance from "typesafe-actions" or action type of type: string | symbol')}(pe+1)}).forEach(function(se){return W[se]=V}),E(N,Object.assign({},U,{},W))};return Object.assign(function(G,V){if(G===void 0&&(G=N),U.hasOwnProperty(V.type)){var ae=U[V.type];if(typeof ae!="function")throw Error('Reducer under "'+V.type+'" key is not a valid reducer');return ae(G,V)}return G},{handlers:Object.assign({},U),handleAction:q,handleType:q})},i.deprecated=L,i.getType=P,i.isActionOf=function(E,N){n(E)&&s(1);var F=Array.isArray(E)?E:[E];F.forEach(c);var U=function(q){return F.some(function(G){return q.type===G.getType()})};return N===void 0?U:U(N)},i.isOfType=function(E,N){n(E)&&s(1);var F=Array.isArray(E)?E:[E];F.forEach(y);var U=function(q){return F.includes(q.type)};return N===void 0?U:U(N)}})}),Qp=Ze((e,t)=>{(function(i,n){typeof e=="object"&&typeof t<"u"?n(e,(qe(),Gt(bs))):(i=typeof globalThis<"u"?globalThis:i||self,n(i.ReactErrorBoundary={},i.React))})(e,function(i,n){function s(C){if(C&&C.__esModule)return C;var _=Object.create(null);return C&&Object.keys(C).forEach(function(P){if(P!=="default"){var I=Object.getOwnPropertyDescriptor(C,P);Object.defineProperty(_,P,I.get?I:{enumerable:!0,get:function(){return C[P]}})}}),_.default=C,Object.freeze(_)}var a=s(n);function l(C,_){return l=Object.setPrototypeOf||function(P,I){return P.__proto__=I,P},l(C,_)}function c(C,_){C.prototype=Object.create(_.prototype),C.prototype.constructor=C,l(C,_)}var h=function(C,_){return C===void 0&&(C=[]),_===void 0&&(_=[]),C.length!==_.length||C.some(function(P,I){return!Object.is(P,_[I])})},m={error:null},f=function(C){c(_,C);function _(){for(var I,L=arguments.length,E=new Array(L),N=0;N<L;N++)E[N]=arguments[N];return I=C.call.apply(C,[this].concat(E))||this,I.state=m,I.resetErrorBoundary=function(){for(var F,U=arguments.length,q=new Array(U),G=0;G<U;G++)q[G]=arguments[G];I.props.onReset==null||(F=I.props).onReset.apply(F,q),I.reset()},I}_.getDerivedStateFromError=function(I){return{error:I}};var P=_.prototype;return P.reset=function(){this.setState(m)},P.componentDidCatch=function(I,L){var E,N;(E=(N=this.props).onError)==null||E.call(N,I,L)},P.componentDidUpdate=function(I,L){var E=this.state.error,N=this.props.resetKeys;if(E!==null&&L.error!==null&&h(I.resetKeys,N)){var F,U;(F=(U=this.props).onResetKeysChange)==null||F.call(U,I.resetKeys,N),this.reset()}},P.render=function(){var I=this.state.error,L=this.props,E=L.fallbackRender,N=L.FallbackComponent,F=L.fallback;if(I!==null){var U={error:I,resetErrorBoundary:this.resetErrorBoundary};if(a.isValidElement(F))return F;if(typeof E=="function")return E(U);if(N)return a.createElement(N,U);throw new Error("react-error-boundary requires either a fallback, fallbackRender, or FallbackComponent prop")}return this.props.children},_}(a.Component);function y(C,_){var P=function(L){return a.createElement(f,_,a.createElement(C,L))},I=C.displayName||C.name||"Unknown";return P.displayName="withErrorBoundary("+I+")",P}function S(C){var _=a.useState(null),P=_[0],I=_[1];if(C!=null)throw C;if(P!=null)throw P;return I}i.ErrorBoundary=f,i.useErrorHandler=S,i.withErrorBoundary=y,Object.defineProperty(i,"__esModule",{value:!0})})});Ye();function Tr(e,t,i,n){function s(){let l=Reflect.construct(HTMLElement,[],s);return l._vdomComponent=e,l._shadowEnabled=n&&n.shadow,l._root=l._shadowEnabled?l.attachShadow({mode:"open"}):l,n.onConstruct&&n.onConstruct(l),l.ready=!1,l.whenReady=c=>{l.ready?c():l.addEventListener("ready",c)},l}s.prototype=Object.create(HTMLElement.prototype),s.prototype.constructor=s,s.prototype.connectedCallback=fw,s.prototype.attributeChangedCallback=gw,s.prototype.disconnectedCallback=mw,i=i||e.observedAttributes||Object.keys(e.propTypes||{}),s.observedAttributes=i,i.forEach(l=>{Object.defineProperty(s.prototype,l,{get(){return this._vdom?this._vdom.props[l]:(this._props||(this._props={}),this._props[l])},set(c){this._vdom?(this._props[l]=c,this.attributeChangedCallback(l,null,c)):(this._props||(this._props={}),this._props[l]=c,this._props[ac(l)]=c);let h=typeof c;(c==null||h==="string"||h==="boolean"||h==="number")&&this.setAttribute(l,c)}})}),n.beforeCreate&&n.beforeCreate(s);let a=t||e.tagName||e.displayName||e.name;if(!customElements.get(a))return customElements.define(t||e.tagName||e.displayName||e.name,s)}function pw(e){this.getChildContext=()=>e.context;let t=e,{context:i,children:n}=t,s=le(t,["context","children"]);return Nu(n,s)}function fw(){let e=new CustomEvent("_preact",{detail:{},bubbles:!0,cancelable:!0});this.dispatchEvent(e);let t=e.detail.context;this._vdom=$(pw,D(A({},this._props),{context:t}),Gp(this,this._vdomComponent,this._shadowEnabled)),(this.hasAttribute("hydrate")?$u:wn)(this._vdom,this._root),this.ready||(this.ready=!0,this.dispatchEvent(new CustomEvent("ready",{detail:{},bubbles:!1,cancelable:!1})))}function ac(e){return e.replace(/-(\w)/g,(t,i)=>i?i.toUpperCase():"")}function gw(e,t,i){if(!this._vdom)return;i=i??void 0;let n={};n[e]=i,n[ac(e)]=i,this._vdom=Nu(this._vdom,n),wn(this._vdom,this._root)}function mw(){wn(this._vdom=null,this._root)}function Vp(e,t){let i=e,{shadow:n,addContextListener:s,removeContextListener:a}=i,l=le(i,["shadow","addContextListener","removeContextListener"]),c=h=>{h?(this.ref=h,this._listener||(this._listener=m=>{m.stopPropagation(),m.detail.context=t},s(this._listener,this.ref))):a(this._listener,this.ref)};return!n&&!this._listener&&(this._listener=h=>{h.stopPropagation(),h.detail.context=t},s(this._listener)),$(n?"slot":Je,D(A({},l),{ref:c}))}function Gp(e,t,i){if(e.nodeType===3)return e.data;if(e.nodeType!==1)return null;let n=[],s={},a=0,l=e.attributes,c=e.childNodes;for(a=l.length;a--;)l[a].name!=="slot"&&(s[l[a].name]=l[a].value,s[ac(l[a].name)]=l[a].value);for(a=c.length;a--;){let m=c[a],f=Gp(m,null,i),y=m.slot;y?s[y]=$(Vp,{name:y,shadow:i,addContextListener(S,C=m){C.addEventListener("_preact",S)},removeContextListener(S,C=m){C.removeEventListener("_preact",S)}},f):n[a]=f}let h=t?$(Vp,{shadow:i,addContextListener(m,f=e){f.addEventListener("_preact",m)},removeContextListener(m,f=e){f.removeEventListener("_preact",m)}},n):n;return!i&&t&&(e.innerHTML=""),$(t||e.nodeName.toLowerCase(),s,h)}qe(),qe(),qe(),qe(),qe();var vw=Be(dw(),1),Yp,Kp,Sa=["onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onTouchCancel","onTouchEnd","onTouchMove","onTouchStart","onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut","onScroll","onWheel","onClick","onDragStart","onDragEnd","onDragEnter","onDragExit","onDrag","onDragOver"];function yw(){return Sa.reduce((e,t)=>(e[t]=[],e),{})}var _s=Sa.reduce((e,t)=>(e[t.slice(2).toLowerCase()]=t,e[t]=t,e),{}),go=(e,t,i)=>{let n=e.length,s=i||Pe(n);for(let a=0;a<n;a++)s[a]=a%5===0?e[a+1]<t[3]&&e[a+3]>t[1]&&e[a+2]<t[4]&&e[a+4]>t[2]?1:0:e[a];return s};function Pe(e,t,i){return new Float32Array(e,t,i)}var bw=(e,t,i)=>{let n=e[1]<=t[3]&&e[3]>=t[1]&&e[2]<=t[4]&&e[4]>=t[2],s=i||Pe(5);return n?(s[0]=1,s[1]=Math.max(e[1],t[1]),s[2]=Math.max(e[2],t[2]),s[3]=Math.min(e[3],t[3]),s[4]=Math.min(e[4],t[4]),s):(s[0]=0,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s)},ww=e=>e.length/5,Fn=(e,t,i)=>{let n=i||Pe(9);return n[0]=e[0]*t[0]+e[1]*t[3]+e[2]*t[6],n[1]=e[0]*t[1]+e[1]*t[4]+e[2]*t[7],n[2]=e[0]*t[2]+e[1]*t[5]+e[2]*t[8],n[3]=e[3]*t[0]+e[4]*t[3]+e[5]*t[6],n[4]=e[3]*t[1]+e[4]*t[4]+e[5]*t[7],n[5]=e[3]*t[2]+e[4]*t[5]+e[5]*t[8],n[6]=e[6]*t[0]+e[7]*t[3]+e[8]*t[6],n[7]=e[6]*t[1]+e[7]*t[4]+e[8]*t[7],n[8]=e[6]*t[2]+e[7]*t[5]+e[8]*t[8],n},st=class{constructor(e){this.index=0,this.length=e,this.points=Pe(this.length)}static grid(e=1,t=1){return new st(5*e*t)}static point(e,t){let i=Pe(5);return i[0]=1,i[1]=e,i[2]=t,i[3]=e,i[4]=t,i}static positionPair(e){let t=Pe(5);return t[0]=1,t[1]=e.x1,t[2]=e.y1,t[3]=e.x2,t[4]=e.y2,t}static projection(e){return st.singleBox(e.width,e.height,e.x,e.y)}static singleBox(e,t,i=0,n=0){let s=Pe(5);return s[0]=1,s[1]=i,s[2]=n,s[3]=e+i,s[4]=t+n,s}row(e){return e(this)}addPoints(e,t,i,n){return this.points[this.index]=1,this.points[1+this.index]=e,this.points[2+this.index]=t,this.points[3+this.index]=i,this.points[4+this.index]=n,this.index+=5,this}addBox(e,t,i,n){return this.addPoints(e,t,e+i,t+n),this}build(){return this.points}},xn=(e,t)=>{let i=e.length;for(let n=0;n<i;n++)e[n]=n%5===0?t[6]*e[n+1]+t[7]*e[n+2]+t[8]*e[n]:n%5%2===1?t[0]*e[n]+t[1]*e[n+1]+t[2]:t[3]*e[n-1]+t[4]*e[n]+t[5];return e},Jn=e=>{let t=Pe(9);return t[0]=e,t[4]=e,t[8]=1,t},Ii=(e,t)=>{let i=Pe(9);return i[0]=1,i[2]=e,i[4]=1,i[5]=t,i[8]=1,i},mo=(e,t,i)=>Fn(Ii((1-e)*t,(1-e)*i),Jn(e)),zn=(e,t,i)=>{let n=e.length,s=i&&i.length>=n?i.slice(0,n):Pe(n);for(let a=0;a<n;a++)s[a]=a%5===0?t[6]*e[a+1]+t[7]*e[a+2]+t[8]*e[a]:a%5%2===1?t[0]*e[a]+t[1]*e[a+1]+t[2]:t[3]*e[a-1]+t[4]*e[a]+t[5];return s},Ea=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce((t,i)=>(i&=63,i<36?t+=i.toString(36):i<62?t+=(i-26).toString(36).toUpperCase():i>62?t+="-":t+="_",t),""),_n=class{constructor(){this.__revision=0,this.__owner={value:void 0},this.__state={},this.scale=1,this.layers=[],this.time=[],this.addEventListener=(e,t,i)=>{let n=_s[e];if(!this.eventHandlers[n])throw new Error(`Unknown event ${n}`);this.eventHandlers[n].indexOf(t)===-1&&this.eventHandlers[n].push(t)},this.removeEventListener=(e,t)=>{let i=_s[e];if(!this.eventHandlers[i]){console.warn(`Unknown event ${i}`);return}this.eventHandlers[i].indexOf(t)!==-1&&(this.eventHandlers[i]=this.eventHandlers[i].filter(n=>n!==t))},this.id=this.__id=Ea(),this.eventHandlers=yw()}get crop(){return this._crop}set crop(e){this._crop=e}getObjectsAt(e){return[]}getAllPointsAt(e,t,i){return[]}getScheduledUpdates(e,t){return[]}dispatchEvent(e,t){let i=this.eventHandlers[e],n=i?i.length:0,s=!1;if(n)for(let a=0;a<n;a++)try{i[a](t),s=!0}catch(l){console.error(e,l)}return s}get x(){return this.points[1]}get y(){return this.points[2]}get width(){return this.points[3]-this.points[1]}get height(){return this.points[4]-this.points[2]}translate(e,t){xn(this.points,Ii(e,t))}atScale(e){xn(this.points,mo(e,this.x,this.y)),this.scale*=e}transform(e){xn(this.points,e)}applyProps(e){this.__revision++}appendChild(e){}removeChild(e){}insertBefore(e,t){}hideInstance(){}},cn=class extends _n{constructor(e){if(super(),this.type="spacial-content",this.style={opacity:1},!e)this.id="",this.uri="",this.display={x:0,y:0,scale:1,width:0,height:0,points:Pe(5)},this.points=Pe(5);else{let t=e.scale||1;this.id=e.id||e.uri,this.uri=e.uri,this.points=st.singleBox(e.width,e.height,e.x,e.y),this.display={x:0,y:0,scale:t,width:e.width/t,height:e.height/t,points:st.singleBox(e.width/t,e.height/t),rotation:e==null?void 0:e.rotation}}}applyProps(e){let t=e.display?e.display.width:e.target.width,i=e.target.width/t;if(this.id=e.id||e.uri,this.uri=e.uri,this.points.set(st.singleBox(e.target.width,e.target.height,e.target.x,e.target.y)),e.style&&typeof e.style.opacity<"u"&&(this.style.opacity=e.style.opacity),e.crop){this.cropData=e.crop;let n=st.singleBox(e.crop.width,e.crop.height,e.crop.x,e.crop.y);xn(n,Ii(-e.crop.x,-e.crop.y)),this.crop?this.crop.set(n):this.crop=Pe(n)}e.display?(this.display.scale=i,this.display.width=e.display.width,this.display.height=e.display.height,this.display.rotation=e.display.rotation,this.display.points=st.singleBox(e.display.width,e.display.height)):(this.display.scale=i,this.display.width=e.target.width/i,this.display.height=e.target.height/i,this.display.points=st.singleBox(e.target.width/i,e.target.height/i))}getAllPointsAt(e,t,i){return[[this,this.crop||this.points,t]]}static fromSvg(e,t,i,n){return cn.fromImage("data:image/svg+xml;base64,"+btoa(e),t,i,n)}static fromImage(e,t,i,n){let s=new cn;return s.applyProps({uri:e,id:n,display:i,target:t}),s}getImageUrl(){return this.uri}},Ca=class extends _n{constructor(e){if(super(),this.type="spacial-content",this.getTexture=()=>({source:void 0,hash:-1}),!e)this.id="",this.uri="",this.display={x:0,y:0,scale:1,width:0,height:0,points:Pe(5)},this.points=Pe(5);else{let t=e.scale||1;this.id=e.id||e.uri,this.uri=e.uri,this.points=st.singleBox(e.width,e.height),this.display={x:0,y:0,scale:t,width:e.width/t,height:e.height/t,points:t!==1?st.singleBox(e.width/t,e.height/t):this.points}}}applyProps(e){let t=e.display?e.display.width:e.target.width,i=e.target.width/t;this.id=e.id,this.points.set(st.singleBox(e.target.width,e.target.height)),this.display.scale=i,this.display.width=e.target.width/i,this.display.height=e.target.height/i,this.getTexture=e.getTexture,this.display.points=i!==1?st.singleBox(e.target.width/i,e.target.height/i):this.points}getAllPointsAt(e,t,i){return[[this,this.points,t]]}};function xw(e,t,i=1){let n=t.length;if(n===0)throw new Error("No resources passed in.");let s=0;for(let a=0;a<n&&!(!t[a]||!t[a].display);a++)s=Math.abs(t[a].display.scale-e)*i<Math.abs(t[s].display.scale-e)?a:s;return s}function Xp(e,t){return Math.abs(e-t)}function ka(e,t){let i=Xp(e.x,t.x),n=Xp(e.y,t.y);return Math.sqrt(Math.pow(i,2)+Math.pow(n,2))}function _w(e){let t=e.length;return e.indexOf("/info.json")===t-10?e.slice(0,-10):e}function Zp(...e){return t=>e.forEach(i=>function(n,s){typeof n=="function"?n(s):n!=null&&(n.current=s)}(i,t))}function Aa(...e){return je(Zp(...e),e)}function xi(){return xi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},xi.apply(this,arguments)}var Jp=di((e,t)=>{let i=e,{children:n}=i,s=le(i,["children"]);return Zn.toArray(n).some(tf)?$(Je,null,Zn.map(n,a=>tf(a)?$(lc,xi({},s,{ref:t}),a.props.children):a)):$(lc,xi({},s,{ref:t}),n)});Jp.displayName="Slot";var lc=di((e,t)=>{let i=e,{children:n}=i,s=le(i,["children"]);return fo(n)?xa(n,D(A({},Sw(s,n.props)),{ref:Zp(t,n.ref)})):Zn.count(n)>1?Zn.only(null):null});lc.displayName="SlotClone";var ef=({children:e})=>$(Je,null,e);function tf(e){return fo(e)&&e.type===ef}function Sw(e,t){let i=A({},t);for(let n in t){let s=e[n],a=t[n];/^on[A-Z]/.test(n)?i[n]=(...l)=>{a==null||a(...l),s==null||s(...l)}:n==="style"?i[n]=A(A({},s),a):n==="className"&&(i[n]=[s,a].filter(Boolean).join(" "))}return A(A({},e),i)}var Ta=globalThis!=null&&globalThis.document?It:()=>{},Pa=function(e,t,i,n){this.name=e,this.fn=t,this.args=i,this.modifiers=n};Pa.prototype._test=function(e){var t=this.fn;try{Ss(this.modifiers.slice(),t,this)(e)}catch{t=function(){return!1}}try{return Ss(this.modifiers.slice(),t,this)(e)}catch{return!1}},Pa.prototype._check=function(e){try{Ss(this.modifiers.slice(),this.fn,this)(e)}catch{if(Ss(this.modifiers.slice(),function(i){return i},this)(!1))return}if(!Ss(this.modifiers.slice(),this.fn,this)(e))throw null},Pa.prototype._testAsync=function(e){var t=this;return new Promise(function(i,n){rf(t.modifiers.slice(),t.fn,t)(e).then(function(s){s?i(e):n(null)}).catch(function(s){return n(s)})})};function nf(e,t){return t===void 0&&(t="simple"),typeof e=="object"?e[t]:e}function Ss(e,t,i){if(e.length){var n=e.shift(),s=Ss(e,t,i);return n.perform(s,i)}else return nf(t)}function rf(e,t,i){if(e.length){var n=e.shift(),s=rf(e,t,i);return n.performAsync(s,i)}else return function(a){return Promise.resolve(nf(t,"async")(a))}}var Ew=function(e,t,i){this.name=e,this.perform=t,this.performAsync=i},uc=function(e){function t(i,n,s,a){for(var l=[],c=arguments.length-4;c-- >0;)l[c]=arguments[c+4];e.call(this,l),e.captureStackTrace&&e.captureStackTrace(this,t),this.rule=i,this.value=n,this.cause=s,this.target=a}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(Error),Sn=function(e,t){e===void 0&&(e=[]),t===void 0&&(t=[]),this.chain=e,this.nextRuleModifiers=t};Sn.prototype._applyRule=function(e,t){var i=this;return function(){for(var n=[],s=arguments.length;s--;)n[s]=arguments[s];return i.chain.push(new Pa(t,e.apply(i,n),n,i.nextRuleModifiers)),i.nextRuleModifiers=[],i}},Sn.prototype._applyModifier=function(e,t){return this.nextRuleModifiers.push(new Ew(t,e.simple,e.async)),this},Sn.prototype._clone=function(){return new Sn(this.chain.slice(),this.nextRuleModifiers.slice())},Sn.prototype.test=function(e){return this.chain.every(function(t){return t._test(e)})},Sn.prototype.testAll=function(e){var t=[];return this.chain.forEach(function(i){try{i._check(e)}catch(n){t.push(new uc(i,e,n))}}),t},Sn.prototype.check=function(e){this.chain.forEach(function(t){try{t._check(e)}catch(i){throw new uc(t,e,i)}})},Sn.prototype.testAsync=function(e){var t=this;return new Promise(function(i,n){sf(e,t.chain.slice(),i,n)})};function sf(e,t,i,n){if(t.length){var s=t.shift();s._testAsync(e).then(function(){sf(e,t,i,n)},function(a){n(new uc(s,e,a))})}else i(e)}var of=function(e,t){return t&&typeof e=="string"&&e.trim().length===0?!0:e==null};function Cw(e,t){return t===void 0&&(t=!1),{simple:function(i){return of(i,t)||e.check(i)===void 0},async:function(i){return of(i,t)||e.testAsync(i)}}}function er(){return typeof Proxy<"u"?af(new Sn):cc(new Sn)}var vo={};er.extend=function(e){Object.assign(vo,e)},er.clearCustomRules=function(){vo={}};function af(e){return new Proxy(e,{get:function(t,i){if(i in t)return t[i];var n=af(e._clone());if(i in Ra)return n._applyModifier(Ra[i],i);if(i in vo)return n._applyRule(vo[i],i);if(i in hc)return n._applyRule(hc[i],i)}})}function cc(e){var t=function(s,a){return Object.keys(s).forEach(function(l){a[l]=function(){for(var c=[],h=arguments.length;h--;)c[h]=arguments[h];var m=cc(a._clone()),f=m._applyRule(s[l],l).apply(void 0,c);return f}}),a},i=t(hc,e),n=t(vo,i);return Object.keys(Ra).forEach(function(s){Object.defineProperty(n,s,{get:function(){var a=cc(n._clone());return a._applyModifier(Ra[s],s)}})}),n}var Ra={not:{simple:function(e){return function(t){return!e(t)}},async:function(e){return function(t){return Promise.resolve(e(t)).then(function(i){return!i}).catch(function(){return!0})}}},some:{simple:function(e){return function(t){return Oa(t).some(function(i){try{return e(i)}catch{return!1}})}},async:function(e){return function(t){return Promise.all(Oa(t).map(function(i){try{return e(i).catch(function(){return!1})}catch{return!1}})).then(function(i){return i.some(Boolean)})}}},every:{simple:function(e){return function(t){return t!==!1&&Oa(t).every(e)}},async:function(e){return function(t){return Promise.all(Oa(t).map(e)).then(function(i){return i.every(Boolean)})}}},strict:{simple:function(e,t){return function(i){return lf(t)&&i&&typeof i=="object"?Object.keys(t.args[0]).length===Object.keys(i).length&&e(i):e(i)}},async:function(e,t){return function(i){return Promise.resolve(e(i)).then(function(n){return lf(t)&&i&&typeof i=="object"?Object.keys(t.args[0]).length===Object.keys(i).length&&n:n}).catch(function(){return!1})}}}};function lf(e){return e&&e.name==="schema"&&e.args.length>0&&typeof e.args[0]=="object"}function Oa(e){return typeof e=="string"?e.split(""):e}var hc={equal:function(e){return function(t){return t==e}},exact:function(e){return function(t){return t===e}},number:function(e){return e===void 0&&(e=!0),function(t){return typeof t=="number"&&(e||isFinite(t))}},integer:function(){return function(e){var t=Number.isInteger||kw;return t(e)}},numeric:function(){return function(e){return!isNaN(parseFloat(e))&&isFinite(e)}},string:function(){return Es("string")},boolean:function(){return Es("boolean")},undefined:function(){return Es("undefined")},null:function(){return Es("null")},array:function(){return Es("array")},object:function(){return Es("object")},instanceOf:function(e){return function(t){return t instanceof e}},pattern:function(e){return function(t){return e.test(t)}},lowercase:function(){return function(e){return typeof e=="boolean"||e===e.toLowerCase()&&e.trim()!==""}},uppercase:function(){return function(e){return e===e.toUpperCase()&&e.trim()!==""}},vowel:function(){return function(e){return/^[aeiou]+$/i.test(e)}},consonant:function(){return function(e){return/^(?=[^aeiou])([a-z]+)$/i.test(e)}},first:function(e){return function(t){return t[0]==e}},last:function(e){return function(t){return t[t.length-1]==e}},empty:function(){return function(e){return e.length===0}},length:function(e,t){return function(i){return i.length>=e&&i.length<=(t||e)}},minLength:function(e){return function(t){return t.length>=e}},maxLength:function(e){return function(t){return t.length<=e}},negative:function(){return function(e){return e<0}},positive:function(){return function(e){return e>=0}},between:function(e,t){return function(i){return i>=e&&i<=t}},range:function(e,t){return function(i){return i>=e&&i<=t}},lessThan:function(e){return function(t){return t<e}},lessThanOrEqual:function(e){return function(t){return t<=e}},greaterThan:function(e){return function(t){return t>e}},greaterThanOrEqual:function(e){return function(t){return t>=e}},even:function(){return function(e){return e%2===0}},odd:function(){return function(e){return e%2!==0}},includes:function(e){return function(t){return~t.indexOf(e)}},schema:function(e){return Aw(e)},passesAnyOf:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return function(i){return e.some(function(n){return n.test(i)})}},optional:Cw};function Es(e){return function(t){return Array.isArray(t)&&e==="array"||t===null&&e==="null"||typeof t===e}}function kw(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e}function Aw(e){return{simple:function(t){var i=[];if(Object.keys(e).forEach(function(n){var s=e[n];try{s.check((t||{})[n])}catch(a){a.target=n,i.push(a)}}),i.length>0)throw i;return!0},async:function(t){var i=[],n=Object.keys(e).map(function(s){var a=e[s];return a.testAsync((t||{})[s]).catch(function(l){l.target=s,i.push(l)})});return Promise.all(n).then(function(){if(i.length>0)throw i;return!0})}}}var vt="colors",Li="sizes",be="space",Tw={gap:be,gridGap:be,columnGap:be,gridColumnGap:be,rowGap:be,gridRowGap:be,inset:be,insetBlock:be,insetBlockEnd:be,insetBlockStart:be,insetInline:be,insetInlineEnd:be,insetInlineStart:be,margin:be,marginTop:be,marginRight:be,marginBottom:be,marginLeft:be,marginBlock:be,marginBlockEnd:be,marginBlockStart:be,marginInline:be,marginInlineEnd:be,marginInlineStart:be,padding:be,paddingTop:be,paddingRight:be,paddingBottom:be,paddingLeft:be,paddingBlock:be,paddingBlockEnd:be,paddingBlockStart:be,paddingInline:be,paddingInlineEnd:be,paddingInlineStart:be,top:be,right:be,bottom:be,left:be,scrollMargin:be,scrollMarginTop:be,scrollMarginRight:be,scrollMarginBottom:be,scrollMarginLeft:be,scrollMarginX:be,scrollMarginY:be,scrollMarginBlock:be,scrollMarginBlockEnd:be,scrollMarginBlockStart:be,scrollMarginInline:be,scrollMarginInlineEnd:be,scrollMarginInlineStart:be,scrollPadding:be,scrollPaddingTop:be,scrollPaddingRight:be,scrollPaddingBottom:be,scrollPaddingLeft:be,scrollPaddingX:be,scrollPaddingY:be,scrollPaddingBlock:be,scrollPaddingBlockEnd:be,scrollPaddingBlockStart:be,scrollPaddingInline:be,scrollPaddingInlineEnd:be,scrollPaddingInlineStart:be,fontSize:"fontSizes",background:vt,backgroundColor:vt,backgroundImage:vt,borderImage:vt,border:vt,borderBlock:vt,borderBlockEnd:vt,borderBlockStart:vt,borderBottom:vt,borderBottomColor:vt,borderColor:vt,borderInline:vt,borderInlineEnd:vt,borderInlineStart:vt,borderLeft:vt,borderLeftColor:vt,borderRight:vt,borderRightColor:vt,borderTop:vt,borderTopColor:vt,caretColor:vt,color:vt,columnRuleColor:vt,fill:vt,outline:vt,outlineColor:vt,stroke:vt,textDecorationColor:vt,fontFamily:"fonts",fontWeight:"fontWeights",lineHeight:"lineHeights",letterSpacing:"letterSpacings",blockSize:Li,minBlockSize:Li,maxBlockSize:Li,inlineSize:Li,minInlineSize:Li,maxInlineSize:Li,width:Li,minWidth:Li,maxWidth:Li,height:Li,minHeight:Li,maxHeight:Li,flexBasis:Li,gridTemplateColumns:Li,gridTemplateRows:Li,borderWidth:"borderWidths",borderTopWidth:"borderWidths",borderRightWidth:"borderWidths",borderBottomWidth:"borderWidths",borderLeftWidth:"borderWidths",borderStyle:"borderStyles",borderTopStyle:"borderStyles",borderRightStyle:"borderStyles",borderBottomStyle:"borderStyles",borderLeftStyle:"borderStyles",borderRadius:"radii",borderTopLeftRadius:"radii",borderTopRightRadius:"radii",borderBottomRightRadius:"radii",borderBottomLeftRadius:"radii",boxShadow:"shadows",textShadow:"shadows",transition:"transitions",zIndex:"zIndices"},Pw=(e,t)=>typeof t=="function"?{"()":Function.prototype.toString.call(t)}:t,Cs=()=>{let e=Object.create(null);return(t,i,...n)=>{let s=(a=>JSON.stringify(a,Pw))(t);return s in e?e[s]:e[s]=i(t,...n)}},Pr=Symbol.for("sxs.internal"),dc=(e,t)=>Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)),uf=e=>{for(let t in e)return!0;return!1},{hasOwnProperty:Rw}=Object.prototype,pc=e=>e.includes("-")?e:e.replace(/[A-Z]/g,t=>"-"+t.toLowerCase()),Ow=/\s+(?![^()]*\))/,ks=e=>t=>e(...typeof t=="string"?String(t).split(Ow):[t]),cf={appearance:e=>({WebkitAppearance:e,appearance:e}),backfaceVisibility:e=>({WebkitBackfaceVisibility:e,backfaceVisibility:e}),backdropFilter:e=>({WebkitBackdropFilter:e,backdropFilter:e}),backgroundClip:e=>({WebkitBackgroundClip:e,backgroundClip:e}),boxDecorationBreak:e=>({WebkitBoxDecorationBreak:e,boxDecorationBreak:e}),clipPath:e=>({WebkitClipPath:e,clipPath:e}),content:e=>({content:e.includes('"')||e.includes("'")||/^([A-Za-z]+\([^]*|[^]*-quote|inherit|initial|none|normal|revert|unset)$/.test(e)?e:`"${e}"`}),hyphens:e=>({WebkitHyphens:e,hyphens:e}),maskImage:e=>({WebkitMaskImage:e,maskImage:e}),maskSize:e=>({WebkitMaskSize:e,maskSize:e}),tabSize:e=>({MozTabSize:e,tabSize:e}),textSizeAdjust:e=>({WebkitTextSizeAdjust:e,textSizeAdjust:e}),userSelect:e=>({WebkitUserSelect:e,userSelect:e}),marginBlock:ks((e,t)=>({marginBlockStart:e,marginBlockEnd:t||e})),marginInline:ks((e,t)=>({marginInlineStart:e,marginInlineEnd:t||e})),maxSize:ks((e,t)=>({maxBlockSize:e,maxInlineSize:t||e})),minSize:ks((e,t)=>({minBlockSize:e,minInlineSize:t||e})),paddingBlock:ks((e,t)=>({paddingBlockStart:e,paddingBlockEnd:t||e})),paddingInline:ks((e,t)=>({paddingInlineStart:e,paddingInlineEnd:t||e}))},fc=/([\d.]+)([^]*)/,Iw=(e,t)=>e.length?e.reduce((i,n)=>(i.push(...t.map(s=>s.includes("&")?s.replace(/&/g,/[ +>|~]/.test(n)&&/&.*&/.test(s)?`:is(${n})`:n):n+" "+s)),i),[]):t,Lw=(e,t)=>e in $w&&typeof t=="string"?t.replace(/^((?:[^]*[^\w-])?)(fit-content|stretch)((?:[^\w-][^]*)?)$/,(i,n,s,a)=>n+(s==="stretch"?`-moz-available${a};${pc(e)}:${n}-webkit-fill-available`:`-moz-fit-content${a};${pc(e)}:${n}fit-content`)+a):String(t),$w={blockSize:1,height:1,inlineSize:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,width:1},Bn=e=>e?e+"-":"",hf=(e,t,i)=>e.replace(/([+-])?((?:\d+(?:\.\d*)?|\.\d+)(?:[Ee][+-]?\d+)?)?(\$|--)([$\w-]+)/g,(n,s,a,l,c)=>l=="$"==!!a?n:(s||l=="--"?"calc(":"")+"var(--"+(l==="$"?Bn(t)+(c.includes("$")?"":Bn(i))+c.replace(/\$/g,"-"):c)+")"+(s||l=="--"?"*"+(s||"")+(a||"1")+")":"")),Nw=/\s*,\s*(?![^()]*\))/,Mw=Object.prototype.toString,As=(e,t,i,n,s)=>{let a,l,c,h=(m,f,y)=>{let S,C,_=P=>{for(S in P){let E=S.charCodeAt(0)===64,N=E&&Array.isArray(P[S])?P[S]:[P[S]];for(C of N){let F=/[A-Z]/.test(L=S)?L:L.replace(/-[^]/g,q=>q[1].toUpperCase()),U=typeof C=="object"&&C&&C.toString===Mw&&(!n.utils[F]||!f.length);if(F in n.utils&&!U){let q=n.utils[F];if(q!==l){l=q,_(q(C)),l=null;continue}}else if(F in cf){let q=cf[F];if(q!==c){c=q,_(q(C)),c=null;continue}}if(E&&(I=S.slice(1)in n.media?"@media "+n.media[S.slice(1)]:S,S=I.replace(/\(\s*([\w-]+)\s*(=|<|<=|>|>=)\s*([\w-]+)\s*(?:(<|<=|>|>=)\s*([\w-]+)\s*)?\)/g,(q,G,V,ae,W,se)=>{let pe=fc.test(G),ue=.0625*(pe?-1:1),[we,he]=pe?[ae,G]:[G,ae];return"("+(V[0]==="="?"":V[0]===">"===pe?"max-":"min-")+we+":"+(V[0]!=="="&&V.length===1?he.replace(fc,(_e,et,J)=>Number(et)+ue*(V===">"?1:-1)+J):he)+(W?") and ("+(W[0]===">"?"min-":"max-")+we+":"+(W.length===1?se.replace(fc,(_e,et,J)=>Number(et)+ue*(W===">"?-1:1)+J):se):"")+")"})),U){let q=E?y.concat(S):[...y],G=E?[...f]:Iw(f,S.split(Nw));a!==void 0&&s(df(...a)),a=void 0,h(C,G,q)}else a===void 0&&(a=[[],f,y]),S=E||S.charCodeAt(0)!==36?S:`--${Bn(n.prefix)}${S.slice(1).replace(/\$/g,"-")}`,C=U?C:typeof C=="number"?C&&F in Fw?String(C)+"px":String(C):hf(Lw(F,C??""),n.prefix,n.themeMap[F]),a[0].push(`${E?`${S} `:`${pc(S)}:`}${C}`)}}var I,L};_(m),a!==void 0&&s(df(...a)),a=void 0};h(e,t,i)},df=(e,t,i)=>`${i.map(n=>`${n}{`).join("")}${t.length?`${t.join(",")}{`:""}${e.join(";")}${t.length?"}":""}${Array(i.length?i.length+1:0).join("}")}`,Fw={animationDelay:1,animationDuration:1,backgroundSize:1,blockSize:1,border:1,borderBlock:1,borderBlockEnd:1,borderBlockEndWidth:1,borderBlockStart:1,borderBlockStartWidth:1,borderBlockWidth:1,borderBottom:1,borderBottomLeftRadius:1,borderBottomRightRadius:1,borderBottomWidth:1,borderEndEndRadius:1,borderEndStartRadius:1,borderInlineEnd:1,borderInlineEndWidth:1,borderInlineStart:1,borderInlineStartWidth:1,borderInlineWidth:1,borderLeft:1,borderLeftWidth:1,borderRadius:1,borderRight:1,borderRightWidth:1,borderSpacing:1,borderStartEndRadius:1,borderStartStartRadius:1,borderTop:1,borderTopLeftRadius:1,borderTopRightRadius:1,borderTopWidth:1,borderWidth:1,bottom:1,columnGap:1,columnRule:1,columnRuleWidth:1,columnWidth:1,containIntrinsicSize:1,flexBasis:1,fontSize:1,gap:1,gridAutoColumns:1,gridAutoRows:1,gridTemplateColumns:1,gridTemplateRows:1,height:1,inlineSize:1,inset:1,insetBlock:1,insetBlockEnd:1,insetBlockStart:1,insetInline:1,insetInlineEnd:1,insetInlineStart:1,left:1,letterSpacing:1,margin:1,marginBlock:1,marginBlockEnd:1,marginBlockStart:1,marginBottom:1,marginInline:1,marginInlineEnd:1,marginInlineStart:1,marginLeft:1,marginRight:1,marginTop:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,offsetDistance:1,offsetRotate:1,outline:1,outlineOffset:1,outlineWidth:1,overflowClipMargin:1,padding:1,paddingBlock:1,paddingBlockEnd:1,paddingBlockStart:1,paddingBottom:1,paddingInline:1,paddingInlineEnd:1,paddingInlineStart:1,paddingLeft:1,paddingRight:1,paddingTop:1,perspective:1,right:1,rowGap:1,scrollMargin:1,scrollMarginBlock:1,scrollMarginBlockEnd:1,scrollMarginBlockStart:1,scrollMarginBottom:1,scrollMarginInline:1,scrollMarginInlineEnd:1,scrollMarginInlineStart:1,scrollMarginLeft:1,scrollMarginRight:1,scrollMarginTop:1,scrollPadding:1,scrollPaddingBlock:1,scrollPaddingBlockEnd:1,scrollPaddingBlockStart:1,scrollPaddingBottom:1,scrollPaddingInline:1,scrollPaddingInlineEnd:1,scrollPaddingInlineStart:1,scrollPaddingLeft:1,scrollPaddingRight:1,scrollPaddingTop:1,shapeMargin:1,textDecoration:1,textDecorationThickness:1,textIndent:1,textUnderlineOffset:1,top:1,transitionDelay:1,transitionDuration:1,verticalAlign:1,width:1,wordSpacing:1},pf=e=>String.fromCharCode(e+(e>25?39:97)),Rr=e=>(t=>{let i,n="";for(i=Math.abs(t);i>52;i=i/52|0)n=pf(i%52)+n;return pf(i%52)+n})(((t,i)=>{let n=i.length;for(;n;)t=33*t^i.charCodeAt(--n);return t})(5381,JSON.stringify(e))>>>0),yo=["themed","global","styled","onevar","resonevar","allvar","inline"],zw=e=>{if(e.href&&!e.href.startsWith(location.origin))return!1;try{return!!e.cssRules}catch{return!1}},Bw=e=>{let t,i=()=>{let{cssRules:s}=t.sheet;return[].map.call(s,(a,l)=>{let{cssText:c}=a,h="";if(c.startsWith("--sxs"))return"";if(s[l-1]&&(h=s[l-1].cssText).startsWith("--sxs")){if(!a.cssRules.length)return"";for(let m in t.rules)if(t.rules[m].group===a)return`--sxs{--sxs:${[...t.rules[m].cache].join(" ")}}${c}`;return a.cssRules.length?`${h}${c}`:""}return c}).join("")},n=()=>{if(t){let{rules:c,sheet:h}=t;if(!h.deleteRule){for(;Object(Object(h.cssRules)[0]).type===3;)h.cssRules.splice(0,1);h.cssRules=[]}for(let m in c)delete c[m]}let s=Object(e).styleSheets||[];for(let c of s)if(zw(c)){for(let h=0,m=c.cssRules;m[h];++h){let f=Object(m[h]);if(f.type!==1)continue;let y=Object(m[h+1]);if(y.type!==4)continue;++h;let{cssText:S}=f;if(!S.startsWith("--sxs"))continue;let C=S.slice(14,-3).trim().split(/\s+/),_=yo[C[0]];_&&(t||(t={sheet:c,reset:n,rules:{},toString:i}),t.rules[_]={group:y,index:h,cache:new Set(C)})}if(t)break}if(!t){let c=(h,m)=>({type:m,cssRules:[],insertRule(f,y){this.cssRules.splice(y,0,c(f,{import:3,undefined:1}[(f.toLowerCase().match(/^@([a-z]+)/)||[])[1]]||4))},get cssText(){return h==="@media{}"?`@media{${[].map.call(this.cssRules,f=>f.cssText).join("")}}`:h}});t={sheet:e?(e.head||e).appendChild(document.createElement("style")).sheet:c("","text/css"),rules:{},reset:n,toString:i}}let{sheet:a,rules:l}=t;for(let c=yo.length-1;c>=0;--c){let h=yo[c];if(!l[h]){let m=yo[c+1],f=l[m]?l[m].index:a.cssRules.length;a.insertRule("@media{}",f),a.insertRule(`--sxs{--sxs:${c}}`,f),l[h]={group:a.cssRules[f+1],index:f,cache:new Set([c])}}jw(l[h])}};return n(),t},jw=e=>{let t=e.group,i=t.cssRules.length;e.apply=n=>{try{t.insertRule(n,i),++i}catch{}}},bo=Symbol(),Dw=Cs(),ff=(e,t)=>Dw(e,()=>(...i)=>{let n={type:null,composers:new Set};for(let s of i)if(s!=null)if(s[Pr]){n.type==null&&(n.type=s[Pr].type);for(let a of s[Pr].composers)n.composers.add(a)}else s.constructor!==Object||s.$$typeof?n.type==null&&(n.type=s):n.composers.add(Uw(s,e));return n.type==null&&(n.type="span"),n.composers.size||n.composers.add(["PJLV",{},[],[],{},[]]),Ww(e,n,t)}),Uw=(e,t)=>{var i=e,{variants:n,compoundVariants:s,defaultVariants:a}=i,l=le(i,["variants","compoundVariants","defaultVariants"]);let c=`${Bn(t.prefix)}c-${Rr(l)}`,h=[],m=[],f=Object.create(null),y=[];for(let _ in a)f[_]=String(a[_]);if(typeof n=="object"&&n)for(let _ in n){S=f,C=_,Rw.call(S,C)||(f[_]="undefined");let P=n[_];for(let I in P){let L={[_]:String(I)};String(I)==="undefined"&&y.push(_);let E=P[I],N=[L,E,!uf(E)];h.push(N)}}var S,C;if(typeof s=="object"&&s)for(let _ of s){let P=_,{css:I}=P,L=le(P,["css"]);I=typeof I=="object"&&I||{};for(let N in L)L[N]=String(L[N]);let E=[L,I,!uf(I)];m.push(E)}return[c,l,h,m,f,y]},Ww=(e,t,i)=>{let[n,s,a,l]=Hw(t.composers),c=typeof t.type=="function"||t.type.$$typeof?(y=>{function S(){for(let C=0;C<S[bo].length;C++){let[_,P]=S[bo][C];y.rules[_].apply(P)}return S[bo]=[],null}return S[bo]=[],S.rules={},yo.forEach(C=>S.rules[C]={apply:_=>S[bo].push([C,_])}),S})(i):null,h=(c||i).rules,m=`.${n}${s.length>1?`:where(.${s.slice(1).join(".")})`:""}`,f=y=>{y=typeof y=="object"&&y||qw;let S=y,{css:C}=S,_=le(S,["css"]),P={};for(let E in a)if(delete _[E],E in y){let N=y[E];typeof N=="object"&&N?P[E]=A({"@initial":a[E]},N):(N=String(N),P[E]=N!=="undefined"||l.has(E)?N:a[E])}else P[E]=a[E];let I=new Set([...s]);for(let[E,N,F,U]of t.composers){i.rules.styled.cache.has(E)||(i.rules.styled.cache.add(E),As(N,[`.${E}`],[],e,V=>{h.styled.apply(V)}));let q=gf(F,P,e.media),G=gf(U,P,e.media,!0);for(let V of q)if(V!==void 0)for(let[ae,W,se]of V){let pe=`${E}-${Rr(W)}-${ae}`;I.add(pe);let ue=(se?i.rules.resonevar:i.rules.onevar).cache,we=se?h.resonevar:h.onevar;ue.has(pe)||(ue.add(pe),As(W,[`.${pe}`],[],e,he=>{we.apply(he)}))}for(let V of G)if(V!==void 0)for(let[ae,W]of V){let se=`${E}-${Rr(W)}-${ae}`;I.add(se),i.rules.allvar.cache.has(se)||(i.rules.allvar.cache.add(se),As(W,[`.${se}`],[],e,pe=>{h.allvar.apply(pe)}))}}if(typeof C=="object"&&C){let E=`${n}-i${Rr(C)}-css`;I.add(E),i.rules.inline.cache.has(E)||(i.rules.inline.cache.add(E),As(C,[`.${E}`],[],e,N=>{h.inline.apply(N)}))}for(let E of String(y.className||"").trim().split(/\s+/))E&&I.add(E);let L=_.className=[...I].join(" ");return{type:t.type,className:L,selector:m,props:_,toString:()=>L,deferredInjector:c}};return dc(f,{className:n,selector:m,[Pr]:t,toString:()=>(i.rules.styled.cache.has(n)||f(),n)})},Hw=e=>{let t="",i=[],n={},s=[];for(let[a,,,,l,c]of e){t===""&&(t=a),i.push(a),s.push(...c);for(let h in l){let m=l[h];(n[h]===void 0||m!=="undefined"||c.includes(m))&&(n[h]=m)}}return[t,i,n,new Set(s)]},gf=(e,t,i,n)=>{let s=[];e:for(let[a,l,c]of e){if(c)continue;let h,m=0,f=!1;for(h in a){let y=a[h],S=t[h];if(S!==y){if(typeof S!="object"||!S)continue e;{let C,_,P=0;for(let I in S){if(y===String(S[I])){if(I!=="@initial"){let L=I.slice(1);(_=_||[]).push(L in i?i[L]:I.replace(/^@media ?/,"")),f=!0}m+=P,C=!0}++P}if(_&&_.length&&(l={["@media "+_.join(", ")]:l}),!C)continue e}}}(s[m]=s[m]||[]).push([n?"cv":`${h}-${a[h]}`,l,f])}return s},qw={},Qw=Cs(),Vw=(e,t)=>Qw(e,()=>(...i)=>{let n=()=>{for(let s of i){s=typeof s=="object"&&s||{};let a=Rr(s);if(!t.rules.global.cache.has(a)){if(t.rules.global.cache.add(a),"@import"in s){let l=[].indexOf.call(t.sheet.cssRules,t.rules.themed.group)-1;for(let c of[].concat(s["@import"]))c=c.includes('"')||c.includes("'")?c:`"${c}"`,t.sheet.insertRule(`@import ${c};`,l++);delete s["@import"]}As(s,[],[],e,l=>{t.rules.global.apply(l)})}}return""};return dc(n,{toString:n})}),Gw=Cs(),Yw=(e,t)=>Gw(e,()=>i=>{let n=`${Bn(e.prefix)}k-${Rr(i)}`,s=()=>{if(!t.rules.global.cache.has(n)){t.rules.global.cache.add(n);let a=[];As(i,[],[],e,c=>a.push(c));let l=`@keyframes ${n}{${a.join("")}}`;t.rules.global.apply(l)}return n};return dc(s,{get name(){return s()},toString:s})}),Kw=class{constructor(e,t,i,n){this.token=e==null?"":String(e),this.value=t==null?"":String(t),this.scale=i==null?"":String(i),this.prefix=n==null?"":String(n)}get computedValue(){return"var("+this.variable+")"}get variable(){return"--"+Bn(this.prefix)+Bn(this.scale)+this.token}toString(){return this.computedValue}},Xw=Cs(),Zw=(e,t)=>Xw(e,()=>(i,n)=>{n=typeof i=="object"&&i||Object(n);let s=`.${i=(i=typeof i=="string"?i:"")||`${Bn(e.prefix)}t-${Rr(n)}`}`,a={},l=[];for(let h in n){a[h]={};for(let m in n[h]){let f=`--${Bn(e.prefix)}${h}-${m}`,y=hf(String(n[h][m]),e.prefix,h);a[h][m]=new Kw(m,y,h,e.prefix),l.push(`${f}:${y}`)}}let c=()=>{if(l.length&&!t.rules.themed.cache.has(i)){t.rules.themed.cache.add(i);let h=`${n===e.theme?":root,":""}.${i}{${l.join(";")}}`;t.rules.themed.apply(h)}return i};return D(A({},a),{get className(){return c()},selector:s,toString:c})}),Jw=Cs(),ex=Cs(),tx=e=>{let t=(i=>{let n=!1,s=Jw(i,a=>{n=!0;let l="prefix"in(a=typeof a=="object"&&a||{})?String(a.prefix):"",c=typeof a.media=="object"&&a.media||{},h=typeof a.root=="object"?a.root||null:globalThis.document||null,m=typeof a.theme=="object"&&a.theme||{},f={prefix:l,media:c,theme:m,themeMap:typeof a.themeMap=="object"&&a.themeMap||A({},Tw),utils:typeof a.utils=="object"&&a.utils||{}},y=Bw(h),S={css:ff(f,y),globalCss:Vw(f,y),keyframes:Yw(f,y),createTheme:Zw(f,y),reset(){y.reset(),S.theme.toString()},theme:{},sheet:y,config:f,prefix:l,getCssText:y.toString,toString:y.toString};return String(S.theme=S.createTheme(m)),S});return n||s.reset(),s})(e);return t.styled=(({config:i,sheet:n})=>ex(i,()=>{let s=ff(i,n);return(...a)=>{let l=s(...a),c=l[Pr].type,h=Z.forwardRef((m,f)=>{let y=m&&m.as||c,{props:S,deferredInjector:C}=l(m);return delete S.as,S.ref=f,C?Z.createElement(Z.Fragment,null,Z.createElement(y,S),Z.createElement(C,null)):Z.createElement(y,S)});return h.className=l.className,h.displayName=`Styled.${c.displayName||c.name||c}`,h.selector=l.selector,h.toString=()=>l.selector,h[Pr]=l[Pr],h}}))(t),t};function ix(e,t,i){return Math.max(t,Math.min(e,i))}var _i={toVector(e,t){return e===void 0&&(e=t),Array.isArray(e)?e:[e,e]},add(e,t){return[e[0]+t[0],e[1]+t[1]]},sub(e,t){return[e[0]-t[0],e[1]-t[1]]},addTo(e,t){e[0]+=t[0],e[1]+=t[1]},subTo(e,t){e[0]-=t[0],e[1]-=t[1]}};function mf(e,t,i){return t===0||Math.abs(t)===1/0?Math.pow(e,i*5):e*t*i/(t+i*e)}function vf(e,t,i,n=.15){return n===0?ix(e,t,i):e<t?-mf(t-e,i-t,n)+t:e>i?+mf(e-i,i-t,n)+i:e}function nx(e,[t,i],[n,s]){let[[a,l],[c,h]]=e;return[vf(t,a,l,n),vf(i,c,h,s)]}function rx(e,t){if(typeof e!="object"||e===null)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var n=i.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function sx(e){var t=rx(e,"string");return typeof t=="symbol"?t:String(t)}function zi(e,t,i){return t=sx(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function yf(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),i.push.apply(i,n)}return i}function Lt(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?yf(Object(i),!0).forEach(function(n){zi(e,n,i[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):yf(Object(i)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))})}return e}var bf={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function wf(e){return e?e[0].toUpperCase()+e.slice(1):""}var ox=["enter","leave"];function ax(e=!1,t){return e&&!ox.includes(t)}function lx(e,t="",i=!1){let n=bf[e],s=n&&n[t]||t;return"on"+wf(e)+wf(s)+(ax(i,s)?"Capture":"")}var ux=["gotpointercapture","lostpointercapture"];function cx(e){let t=e.substring(2).toLowerCase(),i=!!~t.indexOf("passive");i&&(t=t.replace("passive",""));let n=ux.includes(t)?"capturecapture":"capture",s=!!~t.indexOf(n);return s&&(t=t.replace("capture","")),{device:t,capture:s,passive:i}}function hx(e,t=""){let i=bf[e],n=i&&i[t]||t;return e+n}function Ia(e){return"touches"in e}function xf(e){return Ia(e)?"touch":"pointerType"in e?e.pointerType:"mouse"}function dx(e){return Array.from(e.touches).filter(t=>{var i,n;return t.target===e.currentTarget||((i=e.currentTarget)===null||i===void 0||(n=i.contains)===null||n===void 0?void 0:n.call(i,t.target))})}function px(e){return e.type==="touchend"||e.type==="touchcancel"?e.changedTouches:e.targetTouches}function _f(e){return Ia(e)?px(e)[0]:e}function fx(e){return dx(e).map(t=>t.identifier)}function gc(e){let t=_f(e);return Ia(e)?t.identifier:t.pointerId}function Sf(e){let t=_f(e);return[t.clientX,t.clientY]}function gx(e){let t={};if("buttons"in e&&(t.buttons=e.buttons),"shiftKey"in e){let{shiftKey:i,altKey:n,metaKey:s,ctrlKey:a}=e;Object.assign(t,{shiftKey:i,altKey:n,metaKey:s,ctrlKey:a})}return t}function La(e,...t){return typeof e=="function"?e(...t):e}function mx(){}function vx(...e){return e.length===0?mx:e.length===1?e[0]:function(){let t;for(let i of e)t=i.apply(this,arguments)||t;return t}}function Ef(e,t){return Object.assign({},t,e||{})}var yx=32,bx=class{constructor(e,t,i){this.ctrl=e,this.args=t,this.key=i,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(e){this.ctrl.state[this.key]=e}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){let{state:e,shared:t,ingKey:i,args:n}=this;t[i]=e._active=e.active=e._blocked=e._force=!1,e._step=[!1,!1],e.intentional=!1,e._movement=[0,0],e._distance=[0,0],e._direction=[0,0],e._delta=[0,0],e._bounds=[[-1/0,1/0],[-1/0,1/0]],e.args=n,e.axis=void 0,e.memo=void 0,e.elapsedTime=0,e.direction=[0,0],e.distance=[0,0],e.overflow=[0,0],e._movementBound=[!1,!1],e.velocity=[0,0],e.movement=[0,0],e.delta=[0,0],e.timeStamp=0}start(e){let t=this.state,i=this.config;t._active||(this.reset(),this.computeInitial(),t._active=!0,t.target=e.target,t.currentTarget=e.currentTarget,t.lastOffset=i.from?La(i.from,t):t.offset,t.offset=t.lastOffset),t.startTime=t.timeStamp=e.timeStamp}computeValues(e){let t=this.state;t._values=e,t.values=this.config.transform(e)}computeInitial(){let e=this.state;e._initial=e._values,e.initial=e.values}compute(e){let{state:t,config:i,shared:n}=this;t.args=this.args;let s=0;if(e&&(t.event=e,i.preventDefault&&e.cancelable&&t.event.preventDefault(),t.type=e.type,n.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,n.locked=!!document.pointerLockElement,Object.assign(n,gx(e)),n.down=n.pressed=n.buttons%2===1||n.touches>0,s=e.timeStamp-t.timeStamp,t.timeStamp=e.timeStamp,t.elapsedTime=t.timeStamp-t.startTime),t._active){let U=t._delta.map(Math.abs);_i.addTo(t._distance,U)}this.axisIntent&&this.axisIntent(e);let[a,l]=t._movement,[c,h]=i.threshold,{_step:m,values:f}=t;if(i.hasCustomTransform?(m[0]===!1&&(m[0]=Math.abs(a)>=c&&f[0]),m[1]===!1&&(m[1]=Math.abs(l)>=h&&f[1])):(m[0]===!1&&(m[0]=Math.abs(a)>=c&&Math.sign(a)*c),m[1]===!1&&(m[1]=Math.abs(l)>=h&&Math.sign(l)*h)),t.intentional=m[0]!==!1||m[1]!==!1,!t.intentional)return;let y=[0,0];if(i.hasCustomTransform){let[U,q]=f;y[0]=m[0]!==!1?U-m[0]:0,y[1]=m[1]!==!1?q-m[1]:0}else y[0]=m[0]!==!1?a-m[0]:0,y[1]=m[1]!==!1?l-m[1]:0;this.restrictToAxis&&!t._blocked&&this.restrictToAxis(y);let S=t.offset,C=t._active&&!t._blocked||t.active;C&&(t.first=t._active&&!t.active,t.last=!t._active&&t.active,t.active=n[this.ingKey]=t._active,e&&(t.first&&("bounds"in i&&(t._bounds=La(i.bounds,t)),this.setup&&this.setup()),t.movement=y,this.computeOffset()));let[_,P]=t.offset,[[I,L],[E,N]]=t._bounds;t.overflow=[_<I?-1:_>L?1:0,P<E?-1:P>N?1:0],t._movementBound[0]=t.overflow[0]?t._movementBound[0]===!1?t._movement[0]:t._movementBound[0]:!1,t._movementBound[1]=t.overflow[1]?t._movementBound[1]===!1?t._movement[1]:t._movementBound[1]:!1;let F=t._active?i.rubberband||[0,0]:[0,0];if(t.offset=nx(t._bounds,t.offset,F),t.delta=_i.sub(t.offset,S),this.computeMovement(),C&&(!t.last||s>yx)){t.delta=_i.sub(t.offset,S);let U=t.delta.map(Math.abs);_i.addTo(t.distance,U),t.direction=t.delta.map(Math.sign),t._direction=t._delta.map(Math.sign),!t.first&&s>0&&(t.velocity=[U[0]/s,U[1]/s])}}emit(){let e=this.state,t=this.shared,i=this.config;if(e._active||this.clean(),(e._blocked||!e.intentional)&&!e._force&&!i.triggerAllEvents)return;let n=this.handler(Lt(Lt(Lt({},t),e),{},{[this.aliasKey]:e.values}));n!==void 0&&(e.memo=n)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}};function wx([e,t],i){let n=Math.abs(e),s=Math.abs(t);if(n>s&&n>i)return"x";if(s>n&&s>i)return"y"}var xx=class extends bx{constructor(...e){super(...e),zi(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=_i.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=_i.sub(this.state.offset,this.state.lastOffset)}axisIntent(e){let t=this.state,i=this.config;if(!t.axis&&e){let n=typeof i.axisThreshold=="object"?i.axisThreshold[xf(e)]:i.axisThreshold;t.axis=wx(t._movement,n)}t._blocked=(i.lockDirection||!!i.axis)&&!t.axis||!!i.axis&&i.axis!==t.axis}restrictToAxis(e){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":e[1]=0;break;case"y":e[0]=0;break}}},_x=e=>e,Cf=.15,kf={enabled(e=!0){return e},eventOptions(e,t,i){return Lt(Lt({},i.shared.eventOptions),e)},preventDefault(e=!1){return e},triggerAllEvents(e=!1){return e},rubberband(e=0){switch(e){case!0:return[Cf,Cf];case!1:return[0,0];default:return _i.toVector(e)}},from(e){if(typeof e=="function")return e;if(e!=null)return _i.toVector(e)},transform(e,t,i){let n=e||i.shared.transform;return this.hasCustomTransform=!!n,n||_x},threshold(e){return _i.toVector(e,0)}},Sx=0,wo=Lt(Lt({},kf),{},{axis(e,t,{axis:i}){if(this.lockDirection=i==="lock",!this.lockDirection)return i},axisThreshold(e=Sx){return e},bounds(e={}){if(typeof e=="function")return a=>wo.bounds(e(a));if("current"in e)return()=>e.current;if(typeof HTMLElement=="function"&&e instanceof HTMLElement)return e;let{left:t=-1/0,right:i=1/0,top:n=-1/0,bottom:s=1/0}=e;return[[t,i],[n,s]]}}),Af={ArrowRight:(e,t=1)=>[e*t,0],ArrowLeft:(e,t=1)=>[-1*e*t,0],ArrowUp:(e,t=1)=>[0,-1*e*t],ArrowDown:(e,t=1)=>[0,e*t]},Ex=class extends xx{constructor(...e){super(...e),zi(this,"ingKey","dragging")}reset(){super.reset();let e=this.state;e._pointerId=void 0,e._pointerActive=!1,e._keyboardActive=!1,e._preventScroll=!1,e._delayed=!1,e.swipe=[0,0],e.tap=!1,e.canceled=!1,e.cancel=this.cancel.bind(this)}setup(){let e=this.state;if(e._bounds instanceof HTMLElement){let t=e._bounds.getBoundingClientRect(),i=e.currentTarget.getBoundingClientRect(),n={left:t.left-i.left+e.offset[0],right:t.right-i.right+e.offset[0],top:t.top-i.top+e.offset[1],bottom:t.bottom-i.bottom+e.offset[1]};e._bounds=wo.bounds(n)}}cancel(){let e=this.state;e.canceled||(e.canceled=!0,e._active=!1,setTimeout(()=>{this.compute(),this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(e){let t=this.config,i=this.state;if(e.buttons!=null&&(Array.isArray(t.pointerButtons)?!t.pointerButtons.includes(e.buttons):t.pointerButtons!==-1&&t.pointerButtons!==e.buttons))return;let n=this.ctrl.setEventIds(e);t.pointerCapture&&e.target.setPointerCapture(e.pointerId),!(n&&n.size>1&&i._pointerActive)&&(this.start(e),this.setupPointer(e),i._pointerId=gc(e),i._pointerActive=!0,this.computeValues(Sf(e)),this.computeInitial(),t.preventScrollAxis&&xf(e)!=="mouse"?(i._active=!1,this.setupScrollPrevention(e)):t.delay>0?(this.setupDelayTrigger(e),t.triggerAllEvents&&(this.compute(e),this.emit())):this.startPointerDrag(e))}startPointerDrag(e){let t=this.state;t._active=!0,t._preventScroll=!0,t._delayed=!1,this.compute(e),this.emit()}pointerMove(e){let t=this.state,i=this.config;if(!t._pointerActive||t.type===e.type&&e.timeStamp===t.timeStamp)return;let n=gc(e);if(t._pointerId!==void 0&&n!==t._pointerId)return;let s=Sf(e);if(document.pointerLockElement===e.target?t._delta=[e.movementX,e.movementY]:(t._delta=_i.sub(s,t._values),this.computeValues(s)),_i.addTo(t._movement,t._delta),this.compute(e),t._delayed&&t.intentional){this.timeoutStore.remove("dragDelay"),t.active=!1,this.startPointerDrag(e);return}if(i.preventScrollAxis&&!t._preventScroll)if(t.axis)if(t.axis===i.preventScrollAxis||i.preventScrollAxis==="xy"){t._active=!1,this.clean();return}else{this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(e);return}else return;this.emit()}pointerUp(e){this.ctrl.setEventIds(e);try{this.config.pointerCapture&&e.target.hasPointerCapture(e.pointerId)&&e.target.releasePointerCapture(e.pointerId)}catch{}let t=this.state,i=this.config;if(!t._active||!t._pointerActive)return;let n=gc(e);if(t._pointerId!==void 0&&n!==t._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(e);let[s,a]=t._distance;if(t.tap=s<=i.tapsThreshold&&a<=i.tapsThreshold,t.tap&&i.filterTaps)t._force=!0;else{let[l,c]=t.direction,[h,m]=t.velocity,[f,y]=t.movement,[S,C]=i.swipe.velocity,[_,P]=i.swipe.distance,I=i.swipe.duration;t.elapsedTime<I&&(Math.abs(h)>S&&Math.abs(f)>_&&(t.swipe[0]=l),Math.abs(m)>C&&Math.abs(y)>P&&(t.swipe[1]=c))}this.emit()}pointerClick(e){!this.state.tap&&e.detail>0&&(e.preventDefault(),e.stopPropagation())}setupPointer(e){let t=this.config,i=t.device;t.pointerLock&&e.currentTarget.requestPointerLock(),t.pointerCapture||(this.eventStore.add(this.sharedConfig.window,i,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,i,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,i,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(e){this.state._preventScroll&&e.cancelable&&e.preventDefault()}setupScrollPrevention(e){this.state._preventScroll=!1,Cx(e);let t=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",t),this.eventStore.add(this.sharedConfig.window,"touch","cancel",t),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,e)}setupDelayTrigger(e){this.state._delayed=!0,this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0],this.startPointerDrag(e)},this.config.delay)}keyDown(e){let t=Af[e.key];if(t){let i=this.state,n=e.shiftKey?10:e.altKey?.1:1;this.start(e),i._delta=t(this.config.keyboardDisplacement,n),i._keyboardActive=!0,_i.addTo(i._movement,i._delta),this.compute(e),this.emit()}}keyUp(e){e.key in Af&&(this.state._keyboardActive=!1,this.setActive(),this.compute(e),this.emit())}bind(e){let t=this.config.device;e(t,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(e(t,"change",this.pointerMove.bind(this)),e(t,"end",this.pointerUp.bind(this)),e(t,"cancel",this.pointerUp.bind(this)),e("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(e("key","down",this.keyDown.bind(this)),e("key","up",this.keyUp.bind(this))),this.config.filterTaps&&e("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}};function Cx(e){"persist"in e&&typeof e.persist=="function"&&e.persist()}var xo=typeof window<"u"&&window.document&&window.document.createElement;function kx(){return xo&&"ontouchstart"in window}function Tf(){return kx()||xo&&window.navigator.maxTouchPoints>1}function Ax(){return xo&&"onpointerdown"in window}function Tx(){return xo&&"exitPointerLock"in window.document}function Px(){try{return"constructor"in GestureEvent}catch{return!1}}var Zi={isBrowser:xo,gesture:Px(),touch:Tf(),touchscreen:Tf(),pointer:Ax(),pointerLock:Tx()},Rx=250,Ox=180,Ix=.5,Lx=50,$x=250,Nx=10,Pf={mouse:0,touch:0,pen:8},Mx=Lt(Lt({},wo),{},{device(e,t,{pointer:{touch:i=!1,lock:n=!1,mouse:s=!1}={}}){return this.pointerLock=n&&Zi.pointerLock,Zi.touch&&i?"touch":this.pointerLock?"mouse":Zi.pointer&&!s?"pointer":Zi.touch?"touch":"mouse"},preventScrollAxis(e,t,{preventScroll:i}){if(this.preventScrollDelay=typeof i=="number"?i:i||i===void 0&&e?Rx:void 0,!(!Zi.touchscreen||i===!1))return e||(i!==void 0?"y":void 0)},pointerCapture(e,t,{pointer:{capture:i=!0,buttons:n=1,keys:s=!0}={}}){return this.pointerButtons=n,this.keys=s,!this.pointerLock&&this.device==="pointer"&&i},threshold(e,t,{filterTaps:i=!1,tapsThreshold:n=3,axis:s=void 0}){let a=_i.toVector(e,i?n:s?1:0);return this.filterTaps=i,this.tapsThreshold=n,a},swipe({velocity:e=Ix,distance:t=Lx,duration:i=$x}={}){return{velocity:this.transform(_i.toVector(e)),distance:this.transform(_i.toVector(t)),duration:i}},delay(e=0){switch(e){case!0:return Ox;case!1:return 0;default:return e}},axisThreshold(e){return e?Lt(Lt({},Pf),e):Pf},keyboardDisplacement(e=Nx){return e}});Lt(Lt({},kf),{},{device(e,t,{shared:i,pointer:{touch:n=!1}={}}){if(i.target&&!Zi.touch&&Zi.gesture)return"gesture";if(Zi.touch&&n)return"touch";if(Zi.touchscreen){if(Zi.pointer)return"pointer";if(Zi.touch)return"touch"}},bounds(e,t,{scaleBounds:i={},angleBounds:n={}}){let s=l=>{let c=Ef(La(i,l),{min:-1/0,max:1/0});return[c.min,c.max]},a=l=>{let c=Ef(La(n,l),{min:-1/0,max:1/0});return[c.min,c.max]};return typeof i!="function"&&typeof n!="function"?[s(),a()]:l=>[s(l),a(l)]},threshold(e,t,i){return this.lockDirection=i.axis==="lock",_i.toVector(e,this.lockDirection?[.1,3]:0)},modifierKey(e){return e===void 0?"ctrlKey":e},pinchOnWheel(e=!0){return e}}),Lt(Lt({},wo),{},{mouseOnly:(e=!0)=>e}),Lt(Lt({},wo),{},{mouseOnly:(e=!0)=>e});var Rf=new Map,mc=new Map;function Fx(e){Rf.set(e.key,e.engine),mc.set(e.key,e.resolver)}var zx={key:"drag",engine:Ex,resolver:Mx};function Bx(e,t){if(e==null)return{};var i={},n=Object.keys(e),s,a;for(a=0;a<n.length;a++)s=n[a],!(t.indexOf(s)>=0)&&(i[s]=e[s]);return i}function jx(e,t){if(e==null)return{};var i=Bx(e,t),n,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(s=0;s<a.length;s++)n=a[s],!(t.indexOf(n)>=0)&&(!Object.prototype.propertyIsEnumerable.call(e,n)||(i[n]=e[n]))}return i}var Dx={target(e){if(e)return()=>"current"in e?e.current:e},enabled(e=!0){return e},window(e=Zi.isBrowser?window:void 0){return e},eventOptions({passive:e=!0,capture:t=!1}={}){return{passive:e,capture:t}},transform(e){return e}},Ux=["target","eventOptions","window","enabled","transform"];function $a(e={},t){let i={};for(let[n,s]of Object.entries(t))switch(typeof s){case"function":i[n]=s.call(i,e[n],n,e);break;case"object":i[n]=$a(e[n],s);break;case"boolean":s&&(i[n]=e[n]);break}return i}function Wx(e,t,i={}){let n=e,{target:s,eventOptions:a,window:l,enabled:c,transform:h}=n,m=jx(n,Ux);if(i.shared=$a({target:s,eventOptions:a,window:l,enabled:c,transform:h},Dx),t){let f=mc.get(t);i[t]=$a(Lt({shared:i.shared},m),f)}else for(let f in m){let y=mc.get(f);y&&(i[f]=$a(Lt({shared:i.shared},m[f]),y))}return i}var Of=class{constructor(e,t){zi(this,"_listeners",new Set),this._ctrl=e,this._gestureKey=t}add(e,t,i,n,s){let a=this._listeners,l=hx(t,i),c=this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{},h=Lt(Lt({},c),s);e.addEventListener(l,n,h);let m=()=>{e.removeEventListener(l,n,h),a.delete(m)};return a.add(m),m}clean(){this._listeners.forEach(e=>e()),this._listeners.clear()}},Hx=class{constructor(){zi(this,"_timeouts",new Map)}add(e,t,i=140,...n){this.remove(e),this._timeouts.set(e,window.setTimeout(t,i,...n))}remove(e){let t=this._timeouts.get(e);t&&window.clearTimeout(t)}clean(){this._timeouts.forEach(e=>void window.clearTimeout(e)),this._timeouts.clear()}},qx=class{constructor(e){zi(this,"gestures",new Set),zi(this,"_targetEventStore",new Of(this)),zi(this,"gestureEventStores",{}),zi(this,"gestureTimeoutStores",{}),zi(this,"handlers",{}),zi(this,"config",{}),zi(this,"pointerIds",new Set),zi(this,"touchIds",new Set),zi(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),Qx(this,e)}setEventIds(e){if(Ia(e))return this.touchIds=new Set(fx(e)),this.touchIds;if("pointerId"in e)return e.type==="pointerup"||e.type==="pointercancel"?this.pointerIds.delete(e.pointerId):e.type==="pointerdown"&&this.pointerIds.add(e.pointerId),this.pointerIds}applyHandlers(e,t){this.handlers=e,this.nativeHandlers=t}applyConfig(e,t){this.config=Wx(e,t,this.config)}clean(){this._targetEventStore.clean();for(let e of this.gestures)this.gestureEventStores[e].clean(),this.gestureTimeoutStores[e].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...e){let t=this.config.shared,i={},n;if(!(t.target&&(n=t.target(),!n))){if(t.enabled){for(let a of this.gestures){let l=this.config[a],c=If(i,l.eventOptions,!!n);if(l.enabled){let h=Rf.get(a);new h(this,e,a).bind(c)}}let s=If(i,t.eventOptions,!!n);for(let a in this.nativeHandlers)s(a,"",l=>this.nativeHandlers[a](Lt(Lt({},this.state.shared),{},{event:l,args:e})),void 0,!0)}for(let s in i)i[s]=vx(...i[s]);if(!n)return i;for(let s in i){let{device:a,capture:l,passive:c}=cx(s);this._targetEventStore.add(n,a,"",i[s],{capture:l,passive:c})}}}};function Ts(e,t){e.gestures.add(t),e.gestureEventStores[t]=new Of(e,t),e.gestureTimeoutStores[t]=new Hx}function Qx(e,t){t.drag&&Ts(e,"drag"),t.wheel&&Ts(e,"wheel"),t.scroll&&Ts(e,"scroll"),t.move&&Ts(e,"move"),t.pinch&&Ts(e,"pinch"),t.hover&&Ts(e,"hover")}var If=(e,t,i)=>(n,s,a,l={},c=!1)=>{var h,m;let f=(h=l.capture)!==null&&h!==void 0?h:t.capture,y=(m=l.passive)!==null&&m!==void 0?m:t.passive,S=c?n:lx(n,s,f);i&&y&&(S+="Passive"),e[S]=e[S]||[],e[S].push(a)};function Vx(e,t={},i,n){let s=Z.useMemo(()=>new qx(e),[]);if(s.applyHandlers(e,n),s.applyConfig(t,i),Z.useEffect(s.effect.bind(s)),Z.useEffect(()=>s.clean.bind(s),[]),t.target===void 0)return s.bind.bind(s)}function Gx(e,t){return Fx(zx),Vx({drag:e},t||{},"drag")}var Yx=bs["useId".toString()]||(()=>{}),Kx=0;function Xx(e){let[t,i]=Ne(Yx());return Ta(()=>{e||i(n=>n??String(Kx++))},[e]),e||(t?`radix-${t}`:"")}var Ps=["a","button","div","h2","h3","img","li","nav","p","span","svg","ul"].reduce((e,t)=>D(A({},e),{[t]:di((i,n)=>{let s=i,{asChild:a}=s,l=le(s,["asChild"]),c=a?Jp:t;return de(()=>{window[Symbol.for("radix-ui")]=!0},[]),i.as&&console.error(Zx),$(c,xi({},l,{ref:n}))})}),{}),Zx="Warning: The `as` prop has been removed in favour of `asChild`. For details, see https://radix-ui.com/docs/primitives/overview/styling#changing-the-rendered-element",Jx=di((e,t)=>$(Ps.span,xi({},e,{ref:t,style:D(A({},e.style),{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"})}))),e_=Jx,t_=di((e,t)=>{var i,n;let s=e,{containerRef:a,style:l}=s,c=le(s,["containerRef","style"]),h=(i=a==null?void 0:a.current)!==null&&i!==void 0?i:globalThis==null||(n=globalThis.document)===null||n===void 0?void 0:n.body,[,m]=Ne({});return Ta(()=>{m({})},[]),h?Z.createPortal($(Ps.div,xi({"data-radix-portal":""},c,{ref:t,style:h===document.body?A({position:"absolute",top:0,left:0,zIndex:2147483647},l):void 0})),h):null}),i_=di((e,t)=>{let i=e,{children:n,width:s=10,height:a=5}=i,l=le(i,["children","width","height"]);return $(Ps.svg,xi({},l,{ref:t,width:s,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none"}),e.asChild?n:$("polygon",{points:"0,0 30,0 15,10"}))}),n_=i_;function Lf(e){let[t,i]=Ne(void 0);return de(()=>{if(e){let n=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;let a=s[0],l,c;if("borderBoxSize"in a){let h=a.borderBoxSize,m=Array.isArray(h)?h[0]:h;l=m.inlineSize,c=m.blockSize}else{let h=e.getBoundingClientRect();l=h.width,c=h.height}i({width:l,height:c})});return n.observe(e,{box:"border-box"}),()=>{i(void 0),n.unobserve(e)}}},[e]),t}function r_(e,t){let i=Or.get(e);return i===void 0?(Or.set(e,{rect:{},callbacks:[t]}),Or.size===1&&(vc=requestAnimationFrame($f))):(i.callbacks.push(t),t(e.getBoundingClientRect())),()=>{let n=Or.get(e);if(n===void 0)return;let s=n.callbacks.indexOf(t);s>-1&&n.callbacks.splice(s,1),n.callbacks.length===0&&(Or.delete(e),Or.size===0&&cancelAnimationFrame(vc))}}var vc,Or=new Map;function $f(){let e=[];Or.forEach((t,i)=>{let n=i.getBoundingClientRect();var s,a;s=t.rect,a=n,(s.width!==a.width||s.height!==a.height||s.top!==a.top||s.right!==a.right||s.bottom!==a.bottom||s.left!==a.left)&&(t.rect=n,e.push(t))}),e.forEach(t=>{t.callbacks.forEach(i=>i(t.rect))}),vc=requestAnimationFrame($f)}function Nf(e){let[t,i]=Ne();return de(()=>{if(e){let n=r_(e,i);return()=>{i(void 0),n()}}},[e]),t}function Mf(e,t=[]){let i=[],n=()=>{let s=i.map(a=>ii(a));return function(a){let l=(a==null?void 0:a[e])||s;return Ee(()=>({[`__scope${e}`]:D(A({},a),{[e]:l})}),[a,l])}};return n.scopeName=e,[function(s,a){let l=ii(a),c=i.length;function h(m){let f=m,{scope:y,children:S}=f,C=le(f,["scope","children"]),_=(y==null?void 0:y[e][c])||l,P=Ee(()=>C,Object.values(C));return $(_.Provider,{value:P},S)}return i=[...i,a],h.displayName=s+"Provider",[h,function(m,f){let y=(f==null?void 0:f[e][c])||l,S=Zt(y);if(S)return S;if(a!==void 0)return a;throw new Error(`\`${m}\` must be used within \`${s}\``)}]},s_(n,...t)]}function s_(...e){let t=e[0];if(e.length===1)return t;let i=()=>{let n=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(s){let a=n.reduce((l,{useScope:c,scopeName:h})=>A(A({},l),c(s)[`__scope${h}`]),{});return Ee(()=>({[`__scope${t.scopeName}`]:a}),[a])}};return i.scopeName=t.scopeName,i}function o_({anchorRect:e,popperSize:t,arrowSize:i,arrowOffset:n=0,side:s,sideOffset:a=0,align:l,alignOffset:c=0,shouldAvoidCollisions:h=!0,collisionBoundariesRect:m,collisionTolerance:f=0}){if(!e||!t||!m)return{popperStyles:a_,arrowStyles:yc};let y=function(G,V,ae=0,W=0,se){let pe=se?se.height:0,ue=Ff(V,G,"x"),we=Ff(V,G,"y"),he=we.before-ae-pe,_e=we.after+ae+pe,et=ue.before-ae-pe,J=ue.after+ae+pe;return{top:{start:{x:ue.start+W,y:he},center:{x:ue.center,y:he},end:{x:ue.end-W,y:he}},right:{start:{x:J,y:we.start+W},center:{x:J,y:we.center},end:{x:J,y:we.end-W}},bottom:{start:{x:ue.start+W,y:_e},center:{x:ue.center,y:_e},end:{x:ue.end-W,y:_e}},left:{start:{x:et,y:we.start+W},center:{x:et,y:we.center},end:{x:et,y:we.end-W}}}}(t,e,a,c,i),S=y[s][l];if(h===!1){let G=zf(S),V=yc;return i&&(V=jf({popperSize:t,arrowSize:i,arrowOffset:n,side:s,align:l})),{popperStyles:D(A({},G),{"--radix-popper-transform-origin":Bf(t,s,l,n,i)}),arrowStyles:V,placedSide:s,placedAlign:l}}let C=DOMRect.fromRect(A(A({},t),S)),_=(P=m,I=f,DOMRect.fromRect({width:P.width-2*I,height:P.height-2*I,x:P.left+I,y:P.top+I}));var P,I;let L=Uf(C,_),E=y[Df(s)][l],N=function(G,V,ae){let W=Df(G);return V[G]&&!ae[W]?W:G}(s,L,Uf(DOMRect.fromRect(A(A({},t),E)),_)),F=function(G,V,ae,W,se){let pe=ae==="top"||ae==="bottom",ue=pe?"left":"top",we=pe?"right":"bottom",he=pe?"width":"height",_e=V[he]>G[he];return(W==="start"||W==="center")&&(se[ue]&&_e||se[we]&&!_e)?"end":(W==="end"||W==="center")&&(se[we]&&_e||se[ue]&&!_e)?"start":W}(t,e,s,l,L),U=zf(y[N][F]),q=yc;return i&&(q=jf({popperSize:t,arrowSize:i,arrowOffset:n,side:N,align:F})),{popperStyles:D(A({},U),{"--radix-popper-transform-origin":Bf(t,N,F,n,i)}),arrowStyles:q,placedSide:N,placedAlign:F}}function Ff(e,t,i){let n=e[i==="x"?"left":"top"],s=i==="x"?"width":"height",a=e[s],l=t[s];return{before:n-l,start:n,center:n+(a-l)/2,end:n+a-l,after:n+a}}function zf(e){return{position:"absolute",top:0,left:0,minWidth:"max-content",willChange:"transform",transform:`translate3d(${Math.round(e.x+window.scrollX)}px, ${Math.round(e.y+window.scrollY)}px, 0)`}}function Bf(e,t,i,n,s){let a=t==="top"||t==="bottom",l=s?s.width:0,c=s?s.height:0,h=l/2+n,m="",f="";return a?(m={start:`${h}px`,center:"center",end:e.width-h+"px"}[i],f=t==="top"?`${e.height+c}px`:-c+"px"):(m=t==="left"?`${e.width+c}px`:-c+"px",f={start:`${h}px`,center:"center",end:e.height-h+"px"}[i]),`${m} ${f}`}var a_={position:"fixed",top:0,left:0,opacity:0,transform:"translate3d(0, -200%, 0)"},yc={position:"absolute",opacity:0};function jf({popperSize:e,arrowSize:t,arrowOffset:i,side:n,align:s}){let a=(e.width-t.width)/2,l=(e.height-t.width)/2,c={top:0,right:90,bottom:180,left:-90}[n],h=Math.max(t.width,t.height),m={width:`${h}px`,height:`${h}px`,transform:`rotate(${c}deg)`,willChange:"transform",position:"absolute",[n]:"100%",direction:l_(n,s)};return n!=="top"&&n!=="bottom"||(s==="start"&&(m.left=`${i}px`),s==="center"&&(m.left=`${a}px`),s==="end"&&(m.right=`${i}px`)),n!=="left"&&n!=="right"||(s==="start"&&(m.top=`${i}px`),s==="center"&&(m.top=`${l}px`),s==="end"&&(m.bottom=`${i}px`)),m}function l_(e,t){return(e!=="top"&&e!=="right"||t!=="end")&&(e!=="bottom"&&e!=="left"||t==="end")?"ltr":"rtl"}function Df(e){return{top:"bottom",right:"left",bottom:"top",left:"right"}[e]}function Uf(e,t){return{top:e.top<t.top,right:e.right>t.right,bottom:e.bottom>t.bottom,left:e.left<t.left}}var[Wf,Hf]=Mf("Popper"),[u_,qf]=Wf("Popper"),c_=e=>{let{__scopePopper:t,children:i}=e,[n,s]=Ne(null);return $(u_,{scope:t,anchor:n,onAnchorChange:s},i)},h_=di((e,t)=>{let i=e,{__scopePopper:n,virtualRef:s}=i,a=le(i,["__scopePopper","virtualRef"]),l=qf("PopperAnchor",n),c=Se(null),h=Aa(t,c);return de(()=>{l.onAnchorChange((s==null?void 0:s.current)||c.current)}),s?null:$(Ps.div,xi({},a,{ref:h}))}),[d_,p_]=Wf("PopperContent"),f_=di((e,t)=>{let i=e,{__scopePopper:n,side:s="bottom",sideOffset:a,align:l="center",alignOffset:c,collisionTolerance:h,avoidCollisions:m=!0}=i,f=le(i,["__scopePopper","side","sideOffset","align","alignOffset","collisionTolerance","avoidCollisions"]),y=qf("PopperContent",n),[S,C]=Ne(),_=Nf(y.anchor),[P,I]=Ne(null),L=Lf(P),[E,N]=Ne(null),F=Lf(E),U=Aa(t,ue=>I(ue)),q=function(){let[ue,we]=Ne(void 0);return de(()=>{let he;function _e(){we({width:window.innerWidth,height:window.innerHeight})}function et(){window.clearTimeout(he),he=window.setTimeout(_e,100)}return _e(),window.addEventListener("resize",et),()=>window.removeEventListener("resize",et)},[]),ue}(),G=q?DOMRect.fromRect(D(A({},q),{x:0,y:0})):void 0,{popperStyles:V,arrowStyles:ae,placedSide:W,placedAlign:se}=o_({anchorRect:_,popperSize:L,arrowSize:F,arrowOffset:S,side:s,sideOffset:a,align:l,alignOffset:c,shouldAvoidCollisions:m,collisionBoundariesRect:G,collisionTolerance:h}),pe=W!==void 0;return $("div",{style:V,"data-radix-popper-content-wrapper":""},$(d_,{scope:n,arrowStyles:ae,onArrowChange:N,onArrowOffsetChange:C},$(Ps.div,xi({"data-side":W,"data-align":se},f,{style:D(A({},f.style),{animation:pe?void 0:"none"}),ref:U}))))}),g_=di(function(e,t){let i=e,{__scopePopper:n,offset:s}=i,a=le(i,["__scopePopper","offset"]),l=p_("PopperArrow",n),{onArrowOffsetChange:c}=l;return de(()=>c(s),[c,s]),$("span",{style:D(A({},l.arrowStyles),{pointerEvents:"none"})},$("span",{ref:l.onArrowChange,style:{display:"inline-block",verticalAlign:"top",pointerEvents:"auto"}},$(n_,xi({},a,{ref:t,style:D(A({},a.style),{display:"block"})}))))}),m_=c_,v_=h_,y_=f_,b_=g_,Qf=e=>{let{present:t,children:i}=e,n=function(l){let[c,h]=Ne(),m=Se({}),f=Se(l),y=Se("none"),S=l?"mounted":"unmounted",[C,_]=function(P,I){return ys((L,E)=>{let N=I[L][E];return N??L},P)}(S,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return de(()=>{let P=Na(m.current);y.current=C==="mounted"?P:"none"},[C]),Ta(()=>{let P=m.current,I=f.current;if(I!==l){let L=y.current,E=Na(P);l?_("MOUNT"):E==="none"||(P==null?void 0:P.display)==="none"?_("UNMOUNT"):_(I&&L!==E?"ANIMATION_OUT":"UNMOUNT"),f.current=l}},[l,_]),Ta(()=>{if(c){let P=L=>{let E=Na(m.current).includes(L.animationName);L.target===c&&E&&_("ANIMATION_END")},I=L=>{L.target===c&&(y.current=Na(m.current))};return c.addEventListener("animationstart",I),c.addEventListener("animationcancel",P),c.addEventListener("animationend",P),()=>{c.removeEventListener("animationstart",I),c.removeEventListener("animationcancel",P),c.removeEventListener("animationend",P)}}},[c,_]),{isPresent:["mounted","unmountSuspended"].includes(C),ref:je(P=>{P&&(m.current=getComputedStyle(P)),h(P)},[])}}(t),s=typeof i=="function"?i({present:n.isPresent}):Zn.only(i),a=Aa(n.ref,s.ref);return typeof i=="function"||n.isPresent?xa(s,{ref:a}):null};function Na(e){return(e==null?void 0:e.animationName)||"none"}Qf.displayName="Presence";function Vf(e){let t=Se(e);return de(()=>{t.current=e},[e]),t.current}function bc(e){let t=Se(e);return de(()=>{t.current=e}),Ee(()=>(...i)=>{var n;return(n=t.current)===null||n===void 0?void 0:n.call(t,...i)},[])}function w_(e){let t=bc(e);de(()=>{let i=n=>{n.key==="Escape"&&t(n)};return document.addEventListener("keydown",i),()=>document.removeEventListener("keydown",i)},[t])}function x_({prop:e,defaultProp:t,onChange:i=()=>{}}){let[n,s]=function({defaultProp:h,onChange:m}){let f=Ne(h),[y]=f,S=Se(y),C=bc(m);return de(()=>{S.current!==y&&(C(y),S.current=y)},[y,S,C]),f}({defaultProp:t,onChange:i}),a=e!==void 0,l=a?e:n,c=bc(i);return[l,je(h=>{if(a){let m=h,f=typeof h=="function"?m(e):h;f!==e&&c(f)}else s(h)},[a,e,s,c])]}function Rs(e,t,{checkForDefaultPrevented:i=!0}={}){return function(n){if(e==null||e(n),i===!1||!n.defaultPrevented)return t==null?void 0:t(n)}}var[Gf,DI]=Mf("Tooltip",[Hf]),Ma=Hf(),__=700,[UI,S_]=Gf("TooltipProvider",{isOpenDelayed:!0,delayDuration:__,onOpen:()=>{},onClose:()=>{}}),[E_,Fa]=Gf("Tooltip"),C_=e=>{let{__scopeTooltip:t,children:i,open:n,defaultOpen:s=!1,onOpenChange:a,delayDuration:l}=e,c=S_("Tooltip",t),h=Ma(t),[m,f]=Ne(null),y=Xx(),S=Se(0),C=l??c.delayDuration,_=Se(!1),{onOpen:P,onClose:I}=c,[L=!1,E]=x_({prop:n,defaultProp:s,onChange:q=>{q&&(document.dispatchEvent(new CustomEvent("tooltip.open")),P()),a==null||a(q)}}),N=Ee(()=>L?_.current?"delayed-open":"instant-open":"closed",[L]),F=je(()=>{window.clearTimeout(S.current),_.current=!1,E(!0)},[E]),U=je(()=>{window.clearTimeout(S.current),S.current=window.setTimeout(()=>{_.current=!0,E(!0)},C)},[C,E]);return de(()=>()=>window.clearTimeout(S.current),[]),$(m_,h,$(E_,{scope:t,contentId:y,open:L,stateAttribute:N,trigger:m,onTriggerChange:f,onTriggerEnter:je(()=>{c.isOpenDelayed?U():F()},[c.isOpenDelayed,U,F]),onOpen:je(F,[F]),onClose:je(()=>{window.clearTimeout(S.current),E(!1),I()},[E,I])},i))},k_=di((e,t)=>{let i=e,{__scopeTooltip:n}=i,s=le(i,["__scopeTooltip"]),a=Fa("TooltipTrigger",n),l=Ma(n),c=Aa(t,a.onTriggerChange),h=Se(!1),m=je(()=>h.current=!1,[]);return de(()=>()=>document.removeEventListener("mouseup",m),[m]),$(v_,xi({asChild:!0},l),$(Ps.button,xi({"aria-describedby":a.open?a.contentId:void 0,"data-state":a.stateAttribute},s,{ref:c,onMouseEnter:Rs(e.onMouseEnter,a.onTriggerEnter),onMouseLeave:Rs(e.onMouseLeave,a.onClose),onMouseDown:Rs(e.onMouseDown,()=>{a.onClose(),h.current=!0,document.addEventListener("mouseup",m,{once:!0})}),onFocus:Rs(e.onFocus,()=>{h.current||a.onOpen()}),onBlur:Rs(e.onBlur,a.onClose),onClick:Rs(e.onClick,a.onClose)})))}),A_=di((e,t)=>{let i=e,{forceMount:n}=i,s=le(i,["forceMount"]),a=Fa("TooltipContent",e.__scopeTooltip);return $(Qf,{present:n||a.open},$(T_,xi({ref:t},s)))}),T_=di((e,t)=>{let i=e,{__scopeTooltip:n,children:s,"aria-label":a,portalled:l=!0}=i,c=le(i,["__scopeTooltip","children","aria-label","portalled"]),h=Fa("TooltipContent",n),m=Ma(n),f=l?t_:Je,{onClose:y}=h;return w_(()=>y()),de(()=>(document.addEventListener("tooltip.open",y),()=>document.removeEventListener("tooltip.open",y)),[y]),$(f,null,$(R_,{__scopeTooltip:n}),$(y_,xi({"data-state":h.stateAttribute},m,c,{ref:t,style:D(A({},c.style),{"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)"})}),$(ef,null,s),$(e_,{id:h.contentId,role:"tooltip"},a||s)))}),P_=di((e,t)=>{let i=e,{__scopeTooltip:n}=i,s=le(i,["__scopeTooltip"]),a=Ma(n);return $(b_,xi({},a,s,{ref:t}))});function R_(e){let{__scopeTooltip:t}=e,i=Fa("CheckTriggerMoved",t),n=Nf(i.trigger),s=n==null?void 0:n.left,a=Vf(s),l=n==null?void 0:n.top,c=Vf(l),h=i.onClose;return de(()=>{(a!==void 0&&a!==s||c!==void 0&&c!==l)&&h()},[h,a,c,s,l]),null}var O_=C_,I_=k_,L_=A_,$_=P_;function N_(e,t){if(e==null)return{};var i={},n=Object.keys(e),s,a;for(a=0;a<n.length;a++)s=n[a],!(t.indexOf(s)>=0)&&(i[s]=e[s]);return i}function jn(e,t){if(e==null)return{};var i=N_(e,t),n,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(s=0;s<a.length;s++)n=a[s],!(t.indexOf(n)>=0)&&(!Object.prototype.propertyIsEnumerable.call(e,n)||(i[n]=e[n]))}return i}var $i;(function(e){e[e.UNSUPPORTED_INPUT=0]="UNSUPPORTED_INPUT",e[e.NO_COMPONENT_FOR_TYPE=1]="NO_COMPONENT_FOR_TYPE",e[e.UNKNOWN_INPUT=2]="UNKNOWN_INPUT",e[e.DUPLICATE_KEYS=3]="DUPLICATE_KEYS",e[e.ALREADY_REGISTERED_TYPE=4]="ALREADY_REGISTERED_TYPE",e[e.CLIPBOARD_ERROR=5]="CLIPBOARD_ERROR",e[e.THEME_ERROR=6]="THEME_ERROR",e[e.PATH_DOESNT_EXIST=7]="PATH_DOESNT_EXIST",e[e.INPUT_TYPE_OVERRIDE=8]="INPUT_TYPE_OVERRIDE",e[e.EMPTY_KEY=9]="EMPTY_KEY"})($i||($i={}));var M_={[$i.UNSUPPORTED_INPUT]:(e,t)=>[`An input with type \`${e}\` input was found at path \`${t}\` but it's not supported yet.`],[$i.NO_COMPONENT_FOR_TYPE]:(e,t)=>[`Type \`${e}\` found at path \`${t}\` can't be displayed in panel because no component supports it yet.`],[$i.UNKNOWN_INPUT]:(e,t)=>[`input at path \`${e}\` is not recognized.`,t],[$i.DUPLICATE_KEYS]:(e,t,i)=>[`Key \`${e}\` of path \`${t}\` already exists at path \`${i}\`. Even nested keys need to be unique. Rename one of the keys.`],[$i.ALREADY_REGISTERED_TYPE]:e=>[`Type ${e} has already been registered. You can't register a component with the same type.`],[$i.CLIPBOARD_ERROR]:e=>["Error copying the value",e],[$i.THEME_ERROR]:(e,t)=>[`Error accessing the theme \`${e}.${t}\` value.`],[$i.PATH_DOESNT_EXIST]:e=>[`Error getting the value at path \`${e}\`. There is probably an error in your \`render\` function.`],[$i.PATH_DOESNT_EXIST]:e=>[`Error accessing the value at path \`${e}\``],[$i.INPUT_TYPE_OVERRIDE]:(e,t,i)=>[`Input at path \`${e}\` already exists with type: \`${t}\`. Its type cannot be overridden with type \`${i}\`.`],[$i.EMPTY_KEY]:()=>["Keys can not be empty, if you want to hide a label use whitespace."]};function Yf(e,t,...i){let[n,...s]=M_[t](...i);console[e]("LEVA: "+n,...s)}var Kf=Yf.bind(null,"warn");Yf.bind(null,"log");function F_(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function Xf(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),i.push.apply(i,n)}return i}function Ir(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?Xf(Object(i),!0).forEach(function(n){F_(e,n,i[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Xf(Object(i)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))})}return e}var tr=(e,t,i)=>e>i?i:e<t?t:e,z_=e=>{if(e===""||typeof e=="number")return e;try{let t=ir(e);if(!isNaN(t))return t}catch{}return parseFloat(e)},B_=Math.log(10);function Zf(e){let t=Math.abs(+String(e).replace(".",""));if(t===0)return .01;for(;t!==0&&t%10===0;)t/=10;let i=Math.floor(Math.log(t)/B_)+1,n=Math.floor(Math.log10(Math.abs(e))),s=Math.pow(10,n-i);return Math.max(s,.001)}var j_=(e,t,i)=>i===t?0:(tr(e,t,i)-t)/(i-t),Jf=(e,t,i)=>e*(i-t)+t,eg=/\(([0-9+\-*/^ .]+)\)/,tg=/(\d+(?:\.\d+)?) ?\^ ?(\d+(?:\.\d+)?)/,ig=/(\d+(?:\.\d+)?) ?\* ?(\d+(?:\.\d+)?)/,ng=/(\d+(?:\.\d+)?) ?\/ ?(\d+(?:\.\d+)?)/,rg=/(\d+(?:\.\d+)?) ?\+ ?(\d+(?:\.\d+)?)/,sg=/(\d+(?:\.\d+)?) ?- ?(\d+(?:\.\d+)?)/;function ir(e){if(isNaN(Number(e)))if(eg.test(e)){let t=e.replace(eg,(i,n)=>String(ir(n)));return ir(t)}else if(tg.test(e)){let t=e.replace(tg,(i,n,s)=>String(Math.pow(Number(n),Number(s))));return ir(t)}else if(ig.test(e)){let t=e.replace(ig,(i,n,s)=>String(Number(n)*Number(s)));return ir(t)}else if(ng.test(e)){let t=e.replace(ng,(i,n,s)=>{if(s!=0)return String(Number(n)/Number(s));throw new Error("Division by zero")});return ir(t)}else if(rg.test(e)){let t=e.replace(rg,(i,n,s)=>String(Number(n)+Number(s)));return ir(t)}else if(sg.test(e)){let t=e.replace(sg,(i,n,s)=>String(Number(n)-Number(s)));return ir(t)}else return Number(e);return Number(e)}var og;(function(e){e.BUTTON="BUTTON",e.BUTTON_GROUP="BUTTON_GROUP",e.MONITOR="MONITOR",e.FOLDER="FOLDER"})(og||(og={}));var ag;(function(e){e.SELECT="SELECT",e.IMAGE="IMAGE",e.NUMBER="NUMBER",e.COLOR="COLOR",e.STRING="STRING",e.BOOLEAN="BOOLEAN",e.INTERVAL="INTERVAL",e.VECTOR3D="VECTOR3D",e.VECTOR2D="VECTOR2D"})(ag||(ag={}));var D_=e=>e.shiftKey?5:e.altKey?1/5:1,U_=["value"],W_=["min","max"],H_=e=>{if(typeof e=="number")return!0;if(typeof e=="string"){let t=parseFloat(e);return isNaN(t)?!1:e.substring((""+t).length).trim().length<4}return!1},q_=(e,{min:t=-1/0,max:i=1/0,suffix:n})=>{let s=parseFloat(e);if(e===""||isNaN(s))throw Error("Invalid number");let a=tr(s,t,i);return n?a+n:a},Q_=(e,{pad:t=0,suffix:i})=>{let n=parseFloat(e).toFixed(t);return i?n+i:n},V_=e=>{let{value:t}=e,i=jn(e,U_),{min:n=-1/0,max:s=1/0}=i,a=jn(i,W_),l=parseFloat(t),c=typeof t=="string"?t.substring((""+l).length):void 0;l=tr(l,n,s);let h=i.step;h||(Number.isFinite(n)?Number.isFinite(s)?h=+(Math.abs(s-n)/100).toPrecision(1):h=+(Math.abs(l-n)/100).toPrecision(1):Number.isFinite(s)&&(h=+(Math.abs(s-l)/100).toPrecision(1)));let m=h?Zf(h)*10:Zf(l);h=h||m/10;let f=Math.round(tr(Math.log10(1/m),0,2));return{value:c?l+c:l,settings:Ir({initialValue:l,step:h,pad:f,min:n,max:s,suffix:c},a)}},lg=(e,{step:t,initialValue:i})=>{let n=Math.round((e-i)/t);return i+n*t},G_=Object.freeze({__proto__:null,schema:H_,sanitize:q_,format:Q_,normalize:V_,sanitizeStep:lg});function Gi(){return Gi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},Gi.apply(this,arguments)}var Y_=ii({});function Dn(){return Zt(Y_)}var K_=ii(null);ii(null);var X_=ii(null);function Z_(){return Zt(X_)}var J_=()=>({colors:{elevation1:"#292d39",elevation2:"#181c20",elevation3:"#373c4b",accent1:"#0066dc",accent2:"#007bff",accent3:"#3c93ff",highlight1:"#535760",highlight2:"#8c92a4",highlight3:"#fefefe",vivid1:"#ffcc00",folderWidgetColor:"$highlight2",folderTextColor:"$highlight3",toolTipBackground:"$highlight3",toolTipText:"$elevation2"},radii:{xs:"2px",sm:"3px",lg:"10px"},space:{xs:"3px",sm:"6px",md:"10px",rowGap:"7px",colGap:"7px"},fonts:{mono:"ui-monospace, SFMono-Regular, Menlo, 'Roboto Mono', monospace",sans:"system-ui, sans-serif"},fontSizes:{root:"11px",toolTip:"$root"},sizes:{rootWidth:"280px",controlWidth:"160px",numberInputMinWidth:"38px",scrubberWidth:"8px",scrubberHeight:"16px",rowHeight:"24px",folderTitleHeight:"20px",checkboxSize:"16px",joystickWidth:"100px",joystickHeight:"100px",colorPickerWidth:"$controlWidth",colorPickerHeight:"100px",imagePreviewWidth:"$controlWidth",imagePreviewHeight:"100px",monitorHeight:"60px",titleBarHeight:"39px"},shadows:{level1:"0 0 9px 0 #00000088",level2:"0 4px 14px #00000033"},borderWidths:{root:"0px",input:"1px",focus:"1px",hover:"1px",active:"1px",folder:"1px"},fontWeights:{label:"normal",folder:"normal",button:"normal"}});function za(e,t){let[i,n]=e.split(" "),s={};return i!=="none"&&(s.boxShadow=`${t.inset?"inset ":""}0 0 0 $borderWidths${[t.key]} $colors${i!=="default"&&i||t.borderColor}`),n&&(s.backgroundColor=n),s}var _o={$inputStyle:()=>e=>za(e,{key:"$input",borderColor:"$highlight1",inset:!0}),$focusStyle:()=>e=>za(e,{key:"$focus",borderColor:"$accent2"}),$hoverStyle:()=>e=>za(e,{key:"$hover",borderColor:"$accent1",inset:!0}),$activeStyle:()=>e=>za(e,{key:"$active",borderColor:"$accent1",inset:!0})},{styled:gt,css:WI,createTheme:HI,globalCss:eS,keyframes:qI}=tx({prefix:"leva",theme:J_(),utils:Ir(Ir({},_o),{},{$flex:()=>({display:"flex",alignItems:"center"}),$flexCenter:()=>({display:"flex",alignItems:"center",justifyContent:"center"}),$reset:()=>({outline:"none",fontSize:"inherit",fontWeight:"inherit",color:"inherit",fontFamily:"inherit",border:"none",backgroundColor:"transparent",appearance:"none"}),$draggable:()=>({touchAction:"none",WebkitUserDrag:"none",userSelect:"none"}),$focus:e=>({"&:focus":_o.$focusStyle()(e)}),$focusWithin:e=>({"&:focus-within":_o.$focusStyle()(e)}),$hover:e=>({"&:hover":_o.$hoverStyle()(e)}),$active:e=>({"&:active":_o.$activeStyle()(e)})})});eS({".leva__panel__dragged":{WebkitUserDrag:"none",userSelect:"none",input:{userSelect:"none"},"*":{cursor:"ew-resize !important"}}});function tS(e,t){let{theme:i}=Zt(K_);if(!(e in i)||!(t in i[e]))return Kf($i.THEME_ERROR,e,t),"";let n=t;for(;;){let s=i[e][n];if(typeof s=="string"&&s.charAt(0)==="$")n=s.substr(1);else return s}}var ug=gt("input",{$reset:"",padding:"0 $sm",width:0,minWidth:0,flex:1,height:"100%",variants:{levaType:{number:{textAlign:"right"}},as:{textarea:{padding:"$sm"}}}}),cg=gt("div",{$draggable:"",height:"100%",$flexCenter:"",position:"relative",padding:"0 $xs",fontSize:"0.8em",opacity:.8,cursor:"default",touchAction:"none",[`& + ${ug}`]:{paddingLeft:0}}),iS=gt(cg,{cursor:"ew-resize",marginRight:"-$xs",textTransform:"uppercase",opacity:.3,"&:hover":{opacity:1},variants:{dragging:{true:{backgroundColor:"$accent2",opacity:1}}}}),nS=gt("div",{$flex:"",position:"relative",borderRadius:"$sm",overflow:"hidden",color:"inherit",height:"$rowHeight",backgroundColor:"$elevation3",$inputStyle:"$elevation1",$hover:"",$focusWithin:"",variants:{textArea:{true:{height:"auto"}}}}),rS=["innerLabel","value","onUpdate","onChange","onKeyDown","type","id","inputType","rows"],sS=["onUpdate"];function hg(e){let{innerLabel:t,value:i,onUpdate:n,onChange:s,onKeyDown:a,type:l,id:c,inputType:h="text",rows:m=0}=e,f=jn(e,rS),{id:y,emitOnEditStart:S,emitOnEditEnd:C,disabled:_}=Dn(),P=c||y,I=Se(null),L=m>0,E=L?"textarea":"input",N=je(q=>G=>{let V=G.currentTarget.value;q(V)},[]);Z.useEffect(()=>{let q=I.current,G=N(V=>{n(V),C()});return q==null||q.addEventListener("blur",G),()=>q==null?void 0:q.removeEventListener("blur",G)},[N,n,C]);let F=je(q=>{q.key==="Enter"&&N(n)(q)},[N,n]),U=Object.assign({as:E},L?{rows:m}:{},f);return Z.createElement(nS,{textArea:L},t&&typeof t=="string"?Z.createElement(cg,null,t):t,Z.createElement(ug,Gi({levaType:l,ref:I,id:P,type:h,autoComplete:"off",spellCheck:"false",value:i,onChange:N(s),onFocus:()=>S(),onKeyPress:F,onKeyDown:a,disabled:_},U)))}function oS(e){let{onUpdate:t}=e,i=jn(e,sS),n=je(a=>t(z_(a)),[t]),s=je(a=>{let l=a.key==="ArrowUp"?1:a.key==="ArrowDown"?-1:0;if(l){a.preventDefault();let c=a.altKey?.1:a.shiftKey?10:1;t(h=>parseFloat(h)+l*c)}},[t]);return Z.createElement(hg,Gi({},i,{onUpdate:n,onKeyDown:s,type:"number"}))}var wc=gt("div",{}),dg=gt("div",{position:"relative",background:"$elevation2",transition:"height 300ms ease",variants:{fill:{true:{},false:{}},flat:{false:{},true:{}},isRoot:{true:{},false:{paddingLeft:"$md","&::after":{content:'""',position:"absolute",left:0,top:0,width:"$borderWidths$folder",height:"100%",backgroundColor:"$folderWidgetColor",opacity:.4,transform:"translateX(-50%)"}}}},compoundVariants:[{isRoot:!0,fill:!1,css:{overflowY:"auto",maxHeight:"calc(100vh - 20px - $$titleBarHeight)"}},{isRoot:!0,flat:!1,css:{borderRadius:"$lg"}}]});gt("div",{$flex:"",color:"$folderTextColor",userSelect:"none",cursor:"pointer",height:"$folderTitleHeight",fontWeight:"$folder","> svg":{marginLeft:-4,marginRight:4,cursor:"pointer",fill:"$folderWidgetColor",opacity:.6},"&:hover > svg":{fill:"$folderWidgetColor"},[`&:hover + ${dg}::after`]:{opacity:.6},[`${wc}:hover > & + ${dg}::after`]:{opacity:.6},[`${wc}:hover > & > svg`]:{opacity:1}});var aS=gt("div",{position:"relative",display:"grid",gridTemplateColumns:"100%",rowGap:"$rowGap",transition:"opacity 250ms ease",variants:{toggled:{true:{opacity:1,transitionDelay:"250ms"},false:{opacity:0,transitionDelay:"0ms",pointerEvents:"none"}},isRoot:{true:{"& > div":{paddingLeft:"$md",paddingRight:"$md"},"& > div:first-of-type":{paddingTop:"$sm"},"& > div:last-of-type":{paddingBottom:"$sm"},[`> ${wc}:not(:first-of-type)`]:{paddingTop:"$sm",marginTop:"$md",borderTop:"$borderWidths$folder solid $colors$elevation1"}}}}}),pg=gt("div",{position:"relative",zIndex:100,display:"grid",rowGap:"$rowGap",gridTemplateRows:"minmax($sizes$rowHeight, max-content)",alignItems:"center",color:"$highlight2",[`${aS} > &`]:{"&:first-of-type":{marginTop:"$rowGap"},"&:last-of-type":{marginBottom:"$rowGap"}},variants:{disabled:{true:{pointerEvents:"none"},false:{"&:hover,&:focus-within":{color:"$highlight3"}}}}}),lS=gt(pg,{gridTemplateColumns:"auto $sizes$controlWidth",columnGap:"$colGap"}),uS=gt("div",{$flex:"",height:"100%",position:"relative",overflow:"hidden","& > div":{marginLeft:"$colGap",padding:"0 $xs",opacity:.4},"& > div:hover":{opacity:.8},"& > div > svg":{display:"none",cursor:"pointer",width:13,minWidth:13,height:13,backgroundColor:"$elevation2"},"&:hover > div > svg":{display:"block"},variants:{align:{top:{height:"100%",alignItems:"flex-start",paddingTop:"$sm"}}}}),cS=gt("input",{$reset:"",height:0,width:0,opacity:0,margin:0,"& + label":{position:"relative",$flexCenter:"",height:"100%",userSelect:"none",cursor:"pointer",paddingLeft:2,paddingRight:"$sm",pointerEvents:"auto"},"& + label:after":{content:'""',width:6,height:6,backgroundColor:"$elevation3",borderRadius:"50%",$activeStyle:""},"&:focus + label:after":{$focusStyle:""},"& + label:active:after":{backgroundColor:"$accent1",$focusStyle:""},"&:checked + label:after":{backgroundColor:"$accent1"}}),xc=gt("label",{fontWeight:"$label",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap","& > svg":{display:"block"}});gt("div",{opacity:1,variants:{disabled:{true:{opacity:.6,pointerEvents:"none",[`& ${xc}`]:{pointerEvents:"auto"}}}}}),gt("div",{position:"fixed",top:0,bottom:0,right:0,left:0,zIndex:1e3,userSelect:"none"});var hS=gt("div",{background:"$toolTipBackground",fontFamily:"$sans",fontSize:"$toolTip",padding:"$xs $sm",color:"$toolTipText",borderRadius:"$xs",boxShadow:"$level2",maxWidth:260}),dS=gt($_,{fill:"$toolTipBackground"}),pS=["align"];function fS(){let{id:e,disable:t,disabled:i}=Dn();return Z.createElement(Z.Fragment,null,Z.createElement(cS,{id:e+"__disable",type:"checkbox",checked:!i,onChange:()=>t(!i)}),Z.createElement("label",{htmlFor:e+"__disable"}))}function gS(e){let{id:t,optional:i,hint:n}=Dn(),s=e.htmlFor||(t?{htmlFor:t}:null),a=!n&&typeof e.children=="string"?{title:e.children}:null;return Z.createElement(Z.Fragment,null,i&&Z.createElement(fS,null),n!==void 0?Z.createElement(O_,null,Z.createElement(I_,{asChild:!0},Z.createElement(xc,Gi({},s,e))),Z.createElement(L_,{side:"top",sideOffset:2},Z.createElement(hS,null,n,Z.createElement(dS,null)))):Z.createElement(xc,Gi({},s,a,e)))}function Ba(e){let{align:t}=e,i=jn(e,pS),{value:n,label:s,key:a,disabled:l}=Dn(),{hideCopyButton:c}=Z_(),h=!c&&a!==void 0,[m,f]=Ne(!1),y=async()=>{try{await navigator.clipboard.writeText(JSON.stringify({[a]:n??""})),f(!0)}catch{Kf($i.CLIPBOARD_ERROR,{[a]:n})}};return Z.createElement(uS,{align:t,onPointerLeave:()=>f(!1)},Z.createElement(gS,i),h&&!l&&Z.createElement("div",{title:`Click to copy ${typeof s=="string"?s:a} value`},m?Z.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},Z.createElement("path",{d:"M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"}),Z.createElement("path",{fillRule:"evenodd",d:"M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v11a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm9.707 5.707a1 1 0 00-1.414-1.414L9 12.586l-1.293-1.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})):Z.createElement("svg",{onClick:y,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},Z.createElement("path",{d:"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z"}),Z.createElement("path",{d:"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z"}))))}var mS=["toggled"],vS=gt("svg",{fill:"currentColor",transition:"transform 350ms ease, fill 250ms ease"});function yS(e){let{toggled:t}=e,i=jn(e,mS);return Z.createElement(vS,Gi({width:"9",height:"5",viewBox:"0 0 9 5",xmlns:"http://www.w3.org/2000/svg",style:{transform:`rotate(${t?0:-90}deg)`}},i),Z.createElement("path",{d:"M3.8 4.4c.4.3 1 .3 1.4 0L8 1.7A1 1 0 007.4 0H1.6a1 1 0 00-.7 1.7l3 2.7z"}))}var bS=["input"];function ja(e){let{input:t}=e,i=jn(e,bS);return t?Z.createElement(lS,i):Z.createElement(pg,i)}function fg(e,t){let{emitOnEditStart:i,emitOnEditEnd:n}=Dn();return Gx(s=>{s.first&&(document.body.classList.add("leva__panel__dragged"),i==null||i());let a=e(s);return s.last&&(document.body.classList.remove("leva__panel__dragged"),n==null||n()),a},t)}var wS=gt("div",{variants:{hasRange:{true:{position:"relative",display:"grid",gridTemplateColumns:"auto $sizes$numberInputMinWidth",columnGap:"$colGap",alignItems:"center"}}}}),xS=gt("div",{position:"relative",width:"100%",height:2,borderRadius:"$xs",backgroundColor:"$elevation1"}),_S=gt("div",{position:"absolute",width:"$scrubberWidth",height:"$scrubberHeight",borderRadius:"$xs",boxShadow:"0 0 0 2px $colors$elevation2",backgroundColor:"$accent2",cursor:"pointer",$active:"none $accent1",$hover:"none $accent3",variants:{position:{left:{borderTopRightRadius:0,borderBottomRightRadius:0,transform:"translateX(calc(-0.5 * ($sizes$scrubberWidth + 4px)))"},right:{borderTopLeftRadius:0,borderBottomLeftRadius:0,transform:"translateX(calc(0.5 * ($sizes$scrubberWidth + 4px)))"}}}}),SS=gt("div",{position:"relative",$flex:"",height:"100%",cursor:"pointer",touchAction:"none"}),ES=gt("div",{position:"absolute",height:"100%",backgroundColor:"$accent2"});function CS({value:e,min:t,max:i,onDrag:n,step:s,initialValue:a}){let l=Se(null),c=Se(null),h=Se(0),m=tS("sizes","scrubberWidth"),f=fg(({event:S,first:C,xy:[_],movement:[P],memo:I})=>{if(C){let{width:E,left:N}=l.current.getBoundingClientRect();h.current=E-parseFloat(m),I=(S==null?void 0:S.target)===c.current?e:Jf((_-N)/E,t,i)}let L=I+Jf(P/h.current,0,i-t);return n(lg(L,{step:s,initialValue:a})),I}),y=j_(e,t,i);return Z.createElement(SS,Gi({ref:l},f()),Z.createElement(xS,null,Z.createElement(ES,{style:{left:0,right:`${(1-y)*100}%`}})),Z.createElement(_S,{ref:c,style:{left:`calc(${y} * (100% - ${m}))`}}))}var kS=Z.memo(({label:e,onUpdate:t,step:i,innerLabelTrim:n})=>{let[s,a]=Ne(!1),l=fg(({active:c,delta:[h],event:m,memo:f=0})=>(a(c),f+=h/2,Math.abs(f)>=1&&(t(y=>parseFloat(y)+Math.floor(f)*i*D_(m)),f=0),f));return Z.createElement(iS,Gi({dragging:s,title:e.length>1?e:""},l()),e.slice(0,n))});function AS({label:e,id:t,displayValue:i,onUpdate:n,onChange:s,settings:a,innerLabelTrim:l=1}){let c=l>0&&Z.createElement(kS,{label:e,step:a.step,onUpdate:n,innerLabelTrim:l});return Z.createElement(oS,{id:t,value:String(i),onUpdate:n,onChange:s,innerLabel:c})}function TS(){let e=Dn(),{label:t,value:i,onUpdate:n,settings:s,id:a}=e,{min:l,max:c}=s,h=c!==1/0&&l!==-1/0;return Z.createElement(ja,{input:!0},Z.createElement(Ba,null,t),Z.createElement(wS,{hasRange:h},h&&Z.createElement(CS,Gi({value:parseFloat(i),onDrag:n},s)),Z.createElement(AS,Gi({},e,{id:a,label:"value",innerLabelTrim:h?0:1}))))}var PS=jn(G_,["sanitizeStep"]);Ir({component:TS},PS);var RS=(e,t)=>er().schema({options:er().passesAnyOf(er().object(),er().array())}).test(t),OS=(e,{values:t})=>{if(t.indexOf(e)<0)throw Error("Selected value doesn't match Select options");return e},IS=(e,{values:t})=>t.indexOf(e),LS=e=>{let{value:t,options:i}=e,n,s;return Array.isArray(i)?(s=i,n=i.map(a=>String(a))):(s=Object.values(i),n=Object.keys(i)),"value"in e?s.includes(t)||(n.unshift(String(t)),s.unshift(t)):t=s[0],Object.values(i).includes(t)||(i[String(t)]=t),{value:t,settings:{keys:n,values:s}}},$S=Object.freeze({__proto__:null,schema:RS,sanitize:OS,format:IS,normalize:LS}),NS=gt("div",{$flexCenter:"",position:"relative","> svg":{pointerEvents:"none",position:"absolute",right:"$md"}}),_c=gt("select",{position:"absolute",top:0,left:0,width:"100%",height:"100%",opacity:0}),MS=gt("div",{display:"flex",alignItems:"center",width:"100%",height:"$rowHeight",backgroundColor:"$elevation3",borderRadius:"$sm",padding:"0 $sm",cursor:"pointer",[`${_c}:focus + &`]:{$focusStyle:""},[`${_c}:hover + &`]:{$hoverStyle:""}});function FS({displayValue:e,value:t,onUpdate:i,id:n,settings:s,disabled:a}){let{keys:l,values:c}=s,h=Se();return t===c[e]&&(h.current=l[e]),Z.createElement(NS,null,Z.createElement(_c,{id:n,value:e,onChange:m=>i(c[Number(m.currentTarget.value)]),disabled:a},l.map((m,f)=>Z.createElement("option",{key:m,value:f},m))),Z.createElement(MS,null,h.current),Z.createElement(yS,{toggled:!0}))}function zS(){let{label:e,value:t,displayValue:i,onUpdate:n,id:s,disabled:a,settings:l}=Dn();return Z.createElement(ja,{input:!0},Z.createElement(Ba,null,e),Z.createElement(FS,{id:s,value:t,displayValue:i,onUpdate:n,settings:l,disabled:a}))}Ir({component:zS},$S);var BS=e=>er().string().test(e),jS=e=>{if(typeof e!="string")throw Error("Invalid string");return e},DS=({value:e,editable:t=!0,rows:i=!1})=>({value:e,settings:{editable:t,rows:typeof i=="number"?i:i?5:0}}),US=Object.freeze({__proto__:null,schema:BS,sanitize:jS,normalize:DS}),WS=["displayValue","onUpdate","onChange","editable"],HS=gt("div",{whiteSpace:"pre-wrap"});function qS(e){let{displayValue:t,onUpdate:i,onChange:n,editable:s=!0}=e,a=jn(e,WS);return s?Z.createElement(hg,Gi({value:t,onUpdate:i,onChange:n},a)):Z.createElement(HS,null,t)}function QS(){let{label:e,settings:t,displayValue:i,onUpdate:n,onChange:s}=Dn();return Z.createElement(ja,{input:!0},Z.createElement(Ba,null,e),Z.createElement(qS,Gi({displayValue:i,onUpdate:n,onChange:s},t)))}Ir({component:QS},US);var VS=e=>er().boolean().test(e),GS=e=>{if(typeof e!="boolean")throw Error("Invalid boolean");return e},YS=Object.freeze({__proto__:null,schema:VS,sanitize:GS}),KS=gt("div",{position:"relative",$flex:"",height:"$rowHeight",input:{$reset:"",height:0,width:0,opacity:0,margin:0},label:{position:"relative",$flexCenter:"",userSelect:"none",cursor:"pointer",height:"$checkboxSize",width:"$checkboxSize",backgroundColor:"$elevation3",borderRadius:"$sm",$hover:""},"input:focus + label":{$focusStyle:""},"input:focus:checked + label, input:checked + label:hover":{$hoverStyle:"$accent3"},"input + label:active":{backgroundColor:"$accent1"},"input:checked + label:active":{backgroundColor:"$accent1"},"label > svg":{display:"none",width:"90%",height:"90%",stroke:"$highlight3"},"input:checked + label":{backgroundColor:"$accent2"},"input:checked + label > svg":{display:"block"}});function XS({value:e,onUpdate:t,id:i,disabled:n}){return Z.createElement(KS,null,Z.createElement("input",{id:i,type:"checkbox",checked:e,onChange:s=>t(s.currentTarget.checked),disabled:n}),Z.createElement("label",{htmlFor:i},Z.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},Z.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"}))))}function ZS(){let{label:e,value:t,onUpdate:i,disabled:n,id:s}=Dn();return Z.createElement(ja,{input:!0},Z.createElement(Ba,null,e),Z.createElement(XS,{value:t,onUpdate:i,id:s,disabled:n}))}Ir({component:ZS},YS),gt("div",{display:"grid",columnGap:"$colGap",gridAutoFlow:"column dense",alignItems:"center",variants:{withLock:{true:{gridTemplateColumns:"10px auto","> svg":{cursor:"pointer"}}}}});var nr=class extends _n{constructor(e){super(),this.type="spacial-content",this.style={opacity:1},this.format="jpg",this.tileUrl=_w(e.url),this.id=e.id||`${this.tileUrl}--${e.scaleFactor}`,this.points=e.displayPoints?e.displayPoints:zn(e.points,Jn(e.scaleFactor)),this.tileWidth=e.tileWidth,this.display={x:0,y:0,width:e.width/e.scaleFactor,height:e.height/e.scaleFactor,points:e.points,scale:e.scaleFactor},e.format&&(this.format=e.format)}applyProps(e){if(e.style&&typeof e.style.opacity<"u"&&(this.style.opacity=e.style.opacity),e.service!==this.service&&(this.service=e.service),e.format?this.format=e.format:this.format="jpg",e.crop){this.cropData=e.crop;let t=Pe([...this.points]),i=t.length/5,n=e.crop.x||0,s=e.crop.y||0,a=e.crop.x+e.crop.width,l=e.crop.y+e.crop.height;for(let c=0;c<i;c++){let h=c*5;t[h+1]<a&&t[h+3]>n&&t[h+2]<l&&t[h+4]>s?(t[h+1]=tr(t[h+1],n,a),t[h+3]=tr(t[h+3],n,a),t[h+2]=tr(t[h+2],s,l),t[h+4]=tr(t[h+4],s,l)):t[h]=0}xn(t,Ii(-e.crop.x,-e.crop.y)),this.crop?this.crop.set(t):this.crop=t}}static fromTile(e,t,i,n,s,a,l){i.height=i.height?i.height:i.width;let c=l?Math.floor(t.width/n):Math.ceil(t.width/n),h=l?Math.floor(t.height/n):Math.ceil(t.height/n),m=Math.ceil(c/i.width),f=Math.ceil(h/i.height),y=st.grid(m,f),S=st.grid(m,f);for(let _=0;_<f;_++)for(let P=0;P<m;P++){let I=P*i.width,L=_*i.height;S.addPoints(I*n,L*n,P===m-1?t.width:(I+i.width)*n,_===f-1?t.height:(L+i.height)*n),y.addPoints(I,L,P===m-1?c:I+i.width,_===f-1?h:L+i.height)}let C=new nr({url:e,scaleFactor:n,points:y.build(),displayPoints:S.build(),width:t.width,height:t.height,tileWidth:i.width,format:a});return C.applyProps({service:s}),C}getImageUrl(e){let t=this.points.slice(e*5,e*5+5),i=t[3]-t[1],n=t[4]-t[2],s=Math.ceil(i/this.display.scale);return`${this.tileUrl}/${t[1]},${t[2]},${i},${n}/${s>this.tileWidth?this.tileWidth:s},/0/default.${this.format||"jpg"}`}getAllPointsAt(e,t,i){let n=go(this.crop||this.points,e);return[[this,n,t]]}transform(e){xn(this.points,e)}getScheduledUpdates(e,t){return[]}},JS=class extends _n{constructor(){super(...arguments),this.type="spacial-content"}getAllPointsAt(e,t,i){return[[this,this.points,t]]}},Sc=class extends JS{constructor(e){super(),this.images=[],this.allImages=[],this.scaleFactors=[],this.aggregateBuffer=Pe(9),this.isFullyLoaded=!1,this.maxScaleFactor=0,this._scheduleSortByScales=!1,this._sortByScales=()=>{this._scheduleSortByScales=!1,this.allImages.sort((i,n)=>n.display.width-i.display.width),this.images=[];let t=.1;for(let i of this.allImages)if(!(i.display.width<this.renderOptions.minSize&&i.display.height<this.renderOptions.minSize&&!i.priority||i instanceof cn&&(i.display.width>this.renderOptions.maxImageSize||i.display.height>this.renderOptions.maxImageSize)&&!i.priority)){if(Math.abs(i.display.scale-t)<.25||i.priority){let n=this.images.pop();n&&(n instanceof cn||n.priority)?(i.priority&&this.images.push(i),this.images.push(n)):i&&this.images.push(i)}else i&&this.images.push(i);t=i.display.scale}this.images.length===0&&(this.images=[...this.allImages]),this.scaleFactors=this.images.map(i=>i.display.scale),this.maxScaleFactor=Math.max(...this.scaleFactors)},this.loadFullResource=async()=>{if(!this.isFullyLoaded&&this.lazyLoader){this.isFullyLoaded=!0;let t=await this.lazyLoader();this.addImages(t)}},this.fallback=[this.loadFullResource],this.id=e.id,this.points=st.singleBox(e.width,e.height),this.lazyLoader=e.loadFullImages,e.loadFullImages||(this.isFullyLoaded=!0),this.display={x:0,y:0,points:st.singleBox(e.width,e.height),height:e.height,width:e.width,scale:1},this.renderOptions=A({renderSmallestFallback:!0,renderLayers:2,minSize:255,maxImageSize:1024,quality:1.75},e.renderOptions||{}),this.addImages(e.images)}applyProps(e){typeof e.renderSmallestFallback<"u"&&e.renderSmallestFallback!==this.renderOptions.renderSmallestFallback&&(this.renderOptions.renderSmallestFallback=e.renderSmallestFallback),typeof e.renderLayers<"u"&&e.renderLayers!==this.renderOptions.renderLayers&&(this.renderOptions.renderLayers=e.renderLayers),typeof e.minSize<"u"&&e.minSize!==this.renderOptions.minSize&&(this.renderOptions.minSize=e.minSize),typeof e.maxImageSize<"u"&&e.maxImageSize!==this.renderOptions.maxImageSize&&(this.renderOptions.maxImageSize=e.maxImageSize),typeof e.quality<"u"&&e.quality!==this.renderOptions.quality&&(this.renderOptions.quality=e.quality)}appendChild(e){this.addImages([e])}removeChild(e){this.images.indexOf(e)!==-1&&(this.images=this.images.filter(t=>t!==e),this.sortByScales())}insertBefore(e,t){this.addImages([e])}hideInstance(){}addImages(e){for(let t of e)t.__parent=this,t.__owner=this.__owner;this.allImages.push(...e.filter(Boolean)),this.sortByScales()}sortByScales(){this._scheduleSortByScales=!0}getScheduledUpdates(e,t){return this._scheduleSortByScales?[this._sortByScales]:this.isFullyLoaded?[]:t>1/this.maxScaleFactor?this.fallback:[]}getAllPointsAt(e,t,i){if(this.images.length===0)return[];let n=xw(1/(i||1)/(window.devicePixelRatio||1),this.images,this.renderOptions.quality),s=this.images.length,a=t?Fn(t,Ii(this.x,this.y)):Ii(this.x,this.y);if(n!==this.images.length-1&&this.images[n+1]){let l=[];for(let m=s-1;m>=n;m--)l.push(m);let c=l[0];this.renderOptions.renderLayers&&(l=l.slice(-Math.min(l.length,this.renderOptions.renderLayers))),this.renderOptions.renderSmallestFallback&&l.indexOf(c)===-1&&l.unshift(c);let h=[];for(let m=0;m<l.length;m++)h.push(...this.images[l[m]].getAllPointsAt(e,a,i));return h}return this.images[n].getAllPointsAt(e,a,i)}};function Da(e,t,i,n,s){let a=Math.PI/180*s,l=Math.cos(a),c=Math.sin(a),h=l*(i-e)+c*(n-t)+e,m=l*(n-t)-c*(i-e)+t;return[h,m]}var Os=class extends _n{constructor(e,t){super(),this.type="world-object",this.intersectionBuffer=Pe(5),this.aggregateBuffer=Pe(9),this.invertedBuffer=Pe(9),this.rotation=0,this._updatedList=[];let{x:i=0,y:n=0}=t||{};e?(this.id=e.id||"",this.scale=1,this.layers=e.layers,this.points=Pe([1,i,n,i+e.width,n+e.height]),this.worldPoints=Pe([1,i,n,i+e.width,n+e.height]),this.filteredPointsBuffer=Pe(e.layers.length*5)):(this.id="",this.scale=1,this.layers=[],this.points=Pe(5),this.worldPoints=Pe(5),this.filteredPointsBuffer=Pe(5))}static createWithProps(e){let t=new Os;return t.applyProps(e),t}applyProps(e){let t=e.x||0,i=e.y||0;this.id=e.id;let n=typeof e.scale<"u"?e.scale:this.scale;this.points[0]=1,this.points[1]=t,this.points[2]=i,this.points[3]=t+e.width,this.points[4]=i+e.height,this.rotation=e.rotation||0,this.worldPoints[3]=this.worldPoints[1]+e.width,this.worldPoints[4]=this.worldPoints[2]+e.height,e.scale&&e.scale!==1&&this.atScale(n),this.scale=n}appendChild(e){e.points[0]===0&&e.points.set(this.points),e.__owner.value=this,this.addLayers([e])}removeChild(e){this.layers=this.layers.filter(t=>t!==e),this.filteredPointsBuffer=Pe(this.layers.length*5)}insertBefore(e,t){let i=this.layers.indexOf(t);if(i===-1||this.layers.indexOf(e)!==-1)return;let n=this.layers.slice(0,i),s=this.layers.slice(i);this.layers=[...n,e,...s]}hideInstance(){console.warn("hideInstance: not yet implemented")}getObjectsAt(e,t){if(this.rotation&&(e=this.applyRotation(e)),go(this.points,e,this.filteredPointsBuffer)[0]===0)return[];let i=this.layers.length,n=[];for(let s=0;s<i;s++){let a=this.layers[s];if(t&&a.isShape){let l=zn(a.points,Ii(this.x,this.y));if(!a.intersects([e[1]-l[1],e[2]-l[2]]))continue}if(go(zn(a.points,Ii(this.x,this.y)),e,this.filteredPointsBuffer)[0]!==0&&n.push(a),t){let l=a;n.push(...l.getObjectsAt(e,t))}}return n}applyRotation(e){if(this.rotation){let t={x:e[1],y:e[2]},i={x:e[1],y:e[4]},n={x:e[3],y:e[2]},s={x:e[3],y:e[4]},a=this.points[1]+(this.points[3]-this.points[1])/2,l=this.points[2]+(this.points[4]-this.points[2])/2,[c,h]=Da(a,l,t.x,t.y,this.rotation),[m,f]=Da(a,l,i.x,i.y,this.rotation),[y,S]=Da(a,l,n.x,n.y,this.rotation),[C,_]=Da(a,l,s.x,s.y,this.rotation),P=Math.min(c,m,y,C),I=Math.max(c,m,y,C),L=Math.min(h,f,S,_),E=Math.max(h,f,S,_);return Pe([e[0],P,L,I,E])}return e}getAllPointsAt(e,t,i){let n=Fn(Ii(this.x,this.y),Jn(this.scale),this.aggregateBuffer);this.rotation&&(e=this.applyRotation(e));let s=bw(e,this.points,this.intersectionBuffer),a=this.layers.length,l=[],c=zn(s,Fn(Jn(1/this.scale),Ii(-this.x,-this.y),this.invertedBuffer)),h=t?Fn(t,n,this.aggregateBuffer):n,m=i*this.scale;for(let f=0;f<a;f++)l.push(...this.layers[f].getAllPointsAt(c,h,m));return l}addLayers(e){let t=[];for(let i of e)this.layers.indexOf(i)===-1&&(t.push(i),i.points.length===5&&(i.points[1]<this.worldPoints[1]/this.scale||i.points[2]<this.worldPoints[2]/this.scale||i.points[3]>this.worldPoints[3]/this.scale||i.points[4]>this.worldPoints[4]/this.scale)&&(i.crop=i.crop||Pe([1,Math.max(this.worldPoints[1]/this.scale,i.points[1]),Math.max(this.worldPoints[2]/this.scale,i.points[2]),Math.min(this.worldPoints[3]/this.scale,i.points[3]),Math.min(this.worldPoints[4]/this.scale,i.points[4])])));this.layers=this.layers.concat(t),this.filteredPointsBuffer=Pe(this.layers.length*5)}getScheduledUpdates(e,t){let i=this.layers.length;this._updatedList=[];let n=t*this.scale;for(let s=0;s<i;s++){let a=this.layers[s].getScheduledUpdates(e,n);a&&this._updatedList.push(...a)}return this._updatedList}},rr=class extends _n{constructor(e=0,t=0,i=100,n="left-to-right"){super(),this.id="world",this.aggregateBuffer=Pe(9),this.isDirty=!1,this.zones=[],this.triggerQueue=[],this.activatedEvents=[],this._updatedList=[],this.translationBuffer=Pe(9),this.needsRecalculate=!0,this.emptyPaintables=[],this.renderOrder=[],this.objects=[],this.subscriptions=[],this._propagateEventTargets=[],this._alreadyFlushed=[],this._width=e,this._height=t,this.aspectRatio=Number.isNaN(e/t)?1:e/t,this.viewingDirection=n,this.points=Pe(i*5),this.filteredPointsBuffer=Pe(i*5)}get x(){return 0}get y(){return 0}get width(){return this._width}get height(){return this._height}static withProps(e){let t=new rr;return t.applyProps(e),t}applyProps(e){typeof e.width<"u"&&typeof e.height<"u"&&(e.width!==this._width||e.height!==this._height)&&this.resize(e.width,e.height),e.viewingDirection!==this.viewingDirection&&(this.viewingDirection=e.viewingDirection,this.triggerRepaint())}propagateTouchEvent(e,t,i){let n=[];for(let s of i)if(s.x&&s.y){let a=st.singleBox(1,1,s.x,s.y);n.push(this.getObjectsAt(a,!0).reverse())}return n.map(s=>this.propagateEvent(e,t,s,{bubbles:!0,cancelable:!0}))}propagatePointerEvent(e,t,i,n,s={}){let a=st.singleBox(1,1,i,n),l=this.getObjectsAt(a,!0).reverse();return this.propagateEvent(e,t,l,s)}propagateEvent(e,t,i,{bubbles:n=!1,cancelable:s=!1}={}){t.atlasTarget=this,this._propagateEventTargets.length=1,this._propagateEventTargets[0]=this;let a=!1;t.stopPropagation=()=>{a=!0};let l=i.length;for(let m=l-1;m>=0;m--){this._propagateEventTargets.unshift(i[m][0]);let f=i[m][1].length;if(f)for(let y=0;y<f;y++)this._propagateEventTargets.unshift(i[m][1][y])}let c=this._propagateEventTargets.length,h=!1;for(let m=0;m<c&&(t.atlasTarget=this._propagateEventTargets[m],t.atlasWorld=this,h=this._propagateEventTargets[m].dispatchEvent(e,t)||h,!a);m++);return h&&this.triggerRepaint(),this._propagateEventTargets}appendChild(e){let t=this.appendWorldObject(e);this.renderOrder.push(t/5)}removeChild(e){let t=this.objects.indexOf(e);if(t===-1){for(let i of this.objects)if(i&&i.id===e.id){this.removeChild(i);return}return}this.objects[t]=null,this.renderOrder=this.renderOrder.filter(i=>i!==t),this.points[t*5]=0,this.triggerRepaint(),this.needsRecalculate=!0}insertBefore(e,t){let i=this.objects.indexOf(t);if(i===-1)return;let n=this.appendWorldObject(e);this.renderOrder.splice(i-1,0,n/5)}hideInstance(){}asWorldObject(){return null}addZone(e){this.zones.push(e)}selectZone(e){if(typeof e=="string"){let t=this.zones.length;for(let i=0;i<t;i++)if(this.zones[i].id===e){this.selectedZone=i,this.trigger("zone-changed");return}}else this.zones[e]&&(this.selectedZone=e,this.trigger("zone-changed"))}deselectZone(){this.selectedZone=void 0}getActiveZone(){if(this.selectedZone)return this.zones[this.selectedZone]}hasActiveZone(){return typeof this.selectedZone<"u"}checkResizeInternalBuffer(){if(ww(this.points)===this.objects.length){let e=this.points,t=Pe(this.points.length*2);t.set(e,0),this.points=t}}appendWorldObject(e){this.checkResizeInternalBuffer();let t=this.objects.length*5,i=e.points;return e.points=this.points.subarray(this.objects.length*5,this.objects.length*5+5),e.points[1]=i[1],e.points[2]=i[2],e.points[3]=i[3],e.points[4]=i[4],this.objects.push(e),this.filteredPointsBuffer=Pe(this.objects.length*5),this.needsRecalculate=!0,this.triggerRepaint(),t}recalculateWorldSize(){let e=!1;if(this.needsRecalculate){let t=new Int32Array(this.objects.length),i=new Int32Array(this.objects.length),n=this.renderOrder.length;for(let l=0;l<n;l++){let c=this.renderOrder[l];this.objects[c]&&(t[l]=this.points[c*5+3],i[l]=this.points[c*5+4])}let s=Math.max(...t);s!==this._width&&(this._width=s,e=!0);let a=Math.max(...i);a!==this._height&&(this._height=a,e=!0),e&&this.trigger("recalculate-world-size",{width:s,height:a}),this.needsRecalculate=!1}return e}addObjectAt(e,t){t.width&&!t.height?t.height=t.width/e.width*e.height:t.height&&!t.width&&(t.width=t.height/e.height*e.width),(!t||!t.width||!t.height)&&(t.width=e.width,t.height=e.height);let{width:i,x:n,y:s}=t,a=i/e.width;this.checkResizeInternalBuffer(),this.points.set(st.singleBox(e.width,e.height,0,0),this.objects.length*5);let l=new Os(e);return l.points=this.points.subarray(this.objects.length*5,this.objects.length*5+5),this.objects.push(l),this.scaleWorldObject(this.objects.length-1,a),this.translateWorldObject(this.objects.length-1,n,s),this.filteredPointsBuffer=Pe(this.points.length*2),this.triggerRepaint(),this.needsRecalculate=!0,l}scaleWorldObject(e,t){xn(this.points.subarray(e*5,e*5+5),mo(t,this.points[e*5+1],this.points[e*5+2]));let i=this.objects[e];i&&(i.atScale(t),this.triggerRepaint())}translateWorldObject(e,t,i){xn(this.points.subarray(e*5,e*5+5),Ii(t,i));let n=this.objects[e];n&&(n.translate(t,i),this.triggerRepaint())}resize(e,t){return this._width=e,this._height=t,this.aspectRatio=e/t,this.triggerRepaint(),this}getObjects(){return this.objects}getPoints(){return this.points}getPointsFromViewer(e,t){let i=st.singleBox(e.width,e.height,e.x,e.y);return this.getPointsAt(i,t,e.scale)}addLayoutSubscriber(e){return this.subscriptions.push(e),()=>{this.subscriptions.splice(this.subscriptions.indexOf(e),1)}}getScheduledUpdates(e,t){let i=go(this.points,e,this.filteredPointsBuffer),n=this.objects.length;this._updatedList=[];for(let s=0;s<n;s++)if(i[s*5]!==0){if(!this.objects[s])continue;this._updatedList.push(...this.objects[s].getScheduledUpdates(e,t))}return this._updatedList}getObjectsAt(e,t=!1){let i=this.getActiveZone(),n=go(this.points,e,this.filteredPointsBuffer),s=this.renderOrder.length,a=[];for(let l=0;l<s;l++){let c=this.renderOrder[l];if(n[c*5]!==0){let h=this.objects[c];if(!h||i&&i.objects.indexOf(h)===-1)continue;if(h.type!=="world-object"){a.push([h,[h]]);continue}t?a.push([h,h.getObjectsAt(e,t)]):a.push([h,this.emptyPaintables])}}return a}getPointsAt(e,t,i=1){let n=this.getObjectsAt(e),s=Fn(Jn(i),Ii(-e[1],-e[2]),this.translationBuffer),a=t?Fn(t,s,this.aggregateBuffer):s,l=n.length,c=[];for(let h=0;h<l;h++)n[h]&&c.push(...n[h][0].getAllPointsAt(e,a,i));return c}flushSubscriptions(){if(this.triggerQueue.length){this._alreadyFlushed=[];let e=this.triggerQueue.length;for(let t=0;t<e;t++){if(this._alreadyFlushed.indexOf(this.triggerQueue[t][0])!==-1)continue;typeof this.triggerQueue[t][1]>"u"&&this._alreadyFlushed.push(this.triggerQueue[t][0]);let i=this.subscriptions.length;for(let n=0;n<i;n++)this.subscriptions[n].apply(null,this.triggerQueue[t])}this.triggerQueue=[]}}trigger(e,t){this.triggerQueue.push([e,t])}triggerEventActivation(){this.trigger("event-activation")}triggerRepaint(){this.trigger("repaint")}gotoRegion(e){this.trigger("goto-region",e)}goHome(e=!1){this.trigger("go-home",{immediate:e})}zoomTo(e,t,i){this.trigger("zoom-to",{point:t,factor:e,stream:i})}zoomIn(e){this.trigger("zoom-to",{point:e,factor:.5})}zoomOut(e){this.trigger("zoom-to",{point:e,factor:2})}constraintBounds(e){this.trigger("constrain-bounds",{immediate:e})}},Ua=/([0-9]+(px|em)\s+)+(solid)\s+(.*)/g,Wa={},eE=["backgroundColor","opacity","boxShadow","borderColor","borderWidth","borderStyle","outlineColor","outlineWidth","outlineOffset","outlineStyle"],Is=class extends _n{constructor(){super(),this.type="spacial-content",this.hoverEvents=!1,this.activeEvents=!1,this.display={x:0,y:0,scale:1,width:-1,height:-1,points:Pe(5)},this._parsed={border:{id:null,match:[]},outline:{id:null,match:[]}},this.props={},this.addHover=()=>{this.hovering=!0,this.__revision++},this.removeHover=()=>{this.hovering=!1,this.pressing=!1,this.__revision++},this.addPress=()=>{this.pressing=!0,this.__revision++},this.removePress=()=>{this.pressing=!1,this.__revision++},this.id=Ea(12),this.points=Pe(5)}getAllPointsAt(e,t){return[[this,this.points,t]]}applyProps(e={}){let t=!1;if(e.interactive!==this.props.interactive&&(t=!0,this.props.interactive=e.interactive),e.style){let i=e.border||e.style.border;if(i!==this._parsed.border.id)if(!i)this._parsed.border.id=null,this._parsed.border.match=[];else{let n=Wa[i]||Ua.exec(i)||Ua.exec(i);n&&(this._parsed.border.id=i,this._parsed.border.match=Wa[i]=n)}if(this._parsed.border.id&&(e.style.borderWidth=this._parsed.border.match[1],e.style.borderStyle="solid",e.style.borderColor=this._parsed.border.match[4]),e.style.outline!==this._parsed.outline.id)if(!e.style.outline)this._parsed.outline.id=null,this._parsed.outline.match=[];else{let n=Wa[e.style.outline]||Ua.exec(e.style.outline)||Ua.exec(e.style.outline);n&&(this._parsed.outline.id=e.style.outline,this._parsed.outline.match=Wa[e.style.outline]=n)}this._parsed.outline.id&&(e.style.outlineWidth=this._parsed.outline.match[1],e.style.outlineStyle="solid",e.style.outlineColor=this._parsed.outline.match[4]),this.props.style=e.style,e.backgroundColor&&!this.props.style.backgroundColor&&(this.props.style.backgroundColor=e.backgroundColor,t=!0),e.style.background&&!this.props.style.backgroundColor&&(this.props.style.backgroundColor=e.style.background,t=!0);for(let n of eE)if(this.props.style[n]!==e.style[n]){t=!0;break}e.style[":hover"]!==this.props.hoverStyles&&(this.props.hoverStyles=e.style[":hover"],this.hoverEvents||(this.hoverEvents=!0,this.addEventListener("pointerenter",this.addHover),this.addEventListener("pointerleave",this.removeHover)),t=!0),e.style[":active"]!==this.props.pressStyles&&(this.props.pressStyles=e.style[":active"],this.activeEvents||(this.activeEvents=!0,this.addEventListener("mousedown",this.addPress),this.addEventListener("mouseup",this.removePress)),t=!0)}e.href!==this.props.href&&(this.props.href=e.href,t=!0),e.hrefTarget!==this.props.hrefTarget&&(this.props.hrefTarget=e.hrefTarget,t=!0),e.title!==this.props.title&&(this.props.title=e.title,t=!0),e.className!==this.props.className&&(this.props.className=e.className,e.className&&!this.hoverEvents&&(this.hoverEvents=!0,this.addEventListener("pointerenter",this.addHover),this.addEventListener("pointerleave",this.removeHover)),e.className&&!this.activeEvents&&(this.activeEvents=!0,this.addEventListener("mousedown",this.addPress),this.addEventListener("mouseup",this.removePress)),t=!0),e.relativeSize!==this.props.relativeSize&&(this.props.relativeSize=e.relativeSize,t=!0),e.relativeStyle!==this.props.relativeStyle&&(this.props.relativeStyle=e.relativeStyle,t=!0),e.html!==this.props.html&&(this.props.html=e.html,t=!0),e.target&&(e.target.width!==this.display.width||e.target.height!==this.display.height||e.target.x!==this.points[1]||e.target.y!==this.points[2])&&(t=!0,this.points=st.singleBox(e.target.width,e.target.height,e.target.x,e.target.y),this.display.points=st.singleBox(e.target.width,e.target.height,e.target.x,e.target.y),this.display.width=e.target.width,this.display.height=e.target.height),t&&this.__revision++}},Ha=/([0-9]+(px|em)\s+)+(solid)\s+(.*)/g,qa={},tE=["backgroundColor","opacity","boxShadow","borderColor","borderWidth","borderStyle","outlineColor","outlineWidth","outlineOffset","outlineStyle"],gg=class extends _n{constructor(){super(),this.type="spacial-content",this.isShape=!0,this.hoverEvents=!1,this.activeEvents=!1,this.display={x:0,y:0,scale:1,width:-1,height:-1,points:Pe(5)},this.boundingBox=null,this._parsed={border:{id:null,match:[]},outline:{id:null,match:[]}},this.props={},this.shape={type:"none"},this.addHover=()=>{this.hovering=!0,this.__revision++},this.removeHover=()=>{this.hovering=!1,this.pressing=!1,this.__revision++},this.addPress=()=>{this.pressing=!0,this.__revision++},this.removePress=()=>{this.pressing=!1,this.__revision++},this.id=Ea(12),this.points=Pe(5),this.shape={type:"none"}}updateBoundingBox(){if(this.shape.type==="none")return;let e=this.shape.points;if(this.shape.points.length>2){let t=Math.min(...e.map(a=>a[0])),i=Math.min(...e.map(a=>a[1])),n=Math.max(0,...e.map(a=>a[0])),s=Math.max(0,...e.map(a=>a[1]));this.boundingBox={x:t,y:i,width:n-t,height:s-i};return}this.boundingBox=null}intersects(e){if(!e||this.shape.type==="none")return!1;let[t,i]=e,n=this.shape.points,s=this.boundingBox;if(s||(this.updateBoundingBox(),s=this.boundingBox),!s||t<s.x||t>s.x+s.width||i<s.y||i>s.height+s.y)return!1;let a=!1;for(let l=0,c=n.length-1;l<n.length;c=l++)n[l][1]>i!=n[c][1]>i&&t<(n[c][0]-n[l][0])*(i-n[l][1])/(n[c][1]-n[l][1])+n[l][0]&&(a=!a);return a}getAllPointsAt(e,t){return e[3]-e[1]===1&&e[4]-e[2]===1?this.intersects([e[1],e[2]])?[[this,this.points,t]]:[]:[[this,this.points,t]]}applyProps(e={}){let t=!1;if(e.points)if(this.shape.type!=="polygon"||this.shape.points.length!==e.points.length)this.shape={type:"polygon",points:e.points,open:e.open},this.updateBoundingBox();else{let i=!1,n=e.points.length;for(let s=0;s<n;s++)if(e.points[s][0]!==this.shape.points[s][0]||e.points[s][1]!==this.shape.points[s][1]){i=!0;break}i&&(this.shape={type:"polygon",points:e.points,open:e.open},this.updateBoundingBox())}if(e.interactive!==this.props.interactive&&(t=!0,this.props.interactive=e.interactive),(e.open||e.open===!1)&&(t=!0,this.shape.open=e.open),e.style){let i=e.border||e.style.border;if(i!==this._parsed.border.id)if(!i)this._parsed.border.id=null,this._parsed.border.match=[];else{let n=qa[i]||Ha.exec(i)||Ha.exec(i);n&&(this._parsed.border.id=i,this._parsed.border.match=qa[i]=n)}if(this._parsed.border.id&&(e.style.borderWidth=this._parsed.border.match[1],e.style.borderStyle="solid",e.style.borderColor=this._parsed.border.match[4]),e.style.outline!==this._parsed.outline.id)if(!e.style.outline)this._parsed.outline.id=null,this._parsed.outline.match=[];else{let n=qa[e.style.outline]||Ha.exec(e.style.outline)||Ha.exec(e.style.outline);n&&(this._parsed.outline.id=e.style.outline,this._parsed.outline.match=qa[e.style.outline]=n)}this._parsed.outline.id&&(e.style.outlineWidth=this._parsed.outline.match[1],e.style.outlineStyle="solid",e.style.outlineColor=this._parsed.outline.match[4]),this.props.style=e.style,e.backgroundColor&&!this.props.style.backgroundColor&&(this.props.style.backgroundColor=e.backgroundColor,t=!0),e.style.background&&!this.props.style.backgroundColor&&(this.props.style.backgroundColor=e.style.background,t=!0);for(let n of tE)if(this.props.style[n]!==e.style[n]){t=!0;break}e.style[":hover"]!==this.props.hoverStyles&&(this.props.hoverStyles=e.style[":hover"],this.hoverEvents||(this.hoverEvents=!0,this.addEventListener("pointerenter",this.addHover),this.addEventListener("pointerleave",this.removeHover)),t=!0),e.style[":active"]!==this.props.pressStyles&&(this.props.pressStyles=e.style[":active"],this.activeEvents||(this.activeEvents=!0,this.addEventListener("mousedown",this.addPress),this.addEventListener("mouseup",this.removePress)),t=!0)}e.href!==this.props.href&&(this.props.href=e.href,t=!0),e.hrefTarget!==this.props.hrefTarget&&(this.props.hrefTarget=e.hrefTarget,t=!0),e.title!==this.props.title&&(this.props.title=e.title,t=!0),e.className!==this.props.className&&(this.props.className=e.className,e.className&&!this.hoverEvents&&(this.hoverEvents=!0,this.addEventListener("pointerenter",this.addHover),this.addEventListener("pointerleave",this.removeHover)),e.className&&!this.activeEvents&&(this.activeEvents=!0,this.addEventListener("mousedown",this.addPress),this.addEventListener("mouseup",this.removePress)),t=!0),e.relativeSize!==this.props.relativeSize&&(this.props.relativeSize=e.relativeSize,t=!0),e.relativeStyle!==this.props.relativeStyle&&(this.props.relativeStyle=e.relativeStyle,t=!0),e.html!==this.props.html&&(this.props.html=e.html,t=!0),e.target&&(e.target.width!==this.display.width||e.target.height!==this.display.height||e.target.x!==this.points[1]||e.target.y!==this.points[2])&&(t=!0,this.points=st.singleBox(e.target.width,e.target.height,e.target.x,e.target.y),this.display.points=st.singleBox(e.target.width,e.target.height,e.target.x,e.target.y),this.display.width=e.target.width,this.display.height=e.target.height),t&&this.__revision++}},So=class extends _n{constructor(){super(),this.type="spacial-content",this.color="#000",this.text="",this.display={x:0,y:0,scale:1,width:100,height:100,points:Pe(5)},this.interactive=!1,this.props={font:"18px Arial, sans-serif",lineHeight:1,textAlign:"left",verticalAlign:"top",paddingX:0,paddingY:0,fitParent:!1,lineBreak:"auto",strokeText:!1,sizeToFill:!1,maxFontSizeToFill:void 0,allowNewLine:!0,justifyLines:!1,renderHDPI:!1,textDecoration:"none",interactive:!1,relativeSize:!1},this.id="",this.points=Pe(5)}getAllPointsAt(e,t){return[[this,this.points,t]]}applyProps(e){var t=e,{id:i,target:n,text:s,color:a,backgroundColor:l,fontSize:c=18,interactive:h,fontFamily:m="Arial, sans-serif"}=t,f=le(t,["id","target","text","color","backgroundColor","fontSize","interactive","fontFamily"]);f.font=`${c}px ${m}`,this.interactive=h||!1,typeof s<"u"&&(this.text=s||""),a&&(this.color=a),l&&(this.backgroundColor=l),i&&(this.id=i),n&&(this.points=st.singleBox(n.width,n.height,n.x,n.y),this.display.points=this.points,this.display.width=n.width,this.display.height=n.height),this.props=A(A({},this.props),f),this.__revision++}},$t=Math.pow,Qa=Math.sqrt,Eo=Math.sin,mg=Math.cos,Co=Math.PI,Va=1.70158,Ga=Va*1.525,vg=Va+1,yg=2*Co/3,bg=2*Co/4.5,Ya=function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},En={linear:e=>e,easeInQuad:function(e){return e*e},easeOutQuad:function(e){return 1-(1-e)*(1-e)},easeInOutQuad:function(e){return e<.5?2*e*e:1-$t(-2*e+2,2)/2},easeInCubic:function(e){return e*e*e},easeOutCubic:function(e){return 1-$t(1-e,3)},easeInOutCubic:function(e){return e<.5?4*e*e*e:1-$t(-2*e+2,3)/2},easeInQuart:function(e){return e*e*e*e},easeOutQuart:function(e){return 1-$t(1-e,4)},easeInOutQuart:function(e){return e<.5?8*e*e*e*e:1-$t(-2*e+2,4)/2},easeInQuint:function(e){return e*e*e*e*e},easeOutQuint:function(e){return 1-$t(1-e,5)},easeInOutQuint:function(e){return e<.5?16*e*e*e*e*e:1-$t(-2*e+2,5)/2},easeInSine:function(e){return 1-mg(e*Co/2)},easeOutSine:function(e){return Eo(e*Co/2)},easeInOutSine:function(e){return-(mg(Co*e)-1)/2},easeInExpo:function(e){return e===0?0:$t(2,10*e-10)},easeOutExpo:function(e){return e===1?1:1-$t(2,-10*e)},easeInOutExpo:function(e){return e===0?0:e===1?1:e<.5?$t(2,20*e-10)/2:(2-$t(2,-20*e+10))/2},easeInCirc:function(e){return 1-Qa(1-$t(e,2))},easeOutCirc:function(e){return Qa(1-$t(e-1,2))},easeInOutCirc:function(e){return e<.5?(1-Qa(1-$t(2*e,2)))/2:(Qa(1-$t(-2*e+2,2))+1)/2},easeInBack:function(e){return vg*e*e*e-Va*e*e},easeOutBack:function(e){return 1+vg*$t(e-1,3)+Va*$t(e-1,2)},easeInOutBack:function(e){return e<.5?$t(2*e,2)*((Ga+1)*2*e-Ga)/2:($t(2*e-2,2)*((Ga+1)*(e*2-2)+Ga)+2)/2},easeInElastic:function(e){return e===0?0:e===1?1:-$t(2,10*e-10)*Eo((e*10-10.75)*yg)},easeOutElastic:function(e){return e===0?0:e===1?1:$t(2,-10*e)*Eo((e*10-.75)*yg)+1},easeInOutElastic:function(e){return e===0?0:e===1?1:e<.5?-($t(2,20*e-10)*Eo((20*e-11.125)*bg))/2:$t(2,-20*e+10)*Eo((20*e-11.125)*bg)/2+1},easeInBounce:function(e){return 1-Ya(1-e)},easeOutBounce:Ya,easeInOutBounce:function(e){return e<.5?(1-Ya(1-2*e))/2:(1+Ya(2*e-1))/2}},iE=class{constructor(e){this.runtime=e,this.pendingTransition={from:Pe(5),to:Pe(5),elapsed_time:0,done:!0,total_time:0,timingFunction:En.easeInOutQuad,constrain:!1}}hasPending(){return!this.pendingTransition.done}getPendingTransition(){return this.pendingTransition}getPendingFrom(){return this.pendingTransition.from}customTransition(e){e(this.pendingTransition)}stopTransition(){this.pendingTransition.from=Pe(this.runtime.target),this.pendingTransition.to=Pe(this.runtime.target),this.pendingTransition.done=!0,this.pendingTransition.elapsed_time=0,this.pendingTransition.total_time=0}runTransition(e,t){if(!this.pendingTransition.done){let i=this.pendingTransition,n=i.total_time===0?0:(i.elapsed_time+t)/i.total_time,s=i.total_time===0?1:n===0?0:i.timingFunction(n);e[1]=i.from[1]+(i.to[1]-i.from[1])*s,e[2]=i.from[2]+(i.to[2]-i.from[2])*s,e[3]=i.from[3]+(i.to[3]-i.from[3])*s,e[4]=i.from[4]+(i.to[4]-i.from[4])*s,this.pendingTransition.elapsed_time+=t,this.pendingTransition.elapsed_time>=this.pendingTransition.total_time&&(this.pendingTransition.done=!0,this.pendingTransition.constrain&&this.constrainBounds({transition:{duration:this.pendingTransition.total_time===0?0:500,easing:En.easeOutExpo}}))}}zoomTo(e,{origin:t,stream:i=!1,transition:n}={}){let s=this.runtime.getZoomedPosition(e,{origin:t}),a=Math.abs(1-e);this.applyTransition(s,n,{duration:2e3*a,easing:En.easeOutExpo,constrain:!0},{stream:!1})}constrainBounds({transition:e,panPadding:t=0}={}){let[i,n]=this.runtime.constrainBounds(this.runtime.target,{panPadding:t});i&&(this.applyTransition(n,e,{duration:500,easing:En.easeOutQuart,constrain:!1}),this.runtime.updateNextFrame())}applyTransition(e,t,i,{stream:n}={}){this.pendingTransition.from=Pe(this.runtime.target),this.pendingTransition.to=e,n||(this.pendingTransition.elapsed_time=0),this.pendingTransition.done=!1,this.pendingTransition.total_time=typeof(t==null?void 0:t.duration)<"u"?t.duration:typeof(i==null?void 0:i.duration)<"u"?i.duration:1e3,this.pendingTransition.constrain=typeof(t==null?void 0:t.constrain)<"u"?t.constrain:typeof(i==null?void 0:i.constrain)<"u"?i.constrain:!1,this.pendingTransition.timingFunction=(t==null?void 0:t.easing)||(i==null?void 0:i.easing)||En.easeInOutSine}goToRegion(e,{transition:t}={}){let i=this.runtime.clampRegion(e);this.applyTransition(st.singleBox(i.width,i.height,i.x,i.y),t,{duration:1e3,easing:En.easeOutExpo,constrain:!0}),this.runtime.updateNextFrame()}},Ka=class{constructor(e,t,i,n=[],s){this.id=Ea(),this.ready=!1,this.transformBuffer=Pe(500),this.lastTarget=Pe(5),this.zoomBuffer=Pe(5),this.logNextRender=!1,this.pendingUpdate=!0,this.isCommitting=!1,this.firstRender=!0,this.mode="explore",this.controllers=[],this.controllersRunning=!1,this.controllerStopFunctions=[],this.maxScaleFactor=1,this._viewerToWorld={x:0,y:0},this._lastGoodScale=1,this.hooks={useFrame:[],useBeforeFrame:[],useAfterPaint:[],useAfterFrame:[]},this.hookOptions={filters:{grayscale:0,contrast:0,brightness:0,saturate:0,sepia:0,invert:0,hueRotate:0,blur:0}},this._viewport={x:0,y:0,width:0,height:0},this.setViewport=a=>{let l=Math.round(typeof a.x>"u"?this.target[1]:a.x),c=Math.round(typeof a.y>"u"?this.target[2]:a.y);a.width?this.target[3]=l+a.width:this.target[3]=this.target[3]-this.target[1]+l,a.height?this.target[4]=c+a.height:this.target[4]=this.target[4]-this.target[2]+c,Math.abs(this.target[1]-l)>.01&&(this.target[1]=l),Math.abs(this.target[2]-c)>.01&&(this.target[2]=c),this.pendingUpdate=!0},this.render=a=>{let l=a-this.lastTime;if(this.isCommitting||this.fpsLimit&&l<1e3/this.fpsLimit){this.stopId=window.requestAnimationFrame(this.render);return}this.lastTime=a,this.world.flushSubscriptions(),this.stopId=window.requestAnimationFrame(this.render),this.hook("useFrame",l);let c=this.pendingUpdate,h=this.renderer.pendingUpdate();if(this.transitionManager.hasPending()&&(this.transitionManager.runTransition(this.target,l),this.pendingUpdate=!0,this.updateControllerPosition()),!this.firstRender&&!c&&!h&&this.target[0]===this.lastTarget[0]&&this.target[1]===this.lastTarget[1]&&this.target[2]===this.lastTarget[2]&&this.target[3]===this.lastTarget[3]&&this.target[4]===this.lastTarget[4])return;this.hook("useBeforeFrame",l),this.renderer.beforeFrame(this.world,l,this.target,this.hookOptions);let m=this.getScaleFactor(),f=this.renderer.getPointsAt(this.world,this.target,this.aggregate,m),y=f.length;for(let _=0;_<y;_++){let P=f[_][0],I=f[_][1],L=f[_][2],E=L?zn(I,L,this.transformBuffer):I;this.renderer.prepareLayer(P,P.__parent&&L?zn(P.__parent.crop||P.__parent.points,L):E);let N=E.length/5;for(let F=0;F<N;F++){let U=F*5;E[U]!==0&&(this.renderer.paint(P,F,E[U+1],E[U+2],E[U+3]-E[U+1],E[U+4]-E[U+2]),this.hook("useAfterPaint",P))}this.renderer.finishLayer(P,I)}this.renderer.afterFrame(this.world,l,this.target,this.hookOptions),this.hook("useAfterFrame",l),this.lastTarget[0]=this.target[0],this.lastTarget[1]=this.target[1],this.lastTarget[2]=this.target[2],this.lastTarget[3]=this.target[3],this.lastTarget[4]=this.target[4],this.firstRender=!1,this.pendingUpdate=!1,this.logNextRender=!1,this.renderer.isReady()&&(this.ready=!0,this.world.trigger("ready")),this.world.flushSubscriptions();let S=this.world.getScheduledUpdates(this.target,m),C=S.length;if(C>0)for(let _=0;_<C;_++){let P=S[C-_-1]();P?P.then(()=>{this.pendingUpdate=!0}):this.pendingUpdate=!0}},this.renderer=e,this.world=t,this.options=A({maxOverZoom:1,maxUnderZoom:1,visibilityRatio:1.5},s||{}),this.target=st.projection(i),this.manualHomePosition=!1,this.pendingUpdate=!0,this.homePosition=st.projection(this.world),this.manualFocalPosition=!1,this.focalPosition=this.target,this.updateFocalPosition(),this.transitionManager=new iE(this),this.aggregate=Jn(1),this.world.addLayoutSubscriber(a=>{a==="repaint"&&(this.pendingUpdate=!0),a==="recalculate-world-size"&&(this.manualHomePosition||(this.setHomePosition(),this.goHome()),this.updateFocalPosition())}),this.lastTime=performance.now(),this.controllers=n,this.render(this.lastTime),this.startControllers()}get x(){return this.target[1]}set x(e){this.target[1]=e}get y(){return this.target[2]}set y(e){this.target[2]=e}get x2(){return this.target[3]}set x2(e){this.target[3]=e}get y2(){return this.target[4]}set y2(e){this.target[4]=e}get width(){return this.target[3]-this.target[1]}set width(e){this.target[3]=this.target[1]+e}get height(){return this.target[4]-this.target[2]}set height(e){this.target[4]=this.target[2]=e}setHomePosition(e){this.homePosition.set(st.projection(e||this.world)),this.pendingUpdate=!0}startControllers(){if(!this.controllersRunning){for(let e of this.controllers)this.controllerStopFunctions.push(e.start(this));this.controllersRunning=!0}}stopControllers(){if(this.controllersRunning){for(let e of this.controllerStopFunctions)e();this.controllersRunning=!1,this.controllerStopFunctions=[]}}updateControllerPosition(){for(let e of this.controllers)e.updatePosition(this.x,this.y,this.width,this.height)}triggerResize(){this.renderer.triggerResize&&this.renderer.triggerResize(),this.pendingUpdate=!0}addController(e){this.controllers.push(e),this.controllersRunning&&e.start(this),this.pendingUpdate=!0}cover(){return this.goHome({cover:!0})}getRendererScreenPosition(){return this.renderer.getRendererScreenPosition()}updateRendererScreenPosition(){this.pendingUpdate=!0,this.renderer.resize()}setOptions(e){this.options=A(A({},this.options),e)}goHome(e={}){if(this.world.width<=0||this.world.height<=0)return;let t=this.getScaleFactor(),i=e.position?{x:e.position[1],y:e.position[2],width:e.position[3]-e.position[1],height:e.position[4]-e.position[2]}:{x:this.homePosition[1],y:this.homePosition[2],width:this.homePosition[3]-this.homePosition[1],height:this.homePosition[4]-this.homePosition[2]},n=this.width*t,s=this.height*t,a=i.width/n,l=i.height/s,c=n/s;if(e.cover?a>l:a<l){let h=c*i.height,m=(h-i.width)/2;this.target[1]=Math.round(-m+i.x),this.target[2]=Math.round(i.y),this.target[3]=Math.round(h-m+i.x),this.target[4]=Math.round(i.height+i.y)}else{let h=i.width/c,m=(h-i.height)/2;this.target[1]=Math.round(i.x),this.target[2]=Math.round(i.y-m),this.target[3]=Math.round(i.x+i.width),this.target[4]=Math.round(i.y+h-m)}this.constrainBounds(this.target),this.updateControllerPosition()}resize(e,t,i,n){this.updateFocalPosition(e-t,i-n);let s=t/e,a=n/i;this.target[3]=this.target[1]+(this.target[3]-this.target[1])*s,this.target[4]=this.target[2]+(this.target[4]-this.target[2])*a,this.goHome({position:this.focalPosition}),this.renderer.resize(t,n),this.pendingUpdate=!0}updateFocalPosition(e,t){if(!this.manualFocalPosition){let i=this.width,n=this.height,s=Math.min(i,n),a=0,l=0,c=this.x+a,h=this.y+l;if(i<n){let m=this.height-this.width;this.focalPosition=st.projection({x:c,y:h+m/2,width:s-a*2,height:s-l*2}),this.pendingUpdate=!0}else{let m=this.width-this.height;this.focalPosition=st.projection({x:c+m/2,y:h,width:s-a*2,height:s-l*2}),this.pendingUpdate=!0}}}getViewport(){return this._viewport.x=this.target[1],this._viewport.y=this.target[2],this._viewport.width=this.target[3]-this.target[1],this._viewport.height=this.target[4]-this.target[2],this._viewport}constrainBounds(e,{panPadding:t=0,ref:i=!1}={}){let{minX:n,maxX:s,minY:a,maxY:l}=this.getBounds({target:e,padding:t}),c=!1,h=i?e:Pe(e),m=Math.round(e[3]-e[1]),f=Math.round(e[4]-e[2]);return n>e[1]&&(c=!0,h[1]=n,h[3]=n+m),a>e[2]&&(c=!0,h[2]=a,h[4]=a+f),s<e[1]&&(c=!0,h[1]=s,h[3]=s+m),l<e[2]&&(c=!0,h[2]=l,h[4]=l+f),[c,h]}getBounds(e){let t=e.target||this.target,i=e.padding,n=this.options.visibilityRatio,s=Math.abs(1-n);if(this.world.hasActiveZone()){let L=this.world.getActiveZone();if(L){let E=t[3]-t[1]<L.points[3]-L.points[1],N=t[4]-t[2]<L.points[4]-L.points[2];return{minX:E?L.points[1]-i:L.points[1]+(L.points[3]-L.points[1])/2-(t[3]-t[1])/2,maxX:N?L.points[2]-i:L.points[2]+(L.points[4]-L.points[2])/2-(t[4]-t[2])/2,minY:E?L.points[3]+i:L.points[1]+(L.points[3]-L.points[1])/2-(t[3]-t[1])/2,maxY:N?L.points[4]+i:L.points[2]+(L.points[4]-L.points[2])/2-(t[4]-t[2])/2}}}let a=t[3]-t[1],l=this.world.width,c=-a*s,h=l-a-c,m=t[4]-t[2],f=this.world.height,y=-m*s,S=f-m-y,C=Math.round(Math.max(c,h)),_=Math.round(Math.min(c,h)),P=Math.round(Math.max(y,S)),I=Math.round(Math.min(y,S));return{minX:_,maxX:C,minY:I,maxY:P}}getScaleFactor(e=!1){let t=this.renderer.getScale(this.target[3]-this.target[1],this.target[4]-this.target[2],e);return t===0?this._lastGoodScale:(this._lastGoodScale=t,t)}getZoomedPosition(e,{origin:t,fromPos:i}){var n;let s=i?{width:i[3]-i[1],height:i[4]-i[2]}:void 0,a=s?this.renderer.getScale(s.width,s.height):this.getScaleFactor(),l=s?s.width:this.width,c=s?s.height:this.height,h=(n=this.getRendererScreenPosition())==null?void 0:n.width,m=this.world.width,f=h?h/m:1,y=this.options.maxUnderZoom,S=Math.max(f||1,this.options.maxOverZoom),C=1/e,_=a*C;if(C<1){let I=l*a,L=c*a,E=this.world.width/I,N=this.world.height/L;if(E>N){let F=this.world.width*_,U=~~(l*a)*y;F<U&&(e=this.world.width*a/(l*a*y))}else{let F=this.world.height*_,U=~~(c*a)*y;F<U&&(e=this.world.height*a/(c*a*y))}}else _>S&&(e=a/S);let P=zn(this.target,mo(e,t?t.x:this.target[1]+(this.target[3]-this.target[1])/2,t?t.y:this.target[2]+(this.target[4]-this.target[2])/2),this.zoomBuffer);return this.constrainBounds(P,{ref:!0,panPadding:100}),P}clampRegion({x:e,y:t,width:i,height:n,padding:s=0}){let a=this.width,l=this.height,c=i/a<n/l,h=e-s,m=t-s,f=i+s*2,y=n+s*2;if(c){let C=y/l*a;return{x:h-(C-f)/2,y:m,width:C,height:y}}let S=f/a*l;return{x:h,y:m-(S-y)/2,width:f,height:S}}viewerToWorld(e,t){let i=this.getScaleFactor();return this._viewerToWorld.x=this.target[1]+e/i,this._viewerToWorld.y=this.target[2]+t/i,this._viewerToWorld}worldToViewer(e,t,i,n){let s=st.singleBox(i,n,e,t);return xn(s,Fn(Jn(this.getScaleFactor()),Ii(-this.target[1],-this.target[2]))),{x:s[1],y:s[2],width:s[3]-s[1],height:s[4]-s[2],strand:s}}setScale(e,t){xn(this.target,mo(e,t?t.x:this.target[1]+(this.target[3]-this.target[1])/2,t?t.y:this.target[2]+(this.target[4]-this.target[2])/2)),this.pendingUpdate=!0}syncTo(e){let t=this.target;return this.target=e.target,this.pendingUpdate=!0,()=>{this.target=t}}stop(){return typeof this.stopId<"u"&&(window.cancelAnimationFrame(this.stopId),this.stopId=void 0),()=>{this.render(performance.now())}}reset(){this.renderer.reset()}selectZone(e){this.world.selectZone(e),this.pendingUpdate=!0}deselectZone(){this.world.deselectZone(),this.pendingUpdate=!0}hook(e,t){let i=this.hooks[e].length;if(i!==0)for(let n=0;n<i;n++)this.hooks[e][n](t)}registerHook(e,t){return this.hooks[e].push(t),()=>{this.hooks[e]=this.hooks[e].filter(i=>i!==t)}}updateNextFrame(){this.pendingUpdate=!0}},ko=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,nE=typeof AbortController=="function",Xa=nE?AbortController:class{constructor(){this.signal=new wg}abort(e=new Error("This operation was aborted")){this.signal.reason=e,this.signal.dispatchEvent({type:"abort",target:this.signal})}},rE=typeof AbortSignal=="function",sE=typeof Xa.AbortSignal=="function",wg=rE?AbortSignal:sE?Xa.AbortController:class{constructor(){this.reason=void 0,this.aborted=!1,this._listeners=[]}dispatchEvent(e){e.type==="abort"&&(this.aborted=!0,this.onabort(e),this._listeners.forEach(t=>t(e),this))}onabort(){}addEventListener(e,t){e==="abort"&&this._listeners.push(t)}removeEventListener(e,t){e==="abort"&&(this._listeners=this._listeners.filter(i=>i!==t))}},Ec=new Set,Cc=(e,t)=>{let i=`LRU_CACHE_OPTION_${e}`;Za(i)&&Ac(i,`${e} option`,`options.${t}`,Ls)},kc=(e,t)=>{let i=`LRU_CACHE_METHOD_${e}`;if(Za(i)){let{prototype:n}=Ls,{get:s}=Object.getOwnPropertyDescriptor(n,e);Ac(i,`${e} method`,`cache.${t}()`,s)}},oE=(e,t)=>{let i=`LRU_CACHE_PROPERTY_${e}`;if(Za(i)){let{prototype:n}=Ls,{get:s}=Object.getOwnPropertyDescriptor(n,e);Ac(i,`${e} property`,`cache.${t}`,s)}},xg=(...e)=>{typeof process=="object"&&process&&typeof process.emitWarning=="function"?process.emitWarning(...e):console.error(...e)},Za=e=>!Ec.has(e),Ac=(e,t,i,n)=>{Ec.add(e);let s=`The ${t} is deprecated. Please use ${i} instead.`;xg(s,"DeprecationWarning",e,n)},sr=e=>e&&e===Math.floor(e)&&e>0&&isFinite(e),_g=e=>sr(e)?e<=Math.pow(2,8)?Uint8Array:e<=Math.pow(2,16)?Uint16Array:e<=Math.pow(2,32)?Uint32Array:e<=Number.MAX_SAFE_INTEGER?Ja:null:null,Ja=class extends Array{constructor(e){super(e),this.fill(0)}},aE=class{constructor(e){if(e===0)return[];let t=_g(e);this.heap=new t(e),this.length=0}push(e){this.heap[this.length++]=e}pop(){return this.heap[--this.length]}},Ls=class{constructor(e={}){let{max:t=0,ttl:i,ttlResolution:n=1,ttlAutopurge:s,updateAgeOnGet:a,updateAgeOnHas:l,allowStale:c,dispose:h,disposeAfter:m,noDisposeOnSet:f,noUpdateTTL:y,maxSize:S=0,maxEntrySize:C=0,sizeCalculation:_,fetchMethod:P,fetchContext:I,noDeleteOnFetchRejection:L,noDeleteOnStaleGet:E,allowStaleOnFetchRejection:N,allowStaleOnFetchAbort:F,ignoreFetchAbort:U}=e,{length:q,maxAge:G,stale:V}=e instanceof Ls?{}:e;if(t!==0&&!sr(t))throw new TypeError("max option must be a nonnegative integer");let ae=t?_g(t):Array;if(!ae)throw new Error("invalid max value: "+t);if(this.max=t,this.maxSize=S,this.maxEntrySize=C||this.maxSize,this.sizeCalculation=_||q,this.sizeCalculation){if(!this.maxSize&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(this.fetchMethod=P||null,this.fetchMethod&&typeof this.fetchMethod!="function")throw new TypeError("fetchMethod must be a function if specified");if(this.fetchContext=I,!this.fetchMethod&&I!==void 0)throw new TypeError("cannot set fetchContext without fetchMethod");if(this.keyMap=new Map,this.keyList=new Array(t).fill(null),this.valList=new Array(t).fill(null),this.next=new ae(t),this.prev=new ae(t),this.head=0,this.tail=0,this.free=new aE(t),this.initialFill=1,this.size=0,typeof h=="function"&&(this.dispose=h),typeof m=="function"?(this.disposeAfter=m,this.disposed=[]):(this.disposeAfter=null,this.disposed=null),this.noDisposeOnSet=!!f,this.noUpdateTTL=!!y,this.noDeleteOnFetchRejection=!!L,this.allowStaleOnFetchRejection=!!N,this.allowStaleOnFetchAbort=!!F,this.ignoreFetchAbort=!!U,this.maxEntrySize!==0){if(this.maxSize!==0&&!sr(this.maxSize))throw new TypeError("maxSize must be a positive integer if specified");if(!sr(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");this.initializeSizeTracking()}if(this.allowStale=!!c||!!V,this.noDeleteOnStaleGet=!!E,this.updateAgeOnGet=!!a,this.updateAgeOnHas=!!l,this.ttlResolution=sr(n)||n===0?n:1,this.ttlAutopurge=!!s,this.ttl=i||G||0,this.ttl){if(!sr(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.initializeTTLTracking()}if(this.max===0&&this.ttl===0&&this.maxSize===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.max&&!this.maxSize){let W="LRU_CACHE_UNBOUNDED";Za(W)&&(Ec.add(W),xg("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",W,Ls))}V&&Cc("stale","allowStale"),G&&Cc("maxAge","ttl"),q&&Cc("length","sizeCalculation")}getRemainingTTL(e){return this.has(e,{updateAgeOnHas:!1})?1/0:0}initializeTTLTracking(){this.ttls=new Ja(this.max),this.starts=new Ja(this.max),this.setItemTTL=(i,n,s=ko.now())=>{if(this.starts[i]=n!==0?s:0,this.ttls[i]=n,n!==0&&this.ttlAutopurge){let a=setTimeout(()=>{this.isStale(i)&&this.delete(this.keyList[i])},n+1);a.unref&&a.unref()}},this.updateItemAge=i=>{this.starts[i]=this.ttls[i]!==0?ko.now():0};let e=0,t=()=>{let i=ko.now();if(this.ttlResolution>0){e=i;let n=setTimeout(()=>e=0,this.ttlResolution);n.unref&&n.unref()}return i};this.getRemainingTTL=i=>{let n=this.keyMap.get(i);return n===void 0?0:this.ttls[n]===0||this.starts[n]===0?1/0:this.starts[n]+this.ttls[n]-(e||t())},this.isStale=i=>this.ttls[i]!==0&&this.starts[i]!==0&&(e||t())-this.starts[i]>this.ttls[i]}updateItemAge(e){}setItemTTL(e,t,i){}isStale(e){return!1}initializeSizeTracking(){this.calculatedSize=0,this.sizes=new Ja(this.max),this.removeItemSize=e=>{this.calculatedSize-=this.sizes[e],this.sizes[e]=0},this.requireSize=(e,t,i,n)=>{if(this.isBackgroundFetch(t))return 0;if(!sr(i))if(n){if(typeof n!="function")throw new TypeError("sizeCalculation must be a function");if(i=n(t,e),!sr(i))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return i},this.addItemSize=(e,t)=>{if(this.sizes[e]=t,this.maxSize){let i=this.maxSize-this.sizes[e];for(;this.calculatedSize>i;)this.evict(!0)}this.calculatedSize+=this.sizes[e]}}removeItemSize(e){}addItemSize(e,t){}requireSize(e,t,i,n){if(i||n)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache")}*indexes({allowStale:e=this.allowStale}={}){if(this.size)for(let t=this.tail;!(!this.isValidIndex(t)||((e||!this.isStale(t))&&(yield t),t===this.head));)t=this.prev[t]}*rindexes({allowStale:e=this.allowStale}={}){if(this.size)for(let t=this.head;!(!this.isValidIndex(t)||((e||!this.isStale(t))&&(yield t),t===this.tail));)t=this.next[t]}isValidIndex(e){return this.keyMap.get(this.keyList[e])===e}*entries(){for(let e of this.indexes())this.isBackgroundFetch(this.valList[e])||(yield[this.keyList[e],this.valList[e]])}*rentries(){for(let e of this.rindexes())this.isBackgroundFetch(this.valList[e])||(yield[this.keyList[e],this.valList[e]])}*keys(){for(let e of this.indexes())this.isBackgroundFetch(this.valList[e])||(yield this.keyList[e])}*rkeys(){for(let e of this.rindexes())this.isBackgroundFetch(this.valList[e])||(yield this.keyList[e])}*values(){for(let e of this.indexes())this.isBackgroundFetch(this.valList[e])||(yield this.valList[e])}*rvalues(){for(let e of this.rindexes())this.isBackgroundFetch(this.valList[e])||(yield this.valList[e])}[Symbol.iterator](){return this.entries()}find(e,t={}){for(let i of this.indexes())if(e(this.valList[i],this.keyList[i],this))return this.get(this.keyList[i],t)}forEach(e,t=this){for(let i of this.indexes())e.call(t,this.valList[i],this.keyList[i],this)}rforEach(e,t=this){for(let i of this.rindexes())e.call(t,this.valList[i],this.keyList[i],this)}get prune(){return kc("prune","purgeStale"),this.purgeStale}purgeStale(){let e=!1;for(let t of this.rindexes({allowStale:!0}))this.isStale(t)&&(this.delete(this.keyList[t]),e=!0);return e}dump(){let e=[];for(let t of this.indexes({allowStale:!0})){let i=this.keyList[t],n=this.valList[t],s=this.isBackgroundFetch(n)?n.__staleWhileFetching:n;if(s===void 0)continue;let a={value:s};if(this.ttls){a.ttl=this.ttls[t];let l=ko.now()-this.starts[t];a.start=Math.floor(Date.now()-l)}this.sizes&&(a.size=this.sizes[t]),e.unshift([i,a])}return e}load(e){this.clear();for(let[t,i]of e){if(i.start){let n=Date.now()-i.start;i.start=ko.now()-n}this.set(t,i.value,i)}}dispose(e,t,i){}set(e,t,{ttl:i=this.ttl,start:n,noDisposeOnSet:s=this.noDisposeOnSet,size:a=0,sizeCalculation:l=this.sizeCalculation,noUpdateTTL:c=this.noUpdateTTL}={}){if(a=this.requireSize(e,t,a,l),this.maxEntrySize&&a>this.maxEntrySize)return this.delete(e),this;let h=this.size===0?void 0:this.keyMap.get(e);if(h===void 0)h=this.newIndex(),this.keyList[h]=e,this.valList[h]=t,this.keyMap.set(e,h),this.next[this.tail]=h,this.prev[h]=this.tail,this.tail=h,this.size++,this.addItemSize(h,a),c=!1;else{this.moveToTail(h);let m=this.valList[h];t!==m&&(this.isBackgroundFetch(m)?m.__abortController.abort(new Error("replaced")):s||(this.dispose(m,e,"set"),this.disposeAfter&&this.disposed.push([m,e,"set"])),this.removeItemSize(h),this.valList[h]=t,this.addItemSize(h,a))}if(i!==0&&this.ttl===0&&!this.ttls&&this.initializeTTLTracking(),c||this.setItemTTL(h,i,n),this.disposeAfter)for(;this.disposed.length;)this.disposeAfter(...this.disposed.shift());return this}newIndex(){return this.size===0?this.tail:this.size===this.max&&this.max!==0?this.evict(!1):this.free.length!==0?this.free.pop():this.initialFill++}pop(){if(this.size){let e=this.valList[this.head];return this.evict(!0),e}}evict(e){let t=this.head,i=this.keyList[t],n=this.valList[t];return this.isBackgroundFetch(n)?n.__abortController.abort(new Error("evicted")):(this.dispose(n,i,"evict"),this.disposeAfter&&this.disposed.push([n,i,"evict"])),this.removeItemSize(t),e&&(this.keyList[t]=null,this.valList[t]=null,this.free.push(t)),this.head=this.next[t],this.keyMap.delete(i),this.size--,t}has(e,{updateAgeOnHas:t=this.updateAgeOnHas}={}){let i=this.keyMap.get(e);return i!==void 0&&!this.isStale(i)?(t&&this.updateItemAge(i),!0):!1}peek(e,{allowStale:t=this.allowStale}={}){let i=this.keyMap.get(e);if(i!==void 0&&(t||!this.isStale(i))){let n=this.valList[i];return this.isBackgroundFetch(n)?n.__staleWhileFetching:n}}backgroundFetch(e,t,i,n){let s=t===void 0?void 0:this.valList[t];if(this.isBackgroundFetch(s))return s;let a=new Xa;i.signal&&i.signal.addEventListener("abort",()=>a.abort(i.signal.reason));let l={signal:a.signal,options:i,context:n},c=(y,S=!1)=>{let{aborted:C}=a.signal,_=i.ignoreFetchAbort&&y!==void 0;return C&&!_&&!S?h(a.signal.reason):(this.valList[t]===f&&(y===void 0?f.__staleWhileFetching?this.valList[t]=f.__staleWhileFetching:this.delete(e):this.set(e,y,l.options)),y)},h=y=>{let{aborted:S}=a.signal,C=S&&i.allowStaleOnFetchAbort,_=C||i.allowStaleOnFetchRejection,P=_||i.noDeleteOnFetchRejection;if(this.valList[t]===f&&(!P||f.__staleWhileFetching===void 0?this.delete(e):C||(this.valList[t]=f.__staleWhileFetching)),_)return f.__staleWhileFetching;if(f.__returned===f)throw y},m=(y,S)=>{this.fetchMethod(e,s,l).then(C=>y(C),S),a.signal.addEventListener("abort",()=>{(!i.ignoreFetchAbort||i.allowStaleOnFetchAbort)&&(y(),i.allowStaleOnFetchAbort&&(y=C=>c(C,!0)))})},f=new Promise(m).then(c,h);return f.__abortController=a,f.__staleWhileFetching=s,f.__returned=null,t===void 0?(this.set(e,f,l.options),t=this.keyMap.get(e)):this.valList[t]=f,f}isBackgroundFetch(e){return e&&typeof e=="object"&&typeof e.then=="function"&&Object.prototype.hasOwnProperty.call(e,"__staleWhileFetching")&&Object.prototype.hasOwnProperty.call(e,"__returned")&&(e.__returned===e||e.__returned===null)}async fetch(e,{allowStale:t=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:n=this.noDeleteOnStaleGet,ttl:s=this.ttl,noDisposeOnSet:a=this.noDisposeOnSet,size:l=0,sizeCalculation:c=this.sizeCalculation,noUpdateTTL:h=this.noUpdateTTL,noDeleteOnFetchRejection:m=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:f=this.allowStaleOnFetchRejection,ignoreFetchAbort:y=this.ignoreFetchAbort,allowStaleOnFetchAbort:S=this.allowStaleOnFetchAbort,fetchContext:C=this.fetchContext,forceRefresh:_=!1,signal:P}={}){if(!this.fetchMethod)return this.get(e,{allowStale:t,updateAgeOnGet:i,noDeleteOnStaleGet:n});let I={allowStale:t,updateAgeOnGet:i,noDeleteOnStaleGet:n,ttl:s,noDisposeOnSet:a,size:l,sizeCalculation:c,noUpdateTTL:h,noDeleteOnFetchRejection:m,allowStaleOnFetchRejection:f,allowStaleOnFetchAbort:S,ignoreFetchAbort:y,signal:P},L=this.keyMap.get(e);if(L===void 0){let E=this.backgroundFetch(e,L,I,C);return E.__returned=E}else{let E=this.valList[L];if(this.isBackgroundFetch(E))return t&&E.__staleWhileFetching!==void 0?E.__staleWhileFetching:E.__returned=E;if(!_&&!this.isStale(L))return this.moveToTail(L),i&&this.updateItemAge(L),E;let N=this.backgroundFetch(e,L,I,C);return t&&N.__staleWhileFetching!==void 0?N.__staleWhileFetching:N.__returned=N}}get(e,{allowStale:t=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:n=this.noDeleteOnStaleGet}={}){let s=this.keyMap.get(e);if(s!==void 0){let a=this.valList[s],l=this.isBackgroundFetch(a);return this.isStale(s)?l?t?a.__staleWhileFetching:void 0:(n||this.delete(e),t?a:void 0):l?void 0:(this.moveToTail(s),i&&this.updateItemAge(s),a)}}connect(e,t){this.prev[t]=e,this.next[e]=t}moveToTail(e){e!==this.tail&&(e===this.head?this.head=this.next[e]:this.connect(this.prev[e],this.next[e]),this.connect(this.tail,e),this.tail=e)}get del(){return kc("del","delete"),this.delete}delete(e){let t=!1;if(this.size!==0){let i=this.keyMap.get(e);if(i!==void 0)if(t=!0,this.size===1)this.clear();else{this.removeItemSize(i);let n=this.valList[i];this.isBackgroundFetch(n)?n.__abortController.abort(new Error("deleted")):(this.dispose(n,e,"delete"),this.disposeAfter&&this.disposed.push([n,e,"delete"])),this.keyMap.delete(e),this.keyList[i]=null,this.valList[i]=null,i===this.tail?this.tail=this.prev[i]:i===this.head?this.head=this.next[i]:(this.next[this.prev[i]]=this.next[i],this.prev[this.next[i]]=this.prev[i]),this.size--,this.free.push(i)}}if(this.disposed)for(;this.disposed.length;)this.disposeAfter(...this.disposed.shift());return t}clear(){for(let e of this.rindexes({allowStale:!0})){let t=this.valList[e];if(this.isBackgroundFetch(t))t.__abortController.abort(new Error("deleted"));else{let i=this.keyList[e];this.dispose(t,i,"delete"),this.disposeAfter&&this.disposed.push([t,i,"delete"])}}if(this.keyMap.clear(),this.valList.fill(null),this.keyList.fill(null),this.ttls&&(this.ttls.fill(0),this.starts.fill(0)),this.sizes&&this.sizes.fill(0),this.head=0,this.tail=0,this.initialFill=1,this.free.length=0,this.calculatedSize=0,this.size=0,this.disposed)for(;this.disposed.length;)this.disposeAfter(...this.disposed.shift())}get reset(){return kc("reset","clear"),this.clear}get length(){return oE("length","size"),this.size}static get AbortController(){return Xa}static get AbortSignal(){return wg}},lE=Ls,Sg=/(-?[0-9]+(px|em)\s+|0\s+)(-?[0-9]+(px|em)\s+|0\s+)(-?[0-9]+(px|em)\s+|0\s+)?(-?[0-9]+(px|em)\s+|0\s+)?(.*)/g,Eg={},uE=typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes("firefox"),el={},cE=class{constructor(e,t){this.imagesPending=0,this.imagesLoaded=0,this.imageIdsLoaded=[],this.frameIsRendering=!1,this.pendingDrawCall=!1,this.firstMeaningfulPaint=!1,this.parallelTasks=8,this.frameTasks=0,this.loadingQueueOrdered=!0,this.loadingQueue=[],this.currentTask=Promise.resolve(),this.tasksRunning=0,this.averageJobTime=64,this.lastKnownScale=1,this.visible=[],this.previousVisible=[],this.drawCalls=[],this.invalidated=[],this._worker=()=>{if(this.loadingQueue.length){let i=this.loadingQueue.pop();i&&(this.tasksRunning++,this.frameTasks++,this.currentTask=i.task().then(()=>{this.tasksRunning--}).catch(()=>{this.tasksRunning--}))}},this._scheduled=0,this._doWork=()=>{this.loadingQueue.length===0&&this.tasksRunning===0&&this._scheduled&&(clearInterval(this._scheduled),this._scheduled=0);let i=this.parallelTasks||1;!this.firstMeaningfulPaint&&this.loadingQueue.length&&(i=this.loadingQueue.length);for(let n=0;n<=i;n++)this._worker()},this.canvas=e,this.rendererPosition=e.getBoundingClientRect(),this.ctx=e.getContext("2d",{alpha:!0}),this.ctx.imageSmoothingEnabled=!0,this.options=t||{},this.canvas.style.opacity="0",this.canvas.style.transition="opacity .3s",this.dpi=(t==null?void 0:t.dpi)||1,this.hostCache=t!=null&&t.lruCache?new lE({maxSize:1024*512*512,dispose:(i,n,s)=>{this.invalidated.push(n),i.width=0,i.height=0},sizeCalculation:(i,n)=>i.width*i.height}):{store:{},get(i){return this.store[i]},set(i,n){this.store[i]=n}}}getCanvasDims(){return{width:this.canvas.width/this.dpi,height:this.canvas.height/this.dpi}}resize(){this.rendererPosition=this.canvas.getBoundingClientRect()}isReady(){return this.firstMeaningfulPaint}afterFrame(e){if(this.clearTransform(),this.lastPaintedObject=void 0,this.frameIsRendering=!1,this.imagesPending=Math.max(0,this.imagesPending-this.imagesLoaded),this.imagesLoaded=0,this.loadingQueueOrdered||(this.loadingQueue=this.loadingQueue.sort((t,i)=>t.network&&t.scale===i.scale?i.distance-t.distance:t.scale<i.scale?-1:1),this.loadingQueueOrdered=!0),this.previousVisible=this.visible,this.pendingDrawCall=!!this.drawCalls.length,this.pendingDrawCall)for(let t=0;t<this.drawCalls.length;t++){let i=this.drawCalls.shift();i&&i()}this.doOffscreenWork(),this.options.debug&&this.stats&&this.stats.end()}doOffscreenWork(){this.frameTasks=0,this.loadingQueue.length&&(this._worker(),this.loadingQueue.length&&(this._scheduled||(this._scheduled=setInterval(this._doWork,0))))}getScale(e,t,i){if(Number.isNaN(e)||Number.isNaN(t))return this.lastKnownScale;let n=this.getCanvasDims(),s=n.width/e,a=n.height/t,l=(s<a?a:s)*(i&&this.dpi||1);return Number.isNaN(l)||(this.lastKnownScale=l),this.lastKnownScale}beforeFrame(e,t,i,n){var s;this.options.debug&&this.stats&&this.stats.begin(),this.frameIsRendering=!0,this.visible=[],this.options.beforeFrame&&this.options.beforeFrame(t);let a=this.getCanvasDims();if(this.ctx.globalAlpha=1,this.ctx.fillStyle=(s=this.canvas.dataset.background)!=null?s:"rgb(0, 0, 0)",this.ctx.fillRect(0,0,a.width,a.height),n.enableFilters&&(n.filters.brightness||n.filters.contrast||n.filters.grayscale||n.filters.invert||n.filters.sepia||n.filters.saturate||n.filters.hueRotate||n.filters.blur)){let l="";n.filters.brightness&&(l+=`brightness(${~~(100+n.filters.brightness*100)}%) `),n.filters.contrast&&(l+=`contrast(${~~(100+n.filters.contrast*100)}%) `),n.filters.grayscale&&(l+=`grayscale(${~~(n.filters.grayscale*100)}%) `),n.filters.invert&&(l+=`invert(${~~(n.filters.invert*100)}%) `),n.filters.sepia&&(l+=`sepia(${~~(n.filters.sepia*100)}%) `),n.filters.saturate&&(l+=`saturate(${~~(100+n.filters.saturate*100)}%) `),n.filters.hueRotate&&(l+=`hue-rotate(${n.filters.hueRotate}deg) `),n.filters.blur&&(l+=`blur(${n.filters.blur}px) `),this.ctx.filter=l}else this.ctx.filter="none"}applyTransform(e,t,i,n,s){let a=e.__owner.value;if(a&&a.rotation){this.ctx.save();let l=t+n/2,c=i+s/2;this.ctx.translate(l,c),this.ctx.rotate(a.rotation*Math.PI/180),this.ctx.translate(-l,-c),this.lastPaintedObject=a}}clearTransform(){this.lastPaintedObject&&(this.lastPaintedObject.rotation&&this.ctx.restore(),this.lastPaintedObject=void 0)}paint(e,t,i,n,s,a){let l=this.ctx.globalAlpha;if(e instanceof cn||e instanceof nr){if(e.display.rotation){this.ctx.save();let m=i+s/2,f=n+a/2;e.crop&&(m-=e.crop[t*5+1],f-=e.crop[t*5+2]),this.ctx.translate(m,f),this.ctx.rotate(e.display.rotation*Math.PI/180),this.ctx.translate(-m,-f)}if(this.visible.push(e),typeof e.style&&e.style.opacity!=="undefined"){if(!e.style.opacity)return;this.ctx.globalAlpha=e.style.opacity}try{let m=e.__host.canvas,f=this.getCanvasDims();if((m.indices.indexOf(t)===-1||this.invalidated.indexOf(m.canvases[t])!==-1)&&this.schedulePaintToCanvas(m,e,t,ka({x:i+s/2,y:n+s/2},{x:f.width/2,y:f.height/2})),!this.firstMeaningfulPaint)return;let y=this.hostCache.get(m.canvases[t]);if(y)if(e.crop&&e.cropData){if(e.crop[t*5]){let S=[e.crop[t*5+1]/e.display.scale-e.display.points[t*5+1],e.crop[t*5+2]/e.display.scale-e.display.points[t*5+2],1+(e.crop[t*5+3]-e.crop[t*5+1])/e.display.scale,1+(e.crop[t*5+4]-e.crop[t*5+2])/e.display.scale];S[0]+=e.cropData.x/e.display.scale,S[1]+=e.cropData.y/e.display.scale;let C=e.x*this.lastKnownScale,_=e.y*this.lastKnownScale,P=[i+C,n+_,s,a];P[0]+=C,P[1]+=_,this.ctx.drawImage(y,S[0],S[1],S[2],S[3],P[0],P[1],P[2]+1,P[3]+1)}}else uE?this.ctx.drawImage(y,0,0,e.display.points[t*5+3]-e.display.points[t*5+1],e.display.points[t*5+4]-e.display.points[t*5+2],i,n,s+1,a+1):this.ctx.drawImage(y,0,0,e.display.points[t*5+3]-e.display.points[t*5+1],e.display.points[t*5+4]-e.display.points[t*5+2],i,n,s+Number.MIN_VALUE+.5,a+Number.MIN_VALUE+.5)}catch{}e.display.rotation&&this.ctx.restore()}let c=e instanceof Is&&this.options.box,h=e instanceof gg&&this.options.polygon;if((c||h)&&!e.props.className&&!e.props.html&&!e.props.href){if(this.visible.push(e),e.props.style){let m=Object.assign({},e.props.style||{},e.hovering?e.props.hoverStyles:{},e.pressing?e.props.pressStyles:{}),f=e.props.relativeStyle?1:s/e.width;typeof m.opacity<"u"&&(this.ctx.globalAlpha=m.opacity);let y=0;typeof m.borderWidth<"u"&&(y=parseInt(m.borderWidth,10)*f);let S=0;typeof m.outlineWidth<"u"&&(S=parseInt(m.outlineWidth,10)*f);let C=0;if(typeof m.outlineOffset<"u"&&(C=parseInt(m.outlineOffset,10)*f),m.borderColor&&(this.ctx.strokeStyle=m.borderColor),m.boxShadow){let _=m.boxShadow.split(/,(?![^(]*\))/);for(let P of _){let I=Eg[P]||Sg.exec(P)||Sg.exec(P);Eg[P]=I,I&&(this.ctx.save(),this.ctx.shadowOffsetX=parseInt(I[1])*this.dpi*f,this.ctx.shadowOffsetY=parseInt(I[3])*this.dpi*f,this.ctx.shadowBlur=parseInt(I[5])*this.dpi*f,this.ctx.shadowColor=I[9],this.ctx.fillStyle="rgba(0,0,0,1)",this.ctx.fillRect(i+y,n+y,s,a),this.ctx.restore())}}if(this.ctx.fillStyle=m.backgroundColor||"transparent",this.ctx.lineWidth=y,h){let _=e.shape,P=_.points||[],I=P.length;this.ctx.beginPath();for(let L=0;L<I;L++)this.ctx.lineTo(i+P[L][0]*this.lastKnownScale,n+P[L][1]*this.lastKnownScale);_.open||this.ctx.closePath(),y&&this.ctx.stroke(),_.open||this.ctx.fill()}else y&&this.ctx.strokeRect(i+y/2,n+y/2,s+y,a+y),this.ctx.fillRect(i+y,n+y,s,a);S&&(m.outlineColor&&(this.ctx.strokeStyle=m.outlineColor),this.ctx.lineWidth=S,this.ctx.strokeRect(i-S/2-C,n-S/2-C,s+y*2+S+C*2,a+y*2+S+C*2))}this.ctx.globalAlpha=l}}loadImage(e,t,i,n=!1){if(el[e]&&el[e].naturalWidth>0){t(el[e]);return}try{let s=!1;n||setTimeout(()=>{s||this.loadImage(e,t,i,!0)},3e3);let a=document.createElement("img");a.decoding="auto",a.onload=function(){s=!0,t(a),el[e]=a,a.onload=null},this.options.crossOrigin&&(a.crossOrigin="anonymous"),a.src=e,a.complete&&a.onload({}),a.width}catch(s){console.log("image error",s),i(s)}}schedulePaintToCanvas(e,t,i,n){this.imagesPending++,e.indices.push(i);let s=`${t.id}--${t.display.scale}-${i}`,a=this.invalidated.indexOf(s);a!==-1&&this.invalidated.splice(a,1),e.canvases[i]=s,t.__host.canvas.loading=!0,this.loadingQueueOrdered=!1,this.loadingQueue.push({id:s,scale:t.display.scale,network:!0,distance:n,task:()=>new Promise(l=>{if(this.visible.indexOf(t)===-1){this.imagesPending--,e.indices.splice(e.indices.indexOf(i),1),l();return}let c=t.getImageUrl(i);this.loadImage(c,h=>{this.loadingQueue.push({id:s,scale:t.display.scale,distance:n,task:()=>new Promise(m=>{this.imageIdsLoaded.includes(s)||(this.imagesLoaded++,this.imageIdsLoaded.push(s)),e.loaded.push(i),e.loaded.length===e.indices.length&&(e.loading=!1);let f=t.display.points.slice(i*5,i*5+5),y=document.createElement("canvas"),S=y.getContext("2d");y.width=f[3]-f[1],y.height=f[4]-f[2],this.hostCache.set(e.canvases[i],y),this.drawCalls.push(()=>{S.drawImage(h,0,0,f[3]-f[1],f[4]-f[2]),m()})})}),l()},h=>{this.imagesPending--,e.indices.splice(e.indices.indexOf(i),1),l()})})})}afterPaintLayer(e,t){}prepareLayer(e,t){e.__owner.value&&(e.cropData?(this.lastKnownScale*(1/e.display.scale),this.applyTransform(e,t[1],t[2],t[3]-t[1],t[4]-t[2])):this.applyTransform(e,t[1],t[2],t[3]-t[1],t[4]-t[2])),(!e.__host||!e.__host.canvas)&&(e instanceof cn||e instanceof nr)&&this.createImageHost(e)}finishLayer(){this.lastPaintedObject&&this.clearTransform()}createImageHost(e){e.__host=e.__host?e.__host:{},e.__host.canvas={canvas:void 0,canvases:[],indices:[],loaded:[],loading:!1}}getPointsAt(e,t,i,n){return e.getPointsAt(t,i,n)}getViewportBounds(e,t,i){let n=e.getActiveZone();if(n){let s=t[3]-t[1]<n.points[3]-n.points[1],a=t[4]-t[2]<n.points[4]-n.points[2];return{x1:s?n.points[1]-i:n.points[1]+(n.points[3]-n.points[1])/2-(t[3]-t[1])/2,y1:a?n.points[2]-i:n.points[2]+(n.points[4]-n.points[2])/2-(t[4]-t[2])/2,x2:s?n.points[3]+i:n.points[1]+(n.points[3]-n.points[1])/2-(t[3]-t[1])/2,y2:a?n.points[4]+i:n.points[2]+(n.points[4]-n.points[2])/2-(t[4]-t[2])/2}}return null}pendingUpdate(){let e=!this.pendingDrawCall&&this.drawCalls.length===0&&this.imagesPending===0&&this.loadingQueue.length===0&&this.tasksRunning===0;return!e&&this.visible.length===0&&setTimeout(()=>{this.canvas.style.opacity="1",this.firstMeaningfulPaint=!0},500),!this.firstMeaningfulPaint&&e&&this.visible.length?(this.canvas.style.opacity="1",this.firstMeaningfulPaint=e,!0):this.options.debug?!0:!e}getRendererScreenPosition(){return this.rendererPosition}reset(){this.loadingQueue=[],this.drawCalls=[]}},Cg=class{constructor(e){this.renderers=[];for(let t of e)t&&this.renderers.push(t);this.length=this.renderers.length}afterFrame(e,t,i,n){for(let s=0;s<this.length;s++)this.renderers[s].afterFrame(e,t,i,n)}afterPaintLayer(e,t){for(let i=0;i<this.length;i++)this.renderers[i].afterPaintLayer(e,t)}beforeFrame(e,t,i,n){for(let s=0;s<this.length;s++)this.renderers[s].beforeFrame(e,t,i,n)}triggerResize(){for(let e=0;e<this.length;e++){let t=this.renderers[e];t.triggerResize&&t.triggerResize()}}getPointsAt(e,t,i,n){return this.renderers[0].getPointsAt(e,t,i,n)}getScale(e,t){return this.renderers[0].getScale(e,t)}getViewportBounds(e,t,i){return this.renderers[0].getViewportBounds(e,t,i)}getRendererScreenPosition(){return this.renderers[0].getRendererScreenPosition()}isReady(){for(let e=0;e<this.length;e++)if(!this.renderers[e].isReady())return!1;return!0}paint(e,t,i,n,s,a){for(let l=0;l<this.length;l++)this.renderers[l].paint(e,t,i,n,s,a)}pendingUpdate(){for(let e=0;e<this.length;e++)if(this.renderers[e].pendingUpdate())return!0;return!1}prepareLayer(e,t){for(let i=0;i<this.length;i++)this.renderers[i].prepareLayer(e,t)}finishLayer(e,t){for(let i=0;i<this.length;i++)this.renderers[i].finishLayer(e,t)}resize(e,t){for(let i=0;i<this.length;i++)this.renderers[i].resize(e,t)}reset(){for(let e=0;e<this.length;e++)this.renderers[e].reset()}},hE=class{constructor(e){this.heightRatio=1,this.widthRatio=1,this.target=new Float32Array(5),this.delta=0,this.renderNextFrame=!0,this.canvas=e,this.initialWidth=e.width,this.initialHeight=e.height,this.context=e.getContext("2d"),this.context.globalAlpha=.5,this.aggregate=Jn(1)}isReady(){return!0}resize(){this.initialWidth=this.canvas.width,this.initialHeight=this.canvas.height,this.renderNextFrame=!0}afterFrame(e,t,i){if(this.renderNextFrame){this.context.clearRect(0,0,this.canvas.width,this.canvas.height);let n=this.initialWidth/e.width,s=this.initialHeight/e.height,a=this.widthRatio>this.heightRatio?n:s;if(this.target=i,this.bounds){let l=e.getPointsAt(this.bounds,this.aggregate,a);for(let[c,h]of l)if(c instanceof cn&&c.__host.canvas){let m=h.length/5;for(let f=0;f<m;f++)c.__host.canvas.canvases[f]&&(h[f+1]*a,h[f+2]*a,(h[f+3]-h[f+1])*a,(h[f+4]-h[f+2])*a)}}e.getPoints().forEach((l,c,h)=>{if(c%5===0&&l){let m={x1:h[c+1]*a,y1:h[c+2]*a,x2:h[c+3]*a,y2:h[c+4]*a,width:(h[c+3]-h[c+1])*a,height:(h[c+4]-h[c+2])*a};this.context.strokeStyle="red",this.context.strokeRect(m.x1,m.y1,m.width,m.height)}}),i&&(this.context.strokeStyle="red",this.context.lineWidth=window.devicePixelRatio||1,this.context.strokeRect(i[1]*a,i[2]*a,(i[3]-i[1])*a,(i[4]-i[2])*a))}}getActiveZone(e){return null}getPointsAt(e,t,i,n){return e.getPointsAt(t,i,n)}getScale(e,t){return 1}beforeFrame(e,t){this.bounds=st.singleBox(e.width,e.height)}drawImage(){}afterPaintLayer(e,t){}paint(e,t,i,n,s,a){this.renderNextFrame=!0}prepareLayer(e){}pendingUpdate(){return!1}hasActiveZone(){return!1}getViewportBounds(e,t,i){return null}getRendererScreenPosition(){return this.canvas.getBoundingClientRect()}finishLayer(){}reset(){}},kg=!1,Lr,Tc,Pc,tl,il,Ag,nl,Rc,Oc,Ic,Tg,Lc,$c,Pg,Rg;function Bi(){if(!kg){kg=!0;var e=navigator.userAgent,t=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(e),i=/(Mac OS X)|(Windows)|(Linux)/.exec(e);if(Lc=/\b(iPhone|iP[ao]d)/.exec(e),$c=/\b(iP[ao]d)/.exec(e),Ic=/Android/i.exec(e),Pg=/FBAN\/\w+;/i.exec(e),Rg=/Mobile/i.exec(e),Tg=!!/Win64/.exec(e),t){Lr=t[1]?parseFloat(t[1]):t[5]?parseFloat(t[5]):NaN,Lr&&document&&document.documentMode&&(Lr=document.documentMode);var n=/(?:Trident\/(\d+.\d+))/.exec(e);Ag=n?parseFloat(n[1])+4:Lr,Tc=t[2]?parseFloat(t[2]):NaN,Pc=t[3]?parseFloat(t[3]):NaN,tl=t[4]?parseFloat(t[4]):NaN,tl?(t=/(?:Chrome\/(\d+\.\d+))/.exec(e),il=t&&t[1]?parseFloat(t[1]):NaN):il=NaN}else Lr=Tc=Pc=il=tl=NaN;if(i){if(i[1]){var s=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(e);nl=s?parseFloat(s[1].replace("_",".")):!0}else nl=!1;Rc=!!i[2],Oc=!!i[3]}else nl=Rc=Oc=!1}}var Nc={ie:function(){return Bi()||Lr},ieCompatibilityMode:function(){return Bi()||Ag>Lr},ie64:function(){return Nc.ie()&&Tg},firefox:function(){return Bi()||Tc},opera:function(){return Bi()||Pc},webkit:function(){return Bi()||tl},safari:function(){return Nc.webkit()},chrome:function(){return Bi()||il},windows:function(){return Bi()||Rc},osx:function(){return Bi()||nl},linux:function(){return Bi()||Oc},iphone:function(){return Bi()||Lc},mobile:function(){return Bi()||Lc||$c||Ic||Rg},nativeApp:function(){return Bi()||Pg},android:function(){return Bi()||Ic},ipad:function(){return Bi()||$c}},dE=Nc,rl=!!(typeof window<"u"&&window.document&&window.document.createElement),pE={canUseDOM:rl,canUseWorkers:typeof Worker<"u",canUseEventListeners:rl&&!!(window.addEventListener||window.attachEvent),canUseViewport:rl&&!!window.screen,isInWorker:!rl},fE=pE,Og=fE,Ig;Og.canUseDOM&&(Ig=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0);function gE(e,t){if(!Og.canUseDOM||t&&!("addEventListener"in document))return!1;var i="on"+e,n=i in document;if(!n){var s=document.createElement("div");s.setAttribute(i,"return;"),n=typeof s[i]=="function"}return!n&&Ig&&e==="wheel"&&(n=document.implementation.hasFeature("Events.wheel","3.0")),n}var mE=gE,vE=dE,yE=mE,Lg=10,$g=40,Ng=800;function Mg(e){var t=0,i=0,n=0,s=0;return"detail"in e&&(i=e.detail),"wheelDelta"in e&&(i=-e.wheelDelta/120),"wheelDeltaY"in e&&(i=-e.wheelDeltaY/120),"wheelDeltaX"in e&&(t=-e.wheelDeltaX/120),"axis"in e&&e.axis===e.HORIZONTAL_AXIS&&(t=i,i=0),n=t*Lg,s=i*Lg,"deltaY"in e&&(s=e.deltaY),"deltaX"in e&&(n=e.deltaX),(n||s)&&e.deltaMode&&(e.deltaMode==1?(n*=$g,s*=$g):(n*=Ng,s*=Ng)),n&&!t&&(t=n<1?-1:1),s&&!i&&(i=s<1?-1:1),{spinX:t,spinY:i,pixelX:n,pixelY:s}}Mg.getEventType=function(){return vE.firefox()?"DOMMouseScroll":yE("wheel")?"wheel":"mousewheel"};var bE=Mg,wE=bE;function xE(e){return{x:e[1],y:e[2],width:e[3]-e[1],height:e[4]-e[2]}}var Fg="pan",zg="scroll",_E="gesture",SE={zoomOutFactor:.8,zoomInFactor:1.25,maxZoomFactor:1,minZoomFactor:.05,zoomDuration:300,zoomWheelConstant:20,zoomClamp:.6,panBounceStiffness:120,panBounceDamping:15,panTimeConstant:240,panPower:.1,nudgeDistance:100,panPadding:0,devicePixelRatio:1,enableWheel:!0,enableClickToZoom:!0,ignoreSingleFingerTouch:!1,enablePanOnWait:!1,requireMetaKeyForWheelZoom:!1,panOnWaitDelay:40,onPanInSketchMode:()=>{},parentElement:null},Bg=(e={})=>({start:function(t){let{zoomWheelConstant:i,enableWheel:n,enableClickToZoom:s,ignoreSingleFingerTouch:a,enablePanOnWait:l,panOnWaitDelay:c,parentElement:h,requireMetaKeyForWheelZoom:m}=A(A({},SE),e),f={pointerStart:{x:0,y:0},isPressing:!1,mousemoveBuffer:Pe(5),multiTouch:{distance:0}};t.world.activatedEvents.push("onMouseUp","onMouseDown","onMouseMove","onTouchStart","onTouchEnd","onTouchMove");function y(){P=0,L="",N(),N(void 0,"notice"),I=0}function S(){t.world.constraintBounds(),y()}function C(W){if(W.which>1){f.isPressing=!1;return}t.mode==="explore"&&(W.preventDefault(),f.pointerStart.x=W.atlas.x,f.pointerStart.y=W.atlas.y,t.transitionManager.stopTransition(),f.isPressing=!0)}function _(){y(),f.isPressing&&(t.mode==="explore"&&t.world.constraintBounds(),f.isPressing=!1)}let P=0,I=0,L="";function E(W){if(t.mode==="explore"){if(W.atlasTouches.length===1&&(I=performance.now(),a==!1&&W.preventDefault(),f.pointerStart.x=W.atlasTouches[0].x,f.pointerStart.y=W.atlasTouches[0].y),W.atlasTouches.length===2){L=_E,W.preventDefault();let se=W.atlasTouches[0].x,pe=W.atlasTouches[1].x;f.pointerStart.x=(se+pe)/2;let ue=W.atlasTouches[0].y,we=W.atlasTouches[1].y;f.pointerStart.y=(ue+we)/2,P=ka({x:W.touches[0].clientX,y:W.touches[0].clientY},{x:W.touches[1].clientX,y:W.touches[1].clientY})}t.transitionManager.stopTransition(),f.isPressing=!0}}function N(W,se="intent"){h&&(h.dataset[se]=W)}function F(W){let se=null,pe=null,ue=0;if(f.isPressing&&W.touches.length===2){let we=W.touches[0].clientX,he=W.touches[1].clientX;se=(we+he)/2;let _e=W.touches[0].clientY,et=W.touches[1].clientY;pe=(_e+et)/2,ue=ka({x:W.touches[0].clientX,y:W.touches[0].clientY},{x:W.touches[1].clientX,y:W.touches[1].clientY})}if(N(L),f.isPressing&&W.touches.length===1){if(l&&(performance.now()-I<c&&L==""&&(L=zg),L==""&&(L=Fg)),N(L),L==""&&a==!0||L==zg){N("require-two-finger","notice");return}let we=W.touches[0];se=we.clientX,pe=we.clientY}if(se!==null&&pe!==null){let we=t.getRendererScreenPosition();if(we){let{x:he,y:_e}=t.viewerToWorld(se-we.x,pe-we.y),et=ue&&P?ue/P:1;t.transitionManager.customTransition(J=>{J.from=Pe(t.target),J.to=zn(J.from,Fn(Ii(f.pointerStart.x-he,f.pointerStart.y-_e),mo(1/et,he,_e)),f.mousemoveBuffer),J.elapsed_time=0,J.total_time=0,J.timingFunction=En.easeInOutExpo,J.done=!1})}P=ue}L==Fg&&W.preventDefault()}function U(W){if(f.isPressing){let se=t.getRendererScreenPosition();if(se){let{x:pe,y:ue}=t.viewerToWorld(W.clientX-se.x,W.clientY-se.y);t.transitionManager.customTransition(we=>{we.from=Pe(t.target),we.to=zn(we.from,Ii(f.pointerStart.x-pe,f.pointerStart.y-ue),f.mousemoveBuffer),we.elapsed_time=0,we.total_time=0,we.timingFunction=En.easeInOutExpo,we.done=!1})}}}function q(W){t.mode==="explore"&&t.world.zoomIn(W.atlas)}function G(W){let se=wE(W),pe=1+se.spinY/i;t.world.zoomTo(pe,W.atlas,!0)}function V(W){return m&&W.metaKey==!1?(N("meta-required","notice"),W.stopPropagation(),!1):!0}t.world.addEventListener("mouseup",S),t.world.addEventListener("touchend",S),t.world.addEventListener("touchstart",E),t.world.addEventListener("mousedown",C),window.addEventListener("touchend",_),window.addEventListener("mouseup",_),window.addEventListener("mousemove",U),h&&h.addEventListener("touchmove",F),s&&(t.world.activatedEvents.push("onClick"),t.world.addEventListener("click",q)),n&&(t.world.activatedEvents.push("onWheel"),m&&(h==null||h.addEventListener("wheel",V,{passive:!0,capture:!0})),t.world.addEventListener("wheel",G));let ae=t.world.addLayoutSubscriber((W,se)=>{if(W==="zone-changed"&&t.transitionManager.constrainBounds({transition:{duration:0}}),W==="zoom-to"&&se&&t.transitionManager.zoomTo(se.factor,{origin:se.point,stream:se.stream}),W==="go-home"){let pe=se.immediate?{duration:0}:void 0;t.transitionManager.goToRegion(xE(t.homePosition),{transition:pe})}if(W==="goto-region"&&se){let pe=se.immediate?{duration:0}:{};t.transitionManager.goToRegion(se,{transition:pe})}W==="constrain-bounds"&&t.transitionManager.constrainBounds({transition:se!=null&&se.immediate?{duration:0}:void 0})});return()=>{t.world.removeEventListener("mouseup",S),t.world.removeEventListener("touchend",S),t.world.removeEventListener("touchstart",E),t.world.removeEventListener("mousedown",C),window.removeEventListener("touchend",_),window.removeEventListener("mouseup",_),t.world.removeEventListener("mousemove",U),h&&(h.removeEventListener("touchmove",U),h.removeEventListener("wheel",V,{passive:!0,capture:!0})),s&&t.world.removeEventListener("click",q),n&&t.world.removeEventListener("wheel",G),ae()}},updatePosition(){}}),sl=Z.createContext("explore");sl.displayName="Mode";var Mc=()=>Zt(sl);function Fc(e,t,i){var n,s,a,l,c;t==null&&(t=100);function h(){var f=Date.now()-l;f<t&&f>=0?n=setTimeout(h,t-f):(n=null,i||(c=e.apply(a,s),a=s=null))}var m=function(){a=this,s=arguments,l=Date.now();var f=i&&!n;return n||(n=setTimeout(h,t)),f&&(c=e.apply(a,s),a=s=null),c};return m.clear=function(){n&&(clearTimeout(n),n=null)},m.flush=function(){n&&(c=e.apply(a,s),a=s=null,clearTimeout(n),n=null)},m}Fc.debounce=Fc;var jg=Fc;function Dg(e){let{debounce:t,scroll:i,polyfill:n,offsetSize:s}=e===void 0?{debounce:0,scroll:!1,offsetSize:!1}:e,a=n||(typeof window>"u"?class{}:window.ResizeObserver);if(!a)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");let[l,c]=Ne({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),h=Se({element:null,scrollContainers:null,resizeObserver:null,lastBounds:l}),m=t?typeof t=="number"?t:t.scroll:null,f=t?typeof t=="number"?t:t.resize:null,y=Se(!1);de(()=>(y.current=!0,()=>void(y.current=!1)));let[S,C,_]=Ee(()=>{let E=()=>{if(!h.current.element)return;let{left:N,top:F,width:U,height:q,bottom:G,right:V,x:ae,y:W}=h.current.element.getBoundingClientRect(),se={left:N,top:F,width:U,height:q,bottom:G,right:V,x:ae,y:W};h.current.element instanceof HTMLElement&&s&&(se.height=h.current.element.offsetHeight,se.width=h.current.element.offsetWidth),Object.freeze(se),y.current&&!AE(h.current.lastBounds,se)&&c(h.current.lastBounds=se)};return[E,f?jg(E,f):E,m?jg(E,m):E]},[c,s,m,f]);function P(){h.current.scrollContainers&&(h.current.scrollContainers.forEach(E=>E.removeEventListener("scroll",_,!0)),h.current.scrollContainers=null),h.current.resizeObserver&&(h.current.resizeObserver.disconnect(),h.current.resizeObserver=null)}function I(){!h.current.element||(h.current.resizeObserver=new a(_),h.current.resizeObserver.observe(h.current.element),i&&h.current.scrollContainers&&h.current.scrollContainers.forEach(E=>E.addEventListener("scroll",_,{capture:!0,passive:!0})))}let L=E=>{!E||E===h.current.element||(P(),h.current.element=E,h.current.scrollContainers=Ug(E),I())};return CE(_,!!i),EE(C),de(()=>{P(),I()},[i,_,C]),de(()=>P,[]),[L,l,S]}function EE(e){de(()=>{let t=e;return window.addEventListener("resize",t),()=>void window.removeEventListener("resize",t)},[e])}function CE(e,t){de(()=>{if(t){let i=e;return window.addEventListener("scroll",i,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",i,!0)}},[e,t])}function Ug(e){let t=[];if(!e||e===document.body)return t;let{overflow:i,overflowX:n,overflowY:s}=window.getComputedStyle(e);return[i,n,s].some(a=>a==="auto"||a==="scroll")&&t.push(e),[...t,...Ug(e.parentElement)]}var kE=["x","y","top","bottom","left","right","width","height"],AE=(e,t)=>kE.every(i=>e[i]===t[i]),ol=Z.createContext(null);ol.displayName="Atlas";var al=Z.createContext(null);al.displayName="Bounds";var ll,TE=typeof performance=="object"&&typeof performance.now=="function";if(TE){let e=performance;ll=()=>e.now()}else{let e=Date,t=e.now();ll=()=>e.now()-t}var Wg={exports:{}},$r={};$r.ConcurrentRoot=1,$r.ContinuousEventPriority=4,$r.DefaultEventPriority=16,$r.DiscreteEventPriority=1,$r.IdleEventPriority=536870912,$r.LegacyRoot=0,Wg.exports=$r;function Hg(e,t){e&&e.appendChild&&t&&e.appendChild(t)}function qg(e,t){e&&e.removeChild&&t&&e.removeChild(t)}function PE(e,t){return qg(e.world,t)}function RE(e,t,i){return Qg(e.world,t,i)}function Qg(e,t,i){e&&e instanceof Ka&&(e=e.world),e&&e.insertBefore&&e.insertBefore(t,i)}function zc(e,t,i){if(i&&(e.applyProps&&e.applyProps(i),e instanceof _n))for(let n of Sa){let s=n.slice(2).toLowerCase();i[n]!==t[n]&&(t[n]&&e.removeEventListener(s,t[n]),e.addEventListener(s,i[n]))}}function Bc(e,t){let i=Object.keys(t),n=!1;for(let s of i)if(Sa.indexOf(s)!==-1){let a=_s[s];if(a){if(e.activatedEvents.indexOf(a)!==-1)continue;n=!0,e.activatedEvents.push(a)}}n&&e.triggerEventActivation()}var ul=new Map,Vg={};function OE(e,t,i,n,s){var a=t,l=le(a,["args"]);if(!(i instanceof Ka)&&s){let m=f=>f.return?m(f.return):f.stateNode&&f.stateNode.containerInfo;i=m(s)}let c,h=i.world;switch(e){case"world":c=rr.withProps({width:l.width,height:l.height,viewingDirection:"left-to-right"}),c.activatedEvents=h.activatedEvents,c.eventHandlers=h.eventHandlers,c.subscriptions=h.subscriptions,c.triggerEventActivation(),h=c;break;case"box":c=new Is;break;case"shape":c=new gg;break;case"worldObject":case"world-object":c=new Os;break;case"worldImage":case"world-image":c=new cn;break;case"texture":c=new Ca;break;case"compositeImage":case"composite-image":c=new Sc({id:l.id,width:l.width,height:l.height,images:[],renderOptions:l.renderOptions});break;case"tiledImage":case"tiled-image":c=nr.fromTile(l.uri,l.display,l.tile,l.scaleFactor,void 0,l.format);break;case"paragraph":c=new So,c.text=l.children;break;default:return}return Bc(h,l),zc(c,{},l),c}function IE(e,t){if(t instanceof rr)e.world=t;else if(t instanceof Os)e.world.appendChild(t);else if(t)throw new Error("Invalid root")}var Ao=(0,vw.default)({unstable_now:ll,now:ll,createInstance:OE,removeChild:qg,appendChild:Hg,appendInitialChild:Hg,insertBefore:Qg,warnsIfNotActing:!0,supportsMutation:!0,isPrimaryRenderer:!1,scheduleTimeout:typeof setTimeout<"u"?setTimeout:void 0,cancelTimeout:typeof clearTimeout<"u"?clearTimeout:void 0,setTimeout:typeof setTimeout<"u"?setTimeout:void 0,clearTimeout:typeof clearTimeout<"u"?clearTimeout:void 0,noTimeout:-1,appendChildToContainer:IE,removeChildFromContainer:PE,createTextInstance(){},insertInContainerBefore:RE,prepareUpdate(e,t,i,n,s){return Bc(s.world,n),n},commitUpdate(e,t,i,n,s,a){e.applyProps&&t&&zc(e,n,t)},finalizeInitialChildren(e){return e==null?void 0:e.__handlers},getChildHostContext(){return Vg},getRootHostContext(){return Vg},prepareForCommit(e){return e.isCommitting=!0,null},preparePortalMount(){},hideInstance(e){e&&e.points&&(e.points[0]=0)},unhideInstance(e,t){e&&e.points&&(e.points[0]=1)},getPublicInstance(e){return e},hideTextInstance(){throw new Error("Text is not allowed in the react-three-fibre tree. You may have extraneous whitespace between components.")},resetAfterCommit(e){e.isCommitting=!1,e.pendingUpdate=!0,e.world&&e.world.needsRecalculate&&(e.world.recalculateWorldSize(),e.world.triggerRepaint())},shouldSetTextContent(){return!1},clearContainer(){return!1},supportsHydration:!1,supportsPersistence:!1,detachDeletedInstance(e){},afterActiveInstanceBlur(){},beforeActiveInstanceBlur(){},getCurrentEventPriority(){return console.log("getCurrentEventPriority"),Wg.exports.DefaultEventPriority},getInstanceFromNode(e){throw console.log("getInstanceFromNode",e),new Error("Not implemented")},getInstanceFromScope(e){throw console.log("getInstanceFromScope",e),new Error("Not implemented")},prepareScopeUpdate(e,t){throw console.log("prepareScopeUpdate",e,t),new Error("Not implemented")},logRecoverableError(){},requestPostPaintCallback(){}});Ao.injectIntoDevTools({bundleType:0,version:_a,rendererPackageName:"@atlas-viewer/atlas"});function jc(e,t){let i=ul.get(e);i&&Ao.updateContainer(null,i,null,()=>{ul.delete(e),t&&t(e)})}var Gg={render(e,t){let i=ul.get(t);if(i)Ao.updateContainer(e,i,null);else{let n=Ao.createContainer(t,0,null,!1,null,"",()=>{},null);Ao.updateContainer(e,n,null),ul.set(t,n)}},unmountComponentAtNode(e,t){jc(e,t)}},To=typeof window<"u"&&((Yp=window.document)!=null&&Yp.createElement||((Kp=window.navigator)==null?void 0:Kp.product)==="ReactNative")?It:de,LE=Z.memo(({children:e,setIsReady:t,onCreated:i,bounds:n,preset:s,mode:a="explore"})=>{let l=je(function(c){let h=Se(!1),m=()=>{t(!0)};return de(()=>{if(s&&!h.current){s.runtime.goHome();let f=i&&i(s);return void(f&&f.then?f.then(m):m())}return()=>{}},[]),de(()=>{h.current=!0},[]),c.children},[s]);return To(()=>{if(s){let c=s.runtime;a!==c.mode&&(c.mode=a),Gg.render(Z.createElement(Z.StrictMode,null,Z.createElement(l,null,Z.createElement(al.Provider,{value:n},Z.createElement(sl.Provider,{value:a},Z.createElement(ol.Provider,{value:s},e))))),c)}},[s,a,e]),To(()=>{if(s){let c=s.runtime;return()=>{Gg.unmountComponentAtNode(c)}}return()=>{}},[s]),null}),$E=class{constructor(e,t){this.fragmentShaderSource=`
    precision mediump float;

    uniform sampler2D u_image;
    varying vec2 v_texCoord;

    void main() {
        gl_FragColor = texture2D(u_image, v_texCoord);
    }
  `,this.vertexShaderSource=`
    attribute vec2 a_position;
    uniform vec2 u_resolution;
    varying vec4 v_color;
    uniform sampler2D u_texture;

    attribute vec2 a_texCoord;
    varying vec2 v_texCoord;

    void main() {

        // convert the position from pixels to 0.0 to 1.0
        vec2 zeroToOne = a_position / u_resolution;

        // convert from 0->1 to 0->2
        vec2 zeroToTwo = zeroToOne * 2.0;

        // convert from 0->2 to -1->+1 (clip space)
        vec2 clipSpace = zeroToTwo - 1.0;

        gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);
        
        v_texCoord = a_texCoord;
    }
  `,this.lastResize=0,this.lastKnownScale=1,this.canvas=e,this.rendererPosition=e.getBoundingClientRect(),this.gl=e.getContext("webgl2"),this.fragmentShader=this.createShader(this.gl.FRAGMENT_SHADER,this.fragmentShaderSource),this.vertexShader=this.createShader(this.gl.VERTEX_SHADER,this.vertexShaderSource),this.program=this.createProgram(this.vertexShader,this.fragmentShader),this.dpi=(t==null?void 0:t.dpi)||1,this.attributes={position:this.gl.getAttribLocation(this.program,"a_position"),texCoord:this.gl.getAttribLocation(this.program,"a_texCoord")},this.uniforms={resolution:this.gl.getUniformLocation(this.program,"u_resolution"),texture:this.gl.getUniformLocation(this.program,"u_texture")},this.buffers={position:this.createArrayBuffer(),texCoord:this.createArrayBuffer(new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1]))},this.rectBuffer=new Float32Array(12),this.resize(),this.gl.viewport(0,0,this.gl.canvas.width,this.gl.canvas.height),this.gl.clearColor(0,0,0,0),this.gl.clear(this.gl.COLOR_BUFFER_BIT),this.gl.useProgram(this.program),this.gl.enableVertexAttribArray(this.attributes.position)}resize(){this.resizeCanvasToDisplaySize(),this.gl.viewport(0,0,this.gl.canvas.width,this.gl.canvas.height),this.rendererPosition=this.canvas.getBoundingClientRect()}isReady(){return!0}beforeFrame(e,t,i){this.gl.clearColor(0,0,0,0),this.gl.clear(this.gl.COLOR_BUFFER_BIT),this.gl.vertexAttribPointer(this.attributes.position,2,this.gl.FLOAT,!1,0,0),this.gl.uniform2f(this.uniforms.resolution,this.gl.canvas.width,this.gl.canvas.height),this.lastResize>1e3&&(this.lastResize=0,this.resizeCanvasToDisplaySize()),this.lastResize+=t}prepareLayer(e){(!e.__host||!e.__host.webgl)&&((e instanceof cn||e instanceof nr)&&this.createImageHost(e),e instanceof Ca&&this.createTextureHost(e))}createTextureHost(e){e.__host=e.__host?e.__host:{};let t=this.gl,i=this.gl.createTexture();t.bindTexture(t.TEXTURE_2D,i),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!1);let n;if(e instanceof Ca){let s=e.getTexture();s.source&&t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,s.source),n=s}t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),e.__host.webgl={height:e.height,width:e.width,texture:i,lastImage:n}}createImageHost(e){let t=[...new Array(e.points.length/5)];e.__host=e.__host?e.__host:{},e.__host.webgl={height:e.height,width:e.width,textures:t,loading:[],loaded:[],lastLevelRendered:-1,onLoad:(i,n)=>{let s=this.gl,a=this.gl.createTexture();s.bindTexture(s.TEXTURE_2D,a),s.pixelStorei(s.UNPACK_FLIP_Y_WEBGL,!1),s.texImage2D(s.TEXTURE_2D,0,s.RGBA,s.RGBA,s.UNSIGNED_BYTE,n),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MAG_FILTER,s.LINEAR),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MIN_FILTER,s.LINEAR),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_T,s.CLAMP_TO_EDGE),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_S,s.CLAMP_TO_EDGE),s.bindTexture(s.TEXTURE_2D,null),e.__host.webgl.textures[i]=a,e.__host.webgl.loaded.push(i)}}}paint(e,t,i,n,s,a){if(e.type==="spacial-content"&&e.__host&&e.__host.webgl){if(e.getTexture){let c=e==null?void 0:e.getTexture();if(c&&e.__host.webgl.lastImage!==c.hash&&c.source&&!e.__host.webgl.error)try{let h=this.gl.RGBA,m=this.gl.RGBA,f=this.gl.UNSIGNED_BYTE;this.gl.bindTexture(this.gl.TEXTURE_2D,e.__host.webgl.texture),this.gl.texImage2D(this.gl.TEXTURE_2D,0,h,m,f,c.source),e.__host.webgl.lastImage=c.hash}catch(h){e.__host.webgl.error=h}}if(e.__host.webgl.loading&&e.__host.webgl.loading.indexOf(t)===-1&&e.getImageUrl){e.__host.webgl.loading.push(t);let c=document.createElement("img");c.decoding="async",c.crossOrigin="anonymous",c.src=e.getImageUrl(t),c.onload=()=>(c.onload=null,e.__host.webgl.onLoad(t,c))}let l=e.__host.webgl.texture?e.__host.webgl.texture:e.__host.webgl.textures[t];l&&(this.gl.enableVertexAttribArray(this.attributes.texCoord),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.buffers.texCoord),this.gl.enableVertexAttribArray(this.attributes.texCoord),this.gl.vertexAttribPointer(this.attributes.texCoord,2,this.gl.FLOAT,!1,0,0),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.buffers.position),this.gl.enableVertexAttribArray(this.attributes.position),this.gl.vertexAttribPointer(this.attributes.position,2,this.gl.FLOAT,!1,0,0),this.gl.bindTexture(this.gl.TEXTURE_2D,l),this.gl.uniform1i(this.uniforms.texture,0),this.setRectangle(i,n,s,a),this.gl.drawArrays(this.gl.TRIANGLES,0,6))}}afterPaintLayer(e,t){}pendingUpdate(){return!0}getPointsAt(e,t,i,n){return e.getPointsAt(t,i,n)}afterFrame(){}getScale(e,t,i){if(Number.isNaN(e)||Number.isNaN(t))return this.lastKnownScale;let n=this.getCanvasDims(),s=n.width/e,a=n.height/t,l=(s<a?a:s)*(i&&this.dpi||1);return Number.isNaN(l)||(this.lastKnownScale=l),this.lastKnownScale}getCanvasDims(){return{width:this.canvas.width/this.dpi,height:this.canvas.height/this.dpi}}getViewportBounds(e,t,i){return null}createShader(e,t){let i=this.gl.createShader(e);if(i){if(this.gl.shaderSource(i,t),this.gl.compileShader(i),this.gl.getShaderParameter(i,this.gl.COMPILE_STATUS))return i;let n=this.gl.getShaderInfoLog(i);if(this.gl.deleteShader(i),n)throw new Error(n)}throw new Error("Invalid shader")}createProgram(e,t){let i=this.gl.createProgram();if(i){if(this.gl.attachShader(i,e),this.gl.attachShader(i,t),this.gl.linkProgram(i),this.gl.getProgramParameter(i,this.gl.LINK_STATUS))return i;let n=this.gl.getProgramInfoLog(i);if(this.gl.deleteProgram(i),n)throw new Error(n)}throw new Error("Invalid program")}resizeCanvasToDisplaySize(){let e=this.gl.canvas,t=e.clientWidth,i=e.clientHeight,n=e.width!==t||e.height!==i;return n&&(e.width=t,e.height=i),n}createArrayBuffer(e){let t=this.gl.createBuffer();if(this.gl.bindBuffer(this.gl.ARRAY_BUFFER,t),e&&this.gl.bufferData(this.gl.ARRAY_BUFFER,e,this.gl.STATIC_DRAW),!t)throw new Error("Cannot create buffer");return t}setRectangle(e,t,i,n){this.gl.bufferData(this.gl.ARRAY_BUFFER,this.getRectangle(e,t,i,n),this.gl.STATIC_DRAW)}getRectangle(e,t,i,n){let s=e,a=e+i,l=t,c=t+n;return this.rectBuffer.set([s,l,a,l,s,c,s,c,a,l,a,c]),this.rectBuffer}getRendererScreenPosition(){return this.rendererPosition}finishLayer(){}reset(){}};function Dc(e,t){let i=t?e:JSON.stringify(e),n=5381,s=i.length;for(;s;)n=n*33^i.charCodeAt(--s);let a=(n>>>0).toString(16);return a.length%2?"0"+a:a}var Yg=class{constructor(e){this.sheetPrefix=(e==null?void 0:e.sheetPrefix)||"a-",this.$element=document.createElement("style"),this.stylesheetClasses=[],this.activeStylesheetClasses=[],this.sheetsDidUpdate=!1,this.stylesheetEntries={}}getElement(){return this.$element}addStylesheet(e){let t=e.replace(/\s\s+/g," ").replace(/: /g,":").replace(/; /g,";").trim(),i=this.sheetPrefix+Dc(t,!0);return this.stylesheetClasses.indexOf(i)!==-1||(this.stylesheetClasses.push(i),this.activeStylesheetClasses.push(i),this.stylesheetEntries[i]=t,this.sheetsDidUpdate=!0),i}removeStylesheet(e){let t=this.sheetPrefix+Dc(e,!0);this.stylesheetClasses.indexOf(t)&&(this.stylesheetClasses=this.stylesheetClasses.filter(i=>i!==t)),this.sheetsDidUpdate=!0}clearClasses(){this.activeStylesheetClasses=[]}didUpdateActive(){if(this.activeStylesheetClasses.length){for(let e of this.activeStylesheetClasses)if(this.stylesheetClasses.indexOf(e)===-1)return!0;for(let e of this.stylesheetClasses)if(this.activeStylesheetClasses.indexOf(e)===-1)return!0}return!1}updateSheet(){(this.sheetsDidUpdate||this.didUpdateActive())&&(this.$element.innerText=this.activeStylesheetClasses.map(e=>`.${e}{${this.stylesheetEntries[e]}}`).join(""),this.sheetsDidUpdate=!1,this.stylesheetClasses=[...this.activeStylesheetClasses])}},Kg=class{constructor(e,t){this.visible=[],this.previousVisible=[],this.htmlIds=[],this.firstMeaningfulPaint=!1,this.paintTx=1,this.zIndex=0,this.htmlContainer=e,this.htmlContainer.innerHTML="",this.rendererPosition=this.htmlContainer.getBoundingClientRect(),this.options=A({triggerResize:()=>{},box:!1,text:!1,sheetPrefix:"",inlineStyles:!1,background:""},t||{}),this.stylesheet=new Yg({sheetPrefix:this.options.sheetPrefix}),this.options.inlineStyles||this.htmlContainer.appendChild(this.stylesheet.getElement()),this.options.background&&this.htmlContainer.classList.add(this.stylesheet.addStylesheet(`
        background: ${this.options.background};
      `)),this.classes={hostClassName:this.stylesheet.addStylesheet(`
        position: absolute;
        transform-origin: 0px 0px;
      `),interactive:this.stylesheet.addStylesheet("pointer-events: all"),nonInteractive:this.stylesheet.addStylesheet("pointer-events: none")},this.stylesheet.updateSheet()}createHtmlHost(e){if(this.htmlContainer&&(this.options.box||e.props.className||e.props.html||e.props.href)){let t=document.createElement(e.props.href?"a":"div");if(e.props.href){t.style.display="block",t.href=e.props.href;let i=e.props.hrefTarget||"_blank";t.target=i,i!=="_self"&&(t.rel="noopener noreferrer")}t.title=e.props.title||"",this.options.inlineStyles?(t.style.display="block",t.style.position="absolute",t.style.overflow="hidden",t.style.transformOrigin="0px 0px"):t.classList.add(this.classes.hostClassName),e.__host={element:t,revision:null,relative:!1},this.updateHtmlHost(e,e.width,e.height),e.__onCreate&&e.__onCreate()}}triggerResize(){this.options.triggerResize()}updateHtmlHost(e,t,i){if(e.__revision!==e.__host.revision){let n=e.__host.element,s=[this.classes.hostClassName];if(e.props.interactive?this.options.inlineStyles?n.style.pointerEvents="all":s.push(this.classes.interactive):this.options.inlineStyles?n.style.pointerEvents="none":s.push(this.classes.nonInteractive),e.props.href){n.style.display="block",n.href=e.props.href;let l=e.props.hrefTarget||"_blank";n.target=l,l!=="_self"?n.rel="noopener noreferrer":n.rel=""}else n.href&&n.removeAttribute("href");if(e.props.title&&(n.title=e.props.title||""),e.props.className&&(s.push(e.props.className),e.hovering&&s.push(`${e.props.className}--hover`),e.pressing&&s.push(`${e.props.className}--active`)),e.props.relativeStyle?(n.style.width=`${t||e.width}px`,n.style.height=`${i||e.height}px`):(n.style.width=`${e.width}px`,n.style.height=`${e.height}px`),e.props.style){Object.assign(n.style,e.props.style||{},e.hovering?e.props.hoverStyles||{}:{},e.pressing?e.props.pressStyles||{}:{});return}if(this.options.text&&e instanceof So){e.text&&(n.innerText=e.text),e.backgroundColor&&(n.style.backgroundColor=e.backgroundColor),e.color&&(n.style.color=e.color),e.props.font&&(n.style.font=e.props.font),e.props.textAlign&&(n.style.textAlign=e.props.textAlign),e.__host.revision=e.__revision;let l=s.join(" ");n.className=l,n.part=l}e instanceof Is&&(this.options.box||e.props.className||e.props.html)&&(e.props.backgroundColor&&(n.style.backgroundColor=e.props.backgroundColor),e.props.border!==n.style.border&&(n.style.border=e.props.border));let a=s.join(" ");n.className=a,n.part=a}}afterFrame(e,t,i){this.stylesheet.updateSheet();for(let n of this.previousVisible)this.visible.indexOf(n)===-1&&this.htmlContainer&&n.__id&&this.htmlIds.indexOf(n.__id)!==-1&&this.htmlContainer.removeChild(n.__host.element);this.previousVisible=this.visible}afterPaintLayer(e,t){}beforeFrame(e,t,i){this.stylesheet.clearClasses(),this.paintTx++,this.zIndex=0,this.visible=[]}getPointsAt(e,t,i,n){return e.getPointsAt(t,i,n)}getScale(e,t){let i=this.rendererPosition.width/e,n=this.rendererPosition.height/t;return i<n?n:i}getViewportBounds(e,t,i){return null}isReady(){return!1}paint(e,t,i,n,s,a){if(this.zIndex++,(this.options.text&&e instanceof So||e instanceof Is&&(this.options.box||e.props.className||e.props.html))&&e.__host.tx!==this.paintTx&&(this.visible.push(e),e.__host.tx=this.paintTx,this.htmlContainer)){this.updateHtmlHost(e,s,a);let l=s/e.width,c=e.__host.element;c.style.zIndex=`${this.zIndex}`,e.props.relativeStyle?c.style.transform=`translate(${Math.round(i)}px, ${Math.round(n)}px)`:c.style.transform=`translate(${Math.round(i)}px, ${Math.round(n)}px) scale(${l})`,this.previousVisible.indexOf(e)===-1&&this.htmlContainer.appendChild(c),this.htmlIds.indexOf(e.__id)===-1&&this.htmlIds.push(e.__id)}}pendingUpdate(){return!1}prepareLayer(e){e.__host||(e instanceof So||e instanceof Is)&&this.createHtmlHost(e)}resize(e,t){typeof e<"u"&&typeof t<"u"&&(this.htmlContainer.style.width=`${e}px`,this.htmlContainer.style.height=`${t}px`),this.rendererPosition=this.htmlContainer.getBoundingClientRect()}getRendererScreenPosition(){return this.rendererPosition}finishLayer(){}reset(){}},cl=class{constructor(e,t,i){this.activatedEvents=[],this.eventHandlers=[],this.pointerMoveEvent=void 0,this.pointerEventState={isClicking:!1,isDragging:!1,isPressed:!1,mousedOver:[],itemsBeingDragged:[],mouseDownStart:{x:0,y:0},lastTouches:[]},this._realPointerMove=s=>{this.pointerMoveEvent=s},this.onWheelEvent=s=>{s.preventDefault(),this.onPointerEvent(s)},this.onTouchEvent=s=>{let a=_s[s.type],l=[],c=s.touches.length;for(let h=0;h<c;h++){let m=s.touches.item(h);if(!m)continue;let{x:f,y}=this.runtime.viewerToWorld(m.clientX-this.bounds.left,m.clientY-this.bounds.top),S={id:m.identifier,x:f,y};l.push(S)}l.length&&this.assignToEvent(s,l[0].x,l[0].y),a!=="onTouchEnd"?(this.pointerEventState.lastTouches=l,s.atlasTouches=l,this.runtime.world.propagateTouchEvent(a,s,l)):(s.atlasTouches=[],this.runtime.world.propagateTouchEvent(a,s,this.pointerEventState.lastTouches),this.pointerEventState.lastTouches=[])},this.onPointerEvent=s=>{let a=_s[s.type];if(a&&this.runtime.world.activatedEvents.indexOf(a)!==-1){let{x:l,y:c}=this.runtime.viewerToWorld(s.clientX-this.bounds.left,s.clientY-this.bounds.top);this.assignToEvent(s,l,c),this.runtime.world.propagatePointerEvent(a,s,l,c)}},this.onPointerDown=s=>{this.pointerEventState.isPressed=!0,this.pointerEventState.isClicking=!0,this.pointerEventState.mouseDownStart.x=s.clientX,this.pointerEventState.mouseDownStart.y=s.clientY,setTimeout(()=>{this.runtime&&(this.pointerEventState.isClicking=!1)},250),setTimeout(()=>{if(this.runtime&&this.pointerEventState.isPressed&&!this.pointerEventState.isDragging){let a=this.runtime.viewerToWorld(this.pointerEventState.mouseDownStart.x-this.bounds.left,this.pointerEventState.mouseDownStart.y-this.bounds.top);this.pointerEventState.isDragging=!0,this.pointerEventState.itemsBeingDragged=this.runtime.world.propagatePointerEvent("onDragStart",s,a.x,a.y)}},800),this.onPointerEvent(s)},this.onPointerUp=s=>{if(this.pointerEventState.isClicking){let{x:a,y:l}=this.runtime.viewerToWorld(s.clientX-this.bounds.left,s.clientY-this.bounds.top);this.assignToEvent(s,a,l),this.runtime.world.propagatePointerEvent("onClick",s,a,l)}if(this.pointerEventState.isDragging){for(let a of this.pointerEventState.itemsBeingDragged)a.dispatchEvent("onDragEnd",s);this.pointerEventState.isDragging=!1}this.pointerEventState.isClicking=!1,this.pointerEventState.isPressed=!1,this.pointerEventState.itemsBeingDragged=[],this.onPointerEvent(s)},this.onPointerMove=s=>{this.pointerMoveEvent=void 0;let{x:a,y:l}=this.runtime.viewerToWorld(s.clientX-this.bounds.left,s.clientY-this.bounds.top);if(Number.isNaN(a)||Number.isNaN(l))return;this.assignToEvent(s,a,l),this.runtime.world.propagatePointerEvent("onPointerMove",s,a,l);let c=this.runtime.world.propagatePointerEvent("onMouseMove",s,a,l),h=[],m=[];for(let f of c)h.push(f.id),m.push(f),this.pointerEventState.mousedOver.indexOf(f)===-1&&(f.dispatchEvent("onMouseEnter",s),f.dispatchEvent("onPointerEnter",s),f.dispatchEvent("onMouseOver",s),f.dispatchEvent("onPointerOver",s));for(let f of this.pointerEventState.mousedOver)h.indexOf(f.id)===-1&&(f.dispatchEvent("onMouseLeave",s),f.dispatchEvent("onPointerLeave",s),f.dispatchEvent("onMouseOut",s),f.dispatchEvent("onPointerOut",s));if(this.pointerEventState.isDragging)for(let f of this.pointerEventState.itemsBeingDragged)f.dispatchEvent("onDrag",s);if(this.pointerEventState.isPressed&&!this.pointerEventState.isDragging&&ka(this.pointerEventState.mouseDownStart,{x:s.clientX,y:s.clientY})>50){let f=this.runtime.viewerToWorld(this.pointerEventState.mouseDownStart.x-this.bounds.left,this.pointerEventState.mouseDownStart.y-this.bounds.top);this.pointerEventState.isDragging=!0,this.pointerEventState.itemsBeingDragged=this.runtime.world.propagatePointerEvent("onDragStart",D(A({},s),{atlas:{x:f.x,y:f.y}}),f.x,f.y)}this.pointerEventState.mousedOver=m},this.element=e,this.runtime=t,this.unsubscribe=t.world.addLayoutSubscriber(this.layoutSubscriber.bind(this)),this.bounds=e.getBoundingClientRect(),this.listening=!1,this.options=A({simulationRate:0},i||{});let n=0;t.registerHook("useFrame",s=>{n+=s,n>this.options.simulationRate&&this.pointerMoveEvent&&(n=0,t.updateNextFrame())}),t.registerHook("useBeforeFrame",()=>{this.pointerMoveEvent&&this.onPointerMove(this.pointerMoveEvent)}),this.activateEvents()}updateBounds(){this.bounds=this.element.getBoundingClientRect(),this.runtime.updateRendererScreenPosition()}layoutSubscriber(e){e==="event-activation"&&this.listening==!1&&this.activateEvents()}assignToEvent(e,t,i){cl.eventPool.atlas.x=t,cl.eventPool.atlas.y=i,e.atlas=cl.eventPool.atlas}activateEvents(){this.listening=!0,this.element.addEventListener("pointermove",this._realPointerMove),this.element.addEventListener("pointerup",this.onPointerUp),this.element.addEventListener("pointerdown",this.onPointerDown),this.element.addEventListener("mousedown",this.onPointerEvent),this.element.addEventListener("mouseup",this.onPointerEvent),this.element.addEventListener("pointercancel",this.onPointerEvent),this.element.addEventListener("wheel",this.onWheelEvent),this.element.addEventListener("touchstart",this.onTouchEvent),this.element.addEventListener("touchcancel",this.onTouchEvent),this.element.addEventListener("touchend",this.onTouchEvent),this.element.addEventListener("touchmove",this.onTouchEvent)}normalizeEventName(e){return e.startsWith("on")?e.slice(2).toLowerCase():e.toLowerCase()}stop(){this.listening=!1,this.element.removeEventListener("pointermove",this._realPointerMove),this.element.removeEventListener("pointerup",this.onPointerUp),this.element.removeEventListener("pointerdown",this.onPointerDown),this.element.removeEventListener("mousedown",this.onPointerEvent),this.element.removeEventListener("mouseup",this.onPointerEvent),this.element.removeEventListener("pointercancel",this.onPointerEvent),this.element.removeEventListener("wheel",this.onWheelEvent),this.element.removeEventListener("touchstart",this.onTouchEvent),this.element.removeEventListener("touchcancel",this.onTouchEvent),this.element.removeEventListener("touchend",this.onTouchEvent),this.element.removeEventListener("touchmove",this.onTouchEvent),this.unsubscribe();for(let[e,t]of this.eventHandlers)this.element.removeEventListener(this.normalizeEventName(e),t)}},Uc=cl;Uc.eventPool={atlas:{x:0,y:0}};function Xg({interactive:e=!0,viewport:t,forceRefresh:i,canvasElement:n,overlayElement:s,controllerConfig:a,unstable_webglRenderer:l,dpi:c,debug:h,canvasBox:m=!0,polygon:f=!0,navigatorElement:y,runtimeOptions:S}){if(!n)throw new Error("Invalid container");n.style.userSelect="none";let C=e?Bg(A({minZoomFactor:.5,maxZoomFactor:3,enableClickToZoom:!1,parentElement:n},a||{})):void 0,_=new Cg([l?new $E(n,{dpi:c}):new cE(n,{dpi:c,debug:h,box:m,polygon:f}),s?new Kg(s,{box:l||!m,text:!0,triggerResize:i}):void 0,y?new hE(y):void 0]),P=new Ka(_,new rr(1024,1024),t,C?[C]:[],S),I=new Uc(n,P);return{name:"default-preset",em:I,runtime:P,renderer:_,controller:C,canvas:n,navigator:y,unmount(){jc(P),P.stopControllers(),P.stop(),P.reset(),I&&I.stop()}}}var or=1+Number.MIN_VALUE,NE=class{constructor(e,t){this.pending=!0,this.zIndex=0,this.lastKnownScale=1,this.currentlyVisible=[],this.previouslyVisible=[],this.container=e,this.rendererPosition=e.getBoundingClientRect();let{width:i,height:n}=this.rendererPosition;this.width=i,this.height=n,this.options=A({addPart:!1,setDraggableFalse:!1,imageClass:"",widthStylesheet:!1,sheetPrefix:"position-",background:"#000"},t||{}),this.stylesheet=new Yg({sheetPrefix:this.options.sheetPrefix}),this.container.classList.add(this.stylesheet.addStylesheet(`
        background: ${this.options.background};
      `)),this.options.widthStylesheet&&this.container.appendChild(this.stylesheet.getElement())}isReady(){return!0}resize(){this.rendererPosition=this.container.getBoundingClientRect(),this.width=this.rendererPosition.width,this.height=this.rendererPosition.height}getRendererScreenPosition(){return this.rendererPosition}afterFrame(e,t,i){this.stylesheet.updateSheet();for(let n of this.previouslyVisible)this.currentlyVisible.indexOf(n)===-1&&this.container.removeChild(n);for(let n of this.currentlyVisible)this.previouslyVisible.indexOf(n)===-1&&this.container.appendChild(n);this.previouslyVisible=this.currentlyVisible,this.currentlyVisible=[]}afterPaintLayer(e,t){}beforeFrame(e,t,i){this.stylesheet.clearClasses(),this.zIndex=0}getPointsAt(e,t,i,n){return e.getPointsAt(t,i,n)}getScale(e,t){if(Number.isNaN(e)||Number.isNaN(t))return this.lastKnownScale;let i=this.width/e,n=this.height/t,s=i<n?n:i;return Number.isNaN(s)||(this.lastKnownScale=s),this.lastKnownScale}getViewportBounds(e,t,i){return null}createImage(){let e=document.createElement("img");return this.options.imageClass?(e.className=this.options.imageClass,this.options.addPart&&e.setAttribute("part",this.options.imageClass)):(e.style.position="absolute",e.style.pointerEvents="none",e.style.userSelect="none"),this.options.setDraggableFalse&&e.setAttribute("draggable","false"),e}paint(e,t,i,n,s,a){if(this.pending=!1,this.zIndex++,e instanceof cn){if(!e.__host){let c=this.createImage();c.src=e.uri,e.__host=c,this.container.appendChild(e.__host)}let l=e.__host;this.currentlyVisible.push(l),l.style.zIndex=`${this.zIndex}`,l.style.opacity=`${e.style.opacity}`,this.options.widthStylesheet?l.className=this.options.imageClass+" "+this.stylesheet.addStylesheet(`width:${(s+or).toFixed(2)}px;height:${(a+or).toFixed(2)}px;`):(l.style.width=`${s+or}px`,l.style.height=`${a+or}px`),l.style.transform=`translate(${i}px, ${n}px)`}if(e instanceof nr){if(e.__host||(e.__host={images:[]}),!e.__host.images[t]){let c=e.getImageUrl(t),h=this.createImage();h.src=c,e.__host.images[t]=h,this.container.appendChild(h)}let l=e.__host.images[t];l.style.zIndex=`${this.zIndex}`,l.style.opacity=`${e.style.opacity}`,this.currentlyVisible.push(l),this.options.widthStylesheet?l.className=this.options.imageClass+" "+this.stylesheet.addStylesheet(`width:${(s+or).toFixed(2)}px;height:${(a+or).toFixed(2)}px;`):(l.style.width=`${s+or}px`,l.style.height=`${a+or}px`),l.style.transform=`translate(${i}px, ${n}px)`}}pendingUpdate(){return this.pending}prepareLayer(e){}finishLayer(e){}reset(){}};function ME({interactive:e,viewport:t,forceRefresh:i,containerElement:n,overlayElement:s,controllerConfig:a}){if(!n)throw new Error("Invalid container");n.style.userSelect="none";let l=e?Bg(A({minZoomFactor:.5,maxZoomFactor:3,enableClickToZoom:!1,parentElement:n},a||{})):void 0,c=new NE(n,{addPart:!1,setDraggableFalse:!1,imageClass:"atlas-static-image"}),h=s?new Cg([c,new Kg(s,{box:!0,text:!0,triggerResize:i})]):c,m=new Ka(h,new rr(1024,1024),t,l?[l]:[]),f=new Uc(n,m);return{name:"static-preset",em:f,runtime:m,renderer:h,controller:l,container:n,overlay:s,unmount(){jc(m),m.stopControllers(),m.stop(),f&&f.stop()}}}var FE={"default-preset":Xg,"static-preset":ME},zE={};function BE(e,t){let i=Se(),n=Se(),s=Se(),a=Se(),l=Se({width:t.width,height:t.height,didUpdate:!0}),[c="default-preset",h=zE]=Array.isArray(e)?e||[]:[e],[m,f]=Ne(null);It(()=>{let S=n.current,C=a.current,_=i.current,P=s.current,I=(FE[c]||Xg)(A({containerElement:C,canvasElement:S,overlayElement:_,navigatorElement:P,viewport:l.current,dpi:window.devicePixelRatio||1,forceRefresh:t.forceRefresh,unstable_webglRenderer:t.unstable_webglRenderer},h||{}));return f(I),()=>{I&&(I.unmount(),S&&(S.height=0,S.width=0),_&&(_.innerHTML=""),P&&(P.height=0,P.width=0))}},[c,h]);let y=Ee(()=>({canvas:n,overlay:i,container:a,navigator:s}),[]);return[c,m,l,y]}function jE(e){return Ee(()=>Dc(e),e)}var Po=Z.forwardRef((e,t)=>Z.createElement("div",D(A({},e),{ref:t,part:e.className}))),Zg=["brightness","contrast","grayscale","hueRotate","invert","saturate","sepia","blur"],DE=e=>{var t=e,{htmlChildren:i,renderPreset:n,onCreated:s,mode:a="explore",resetWorldOnChange:l=!0,unstable_webglRenderer:c=!1,unstable_noReconciler:h=!1,hideInlineStyle:m=!1,controllerConfig:f,children:y,overlayStyle:S,containerStyle:C,enableNavigator:_,className:P,containerProps:I={},homePosition:L,homeOnResize:E,homeCover:N,background:F,runtimeOptions:U,debug:q,filters:G}=t,V=le(t,["htmlChildren","renderPreset","onCreated","mode","resetWorldOnChange","unstable_webglRenderer","unstable_noReconciler","hideInlineStyle","controllerConfig","children","overlayStyle","containerStyle","enableNavigator","className","containerProps","homePosition","homeOnResize","homeCover","background","runtimeOptions","debug","filters"]);let[ae,W]=Ne(a),[se,pe]=Ne(!1),ue=Se(!1),[we,he]=Ne(0),_e=Ee(()=>(typeof n=="string"&&(n=[n,{}]),q?n?[n[0],A({debug:q},n[1]||{})]:["default-preset",{debug:q}]:n||"default-preset"),[n,q]),[et,J,ke]=Dg({scroll:!0}),Ie=Se(),Ve=$e=>{Ie.current=$e,et($e)},[it,te,Oe,Nt]=BE(_e,{width:V.width,height:V.height,forceRefresh:ke,unstable_webglRenderer:c}),[Qt,Ht]=Ne("");de(()=>{W(a)},[a]),de(()=>{te&&te.em&&te.em.updateBounds()},[te,J]),de(()=>{te==null||te.runtime.setOptions(U||{})},[U]),de(()=>{te&&te.runtime&&(te.runtime.mode=ae),se&&te&&(te.ready=!0)},[te,se,ae]),de(()=>{te&&(N||(te.runtime.manualHomePosition=!!L,te.runtime.setHomePosition(L)))},[te,N,L]),de(()=>{if(te){let $e=te.runtime;$e.resize(Oe.current.width,V.width,Oe.current.height,V.height),Oe.current.width=V.width,Oe.current.height=V.height,$e.updateNextFrame(),Oe.current.didUpdate=!0}},[te,V.width,V.height]),de(()=>{if(G&&te){let $e=te.runtime,Ue=!1;$e.hookOptions.enableFilters=!0;for(let nt of Zg)G[nt]?G[nt]!==te.runtime.hookOptions.filters[nt]&&($e.hookOptions.filters[nt]=G[nt],Ue=!0):$e.hookOptions.filters[nt]&&($e.hookOptions.filters[nt]=0,Ue=!0);Ue&&$e.updateNextFrame()}else if(te){let $e=te.runtime;for(let Ue of Zg)$e.hookOptions.filters[Ue]=0;$e.hookOptions.enableFilters=!1,$e.updateNextFrame()}},[te,G]),To(()=>{if(te&&(te.overlay&&(te.overlay.style.width=`${J.width}px`,te.overlay.style.height=`${J.height}px`),te.container&&(te.container.style.width=`${J.width}px`,te.container.style.height=`${J.height}px`),N)){let $e=te.runtime.world.width,Ue=te.runtime.world.height,nt=$e/Ue,De=Oe.current.width,Ke=Oe.current.height,ot=De/Ke;if(nt>ot){ot=Ke/De,te.runtime.manualHomePosition=!0;let tt=($e-Ue/ot)/2;N==="start"&&(tt=0),N==="end"&&(tt=$e-Ue/ot),te.runtime.setHomePosition({x:tt,y:0,width:Ue/ot,height:Ue})}else{let tt=(Ue-$e/ot)/2;N==="start"&&(tt=0),N==="end"&&(tt=Ue-$e/ot),te.runtime.manualHomePosition=!0,te.runtime.setHomePosition({x:0,y:tt,width:$e,height:$e/ot})}E&&te.runtime.goHome({})}},[te,J.height,J.width,N,we]),To(()=>{let $e=()=>{if(te){let Ue=te.runtime;Oe.current.width!==V.width&&Oe.current.height!==V.height&&(Ue.resize(Oe.current.width,V.width,Oe.current.height,V.height),Oe.current.width=V.width,Oe.current.height=V.height,Ue.updateNextFrame(),Oe.current.didUpdate=!0)}};return window.addEventListener("resize",$e),()=>window.removeEventListener("resize",$e)},[te,V.height,V.width]);let yt={width:120},Ct=()=>{if(te&&te.navigator){let $e=te.runtime.world.height,Ue=te.runtime.world.width,nt=window.devicePixelRatio||1,De=yt.width,Ke=yt.width/Ue*$e;te.navigator.width=De*nt,te.navigator.height=Ke*nt,te.navigator.style.width=De+"px",te.navigator.style.height=Ke+"px"}};To(()=>{if(te){Ct();let $e=te.runtime;return $e.world.addLayoutSubscriber(Ue=>{Ue==="recalculate-world-size"&&(Ct(),$e.resize(Oe.current.width,V.width,Oe.current.height,V.height),he(nt=>nt+1))})}return()=>{}},[te,V.width,V.height]);let oi=je(function($e){let Ue=()=>{pe(!0)};return de(()=>{if(te){te.runtime.goHome();let nt=s&&s(te);return void(nt&&nt.then?nt.then(Ue):Ue())}else throw new Error("Invalid configuration - no runtime found")},[]),$e.children},[te]);de(()=>{if(te){let $e=te.runtime;if(l)return $e.world.addLayoutSubscriber(Ue=>{Ue==="recalculate-world-size"&&$e.goHome()})}return()=>{}},[te,l]),de(()=>te?te.runtime.registerHook("useBeforeFrame",()=>{var $e;if(Oe.current.didUpdate&&te.canvas){let Ue=window.devicePixelRatio||1,nt=Oe.current.width,De=Oe.current.height;te.canvas.width=nt*Ue,te.canvas.height=De*Ue,te.canvas.style.width=nt+"px",te.canvas.style.height=De+"px",($e=te.canvas.getContext("2d"))==null||$e.scale(Ue,Ue),te&&te.em&&te.em.updateBounds(),Oe.current.didUpdate=!1}}):()=>{},[te,l]),de(()=>{let $e=()=>{te&&(W("sketch"),Ht("mode-sketch")),window.removeEventListener("keyup",$e)},Ue=nt=>{if(nt.code==="Space"&&te&&te.runtime.mode==="sketch"){if(nt.target&&nt.target.tagName&&nt.target.tagName.toLowerCase()==="input")return;nt.preventDefault(),W("explore"),Ht("mode-explore"),window.addEventListener("keyup",$e)}};return window.addEventListener("keydown",Ue),()=>{window.removeEventListener("keydown",Ue),window.removeEventListener("keyup",$e)}},[te]),ue.current=!0;let Jt=V,Mt=le(Jt,["height","width"]),Yt=jE([V.width,V.height]),mt=!0;return _e&&Array.isArray(_e)&&_e.length>1&&_e[1].interactive===!1&&(mt=!1),F=F??"#000",Ie.current&&(F=getComputedStyle(Ie.current).getPropertyValue("--atlas-background")||F),Z.createElement(Po,{ref:Ve,className:["atlas",m?"":`atlas-width-${Yt}`,Qt,P,`atlas-${it}`].filter(Boolean).join(" ").trim(),style:A(A({},C),m?{}:{width:V.width,height:V.height})},it==="static-preset"?Z.createElement(Po,A({className:"atlas-static-container",ref:Nt.container,tabIndex:0},I)):Z.createElement("canvas",D(A(A({className:"atlas-canvas",part:"atlas-canvas",tabIndex:0},Mt),I),{ref:Nt.canvas,"data-background":F})),Z.createElement(Po,{className:["atlas-overlay",mt?"atlas-overlay--interactive":""].filter(Boolean).join(" ").trim(),style:A({},S||{}),ref:Nt.overlay},h?Z.createElement(oi,null,Z.createElement(al.Provider,{value:J},Z.createElement(sl.Provider,{value:ae},Z.createElement(ol.Provider,{value:te},y)))):Z.createElement(LE,{bounds:J,preset:te,mode:ae,setIsReady:pe,onCreated:s},y)),_?Z.createElement(Po,{className:"atlas-navigator"},Z.createElement("canvas",{className:"atlas-navigator-canvas",part:"atlas-navigator-canvas",ref:Nt.navigator})):null,m?Z.createElement("style",null,`.atlas-width-${Yt} { width: ${V.width}px; height: ${V.height}px; }`):Z.createElement("style",null,`
        .atlas { position: relative; display: flex; background: ${F}; z-index: var(--atlas-z-index, 10); -webkit-touch-callout: none; -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; }
        .atlas-width-${Yt} { width: ${V.width}px; height: ${V.height}px; }
        .atlas-canvas { flex: 1 1 0px; }
        .atlas-canvas:focus, .atlas-static-container:focus { outline: none }
        .atlas-canvas:focus-visible, .atlas-canvas-container:focus-visible { outline: var(--atlas-focus, 2px solid darkorange) }
        .atlas-static-preset { touch-action: inherit; }
        .atlas-static-container { position: relative; overflow: hidden; flex: 1 1 0px; }
        .atlas-overlay { position: absolute; top: 0; left: 0; none; overflow: hidden; }
        /** setting the pointer events to none means that Atlas will own the touch and mousewheel events **/
        .atlas-overlay--interactive { pointer-events: none; }
        .atlas-static-image { position: absolute; user-select: none; transform-origin: 0px 0px; }
        .atlas-navigator { position: absolute; top: var(--atlas-navigator-top, 10px); right: var(--atlas-navigator-bottom, 10px); left: var(--atlas-navigator-left); bottom: var(--atlas-navigator-bottom); opacity: .8 }
        .atlas-navigator-canvas { width: 100%; }
      `),i)};function UE(e){return Number(e)==e?`${e}px`:e}var WE=e=>{var t=e,{resizeHash:i,aspectRatio:n,containerProps:s={}}=t,a=le(t,["resizeHash","aspectRatio","containerProps"]);let[l,c,h]=Dg(),m=a,{height:f,width:y}=m,S=le(m,["height","width"]);de(()=>{h()},[y,f,i,h]);let C=Ee(()=>n?{width:c.width,height:c.width*(1/n)}:c,[c,n]);return Z.createElement(Po,A({ref:l,className:"atlas-container"},s),C.width?Z.createElement(DE,A({width:C.width||100,height:C.height||100},S),a.children):null,a.hideInlineStyle?null:Z.createElement("style",null,`
          .atlas-container { 
            display: var(--atlas-container-display, block);
            flex: var(--atlas-container-flex, none);
            width: var(--atlas-container-width, ${y?`${y}px`:"100%"});
            height: var(--atlas-container-height, ${UE(f||(n?C.height:512))})  
          }
      `),a.htmlChildren)},hl=()=>Zt(ol),ar=()=>{let e=hl();return e?e.runtime:void 0},Wc=(e,t=[])=>{let i=ar();de(()=>i?i.registerHook("useAfterFrame",e):()=>{},t)},Hc=(e,t=[])=>{let i=ar();de(()=>i?i.registerHook("useFrame",e):()=>{},t)},HE=()=>{let e=hl();return e&&e.canvas?e.canvas:void 0};function Jg(){return Zt(al)}var em=({onCreate:e})=>{let t=Se({x:0,y:0}),i=HE(),n=Jg(),s=ar(),[a,l]=Ne(),[c,h]=Ne(),m=Mc();return Hc(()=>{s&&a&&!c&&(s.pendingUpdate=!0)},[a,c]),Wc(()=>{if(a&&i&&s){let f=i.getContext("2d");if(f){let{x:y,y:S,width:C,height:_}=s.worldToViewer(a.x,a.y,(c?c.x:t.current.x)-a.x,(c?c.y:t.current.y)-a.y);f.lineWidth=c?3:1,f.strokeStyle="#fff",f.strokeRect(y,S,C,_),f.lineWidth=c?3:1,f.strokeStyle="#000",f.strokeRect(y+1,S+1,C-2,_-2)}}},[a,c]),de(()=>{let f=y=>{if(n&&s){let{x:S,y:C}=s.viewerToWorld(y.clientX-n.left,y.clientY-n.top);t.current.x=~~S,t.current.y=~~C}};return i?(i.addEventListener("mousemove",f),()=>i.removeEventListener("mousemove",f)):()=>{}},[n,i,s]),de(()=>{let f=y=>{m==="sketch"&&(l({x:Math.round(t.current.x),y:Math.round(t.current.y)}),h(void 0))};return i?(i.addEventListener("mousedown",f),()=>i.removeEventListener("mousedown",f)):()=>{}},[i,m]),de(()=>{let f=y=>{a&&!c&&h({x:Math.round(t.current.x),y:Math.round(t.current.y)})};return i?(i.addEventListener("mouseup",f),()=>i.removeEventListener("mouseup",f)):()=>{}},[i,a,c]),de(()=>{a&&c&&e({x:Math.min(a.x,c.x),y:Math.min(a.y,c.y),width:Math.abs(c.x-a.x),height:Math.abs(c.y-a.y)})},[a,e,c]),null};async function qE(e,t,i){if(_a.startsWith("18.")){let n=await Promise.resolve().then(()=>Be(qp(),1)),s=n.default?n.default.createRoot:n.createRoot;i.current||(i.current=s(e)),i.current.render(t)}else if(typeof ReactDOM<"u"){let{render:n,unmountComponentAtNode:s}=ReactDOM;n(t,e),i.current={unmount(){s(e)}}}else{let n=await Promise.resolve().then(()=>(qe(),bs)),s=n.default?n.default.render:n.render,a=n.default?n.default.unmountComponentAtNode:n.unmountComponentAtNode;s(t,e),i.current={unmount(){a(e)}}}}var QE=Z.forwardRef((e,t)=>{var i=e,{children:n}=i,s=le(i,["children"]);let a=Se(),l=ar(),c=Se(0),h=Se(),m=Se();return Hc(()=>{var f,y,S,C;if(s.relative){let _=a.current;if(_&&l){let P=l.getScaleFactor();c.current!==P&&(c.current=P,_.style.transformOrigin="0 0",_.style.transform=`scale(${1/c.current})`,_.style.width=`${c.current*100}%`,_.style.height=`${c.current*100}%`,a.current&&((y=(f=h.current)==null?void 0:f.__owner.value)!=null&&y.rotation)&&(_.style.transform=`scale(${1/c.current}) translate(50%, 50%) rotate(${((C=(S=h.current)==null?void 0:S.__owner.value)==null?void 0:C.rotation)||0}deg)  translate(-50%, -50%)`))}}},[s.relative]),It(()=>{let f=h.current;t&&f&&(typeof t=="function"?t(f):t.current=f);async function y(){if(f&&f.__host){let S=s.relative?Z.createElement("div",{ref:a},n):n;await qE(f.__host.element,S,m)}}f&&f.__host?y():f&&(f.__onCreate=y)},[t,n,h,s.relative]),It(()=>()=>{m.current&&setTimeout(()=>{m.current.unmount()},0)},[]),Z.createElement("box",D(A({html:!0},s),{ref:h}))});QE.displayName="HTMLPortal";var tm=(e,t,i=[])=>{let n=ar(),s=n?n.world:void 0;de(()=>{if(n){let a=t,l=_s[e];n.world.activatedEvents.push(l);let c=l.slice(2).toLowerCase();return n.world.addEventListener(c,a),()=>{n.world.removeEventListener(c,a)}}return()=>{}},[s,e,...i])};function im(e,t){if(e===0)return[0,1];if(t===0)return[1,0];let i=Math.abs(e)/Math.abs(t);return[i,1-i]}function VE(){let e=Se({ctrl:!1,shift:!1,alt:!1});return It(()=>{function t(n){n.key==="Shift"&&(e.current.shift=!0),n.key==="Control"&&(e.current.ctrl=!0),n.key==="Alt"&&(e.current.alt=!0)}function i(n){n.key==="Shift"&&(e.current.shift=!1),n.key==="Control"&&(e.current.ctrl=!1),n.key==="Alt"&&(e.current.alt=!1)}return window.addEventListener("keydown",t),window.addEventListener("keyup",i),()=>{window.removeEventListener("keydown",t),window.removeEventListener("keyup",i)}},[]),e}var GE=(e,t)=>{let i=Mc(),n=ar(),s=Jg(),a=Se(),l=Se(null),c=Se(),[h,m]=Ne(!1),f=Se(!1),y=Se({north:0,south:0,east:0,west:0}),S=VE(),C=je(E=>N=>{if(f.current=!0,m(!0),s&&n){let{top:F,left:U}=s,q=n.viewerToWorld(N.pageX-U,N.pageY-F);c.current={x:q.x,y:q.y},a.current=E}},[s,n]),_=Ee(()=>e.width/e.height,[e.width,e.height]),P=je(E=>{if(!Math.abs(E.north-E.south+(E.east-E.west)))return;let N=-E.west+E.east,F=-E.north+E.south,U=e.width+N,q=e.height+F;if(U/q>=_){let G=q*_,V=U-G,[ae,W]=im(E.east,E.west);E.west=E.west+V*W,E.east=E.east-V*ae}else{let G=U/_,V=q-G,[ae,W]=im(E.north,E.south);E.north=E.north+V*ae,E.south=E.south-V*W}},[e.width,e.height,_]);Hc(()=>{c&&n&&n.updateNextFrame()}),de(()=>{n&&n.updateNextFrame()},[n,h]);let I=je(E=>{var N;if(!n||!s||n.mode!=="sketch")return;let{top:F,left:U}=s,q=n.viewerToWorld(E.pageX-U,E.pageY-F),G=l.current,V=!e.maintainAspectRatio&&S.current.alt,ae=!V&&S.current.shift&&((N=a.current)==null?void 0:N.indexOf("-"))!==-1;if((a.current==="translate"||a.current==="east"||a.current==="north-east"||a.current==="south-east")&&(y.current.east=q.x-(c.current?c.current.x:0),V&&(y.current.west=-y.current.east)),(a.current==="translate"||a.current==="west"||a.current==="north-west"||a.current==="south-west")&&(y.current.west=q.x-(c.current?c.current.x:0),V&&(y.current.east=-y.current.west)),(a.current==="translate"||a.current==="north"||a.current==="north-east"||a.current==="north-west")&&(y.current.north=q.y-(c.current?c.current.y:0),V&&(y.current.south=-y.current.north)),(a.current==="translate"||a.current==="south"||a.current==="south-west"||a.current==="south-east")&&(y.current.south=q.y-(c.current?c.current.y:0),V&&(y.current.north=-y.current.south)),(e.maintainAspectRatio||ae)&&P(y.current),G){let W=y.current.west,se=y.current.north,pe=e.width+y.current.east,ue=e.height+y.current.south;G.points[1]=Math.min(W,pe),G.points[2]=Math.min(se,ue),G.points[3]=Math.max(W,pe),G.points[4]=Math.max(se,ue),n.updateNextFrame()}},[n,e.width,e.height,e.maintainAspectRatio,s]);tm("mousemove",I,[e.width,e.height,s]),tm("pointermove",I,[e.width,e.height,s]);let L=Se();return de(()=>{L.current=()=>{if(f.current){let E=y.current.west,N=y.current.north,F=e.width+y.current.east,U=e.height+y.current.south,q=Math.min(E,F),G=Math.min(N,U),V=Math.max(E,F),ae=Math.max(N,U),W={x:(e.x||0)+q,y:(e.y||0)+G,width:V-q||1,height:ae-G||1};e.maintainAspectRatio,t(W),a.current=void 0,c.current=void 0,y.current.east=0,y.current.west=0,y.current.north=0,y.current.south=0,f.current=!1,m(!1)}}},[t,e.height,e.width,e.x,e.y]),de(()=>{let E=()=>{L.current&&L.current()};return window.addEventListener("pointerup",E),window.addEventListener("touchend",E),()=>{window.removeEventListener("pointerup",E),window.removeEventListener("touchend",E)}},[]),{portalRef:l,mode:i,mouseEvent:C,onPointerMoveCallback:I,isEditing:h}};function nm(e,t){return e?t?D(A(A({},e),t||{}),{":hover":e[":hover"]?Object.assign(e[":hover"]||{},t[":hover"]||{}):t[":hover"],":active":e[":active"]?Object.assign(e[":active"]||{},t[":active"]||{}):t[":hover"]}):e:t}Ye(),Ye();var YE=0;function ni(e,t,i,n,s){var a,l,c={};for(l in t)l=="ref"?a=t[l]:c[l]=t[l];var h={type:e,props:c,key:i,ref:a,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:--YE,__source:s,__self:n};if(typeof e=="function"&&(a=e.defaultProps))for(l in a)c[l]===void 0&&(c[l]=a[l]);return Ce.vnode&&Ce.vnode(h),h}var KE={id:"https://iiif-parser/annotation-page",type:"AnnotationPage",behavior:[],motivation:null,label:null,thumbnail:[],summary:null,requiredStatement:null,metadata:[],rights:null,provider:[],items:[],seeAlso:[],homepage:[],logo:[],rendering:[],service:[]},XE={id:"https://iiif-parser/empty-canvas",type:"Canvas",label:null,behavior:[],motivation:null,thumbnail:[],posterCanvas:null,accompanyingCanvas:null,placeholderCanvas:null,summary:null,requiredStatement:null,metadata:[],rights:null,navDate:null,provider:[],items:[],annotations:[],seeAlso:[],homepage:[],logo:[],partOf:[],rendering:[],service:[],duration:0,height:0,width:0},ZE={id:"https://iiif-parser/empty-collection",type:"Collection",label:null,viewingDirection:"left-to-right",behavior:[],motivation:null,thumbnail:[],posterCanvas:null,accompanyingCanvas:null,placeholderCanvas:null,summary:null,requiredStatement:null,metadata:[],rights:null,navDate:null,provider:[],items:[],annotations:[],seeAlso:[],homepage:[],logo:[],partOf:[],rendering:[],service:[],services:[]},JE={id:"https://iiif-parser/empty-manifest",type:"Manifest",annotations:[],behavior:[],homepage:[],items:[],label:null,logo:[],metadata:[],motivation:null,navDate:null,provider:[],partOf:[],posterCanvas:null,accompanyingCanvas:null,placeholderCanvas:null,rendering:[],requiredStatement:null,rights:null,seeAlso:[],service:[],services:[],start:null,structures:[],summary:null,thumbnail:[],viewingDirection:"left-to-right"},eC={id:"https://iiif-parser/empty-canvas",type:"Range",label:null,behavior:[],motivation:null,thumbnail:[],posterCanvas:null,accompanyingCanvas:null,placeholderCanvas:null,summary:null,requiredStatement:null,metadata:[],rights:null,navDate:null,provider:[],items:[],annotations:[],seeAlso:[],homepage:[],logo:[],partOf:[],rendering:[],service:[],start:null,supplementary:null,viewingDirection:"left-to-right"},tC={id:"https://iiif-parser/empty-agent",type:"Agent",label:{},logo:[],seeAlso:[],homepage:[]},rm=["Collection","Manifest","Canvas","AnnotationPage","AnnotationCollection","Annotation","ContentResource","Range","Service","Selector","Agent"];function iC(e){if(typeof e>"u"||e===null)throw new Error("Null or undefined is not a valid entity.");if(Array.isArray(e))throw new Error("Array is not a valid entity");if(typeof e!="object")throw new Error(`${typeof e} is not a valid entity`);if(typeof e.type=="string"){let t=rm.indexOf(e.type);if(t!==-1)return rm[t]}if(e.profile)return"Service";throw new Error("Resource type is not known")}var sm=class{constructor(e,t={}){Qe(this,"traversals"),Qe(this,"options"),this.traversals=A({collection:[],manifest:[],canvas:[],annotationCollection:[],annotationPage:[],annotation:[],contentResource:[],choice:[],range:[],service:[],agent:[]},e),this.options=A({allowUndefinedReturn:!1},t)}static all(e){return new sm({collection:[e],manifest:[e],canvas:[e],annotationCollection:[e],annotationPage:[e],annotation:[e],contentResource:[e],choice:[e],range:[e],service:[e]})}traverseDescriptive(e){return e.thumbnail&&(e.thumbnail=e.thumbnail.map(t=>this.traverseType(t,this.traversals.contentResource))),e.provider&&(e.provider=e.provider.map(t=>this.traverseAgent(t))),e}traverseLinking(e){return e.seeAlso&&(e.seeAlso=e.seeAlso.map(t=>this.traverseType(t,this.traversals.contentResource))),e.service&&(e.service=e.service.map(t=>this.traverseType(t,this.traversals.service))),e.services&&(e.services=e.services.map(t=>this.traverseType(t,this.traversals.service))),e.logo&&(e.logo=e.logo.map(t=>this.traverseType(t,this.traversals.contentResource))),e.homepage&&(e.homepage=e.homepage.map(t=>this.traverseType(t,this.traversals.contentResource))),e.partOf&&(e.partOf=e.partOf.map(t=>typeof t=="string"||!t.type?this.traverseType(t,this.traversals.contentResource):t.type==="Canvas"?this.traverseType(t,this.traversals.canvas):t.type==="AnnotationCollection"?this.traverseType(t,this.traversals.annotationCollection):this.traverseType(t,this.traversals.contentResource))),e.start&&(e.start=e.start?this.traverseType(e.start,this.traversals.canvas):null),e.rendering&&(e.rendering=e.rendering.map(t=>this.traverseType(t,this.traversals.contentResource))),e.supplementary&&(e.supplementary=e.supplementary.map(t=>this.traverseType(t,this.traversals.contentResource))),e}traverseCollectionItems(e){return e.items&&e.items.map(t=>t.type==="Collection"?this.traverseCollection(t):this.traverseManifest(t)),e}traverseCollection(e){return this.traverseType(this.traverseDescriptive(this.traverseInlineAnnotationPages(this.traverseLinking(this.traversePosterCanvas(this.traverseCollectionItems(e))))),this.traversals.collection)}traverseManifestItems(e){return e.items&&(e.items=e.items.map(t=>this.traverseCanvas(t))),e}traverseManifestStructures(e){return e.structures&&(e.structures=e.structures.map(t=>this.traverseRange(t))),e}traverseManifest(e){return this.traverseType(this.traverseInlineAnnotationPages(this.traverseManifestStructures(this.traversePosterCanvas(this.traverseDescriptive(this.traverseLinking(this.traverseManifestItems(e)))))),this.traversals.manifest)}traverseCanvasItems(e){return e.items=(e.items||[]).map(t=>this.traverseAnnotationPage(t)),e}traverseInlineAnnotationPages(e){return typeof e=="string"||!e||e.annotations&&(e.annotations=e.annotations.map(t=>this.traverseAnnotationPage(t))),e}traverseCanvas(e){return this.traverseType(this.traverseInlineAnnotationPages(this.traversePosterCanvas(this.traverseDescriptive(this.traverseLinking(this.traverseCanvasItems(e))))),this.traversals.canvas)}traverseAnnotationPageItems(e){return e.items&&(e.items=e.items.map(t=>this.traverseAnnotation(t))),e}traverseAnnotationPage(e){return this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseAnnotationPageItems(e))),this.traversals.annotationPage)}traverseAnnotationBody(e){return Array.isArray(e.body)?e.body=e.body.map(t=>this.traverseContentResource(t)):e.body&&(e.body=this.traverseContentResource(e.body)),e}traversePosterCanvas(e){return e.posterCanvas&&(e.posterCanvas=this.traverseType(e.posterCanvas,this.traversals.canvas)),e.placeholderCanvas&&(e.placeholderCanvas=this.traverseType(e.placeholderCanvas,this.traversals.canvas)),e.accompanyingCanvas&&(e.accompanyingCanvas=this.traverseType(e.accompanyingCanvas,this.traversals.canvas)),e}traverseAnnotation(e){return this.traverseType(this.traverseLinking(this.traverseAnnotationBody(e)),this.traversals.annotation)}traverseContentResourceLinking(e){return typeof e=="string"||!e||e&&e.service&&(e.service=(e.service||[]).map(t=>this.traverseType(t,this.traversals.service))),e}traverseContentResource(e){return e.type==="Choice"&&(e.items=e.items.map(t=>this.traverseContentResource(t))),this.traverseType(this.traverseInlineAnnotationPages(this.traverseContentResourceLinking(e)),this.traversals.contentResource)}traverseRangeRanges(e){return e.items&&(e.items=e.items.map(t=>typeof t=="string"?this.traverseCanvas({id:t,type:"Canvas"}):t.type==="Manifest"?this.traverseManifest(t):this.traverseRange(t))),e}traverseRange(e){return this.traverseType(this.traversePosterCanvas(this.traverseDescriptive(this.traverseLinking(this.traverseRangeRanges(e)))),this.traversals.range)}traverseAgent(e){return this.traverseType(this.traverseDescriptive(this.traverseLinking(e)),this.traversals.agent)}traverseType(e,t){return t.reduce((i,n)=>{let s=n(i);return typeof s>"u"&&!this.options.allowUndefinedReturn?i:s},e)}traverseService(e){return this.traverseType(e,this.traversals.service)}traverseUnknown(e){let t=iC(e);switch(t){case"Collection":return this.traverseCollection(e);case"Manifest":return this.traverseManifest(e);case"Canvas":return this.traverseCanvas(e);case"AnnotationPage":return this.traverseAnnotationPage(e);case"Annotation":return this.traverseAnnotation(e);case"ContentResource":return this.traverseContentResource(e);case"Range":return this.traverseRange(e);case"Service":return this.traverseService(e);case"Agent":return this.traverseAgent(e);default:throw new Error(`Unknown or unsupported resource type of ${t}`)}}},om=["sc:Collection","sc:Manifest","sc:Canvas","oa:AnnotationList","oa:Annotation","sc:Range","sc:Layer","sc:Sequence","oa:Choice","Service","ContentResource"];function nC(e){if(typeof e>"u"||e===null)throw new Error("Null or undefined is not a valid entity.");if(Array.isArray(e))throw new Error("Array is not a valid entity");if(typeof e!="object")throw new Error(`${typeof e} is not a valid entity`);if(typeof e["@type"]=="string"){let t=om.indexOf(e["@type"]);if(t!==-1)return om[t]}if(e.profile)return"Service";if(e.format||e["@type"])return"ContentResource";throw new Error("Resource type is not known")}var am=class{constructor(e,t={}){Qe(this,"traversals"),Qe(this,"options"),this.traversals=A({collection:[],manifest:[],canvas:[],annotationList:[],sequence:[],annotation:[],contentResource:[],choice:[],range:[],service:[],layer:[]},e),this.options=A({convertPropsToArray:!0,mergeMemberProperties:!0,allowUndefinedReturn:!1},t)}static all(e){return new am({collection:[e],manifest:[e],canvas:[e],annotationList:[e],sequence:[e],annotation:[e],contentResource:[e],choice:[e],range:[e],service:[e],layer:[e]})}traverseCollection(e){return this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseCollectionItems(e))),this.traversals.collection)}traverseCollectionItems(e){if(this.options.mergeMemberProperties){let t=[...(e.manifests||[]).map(i=>typeof i=="string"?{"@id":i,"@type":"sc:Manifest"}:i),...(e.collections||[]).map(i=>typeof i=="string"?{"@id":i,"@type":"sc:Collection"}:i),...e.members||[]];delete e.collections,delete e.manifests,e.members=t}return e.manifests&&(e.manifests=e.manifests.map(t=>this.traverseManifest(typeof t=="string"?{"@id":t,"@type":"sc:Manifest"}:t))),e.collections&&(e.collections=e.collections.map(t=>this.traverseCollection(typeof t=="string"?{"@id":t,"@type":"sc:Collection"}:t))),e.members&&(e.members=e.members.map(t=>typeof t=="string"?t:this.traverseUnknown(t))),e}traverseManifest(e){return this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseManifestItems(e))),this.traversals.manifest)}traverseManifestItems(e){return e.sequences&&(e.sequences=e.sequences.map(t=>this.traverseSequence(t))),e.structures&&(e.structures=e.structures.map(t=>this.traverseRange(t))),e}traverseSequence(e){return this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseSequenceItems(e))),this.traversals.sequence)}traverseSequenceItems(e){return e.canvases&&(e.canvases=e.canvases.map(t=>this.traverseCanvas(t))),e}traverseCanvas(e){return this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseCanvasItems(e))),this.traversals.canvas)}traverseCanvasItems(e){return e.images&&(e.images=e.images.map(t=>this.traverseAnnotation(t))),e.otherContent&&(e.otherContent=e.otherContent.map(t=>this.traverseAnnotationList(t))),e}traverseRange(e){return this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseRangeItems(e))),this.traversals.range)}traverseRangeItems(e){if(this.options.mergeMemberProperties){let t=[...(e.ranges||[]).map(i=>typeof i=="string"?{"@id":i,"@type":"sc:Range"}:i),...(e.canvases||[]).map(i=>typeof i=="string"?{"@id":i,"@type":"sc:Canvas"}:i),...e.members||[]];delete e.ranges,delete e.canvases,e.members=t.length?t.map(i=>this.traverseUnknown(i)):void 0}return e}traverseAnnotationList(e){return this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseAnnotationListItems(e))),this.traversals.annotationList)}traverseAnnotationListItems(e){return e.resources&&(e.resources=e.resources.map(t=>this.traverseAnnotation(t))),e}traverseAnnotation(e){return this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseAnnotationItems(e))),this.traversals.annotation)}traverseAnnotationItems(e){return e.resource&&(e.resource=this.traverseContentResource(e.resource)),e.on,e}traverseLayer(e){return this.traverseType(this.traverseLinking(this.traverseLayerItems(e)),this.traversals.layer)}traverseLayerItems(e){return e.otherContent&&(e.otherContent=e.otherContent.map(t=>this.traverseAnnotationList(t))),e}traverseChoice(e){return this.traverseType(this.traverseChoiceItems(e),this.traversals.choice)}traverseChoiceItems(e){return e.default&&e.default!=="rdf:nil"&&(e.default=this.traverseContentResource(e.default)),e.item&&e.item!=="rdf:nil"&&(e.item=e.item.map(t=>this.traverseContentResource(t))),e}traverseService(e){return this.traverseType(this.traverseLinking(e),this.traversals.service)}traverseContentResource(e){return e["@type"]==="oa:Choice"?this.traverseChoice(e):this.traverseType(this.traverseDescriptive(this.traverseLinking(e)),this.traversals.contentResource)}traverseUnknown(e){if(!e["@type"]||typeof e=="string")return e;switch(nC(e)){case"sc:Collection":return this.traverseCollection(e);case"sc:Manifest":return this.traverseManifest(e);case"sc:Canvas":return this.traverseCanvas(e);case"sc:Sequence":return this.traverseSequence(e);case"sc:Range":return this.traverseRange(e);case"oa:Annotation":return this.traverseAnnotation(e);case"oa:AnnotationList":return this.traverseAnnotationList(e);case"sc:Layer":return this.traverseLayer(e);case"Service":return this.traverseService(e);case"oa:Choice":return this.traverseChoice(e);case"ContentResource":return this.traverseContentResource(e)}return e.profile?this.traverseService(e):e}traverseImageResource(e){let t=Array.isArray(e),i=Array.isArray(e)?e:[e],n=[];for(let s of i)typeof s=="string"?n.push(this.traverseContentResource({"@id":s,"@type":"dctypes:Image"})):n.push(this.traverseContentResource(s));return!t&&!this.options.convertPropsToArray?n[0]:n}traverseDescriptive(e){return e.thumbnail&&(e.thumbnail=this.traverseImageResource(e.thumbnail)),e.logo&&(e.logo=this.traverseImageResource(e.logo)),e}traverseOneOrMoreServices(e){let t=Array.isArray(e),i=Array.isArray(e)?e:[e],n=[];for(let s of i)n.push(this.traverseService(s));return!t&&!this.options.convertPropsToArray?n[0]:n}traverseLinking(e){return e.related&&(e.related=this.traverseOneOrManyType(e.related,this.traversals.contentResource)),e.rendering&&(e.rendering=this.traverseOneOrManyType(e.rendering,this.traversals.contentResource)),e.service&&(e.service=this.traverseOneOrMoreServices(e.service)),e.seeAlso&&(e.seeAlso=this.traverseOneOrManyType(e.seeAlso,this.traversals.contentResource)),e.within&&(typeof e.within=="string"||(e.within=this.traverseOneOrManyType(e.within,this.traversals.contentResource))),e.startCanvas&&(typeof e.startCanvas=="string"?e.startCanvas=this.traverseType({"@id":e.startCanvas,"@type":"sc:Canvas"},this.traversals.canvas):e.startCanvas&&this.traverseType(e.startCanvas,this.traversals.canvas)),e.contentLayer&&(typeof e.contentLayer=="string"?e.contentLayer=this.traverseLayer({"@id":e.contentLayer,"@type":"sc:Layer"}):e.contentLayer=this.traverseLayer(e.contentLayer)),e}traverseOneOrManyType(e,t){if(!Array.isArray(e))if(this.options.convertPropsToArray)e=[e];else return this.traverseType(e,t);return e.map(i=>this.traverseType(i,t))}traverseType(e,t){return t.reduce((i,n)=>{let s=n(i);return typeof s>"u"&&!this.options.allowUndefinedReturn?i:s},e)}},rC="http://library.stanford.edu/iiif/image-api/compliance.html#level0",lm="http://library.stanford.edu/iiif/image-api/compliance.html#level1",um="http://library.stanford.edu/iiif/image-api/compliance.html#level2",sC="http://library.stanford.edu/iiif/image-api/conformance.html#level0",cm="http://library.stanford.edu/iiif/image-api/conformance.html#level1",hm="http://library.stanford.edu/iiif/image-api/conformance.html#level2",oC="http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level0",dm="http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level1",pm="http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level2",aC="http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level0",fm="http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level1",gm="http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level2",lC="http://iiif.io/api/image/1/level0.json",uC="http://iiif.io/api/image/1/profiles/level0.json",mm="http://iiif.io/api/image/1/level1.json",vm="http://iiif.io/api/image/1/profiles/level1.json",ym="http://iiif.io/api/image/1/level2.json",bm="http://iiif.io/api/image/1/profiles/level2.json",cC="http://iiif.io/api/image/2/level0.json",hC="http://iiif.io/api/image/2/profiles/level0.json",wm="http://iiif.io/api/image/2/level1.json",xm="http://iiif.io/api/image/2/profiles/level1.json",_m="http://iiif.io/api/image/2/level2.json",Sm="http://iiif.io/api/image/2/profiles/level2.json",dC="level0",Em="level1",Cm="level2",pC="http://iiif.io/api/image/2/level0",km="http://iiif.io/api/image/2/level1",Am="http://iiif.io/api/image/2/level2",fC=[km,Am,lm,um,cm,hm,dm,pm,fm,gm,mm,vm,ym,bm,wm,xm,_m,Sm,Em,Cm],gC=[pC,km,Am,rC,lm,um,sC,cm,hm,oC,dm,pm,aC,fm,gm,lC,uC,mm,vm,ym,bm,cC,hC,wm,xm,_m,Sm,dC,Em,Cm],qc={attributionLabel:"Attribution",lang:"none",providerId:"http://example.org/provider",providerName:"Unknown"};function Nr(e,t="none"){if(!e)return{};let i=Array.isArray(e)?e:[e],n={};for(let s of i){if(typeof s=="string"){n[t]=n[t]?n[t]:[],n[t].push(s||"");continue}if(!s["@language"]){n[t]=n[t]?n[t]:[],n[t].push(s["@value"]||"");continue}let a=s["@language"];n[a]=n[a]?n[a]:[],n[a].push(s["@value"]||"")}return n}function Tm(e){if(Array.isArray(e))return Tm(e.find(t=>typeof t=="string"));if(gC.indexOf(e)!==-1)return"level2";if(fC.indexOf(e)!==-1)return"level1";if(typeof e=="string")return e}function mC(e){let t=Array.isArray(e)?e:[e];for(let i of t)switch(i){case"http://iiif.io/api/image/2/context.json":case"http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level2":return"ImageService2";case"http://iiif.io/api/image/1/context.json":case"http://library.stanford.edu/iiif/image-api/1.1/context.json":return"ImageService1";case"http://iiif.io/api/annex/openannotation/context.json":return"ImageApiSelector"}}function vC(e){switch(e){case"http://iiif.io/api/image/2/level0.json":case"http://iiif.io/api/image/2/level1.json":case"http://iiif.io/api/image/2/level2.json":return"ImageService2";case"http://iiif.io/api/auth/1/kiosk":case"http://iiif.io/api/auth/1/login":case"http://iiif.io/api/auth/1/clickthrough":case"http://iiif.io/api/auth/1/external":case"http://iiif.io/api/auth/0/kiosk":case"http://iiif.io/api/auth/0/login":case"http://iiif.io/api/auth/0/clickthrough":case"http://iiif.io/api/auth/0/external":return"AuthCookieService1";case"http://iiif.io/api/auth/1/token":case"http://iiif.io/api/auth/0/token":return"AuthTokenService1";case"http://iiif.io/api/auth/1/logout":case"http://iiif.io/api/auth/0/logout":return"AuthLogoutService1";case"http://iiif.io/api/search/1/search":case"http://iiif.io/api/search/0/search":return"SearchService1";case"http://iiif.io/api/search/1/autocomplete":case"http://iiif.io/api/search/0/autocomplete":return"AutoCompleteService1"}}function yC(e){return Array.isArray(e)?e:[e]}function bC(e){for(let t of["sc","oa","dcterms","dctypes","iiif"])if(e.startsWith(`${t}:`))return e.slice(t.length+1);return e}var wC=["Collection","Manifest","Annotation","AnnotationPage","Range","Service"];function Qc(e){let t=e["@id"]||e.id,i=e["@type"]||e.type,n=e.profile||void 0,s=e["@context"]||void 0;if(n){let a=vC(n);if(a)return a}if(s){let a=mC(s);if(a)return a}if(i){if(Array.isArray(i)){if(i.indexOf("oa:CssStylesheet")!==-1)return"CssStylesheet";if(i.indexOf("cnt:ContentAsText")!==-1)return"TextualBody";i=i[0]}for(let a of["sc","oa","dcterms","dctypes","iiif"])if(i.startsWith(`${a}:`)){i=i.slice(a.length+1);break}switch(i){case"Layer":return"AnnotationCollection";case"AnnotationList":return"AnnotationPage";case"cnt:ContentAsText":return"TextualBody"}}if(i&&wC.indexOf(i)!==-1)return i;if(e.format){if(e.format.startsWith("image/"))return"Image";if(e.format.startsWith("text/")||e.format==="application/pdf")return"Text";if(e.format.startsWith("application/"))return"Dataset"}return t&&(t.endsWith(".jpg")||t.endsWith(".png")||t.endsWith(".jpeg"))?"Image":i||"unknown"}var xC=/http(s)?:\/\/(creativecommons.org|rightsstatements.org)[^"'\\<\n]+/gm;function _C(e){let t=e.match(xC);return t?t[0]:e}function SC(e,t="Rights/License",i="none"){let n=null,s=[],a=Array.isArray(e)?e:[e];for(let l of a){let c=l?_C(l):void 0;if(c&&(c.indexOf("creativecommons.org")!==-1||c.indexOf("rightsstatements.org")!==-1)){c.startsWith("https://")?n=`http://${c.slice(8)}`:n=c;continue}c&&s.push({label:{[i]:[t]},value:{[i]:[c]}})}return[n,s]}var EC=["http://iiif.io/api/presentation/2/context.json","http://iiif.io/api/image/2/context.json","http://iiif.io/api/image/1/context.json","http://library.stanford.edu/iiif/image-api/1.1/context.json","http://iiif.io/api/search/1/context.json","http://iiif.io/api/search/0/context.json","http://iiif.io/api/auth/1/context.json","http://iiif.io/api/auth/0/context.json","http://iiif.io/api/annex/openannotation/context.json"];function CC(e){if(e){let t=Array.isArray(e)?e:[e],i=[];for(let n of t)n==="http://iiif.io/api/presentation/2/context.json"&&i.push("http://iiif.io/api/presentation/3/context.json"),EC.indexOf(n)===-1&&i.push(n);if(t.length)return i.length===1?i[0]:i}}function kC(e){return e?e.map(t=>({label:Nr(t.label),value:Nr(t.value)})):[]}function Un(e){for(let t in e)(typeof e[t]>"u"||e[t]===null)&&delete e[t];return e}var Pm=0;function Rm(e,t){let i=encodeURI(e.id||e["@id"]||"").trim();return i&&t?`${i}/${t}`:i||(Pm++,`http://example.org/${e["@type"]}${t?`/${t}`:""}/${Pm}`)}function Wn(e){let t=[...e.behavior||[]];return e.viewingHint&&t.push(e.viewingHint),{"@context":e["@context"]?CC(e["@context"]):void 0,id:(e["@id"]||Rm(e)).trim(),type:Qc(e),behavior:t.length?t:void 0,height:e.height?e.height:void 0,width:e.width?e.width:void 0,motivation:e.motivation?bC(e.motivation):void 0,viewingDirection:e.viewingDirection,profile:e.profile,format:e.format?e.format:void 0,duration:void 0,timeMode:void 0}}function Cn(e){let[t,i]=SC(e.license),n=[...e.metadata?kC(e.metadata):[],...i];return{rights:t,metadata:n.length?n:void 0,label:e.label?Nr(e.label):void 0,requiredStatement:e.attribution?{label:Nr(qc.attributionLabel),value:Nr(e.attribution)}:void 0,navDate:e.navDate,summary:e.description?Nr(e.description):void 0,thumbnail:e.thumbnail}}function AC(e){if(!e.within)return;let t=Array.isArray(e.within)?e.within:[e.within],i=[];for(let n of t)if(typeof n=="string"){if(n)switch(e["@type"]){case"sc:Manifest":i.push({id:n,type:"Collection"});break}}else n["@id"]&&i.push({id:n["@id"],type:Qc(n)});return i.length?i:void 0}function lr(e){let t=e.related?Array.isArray(e.related)?e.related:[e.related]:[],i=e.contentLayer;return{provider:e.logo||t.length?[{id:qc.providerId,type:"Agent",homepage:t.length?[t[0]]:void 0,logo:e.logo?Array.isArray(e.logo)?e.logo:[e.logo]:void 0,label:Nr(qc.providerName)}]:void 0,partOf:AC(e),rendering:e.rendering,seeAlso:e.seeAlso,start:e.startCanvas,service:e.service?yC(e.service):void 0,supplementary:i?[i]:void 0}}function TC(e){return Un(D(A(A(A({},Wn(e)),Cn(e)),lr(e)),{items:e.members}))}function PC(e){let t=[],i=[];for(let s of e.sequences||[])s.canvases.length&&t.push(...s.canvases),s.behavior&&i.push(...s.behavior);let n=Wn(e);return i.length&&(n.behavior?n.behavior.push(...i):n.behavior=i),Un(D(A(A(A({},n),Cn(e)),lr(e)),{items:t,structures:e.structures}))}function RC(e){return Un(D(A(A(A({},Wn(e)),Cn(e)),lr(e)),{items:e.images&&e.images.length?[{id:Rm(e,"annotation-page"),type:"AnnotationPage",items:e.images}]:void 0}))}function OC(e){return Un(D(A(A(A({},Wn(e)),Cn(e)),lr(e)),{items:e.resources}))}function IC(e){return!e.canvases||e.canvases.length===0?{canvases:[],behavior:[]}:{canvases:e.canvases,behavior:e.viewingHint?[e.viewingHint]:[]}}function LC(e){return Un(D(A(A(A({},Wn(e)),Cn(e)),lr(e)),{target:typeof e.on=="string"?encodeURI(e.on).trim():e.on,body:e.resource}))}function $C(e){let t=e;return Un(A(A(A({},Wn(t)),Cn(t)),lr(t)))}function NC(e){let t=[];return e.default&&e.default!=="rdf:nil"&&t.push(e.default),e.item&&e.item!=="rdf:nil"&&t.push(...e.item),D(A(A({},Wn(e)),Cn(e)),{items:t})}function MC(e){return Un(D(A(A(A({},Wn(e)),Cn(e)),lr(e)),{items:e.members}))}function FC(e){let t=e,{"@id":i,"@type":n,"@context":s,profile:a}=t,l=le(t,["@id","@type","@context","profile"]);return i&&(l.id=i),l.type=Qc(e),l.type==="unknown"&&(l.type="Service"),a&&(l.profile=Tm(a)),Un(A(A({},l),Cn(l)))}function zC(e){return Un(A(A(A({},Wn(e)),Cn(e)),lr(e)))}var BC=new am({collection:[TC],manifest:[PC],canvas:[RC],annotationList:[OC],sequence:[IC],annotation:[LC],contentResource:[$C],choice:[NC],range:[MC],service:[FC],layer:[zC]});function jC(e){return e&&e["@context"]&&(e["@context"]==="http://iiif.io/api/presentation/2/context.json"||e["@context"].indexOf("http://iiif.io/api/presentation/2/context.json")!==-1||e["@context"]==="http://www.shared-canvas.org/ns/context.json")||e["@context"]==="http://iiif.io/api/image/2/context.json"?BC.traverseUnknown(e):e}function DC(){return{Collection:{},Manifest:{},Canvas:{},AnnotationPage:{},AnnotationCollection:{},Annotation:{},ContentResource:{},Range:{},Service:{},Selector:{},Agent:{}}}function Om(e,t){if(typeof e=="string")return{id:e,type:t};if(!e.id)throw new Error(`Invalid resource does not have an ID (${t})`);return e}function UC(e){return(t,i)=>{let n=e[t]?e[t]:{};return s=>{let a=Om(s,i||t);return a&&a.id&&t?(n[a.id]=n[a.id]?Object.assign({},n[a.id],a):Object.assign({},a),{id:a.id,type:t==="ContentResource"?t:a.type}):a}}}function WC(e){return(t,i)=>n=>{let{id:s,type:a}=Om(n,i||t);if(typeof s>"u")throw new Error("Found invalid entity without an ID.");return t==="ContentResource"?e[s]=t:e[s]=a,n}}function HC(e){let t=JSON.stringify(e),i=5381,n=t.length;for(;n;)i=i*33^t.charCodeAt(--n);let s=(i>>>0).toString(16);return s.length%2?"0"+s:s}function Vc(e){return t=>typeof t=="string"?{id:t,type:e}:t.id?t.type?t:A({type:e},t):A({id:HC(t),type:e},t)}function $s(e){return t=>A(A({},e),t)}function Ns(e){return Array.isArray(e)?e:[e]}function qC(e){return e.body&&(e.body=Ns(e.body)),e.seeAlso&&(e.seeAlso=Ns(e.seeAlso)),e.body&&(e.body=Ns(e.body)),e.audience&&(e.audience=Ns(e.audience)),e.accessibility&&(e.accessibility=Ns(e.accessibility)),e.motivation&&(e.motivation=Ns(e.motivation)),e}function Im(e){let t=jC(e),i=DC(),n={},s=UC(i),a=WC(n),l=new sm({collection:[$s(ZE),a("Collection"),s("Collection")],manifest:[$s(JE),a("Manifest"),s("Manifest")],canvas:[$s(XE),a("Canvas"),s("Canvas")],annotationPage:[Vc("AnnotationPage"),$s(KE),a("AnnotationPage"),s("AnnotationPage")],annotation:[Vc("Annotation"),qC,a("Annotation"),s("Annotation")],contentResource:[Vc("ContentResource"),a("ContentResource"),s("ContentResource")],range:[$s(eC),a("Range","Canvas"),s("Range","Canvas")],agent:[$s(tC),a("Agent"),s("Agent")]}).traverseUnknown(t);return{entities:i,resource:l,mapping:n}}var Mr="__$UNSET$__",Lm="__$UNWRAP$__";function QC(e,t){let i=e.requests[t],n=e.mapping[t];if(!(!n||i&&i.resourceUri&&!e.entities[n][i.resourceUri]))return e.entities[n][i?i.resourceUri:t]}function VC(e){let t={};for(let[i,n]of e){if(i===Lm&&n!==Mr)return n;n!==Mr&&typeof n<"u"&&n!==null&&(t[i]=n)}return t}function $m(e,t,i){if(!t.type||!t.id)throw new Error("Unknown entity");if(!i[t.type])throw new Error(`Serializer not found for ${t.type}`);function n(s){let a=i[s.type];if(!a)return Mr;let l=QC(e,s.id)||(s.id&&s.type?s:null);if(!l)return Mr;let c=a(l,e,{isTopLevel:t.id===s.id}),h=c.next();for(;!h.done;){let m=h.value,f=Mr;if(m)if(Array.isArray(m)){let y=[];for(let S of m)y.push(n(S));f=y}else f=n(m);h=c.next(f)}return h.value===Mr?Mr:VC(h.value)}return n(t)}function Ms(e){if(!e)return;let t=Object.keys(e);if(t.length!==0){if(t.length===1){let i=t[0];if(!i)return"";let n=(e[i]||[]).join("");return i==="@none"||i==="none"||i==="en"?n:{"@language":i,"@value":n}}return t.map(i=>({"@language":i,"@value":(e[i]||[]).join("")}))}}function Nm(e){return Array.isArray(e)?e.map(t=>Nm(t)):typeof e=="string"?e:e.type&&e.type==="Canvas"?e.id:e}function ur(e,t=!1){if(e)return e.length>1&&!t?e:e[0]||void 0}function GC(e){if(e){if(typeof e=="string")return{"@id":e};if("@id"in e){let t=A({},e);return delete t["@type"],t}return{"@context":"http://iiif.io/api/image/2/context.json","@id":e.id,profile:`http://iiif.io/api/image/2/profiles/${e.profile}.json`}}}function Fr(e,t){return[["@id",e.id],["@type",t],["format",e.format],["height",e.height],["width",e.width],["viewingDirection",e.viewingDirection!=="left-to-right"?e.viewingDirection:void 0]]}function*zr(e){let t=e.provider?yield e.provider[0]:void 0;return[["label",Ms(e.label)],["metadata",e.metadata&&e.metadata.length?e.metadata.map(i=>({label:Ms(i.label)||"",value:Ms(i.value)||""})):void 0],["description",Ms(e.summary)],["thumbnail",ur(yield e.thumbnail)],["navDate",e.navDate],["logo",t?ur(t.logo):void 0],["homepage",t?t.homepage:void 0],["attribution",e.requiredStatement?Ms(e.requiredStatement.value):void 0]]}function*Ro(e){return[["seeAlso",ur(yield e.seeAlso)],["service",ur((e.service||[]).map(GC))],["rendering",ur(yield e.rendering)],["startCanvas",e.start?e.start.id:void 0]]}var Mm={Manifest:function*(e){return[...Fr(e,"sc:Manifest"),...yield*zr(e),...yield*Ro(e),["sequences",[{"@id":`${e.id}/sequence0`,"@type":"sc:Sequence",canvases:yield e.items}]],["structures",yield e.structures]]},Canvas:function*(e){let t=(yield e.items)[0];return[...Fr(e,"sc:Canvas"),...yield*zr(e),...yield*Ro(e),["images",t?[t.resources]:void 0],["annotations",e.annotations&&e.annotations.length?ur(yield e.annotations):void 0]]},AnnotationPage:function*(e){return[...Fr(e,"sc:AnnotationList"),...yield*zr(e),["resources",e.items&&e.items.length?ur(yield e.items):void 0]]},Annotation:function*(e){return[["@id",e.id],["@type","oa:Annotation"],["motivation","sc:painting"],["on",Nm(e.target)],["resource",ur(yield e.body,!0)]]},ContentResource:function*(e){switch(e.type){case"Image":return[...Fr(e,"dctypes:Image"),...yield*zr(e),...yield*Ro(e)];case"Text":case"Dataset":default:return[...Fr(e,void 0),...yield*zr(e)]}},AnnotationCollection:function*(e){return[["@id",e.id],["@type","sc:Layer"],["label",Ms(e.label)]]},Collection:function*(e){return[...Fr(e,"sc:Collection"),...yield*zr(e),...yield*Ro(e),["members",yield*e.items]]},Range:function*(e){let t=[],i=[];if(e.items)for(let n of e.items){let s=yield n;t.push({"@id":n.id,"@type":n.type,label:s?s.label:void 0,within:e.id}),n.type==="Canvas"&&i.push(n.id)}return[...Fr(e,"sc:Range"),...yield*zr(e),...yield*Ro(e),["canvases",i.length===t.length?i:void 0],["members",i.length!==t.length?t:void 0]]}};function Br(e){return[["id",e.id],["type",e.type],["format",e.format],["profile",e.profile],["height",e.height],["width",e.width],["duration",e.duration||void 0],["viewingDirection",e.viewingDirection!=="left-to-right"?e.viewingDirection:void 0],["behavior",e.behavior&&e.behavior.length?e.behavior:void 0],["timeMode",e.timeMode],["motivation",e.motivation]]}function pi(e){if(!(!e||e.length===0))return e}function Fm(e){if(e&&e.type&&e.type==="ImageService2"){let t=e,{id:i,type:n,profile:s}=t,a=le(t,["id","type","profile"]);return A({"@id":i,"@type":n,profile:s.startsWith("http")?s:`http://iiif.io/api/image/2/${s}.json`},a)}return e}function zm(e){if(!(!e||e.length===0))return e.map(Fm)}function*jr(e){return[["label",e.label],["metadata",pi(e.metadata)],["summary",e.summary],["requiredStatement",e.requiredStatement],["rights",e.rights],["navDate",e.navDate],["language",e.language],["thumbnail",pi(yield e.thumbnail)],["placeholderCanvas",yield e.placeholderCanvas],["accompanyingCanvas",yield e.accompanyingCanvas],["provider",pi(yield e.provider)]]}function*Dr(e){return[["seeAlso",pi(yield e.seeAlso)],["service",zm(e.service)],["services",zm(e.services)],["rendering",pi(yield e.rendering)],["supplementary",pi(yield e.supplementary)],["homepage",pi(yield e.homepage)],["logo",pi(yield e.logo)],["partOf",pi(yield e.partOf)],["start",e.start]]}var Bm={Manifest:function*(e,t,{isTopLevel:i}){return i?[["@context","http://iiif.io/api/presentation/3/context.json"],...Br(e),...yield*jr(e),...yield*Dr(e),["items",yield e.items],["structures",pi(yield e.structures)],["annotations",pi(yield e.annotations)]]:[...Br(e),...yield*jr(e)]},Canvas:function*(e){return[...Br(e),...yield*jr(e),...yield*Dr(e),["items",yield e.items],["annotations",pi(yield e.annotations)]]},Agent:function*(e){return[["id",e.id],["type","Agent"],["label",e.label],...yield*Dr(e)]},AnnotationPage:function*(e){return[...Object.entries(e).map(([t,i])=>[t,Array.isArray(i)?pi(i):i]).filter(([t,i])=>t!=="items"),...yield*Dr(e),["items",yield e.items]]},Service:function*(e){return[[Lm,Fm(e)]]},Annotation:function*(e){return[...Object.entries(e).map(([t,i])=>[t,Array.isArray(i)?pi(i):i]).filter(([t])=>t!=="body"),["body",yield e.body]]},ContentResource:function*(e){return[...Br(e),...yield*jr(e),...yield*Dr(e),["annotations",pi(yield e.annotations)]]},AnnotationCollection:function*(e){return[["id",e.id],["type","AnnotationCollection"],["label",e.label]]},Collection:function*(e,t,{isTopLevel:i}){return i?[["@context","http://iiif.io/api/presentation/3/context.json"],...Br(e),...yield*jr(e),...yield*Dr(e),["items",pi(yield e.items)]]:[...Br(e),...yield*jr(e)]},Range:function*(e){let t=[];for(let i of e.items)i.type==="Range"?t.push(yield i):t.push(i);return[...Br(e),...yield*jr(e),...yield*Dr(e),["items",t],["annotations",pi(yield e.annotations)]]}},fi=Be(oc(),1);function YC(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function jm(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),i.push.apply(i,n)}return i}function Dm(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?jm(Object(i),!0).forEach(function(n){YC(e,n,i[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):jm(Object(i)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))})}return e}function Si(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var Um=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),Gc=function(){return Math.random().toString(36).substring(7).split("").join(".")},dl={INIT:"@@redux/INIT"+Gc(),REPLACE:"@@redux/REPLACE"+Gc(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+Gc()}};function KC(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function Yc(e,t,i){var n;if(typeof t=="function"&&typeof i=="function"||typeof i=="function"&&typeof arguments[3]=="function")throw new Error(Si(0));if(typeof t=="function"&&typeof i>"u"&&(i=t,t=void 0),typeof i<"u"){if(typeof i!="function")throw new Error(Si(1));return i(Yc)(e,t)}if(typeof e!="function")throw new Error(Si(2));var s=e,a=t,l=[],c=l,h=!1;function m(){c===l&&(c=l.slice())}function f(){if(h)throw new Error(Si(3));return a}function y(P){if(typeof P!="function")throw new Error(Si(4));if(h)throw new Error(Si(5));var I=!0;return m(),c.push(P),function(){if(I){if(h)throw new Error(Si(6));I=!1,m();var L=c.indexOf(P);c.splice(L,1),l=null}}}function S(P){if(!KC(P))throw new Error(Si(7));if(typeof P.type>"u")throw new Error(Si(8));if(h)throw new Error(Si(9));try{h=!0,a=s(a,P)}finally{h=!1}for(var I=l=c,L=0;L<I.length;L++){var E=I[L];E()}return P}function C(P){if(typeof P!="function")throw new Error(Si(10));s=P,S({type:dl.REPLACE})}function _(){var P,I=y;return P={subscribe:function(L){if(typeof L!="object"||L===null)throw new Error(Si(11));function E(){L.next&&L.next(f())}E();var N=I(E);return{unsubscribe:N}}},P[Um]=function(){return this},P}return S({type:dl.INIT}),n={dispatch:S,subscribe:y,getState:f,replaceReducer:C},n[Um]=_,n}function XC(e){Object.keys(e).forEach(function(t){var i=e[t],n=i(void 0,{type:dl.INIT});if(typeof n>"u")throw new Error(Si(12));if(typeof i(void 0,{type:dl.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Si(13))})}function pl(e){for(var t=Object.keys(e),i={},n=0;n<t.length;n++){var s=t[n];typeof e[s]=="function"&&(i[s]=e[s])}var a=Object.keys(i),l;try{XC(i)}catch(c){l=c}return function(c,h){if(c===void 0&&(c={}),l)throw l;for(var m=!1,f={},y=0;y<a.length;y++){var S=a[y],C=i[S],_=c[S],P=C(_,h);if(typeof P>"u")throw h&&h.type,new Error(Si(14));f[S]=P,m=m||P!==_}return m=m||a.length!==Object.keys(c).length,m?f:c}}function Ur(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return t.length===0?function(n){return n}:t.length===1?t[0]:t.reduce(function(n,s){return function(){return n(s.apply(void 0,arguments))}})}function fl(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return function(n){return function(){var s=n.apply(void 0,arguments),a=function(){throw new Error(Si(15))},l={getState:s.getState,dispatch:function(){return a.apply(void 0,arguments)}},c=t.map(function(h){return h(l)});return a=Ur.apply(void 0,c)(s.dispatch),Dm(Dm({},s),{},{dispatch:a})}}}var Wm="@iiif/IMPORT_ENTITIES",Hm="@iiif/MODIFY_ENTITY_FIELD",qm="@iiif/REORDER_ENTITY_FIELD",Qm="@iiif/ADD_REFERENCE",Vm="@iiif/REMOVE_REFERENCE",Gm=(0,fi.createAction)(Wm)(),ZC=(0,fi.createAction)(Hm)(),JC=(0,fi.createAction)(qm)(),ek=(0,fi.createAction)(Qm)(),tk=(0,fi.createAction)(Vm)(),ik={importEntities:Gm,modifyEntityField:ZC,reorderEntityField:JC,addReference:ek,removeReference:tk},Ym="@iiif/ADD_MAPPING",Km="@iiif/ADD_MAPPINGS",nk=(0,fi.createAction)(Ym)(),rk=(0,fi.createAction)(Km)(),Xm="@iiif/SET_META_VALUE",Zm="@iiif/SET_META_VALUE_DYNAMIC",Jm="@iiif/UNSET_META_VALUE",sk=(0,fi.createAction)(Xm)(),ok=(0,fi.createAction)(Zm)(),ak=(0,fi.createAction)(Jm)(),ev={setMetaValue:sk,setMetaValueDynamic:ok,unsetMetaValue:ak},Kc="RESOURCE_ERROR",tv="RESOURCE_LOADING",Xc="RESOURCE_READY",iv="@iiif/REQUEST_RESOURCE",nv="@iiif/REQUEST_ERROR",rv="@iiif/REQUEST_MISMATCH",sv="@iiif/REQUEST_COMPLETE",ov="@iiif/REQUEST_OFFLINE_RESOURCE",lk=(0,fi.createAction)(iv)(),av=(0,fi.createAction)(nv)(),uk=(0,fi.createAction)(rv)(),ck=(0,fi.createAction)(sv)();(0,fi.createAction)(ov)();var Zc="@iiif/BATCH",lv="@iiif/BATCH_IMPORT",Jc=(0,fi.createAction)(Zc)();(0,fi.createAction)(lv)();var hk=(e,t)=>{let{entities:i,resource:n,mapping:s}=Im(t);if(n.id===void 0)return[av({id:e,message:"ID is not defined in resource."})];let a=[Gm({entities:i}),rk({mapping:s})];return n.id!==e&&(a.push(nk({id:e,type:n.type})),a.push(uk({requestId:e,actualId:n.id}))),a.push(ck({id:e})),a},uv=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function dk(e,t){return!!(e===t||uv(e)&&uv(t))}function cv(e,t){if(!Array.isArray(e)||!Array.isArray(t))return e===t;if(e.length!==t.length)return!1;for(let i=0;i<e.length;i++)if(!dk(e[i],t[i]))return!1;return!0}function eh(e,t){let i=e.iiif.requests[t],n=e.iiif.mapping[t];if(!(!n||!e.iiif.entities[n][i.resourceUri]))return e.iiif.entities[n][i.resourceUri]}function hv(e,t,{waitTimeout:i=30}={}){return async(n,s)=>{let a=e.getState(),l=a.iiif.requests[n];if(l)switch(l.loadingState){case Kc:break;case tv:{let c,h=!1;try{let m=await Promise.race([new Promise((f,y)=>{h||(c=e.subscribe(()=>{let S=e.getState();if(S.iiif.requests[n].loadingState===Kc){y();return}if(S.iiif.requests[n].loadingState===Xc){let C=eh(S,n);C?f(C):y()}}))}),new Promise((f,y)=>setTimeout(()=>{h=!0,y()},i*60))]);if(c&&c(),m)return m}catch{c&&c();break}break}case Xc:{let c=eh(a,n);if(c)return c;break}}e.dispatch(lk({id:n}));try{let c=await t(n,s);!c.id&&!c["@id"]&&(c["@type"]&&(c["@id"]=n),c.id=n);let h=hk(n,c);return e.dispatch(Jc({actions:h})),eh(e.getState(),n)}catch(c){throw e.dispatch(av({id:n,message:c.toString()})),c}}}function pk(){return{Collection:{},Manifest:{},Canvas:{},AnnotationPage:{},AnnotationCollection:{},Annotation:{},ContentResource:{},Range:{},Service:{},Selector:{},Agent:{}}}var fk=(e={},t)=>{switch(t.type){case Ym:return D(A({},e),{[t.payload.id]:t.payload.type});case Km:return A(A({},e),t.payload.mapping);default:return e}};function th(e,t,i,n){return!(!e[i]||!e[i][t]||!e[i][t][n]||!Array.isArray(e[i][t][n]))}var gk=(e=pk(),t)=>{var i;switch(t.type){case Hm:{if(!e[t.payload.type]||!e[t.payload.type][t.payload.id])return e;let n=e[t.payload.type][t.payload.id];return typeof n=="string"?e:D(A({},e),{[t.payload.type]:D(A({},e[t.payload.type]),{[t.payload.id]:D(A({},n),{[t.payload.key]:t.payload.value})})})}case qm:{if(!th(e,t.payload.id,t.payload.type,t.payload.key))return e;let n=e[t.payload.type][t.payload.id];if(typeof n=="string")return e;let s=Array.from(n[t.payload.key]),[a]=s.splice(t.payload.startIndex,1);return s.splice(t.payload.endIndex,0,a),D(A({},e),{[t.payload.type]:D(A({},e[t.payload.type]),{[t.payload.id]:D(A({},n),{[t.payload.key]:s})})})}case Wm:{let n=Object.keys(t.payload.entities),s=A({},e);for(let a of n)s[a]=A(A({},e[a]||{}),t.payload.entities[a]||{});return s}case Qm:{if(!th(e,t.payload.id,t.payload.type,t.payload.key))return e;let n=e[t.payload.type][t.payload.id],s=Array.from(n[t.payload.key]);return s.splice(t.payload.index||s.length+1,0,t.payload.reference),D(A({},e),{[t.payload.type]:D(A({},e[t.payload.type]),{[t.payload.id]:D(A({},n),{[t.payload.key]:s})})})}case Vm:{if(!th(e,t.payload.id,t.payload.type,t.payload.key))return e;let n=e[t.payload.type][t.payload.id],s=Array.from(n[t.payload.key]),a=t.payload.index||s.findIndex(l=>l&&l.id===t.payload.reference.id);return a===-1||((i=s[a])==null?void 0:i.id)!==t.payload.reference.id?e:(s.splice(a,1),D(A({},e),{[t.payload.type]:D(A({},e[t.payload.type]),{[t.payload.id]:D(A({},n),{[t.payload.key]:s})})}))}default:return e}},mk=(e={},t)=>{switch(t.type){case iv:case ov:return D(A({},e),{[t.payload.id]:{requestUri:t.payload.id,loadingState:tv,uriMismatch:!1,resourceUri:t.payload.id}});case rv:return D(A({},e),{[t.payload.requestId]:D(A({},e[t.payload.requestId]||{}),{uriMismatch:!0,resourceUri:t.payload.actualId}),[t.payload.actualId]:{requestUri:t.payload.requestId,loadingState:e[t.payload.requestId].loadingState,uriMismatch:!0,resourceUri:t.payload.actualId}});case nv:return D(A({},e),{[t.payload.id]:D(A({},e[t.payload.id]||{}),{loadingState:Kc,error:t.payload.message})});case sv:return D(A({},e),{[t.payload.id]:D(A({},e[t.payload.id]||{}),{loadingState:Xc,error:void 0})})}return e},vk=(e={},t)=>{let{id:i,updateValue:n,value:s,meta:a,key:l}=t&&t.payload||{};switch(t.type){case Xm:return D(A({},e),{[i]:D(A({},e[i]||{}),{[a]:D(A({},e[i]?e[i][a]||{}:{}),{[l]:s})})});case Zm:return D(A({},e),{[i]:D(A({},e[i]||{}),{[a]:D(A({},e[i]?e[i][a]||{}:{}),{[l]:e[i]&&e[i][a]?n(e[i][a][l]):n(void 0)})})});case Jm:return e[i]&&e[i][a]&&e[i][a][l]?D(A({},e),{[i]:D(A({},e[i]||{}),{[a]:D(A({},e[i]?e[i][a]||{}:{}),{[l]:void 0})})}):e;default:return e}};function yk(e){return(t,i)=>i&&i.type===Zc?i.payload.actions.reduce(e,t):i&&i.type===lv?i.payload.state:e(t,i)}var bk=pl({mapping:fk,entities:gk,requests:mk,meta:vk}),wk=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Ur;function xk(e={}){let{enableDevtools:t=!0,iiifStoreName:i="iiif",defaultState:n={},extraMiddleware:s=[],customReducers:a={}}=e,l=pl(A({[i]:bk},a));return Yc(yk(l),n,t?wk(fl(...s)):Ur(fl(...s)))}function _k(e){return{all:e=e||new Map,on:function(t,i){var n=e.get(t);n?n.push(i):e.set(t,[i])},off:function(t,i){var n=e.get(t);n&&(i?n.splice(n.indexOf(i)>>>0,1):e.set(t,[]))},emit:function(t,i){var n=e.get(t);n&&n.slice().map(function(s){s(i)}),(n=e.get("*"))&&n.slice().map(function(s){s(t,i)})}}}var ih=class{constructor(e,t){Qe(this,"options"),Qe(this,"store"),Qe(this,"emitter"),Qe(this,"isBatching",!1),Qe(this,"batchQueue",[]),Qe(this,"remoteFetcher"),Qe(this,"staticFetcher"),Qe(this,"defaultFetcher",i=>fetch(i).then(n=>n.json())),Qe(this,"middleware",i=>n=>s=>{if(s.type===Zc){for(let c of s.payload.actions)this.emitter.emit(c.type,{realAction:c,state:i.getState()});let l=n(s);for(let c of s.payload.actions)this.emitter.emit(`after:${s.type}`,{action:s,state:l});return l}this.emitter.emit(s.type,{action:s,state:i.getState()});let a=n(s);return this.emitter.emit(`after:${s.type}`,{action:s,state:a}),a}),this.options=Object.assign({reducers:{},middleware:[],defaultState:{},customFetcher:this.defaultFetcher,enableDevtools:!0},e||{}),this.store=t||xk({customReducers:this.options.reducers,extraMiddleware:[...this.options.middleware,this.middleware],defaultState:this.options.defaultState,enableDevtools:this.options.enableDevtools}),this.emitter=_k(),this.remoteFetcher=hv(this.store,this.options.customFetcher),this.staticFetcher=hv(this.store,(i,n)=>n)}batch(e){this.isBatching=!0;try{e(this),this.store.dispatch(Jc({actions:this.batchQueue}))}catch(t){throw this.batchQueue=[],this.isBatching=!1,t}this.batchQueue=[],this.isBatching=!1}async asyncBatch(e){this.isBatching=!0;try{await e(this),this.store.dispatch(Jc({actions:this.batchQueue}))}catch(t){throw this.batchQueue=[],this.isBatching=!1,t}this.batchQueue=[],this.isBatching=!1}modifyEntityField(e,t,i){this.dispatch(ik.modifyEntityField({id:e.id,type:e.type,key:t,value:i}))}dispatch(e){this.isBatching?this.batchQueue.push(e):this.store.dispatch(e)}serialize(e,t){return $m(this.getState().iiif,e,t)}toPresentation2(e){return this.serialize(e,Mm)}toPresentation3(e){return this.serialize(e,Bm)}hydrate(e,t){return this.get(e,t,{skipSelfReturn:!1})}get(e,t,i={}){typeof t!="string"&&(i=t||{},t=void 0);let{skipSelfReturn:n=!0}=i||{};if(Array.isArray(e))return e.map(h=>this.get(h,i));let s=this.getState();if(typeof e=="string"){let h=t||s.iiif.mapping[e];if(!h)return n?null:{id:e,type:"unknown"};e={id:e,type:h}}let a=t||e.type,l=e.id,c=s.iiif.entities[a];if(!c){let h=s.iiif.requests[l];return h&&h.resourceUri!==l?this.get(h.resourceUri,i):n?null:e}return c[e.id]||(n?null:e)}select(e){return e(this.getState())}getStore(){return this.store}getState(){return this.store.getState()}loadManifest(e,t){let i=typeof e=="string"?e:e.id;return this.load(i,t)}loadCollection(e,t){let i=typeof e=="string"?e:e.id;return this.load(i,t)}load(e,t){let i=typeof e=="string"?e:e.id;return t?this.staticFetcher(i,t):this.remoteFetcher(i)}areInputsEqual(e,t){return cv(e,t)}subscribe(e,t,i){typeof i>"u"&&(typeof t>"u"||t===!1||t===!0)&&(i=t,t=e,e=s=>s);let n=i?null:e(this.store.getState());return i||t(n,this),this.store.subscribe(()=>{let s=this.store.getState(),a=e(s);cv(n,a)||t(a,this),n=a})}async ensureLoaded(e){let t=typeof e=="string"?e:e.id;this.requestStatus(t)||await this.load(t)}requestStatus(e){return this.select(t=>t.iiif.requests[e])}getResourceMeta(e,t){let i=this.getState().iiif.meta[e];if(i)return t?i[t]:i}setMetaValue([e,t,i],n){this.dispatch(typeof n=="function"?ev.setMetaValueDynamic({id:e,meta:t,key:i,updateValue:n}):ev.setMetaValue({id:e,meta:t,key:i,value:n}))}};function Sk(){return typeof self<"u"?self:typeof window<"u"?window:typeof Cu<"u"?Cu:{}}function dv(e){let t=Sk();try{let n=t.IIIF_VAULT;if(n)return n}catch{}let i=new ih(e);try{t.IIIF_VAULT=i}catch{}return i}var gi=Be(oc(),1);Be(qp(),1);var Ek=Object.defineProperty,Ck=Object.defineProperties,kk=Object.getOwnPropertyDescriptors,pv=Object.getOwnPropertySymbols,Ak=Object.prototype.hasOwnProperty,Tk=Object.prototype.propertyIsEnumerable,fv=(e,t,i)=>t in e?Ek(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,gv=(e,t)=>{for(var i in t||(t={}))Ak.call(t,i)&&fv(e,i,t[i]);if(pv)for(var i of pv(t))Tk.call(t,i)&&fv(e,i,t[i]);return e},mv=(e,t)=>Ck(e,kk(t)),Pk=/&?(xywh=)?(pixel:|percent:|pct:)?([0-9]+(?:\.[0-9]+)?),([0-9]+(?:\.[0-9]+)?),([0-9]+(?:\.[0-9]+)?),([0-9]+(?:\.[0-9]+)?)/,Rk=/&?(t=)(npt:)?([0-9]+(.[0-9]+)?)?(,([0-9]+(.[0-9]+)?))?/;function nh(e){if(Array.isArray(e))return e.reduce((t,i)=>{let{selector:n,selectors:s}=nh(i);return n&&(t.selector||(t.selector=n),t.selectors.push(...s)),t},{selector:null,selectors:[]});if(!e)return{selector:null,selectors:[]};if(typeof e=="string"){let[t,i]=e.split("#");return i?nh({type:"FragmentSelector",value:i}):{selector:null,selectors:[]}}if(e.type==="PointSelector"&&(e.t||e.t===0)){let t={type:"TemporalSelector",temporal:{startTime:e.t}};return{selector:t,selectors:[t]}}if(e.type==="FragmentSelector"){let t=Pk.exec(e.value);if(t){let n={type:"BoxSelector",spatial:{unit:t[2]==="percent:"||t[2]==="pct:"?"percent":"pixel",x:parseFloat(t[3]),y:parseFloat(t[4]),width:parseFloat(t[5]),height:parseFloat(t[6])}};return{selector:n,selectors:[n]}}let i=e.value.match(Rk);if(i){let n={type:"TemporalSelector",temporal:{startTime:i[4]?parseFloat(i[4]):0,endTime:i[7]?parseFloat(i[7]):void 0}};return{selector:n,selectors:[n]}}return{selector:null,selectors:[]}}return{selector:null,selectors:[]}}function Oo(e,t={}){if(Array.isArray(e))return Oo(e[0]);if(typeof e=="string"){let[i,n]=e.split("#");return n?Oo({type:"SpecificResource",source:{id:i,type:"Unknown"},selector:{type:"FragmentSelector",value:n}}):{type:"SpecificResource",source:{id:i,type:t.typeMap&&t.typeMap[i]||"Unknown"},selector:null,selectors:[]}}if(e.type==="Choice"||e.type==="List"||e.type==="Composite"||e.type==="Independents")return Oo(e.items[0]);if(e.type==="SpecificResource"){e.source.type==="Canvas"&&e.source.partOf&&typeof e.source.partOf=="string"&&(e.source.partOf=[{id:e.source.partOf,type:"Manifest"}]);let{selector:i,selectors:n}=e.selector?nh(e.selector):{selector:null,selectors:[]};return{type:"SpecificResource",source:e.source,selector:i,selectors:n}}if(e.id){e.type==="Canvas"&&e.partOf&&typeof e.partOf=="string"&&(e.partOf=[{id:e.partOf,type:"Manifest"}]);let[i,n]=e.id.split("#");return n?Oo({type:"SpecificResource",source:mv(gv({},e),{id:i}),selector:{type:"FragmentSelector",value:n}}):{type:"SpecificResource",source:mv(gv({},e),{id:i}),selector:null,selectors:[]}}return{type:"SpecificResource",source:e,selector:null,selectors:[]}}function cr(e){return e.endsWith("info.json")?e:e.endsWith("/")?`${e}info.json`:`${e}/info.json`}var Ok="http://library.stanford.edu/iiif/image-api/compliance.html#level0",vv="http://library.stanford.edu/iiif/image-api/compliance.html#level1",yv="http://library.stanford.edu/iiif/image-api/compliance.html#level2",Ik="http://library.stanford.edu/iiif/image-api/conformance.html#level0",bv="http://library.stanford.edu/iiif/image-api/conformance.html#level1",wv="http://library.stanford.edu/iiif/image-api/conformance.html#level2",Lk="http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level0",xv="http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level1",_v="http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level2",$k="http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level0",Sv="http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level1",Ev="http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level2",Nk="http://iiif.io/api/image/1/level0.json",Mk="http://iiif.io/api/image/1/profiles/level0.json",Cv="http://iiif.io/api/image/1/level1.json",kv="http://iiif.io/api/image/1/profiles/level1.json",Av="http://iiif.io/api/image/1/level2.json",Tv="http://iiif.io/api/image/1/profiles/level2.json",Fk="http://iiif.io/api/image/2/level0.json",zk="http://iiif.io/api/image/2/profiles/level0.json",Pv="http://iiif.io/api/image/2/level1.json",Rv="http://iiif.io/api/image/2/profiles/level1.json",Ov="http://iiif.io/api/image/2/level2.json",Iv="http://iiif.io/api/image/2/profiles/level2.json",Bk="level0",Lv="level1",$v="level2",jk="http://iiif.io/api/image/2/level0",Nv="http://iiif.io/api/image/2/level1",Mv="http://iiif.io/api/image/2/level2",Fv=[Mv,yv,wv,_v,Ev,Av,Tv,Ov,Iv,$v],zv=[...Fv,Nv,vv,bv,xv,Sv,Cv,kv,Pv,Rv,Lv],Dk=[jk,Nv,Mv,Ok,vv,yv,Ik,bv,wv,Lk,xv,_v,$k,Sv,Ev,Nk,Mk,Cv,kv,Av,Tv,Fk,zk,Pv,Rv,Ov,Iv,Bk,Lv,$v],Uk={extraFormats:["jpg"],extraQualities:["default"],extraFeatures:["sizeByWhListed"]},Wk={extraFormats:["jpg"],extraQualities:["default"],extraFeatures:["baseUriRedirect","cors","jsonldMediaType","regionByPx","regionSquare","sizeByWhListed","sizeByH","sizeByW","sizeByWh"]},Hk={extraFormats:["jpg","png"],extraQualities:["default"],extraFeatures:["baseUriRedirect","cors","jsonldMediaType","regionByPct","regionByPx","regionSquare","rotationBy90s","sizeByWhListed","sizeByConfinedWh","sizeByH","sizeByPct","sizeByW","sizeByWh"]};function qk(e){return Fv.indexOf(e)!==-1?Hk:zv.indexOf(e)!==-1?Wk:Uk}function Qk(e){let t=e?Array.isArray(e.profile)?e.profile:[e.profile]:[],i={extraQualities:[],extraFormats:[],extraFeatures:[]};for(let n of t)if(typeof n=="string"&&(n=qk(n)),!!n){if(n.formats)for(let s of n.formats)i.extraFormats.indexOf(s)===-1&&i.extraFormats.push(s);if(n.qualities)for(let s of n.qualities)i.extraQualities.indexOf(s)===-1&&i.extraQualities.push(s);if(n.supports)for(let s of n.supports)i.extraFeatures.indexOf(s)===-1&&i.extraFeatures.push(s);if(n.maxHeight&&(i.maxHeight=n.maxHeight),n.maxWidth&&(i.maxWidth=n.maxWidth),n.maxArea&&(i.maxArea=n.maxArea),n.extraFormats)for(let s of n.extraFormats)i.extraFormats.indexOf(s)===-1&&i.extraFormats.push(s);if(n.extraQualities)for(let s of n.extraQualities)i.extraQualities.indexOf(s)===-1&&i.extraQualities.push(s);if(n.extraFeatures)for(let s of n.extraFeatures)i.extraFeatures.indexOf(s)===-1&&i.extraFeatures.push(s);n.maxHeight&&(i.maxHeight=n.maxHeight),n.maxWidth&&(i.maxWidth=n.maxWidth),n.maxArea&&(i.maxArea=n.maxArea)}if(e.extraFormats)for(let n of e.extraFormats)i.extraFormats.indexOf(n)===-1&&i.extraFormats.push(n);if(e.extraFeatures)for(let n of e.extraFeatures)i.extraFeatures.indexOf(n)===-1&&i.extraFeatures.push(n);if(e.extraQualities)for(let n of e.extraQualities)i.extraQualities.indexOf(n)===-1&&i.extraQualities.push(n);return i}function Vk(e){try{if(e==="full")return{full:!0};if(e==="square")return{square:!0};let t=e.startsWith("pct:"),i=e.substr(t?4:0).split(",").map(n=>parseFloat(n));return{x:i[0],y:i[1],w:i[2],h:i[3],percent:t}}catch{throw new Error("Expected 'full', 'square' or 'x,y,w,h'. Found "+e)}}function Gk(e){let t={upscaled:!1,max:!1,confined:!1};if(e[0]==="^"&&(t.upscaled=!0,e=e.slice(1)),e==="max"||e==="full")return t.max=!0,t.serialiseAsFull=e==="full",t;if(e[0]==="!"&&(t.confined=!0,e=e.slice(1)),e[0]==="p")return t.percentScale=parseFloat(e.slice(4)),t;let i=e.split(",").map(n=>n.trim());return i.length&&(i[0]!==""&&(t.width=parseInt(i[0],10)),i[1]!==""?(t.height=parseInt(i[1],10),t.version=2):t.version=3),t}function Yk(e){let t={angle:0};if(e[0]==="!"&&(t.mirror=!0,e=e.substr(1)),t.angle=parseFloat(e)%360,Number.isNaN(t.angle))throw new Error(`Invalid rotation ${e}`);return t}function Bv(e,t=""){let i=e.match(/^(([a-zA-Z]+):\/\/([^/]+))?((.*)+)/);if(!i)throw new Error(`Invalid or unknown input ${e}`);let n=i[2],s=i[3],a=i[4];if(a[0]==="/"&&(a=a.substr(1)),t.length>0){if(t[0]==="/"&&(t=t.substr(1)),t!==a.substr(0,t.length))throw new Error(`Path does not start with prefix (path: ${a}, prefix: ${t})`);a=a.substr(t.length)}return{scheme:n,server:s,path:a,prefix:t}}function Kk(e,t=""){let{path:i,scheme:n,server:s,prefix:a}=Bv(e,t),l=i.split("/").reverse(),[c,h,m,f,...y]=l,S=y.reverse().filter(Boolean).join("/");if(l.length===1||c==="")return{type:"base",scheme:n,server:s,prefix:a,identifier:S};if(c==="info.json"){let[,..._]=l;return{type:"info",scheme:n,server:s,prefix:a,identifier:_.reverse().filter(Boolean).join("/")}}let C=c.split(".");return{type:"image",scheme:n,server:s,prefix:a,identifier:S,originalPath:i,region:Vk(f),size:Gk(m),rotation:Yk(h),quality:C[0],format:C[1]}}function Xk(e){let t=Kk(cr(e.id));if(t.type!=="info")throw new Error("Invalid service URL");let i=Qk(e);return{identifier:t.identifier,originalPath:"",server:t.server,prefix:t.prefix,scheme:t.scheme,type:"image",quality:i.extraQualities.indexOf("default")===-1?i.extraQualities[0]:"default",region:{full:!0},size:{max:!0,upscaled:!1,confined:!1},format:"jpg",rotation:{angle:0}}}function Zk(e,t,i){let n=i.length,s=[];for(let a=0;a<n;a++){let l=i[a].width;s.push(e/l)}return s}function Jk(e,t,i){let n=i.length,s=[];for(let a=0;a<n;a++){let l=i[a];s.push({width:Math.floor(e/l),height:Math.floor(t/l)})}return s}function Dt(e){if(e["@id"])return e["@id"];if(e.id)return e.id}function gl(e){if(!e||!e.profile||!Dt(e))return!1;let t=Array.isArray(e.profile)?e.profile:[e.profile];for(let i of t)if(typeof i=="string"&&Dk.indexOf(i)!==-1)return!0;return!1}function eA(e){if(!gl(e))return!1;let t=Array.isArray(e.profile)?e.profile:[e.profile];for(let i of t)if(typeof i=="string"){if(zv.indexOf(i)!==-1)return!0}else{let n=[...i.supports||[],...i.extraFeatures||[]];if(n.indexOf("regionByPx")!==-1&&(n.indexOf("sizeByW")!==-1||n.indexOf("sizeByWh")!==-1))return!0}return!1}function ml(e,t){if(t&&t.profile){let i=t.profile;if(i){let n=Array.isArray(i)?i:[i];return n.includes(`level${e}`)||n.includes(`http://iiif.io/api/image/2/level${e}.json`)||n.includes(`http://iiif.io/api/image/1/level${e}.json`)||n.includes(`http://iiif.io/api/image/1/profiles/level${e}.json`)}}return!1}function rh(e){return gl(e)?ml(0,e)?0:ml(1,e)?1:ml(2,e)?2:null:null}function jv(e){return(e["@context"]?Array.isArray(e["@context"])?e["@context"]:[e["@context"]]:[]).indexOf("http://iiif.io/api/image/3/context.json")!==-1}function tA(e){if(!eA(e))return[];let t=[],i=Array.isArray(e.profile)?e.profile:[e.profile],n=i.length;for(let s=0;s<n;s++){let a=i[s];if(typeof a!="string"&&(a.maxHeight||a.maxWidth))return[{id:Dt(e),type:"variable",minWidth:0,minHeight:0,maxHeight:a.maxHeight||a.maxWidth,maxWidth:a.maxWidth||a.maxHeight,level:rh(e),version:e["@context"]==="http://iiif.io/api/image/3/context.json"?3:2}]}if(e.tiles){let s=e.tiles.length;for(let a=0;a<s;a++){let l=e.tiles[a];(l.height||l.width)&&t.push({id:Dt(e),type:"variable",minHeight:0,minWidth:0,maxHeight:l.height||l.width,maxWidth:l.width,level:rh(e),version:jv(e)?3:2})}}return t}function Dv(e){let t=/^.*\/(full)\/(((\d+),(\d+)?)|max)\/(\d+)\/default\.(jpg|png|jpeg)$/,i=e.match(t);if(i){let n=i[1],s=parseInt(i[4],10),a=parseInt(i[5],10),l=i[7];if((n==="max"||n==="full")&&s&&a&&l)return{type:"fixed",id:e,height:a,width:s}}return{type:"unknown",id:e}}function iA(e){if(e["@type"])return e["@type"];if(e.type)return e.type}function sh(e){if(typeof e=="string")return Dv(e);let t=iA(e);if(t!=="Image"&&t!=="sc:Image")return null;let i=e,n=Dt(i);return n?n&&i.width&&i.height?{id:n,type:"fixed",width:i.width,height:i.height,unsafe:!0}:Dv(n):null}function nA(e){return gl(e)?(e&&e.sizes?e.sizes:[]).map(t=>({id:Dt(e),type:"fixed-service",height:t.height,width:t.width,level:rh(e),version:jv(e)?3:2})):[]}function Uv(e){let t=[],i=e.length;for(let n=0;n<i;n++){let s=nA(e[n]);s.length&&t.push(...s);let a=tA(e[n]);a.length&&t.push(...a)}return t}function oh(e){let t=e.service?Array.isArray(e.service)?e.service:[e.service]:[],i=t.length,n=[];for(let s=0;s<i;s++)gl(t[s])&&n.push(t[s]);return n}function rA(e,t=!0,i){let n=[],s=sh(e);if(s===null)return n;let a=e;if(n.push(s),t&&a&&a.width&&a.height){let l=[],c=oh(a);for(let h of c){let m={id:Dt(h),width:a.width,height:a.height};if(i.canLoadSync(m)){let f=i.loadServiceSync(m);f&&(f.height||(f.height=a.height),f.width||(f.width=a.width),l.push(...Uv([f])))}}if(l.length)return n.push(...l),n}return a.service&&n.push(...Uv(a.service)),n}function sA({x:e=0,y:t=0,w:i,h:n,full:s,square:a,percent:l}){if(s)return"full";if(a)return"square";if(typeof i>"u"||typeof n>"u")throw new Error("RegionParameter: invalid region");let c=`${e},${t},${i},${n}`;return l?`pct:${c}`:c}function oA({max:e,percentScale:t,upscaled:i,confined:n,width:s,height:a,serialiseAsFull:l,version:c}){let h=[];return i&&h.push("^"),e?(h.push(l?"full":"max"),h.join("")):(n&&h.push("!"),t&&h.push(`pct:${t}`),s&&h.push(`${s}`),h.push(","),a&&c===3&&h.push(`${a}`),h.join(""))}function aA(e){return`${e.mirror?"!":""}${(e.angle||0)%360}`}var lA=Object.defineProperty,uA=Object.defineProperties,cA=Object.getOwnPropertyDescriptors,Wv=Object.getOwnPropertySymbols,hA=Object.prototype.hasOwnProperty,dA=Object.prototype.propertyIsEnumerable,Hv=(e,t,i)=>t in e?lA(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,Wr=(e,t)=>{for(var i in t||(t={}))hA.call(t,i)&&Hv(e,i,t[i]);if(Wv)for(var i of Wv(t))dA.call(t,i)&&Hv(e,i,t[i]);return e},Hr=(e,t)=>uA(e,cA(t));function qv(e,t){let i=e.prefix.startsWith("/")?e.prefix.substr(1):e.prefix,n=`${e.scheme}://${e.server}/${i?`${i}/`:""}${e.identifier}`;if(e.type==="base")return n;if(e.type==="info")return`${n}/info.json`;let{size:s}=e,{region:a,rotation:l,format:c,quality:h}=e;if(t){let m=t["@context"]?Array.isArray(t["@context"])?t["@context"]:[t["@context"]]:[],f=m.indexOf("http://iiif.io/api/image/2/context.json")!==-1,y=m.indexOf("http://iiif.io/api/image/3/context.json")!==-1;if((s.width===t.width&&!s.height||s.height===t.height&&!s.width||s.width===t.width&&s.height===t.height)&&(s=Hr(Wr({},s),{max:!0})),f&&(s.max&&!s.serialiseAsFull&&(s=Hr(Wr({},s),{serialiseAsFull:!0})),!s.max&&s.width&&s.height&&(s=Hr(Wr({},s),{height:void 0})),s=Hr(Wr({},s),{version:2})),y){if(s.max&&s.serialiseAsFull&&(s=Hr(Wr({},s),{serialiseAsFull:!1})),s.width&&!s.height&&t.width&&t.height){let S=t.height/t.width;s=Hr(Wr({},s),{height:Math.ceil(s.width*S)})}s=Hr(Wr({},s),{version:3})}}return[n,sA(a),oA(s),aA(l),`${h}.${c}`].filter(Boolean).join("/")}function ah(e,t,i){let n=Xk({"@context":e.version===3?"http://iiif.io/api/image/3/context.json":"http://iiif.io/api/image/2/context.json",id:cr(Dt(e)),profile:e.level===null||typeof e.level>"u"?"level0":`level${e.level}}`,type:e.version===3?"ImageService3":"ImageService2"});if(n.type!=="image")throw new Error("Invalid service");return n.size.max=!1,n.size.width=t,n.size.height=i,{id:qv(n),type:"fixed",width:t,height:i||e.height/(e.width||1)*t,unsafe:e.width>t}}function Fs(e){let t=e.replace(/(https?:\/\/)?(www.)?/i,"");return t.indexOf("/")!==-1?t.split("/")[0]:t}function pA(e,t,i){let n=e.width?e.width:e.maxWidth;return i.height<=e.maxHeight&&i.width<=e.maxWidth&&i.height>=e.minHeight&&i.width>=e.minWidth&&(!t||Math.abs(i.width-n)<Math.abs(t.width-n))}function fA(e,t){let i=[],n=Object.assign({unsafeImageService:!1,atAnyCost:!0,fallback:!0,minHeight:64,minWidth:64,maxHeight:1/0,maxWidth:1/0,returnAllOptions:!1,preferFixedSize:!1,allowUnsafe:!1,explain:!1,height:0,width:0},e),s=(f,y=0)=>n.explain?i.push(new Array(y).fill(0).map(S=>"    ").join("")+f().trim()):void 0,a=[],l=[],c=null;s(()=>`Using configuration: ${JSON.stringify(n,null,2)}`);let h=(f,y)=>{if(s(()=>"Swapping choice",3),pA(n,y,f)){if(n.preferFixedSize&&f.unsafe){s(()=>`We found an image that was marked as unsafe, but it was the best size. (${f.id})`,4),l.push(f);return}n.returnAllOptions&&y&&l.push(y),s(()=>`We found a new image that was the best size. (${f.id})`,4),c=f}else n.returnAllOptions&&l.push(f)};s(()=>`The input shows we have ${t.length} list(s) of candidates to choose from.`);let m=t.length;for(let f=0;f<m;f++){let y=t[f]();s(()=>`Candidate group ${f}: ${JSON.stringify(y,null,2)}`,1);let S=y.length;s(()=>`Checking candidate list number ${f} and found ${S} potential ways of creating image(s)`,1);for(let C=0;C<S;C++){let _=y[C];if(s(()=>`-> Checking candidate ${C}`,1),_.type==="unknown"&&n.atAnyCost&&(s(()=>`We've found an unknown image type, adding this to the "last resort" list`,2),a.push(_)),_.type==="fixed"&&(_.unsafe?(s(()=>`We've found an unsafe fixed image type, adding this to the "last resort" list`,2),a.push(_)):(s(()=>"We've found a fixed size image, checking if it matches the request",2),h(_,c))),_.type==="fixed-service")if(n.unsafeImageService){s(()=>"Checking for an image from the tile source, without calculating the right height and width (unsafeImageService)",2);let P=ah(_,n.width,n.height);h(P,c)}else{s(()=>"Checking for an image from the tile source 3",2);let P=ah(_,_.width,_.height);h(P,c)}if(_.type==="variable"&&_.maxWidth){let P=ah({id:_.id,type:"fixed-service",width:_.maxWidth,height:_.maxWidth,level:_.level,version:_.version},_.maxWidth);h(P,c)}}if(c&&!n.returnAllOptions){if(c.unsafe||n.allowUnsafe)continue;s(()=>`We found a match in choice list number ${f}, no searching any more`);break}}return n.atAnyCost&&l.length===0?(s(()=>c?`We found an image! ${c.id} of type ${c.type}`:'We found no images, but "atAnyCost" is set, so returning that'),{best:c||a[0],fallback:a.slice(1),log:i}):n.returnAllOptions?(s(()=>"Returning all options that we have found"),{best:n.atAnyCost?c||l[0]||a[0]:c||l[0],fallback:[...l,...a],log:i}):(s(()=>"Returning the best image that we found, and a fallback"),{best:c||l[0]||null,fallback:c?l:l.slice(1),log:i})}var gA=Object.defineProperty,mA=Object.defineProperties,vA=Object.getOwnPropertyDescriptors,Qv=Object.getOwnPropertySymbols,yA=Object.prototype.hasOwnProperty,bA=Object.prototype.propertyIsEnumerable,Vv=(e,t,i)=>t in e?gA(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,wA=(e,t)=>{for(var i in t||(t={}))yA.call(t,i)&&Vv(e,i,t[i]);if(Qv)for(var i of Qv(t))bA.call(t,i)&&Vv(e,i,t[i]);return e},xA=(e,t)=>mA(e,vA(t));function _A(e,t,i){let n=e>t?e:t,s=i.length,a=[];for(let l=0;l<s;l++){let c=i[l],h=c.scaleFactors[0],m=n/h,f=[h];for(;m>=c.width;)h=h*2,f.push(h),m=m/2;a.push(xA(wA({},c),{scaleFactors:f}))}return a}function SA(e,t){if(e.length!==t.length)return!1;if(e.length===0&&t.length===0)return!0;let i=e.length,n=!0;for(let a=0;a<i;a++){let l=e[a],c=t[a];if(l.width!==c.width||l.height!==c.height){n=!1;break}}if(n)return!0;let s=0;for(let a=0;a<i;a++)for(let l=0;l<i;l++)if(e[a].width===t[l].width&&e[a].height===t[l].height){s++;break}return s===i}function Gv(e){return ml(0,e)}var qr=(e,t,i)=>new Promise((n,s)=>{var a=h=>{try{c(i.next(h))}catch(m){s(m)}},l=h=>{try{c(i.throw(h))}catch(m){s(m)}},c=h=>h.done?n(h.value):Promise.resolve(h.value).then(a,l);c((i=i.apply(e,t)).next())}),vl=class{constructor(e={}){this.config={verificationsRequired:1,approximateServices:!1,enableFetching:!0,disableThrottling:!1},this.fetchingCount=0,this.imageServices={},this.knownImageServers={},this.config=Object.assign(this.config,e)}setConfig(e){Object.assign(this.config,e)}sample(e,t,i=!0){let n=Fs(Dt(e)),s=cr(Dt(e)),a=this.knownImageServers[n];return this.imageServices[s]=Object.assign(e,{real:!0}),!a&&e.tiles&&!Gv(e)?(this.knownImageServers[n]={verifications:0,malformed:!1,root:n,preLoaded:i,sampledId:Dt(e),verified:!1,server:null,result:{context:e["@context"]||[],sampledProfile:e.profile,resourceServiceRatio:t&&e.height?t.height/e.height:1,sampledSizes:e.sizes||[],sizeRatios:Zk(e.width,e.height,e.sizes||[]),sampledTiles:e.tiles||[]}},!0):this.verify(e)}preLoad(e,t=!0){this.knownImageServers[e.root]=e,t&&(this.knownImageServers[e.root].malformed=!1,this.knownImageServers[e.root].verifications=this.config.verificationsRequired)}predict(e,t=!1,i=!1){let n=e==null?void 0:e.source,s=Fs(Dt(e)),a=this.knownImageServers[s],l=cr(Dt(e));return this.imageServices[l]?this.imageServices[l]:!this.config.approximateServices||!a||!a.result||!(n!=null&&n.height||e.height)||!(n!=null&&n.width||e.width)||!i&&(a.malformed||a.verifications<this.config.verificationsRequired)||Gv(e.source)?null:(this.imageServices[l]||(this.imageServices[l]={"@context":a.result.context,"@id":Dt(e),id:Dt(e),protocol:"http://iiif.io/api/image",tiles:(n==null?void 0:n.tiles)||_A(e.width,e.height,a.result.sampledTiles),sizes:(n==null?void 0:n.sizes)||Jk(Math.round(e.width/a.result.resourceServiceRatio),Math.round(e.height/a.result.resourceServiceRatio),a.result.sizeRatios),profile:(n==null?void 0:n.profile)||a.result.sampledProfile,height:(n==null?void 0:n.height)||e.height,width:(n==null?void 0:n.width)||e.width,real:!1}),this.imageServices[l])}getThumbnailFromResource(e,t){return qr(this,arguments,function*(i,n,s=!0,a=[]){let l=i?yield this.getImageCandidates(i,s):[];return fA(n,[()=>a,()=>l])})}getImageCandidates(e,t=!0){return qr(this,null,function*(){let i=e;if(t&&i&&i.height&&i.width){let n=oh(i);for(let s of n){let a={id:Dt(s),width:s.width?s.width:i.width,height:s.height?s.height:i.height,source:s};yield this.loadService(a)}}return rA(e,t,this)})}verify(e){return qr(this,null,function*(){let t=this.predict(e,!1,!0),i=yield this.fetchService(Dt(e));if(!t)return!1;let n=t.height===i.height&&t.width===i.width&&t["@context"]===i["@context"]&&SA(t.sizes||[],i.sizes||[]);if(n){let s=Fs(Dt(e));this.knownImageServers[s]&&(this.knownImageServers[s].verifications+=1,this.knownImageServers[s].verifications>=this.config.verificationsRequired&&(this.knownImageServers[s].verified=!0))}return n})}canLoadSync(e){let t=typeof e=="string"?e:Dt(e),i=cr(t);if(this.imageServices[i])return!0;let n=this.knownImageServers[Fs(t)];return n&&!n.malformed&&n.verifications>=this.config.verificationsRequired}markAsMalformed(e){return qr(this,null,function*(){return this.knownImageServers[Fs(Dt(e))].malformed=!0,this.loadService(e,!0)})}fetchService(e,t=!1){return qr(this,null,function*(){let i=cr(e);if(this.imageServices[i]&&(!t||this.imageServices[i].real))return this.imageServices[i];if(!this.config.enableFetching)throw new Error("Fetching is not enabled");let n=yield this.fetch(i).then(s=>s.json());return!n.id&&n["@id"]&&(n.id=n["@id"]),n.id!==e&&(n.id=e,n["@id"]&&(n["@id"]=e)),this.imageServices[i]=Object.assign(n,{real:!0}),this.imageServices[i]})}fetch(e,t){return qr(this,null,function*(){return fetch(e,t)})}loadService(e,t=!1){return qr(this,null,function*(){if(!this.config.disableThrottling){let s=!0;for(;s;)if(this.fetchingCount>=this.config.verificationsRequired)yield new Promise(a=>setTimeout(a,500));else{s=!1;break}}let i=this.knownImageServers[Fs(Dt(e))];if(i&&!i.malformed&&!t){yield i.result;let s=this.loadServiceSync(e);if(s)return s}this.fetchingCount++;let n=yield this.fetchService(Dt(e),t);return this.fetchingCount--,n.real&&this.sample(n,e),n})}loadServiceSync(e){let t=cr(Dt(e));return this.imageServices[t]?this.imageServices[t]:this.config.approximateServices?this.predict(e):null}};new vl;var EA=Object.defineProperty,CA=Object.defineProperties,kA=Object.getOwnPropertyDescriptors,Yv=Object.getOwnPropertySymbols,AA=Object.prototype.hasOwnProperty,TA=Object.prototype.propertyIsEnumerable,Kv=(e,t,i)=>t in e?EA(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,ri=(e,t)=>{for(var i in t||(t={}))AA.call(t,i)&&Kv(e,i,t[i]);if(Yv)for(var i of Yv(t))TA.call(t,i)&&Kv(e,i,t[i]);return e},Ei=(e,t)=>CA(e,kA(t)),PA={collection:void 0,manifest:void 0,range:void 0,canvas:void 0,annotation:void 0,annotationPage:void 0},Xv=Z.createContext(PA),Qr=()=>Zt(Xv);function yl({value:e,children:t}){let i=Qr(),n=Ee(()=>ri(ri({},i),e),[e,i]);return ni(Xv.Provider,{value:n,children:t})}var lh=Z.createContext({vault:null,setVaultInstance:e=>{}});function hr({vault:e,vaultOptions:t,useGlobal:i,resources:n,children:s}){let[a,l]=Ne(()=>e||(i?dv(t):t?new ih(t):new ih));return ni(lh.Provider,{value:{vault:a,setVaultInstance:l},children:ni(yl,{value:n||{},children:s})})}var Ut=()=>{let{vault:e}=Zt(lh);if(e===null)throw new Error("Vault not found. Ensure you have your provider set up correctly.");return e};function RA(e,{noCache:t=!1}={}){let i=typeof e=="string"?e:e.id,n=Ut(),[s,a]=Ne(i),[l,c]=Ne(void 0),h=Ee(()=>n.get(i,{skipSelfReturn:!0})||void 0,[i,n]),[m,f]=Ne(h);return de(()=>{(async()=>{try{let y=h&&!t?h:await n.load(i),S=y?y.id||y["@id"]:null;y&&s!==S&&a(S),f(y)}catch(y){c(y)}})()},[i,t]),{isLoaded:!!m,id:s,requestId:i,error:l,resource:m,cached:!!(m&&m===h)}}function bl(e,t){let{id:i,isLoaded:n,error:s,resource:a,requestId:l,cached:c}=RA(e,t);return{id:i,isLoaded:n,error:s,manifest:a,requestId:l,cached:c}}function wl({manifest:e,children:t}){return ni(yl,{value:{manifest:e},children:t})}function uh({canvas:e,children:t}){return ni(yl,{value:{canvas:e},children:t})}function Ci(e,t=[]){let i=Ut(),[n,s]=Ne(()=>e(i.getState(),i));return de(()=>i.subscribe(a=>e(a,i),a=>{s(a)},!1),t),n}var Zv=Z.createContext([]);function Jv(){let e=Zt(Zv);return Ci(t=>e.map(i=>t.iiif.entities.Canvas[i]).filter(Boolean),[e])}function dr(e={},t=[]){let{id:i,selector:n}=e,s=Qr();Ut();let a=i||s.manifest,l=Ci(c=>a?c.iiif.entities.Manifest[a]:void 0,[a]);return Ee(()=>{if(l)return n?n(l):l},[l,n,...t])}function ch({range:e,children:t}){return ni(yl,{value:{range:e},children:t})}function ey(e,t){let i=[];for(let n of t.items)if(n.type==="Canvas"&&(n.id.indexOf("#")!==-1?i.push({id:n.id.split("#")[0],type:"Canvas"}):i.push(n)),n.type==="Range"&&i.push(...ey(e,e.get(n))),n.type==="SpecificResource"){let s=typeof n.source=="string"?n.source:n.source.id;i.push({id:s,type:"Canvas"})}return i}function OA(e,t,{disablePaging:i,skipNonPaged:n}={}){let s=t.behavior,a=s.includes("paged"),l=a?!1:s.includes("continuous"),c=a||l?!1:s.includes("individuals"),h=t.type==="Manifest"?t.items:ey(e,t);if(l)return[h,[h.map((_,P)=>P)]];if(c||!a||i)return[h,h.map((_,P)=>[P])];let m=[],f=[],y=()=>{f.length&&(m.push([...f]),f=[])},S=0,C=!1;for(let _=0;_<h.length;_++){let P=e.get(h[_]);if(P.behavior.includes("non-paged")){_===S&&S++,n||(y(),m.push([_]),y());continue}if(_===S||P.behavior.includes("facing-pages")){f.length&&(C=!0),y(),m.push([_]),y();continue}if(f.push(_),C){y(),C=!1;continue}f.length>1&&y()}return f.length&&y(),[h,m]}function hh(e={},t=[]){let{id:i,selector:n}=e,s=Qr(),a=i||s.range,l=Ci(c=>a?c.iiif.entities.Range[a]:void 0,[a]);return Ee(()=>{if(l)return n?n(l):l},[l,n,...t])}function IA({startCanvas:e,disablePaging:t}){var i;let n=Ut(),s=dr(),a=hh(),[l,c]=Ne(void 0),h=a||s;if(!h)throw new Error("Nothing selected");let[m,f]=Ee(()=>OA(n,h,{disablePaging:t}),[n,h]),y=je(P=>{let I=f.findIndex(L=>L.includes(P));c(I===-1?0:I)},[m,f]),S=je(P=>{let I=m.findIndex(L=>L.id===P);I!==-1?y(I):c(0)},[m,f]),C=je(()=>{c(P=>P>=f.length?P:P+1)},[f]),_=je(()=>{c(P=>P<=0?0:P-1)},[f]);return typeof l>"u"&&(e?S(e):c(0)),{visibleItems:((i=f[l])==null?void 0:i.map(P=>m[P].id))||[],cursor:l,items:m,sequence:f,setSequenceIndex:c,setCanvasIndex:y,setCanvasId:S,next:C,previous:_}}var Io=()=>{},ty=ii({setCurrentCanvasId:Io,setCurrentCanvasIndex:Io,nextCanvas:Io,previousCanvas:Io,items:[],sequence:[],setSequenceIndex:Io,currentSequenceIndex:0});function LA(e){let t=dr(),{cursor:i,visibleItems:n,next:s,sequence:a,items:l,setCanvasIndex:c,setCanvasId:h,previous:m,setSequenceIndex:f}=IA({startCanvas:e.startCanvas,disablePaging:e.pagingEnabled===!1}),y=Ee(()=>({sequence:a,items:l,setCurrentCanvasId:h,nextCanvas:s,previousCanvas:m,totalCanvases:l.length,setCurrentCanvasIndex:c,setSequenceIndex:f,currentSequenceIndex:i}),[a,l,h,s,m,l,c,f,i]);return t?ni(ty.Provider,{value:y,children:ni(Zv.Provider,{value:n,children:ni(uh,{canvas:n[0],children:e.children})})}):(console.warn("The manifest passed to the provider is not a valid IIIF manifest."),ni("div",{children:"Sorry, something went wrong."}))}function $A(e){let t=bl(e.manifest);if(!t)return console.warn("The manifest passed to the provider is not a valid IIIF manifest."),ni("div",{children:"Sorry, something went wrong."});if(!t.isLoaded)return ni("div",{children:"Loading..."});let i=ni(LA,Ei(ri({},e),{children:e.children}));return ni(wl,{manifest:t.id,children:e.rangeId?ni(ch,{range:e.rangeId,children:i}):i})}function NA(){return Zt(ty)}var MA="@iiif/IMPORT_ENTITIES",FA="@iiif/MODIFY_ENTITY_FIELD",zA="@iiif/REORDER_ENTITY_FIELD",BA="@iiif/ADD_REFERENCE",jA="@iiif/REMOVE_REFERENCE",DA=(0,gi.createAction)(MA)(),UA=(0,gi.createAction)(FA)(),WA=(0,gi.createAction)(zA)(),HA=(0,gi.createAction)(BA)(),qA=(0,gi.createAction)(jA)(),dh={importEntities:DA,modifyEntityField:UA,reorderEntityField:WA,addReference:HA,removeReference:qA},QA="@iiif/ADD_MAPPING",VA="@iiif/ADD_MAPPINGS";(0,gi.createAction)(QA)(),(0,gi.createAction)(VA)();var GA="@iiif/SET_META_VALUE",YA="@iiif/SET_META_VALUE_DYNAMIC",KA="@iiif/UNSET_META_VALUE";(0,gi.createAction)(GA)(),(0,gi.createAction)(YA)(),(0,gi.createAction)(KA)();var XA="@iiif/REQUEST_RESOURCE",ZA="@iiif/REQUEST_ERROR",JA="@iiif/REQUEST_MISMATCH",eT="@iiif/REQUEST_COMPLETE",tT="@iiif/REQUEST_OFFLINE_RESOURCE";(0,gi.createAction)(XA)(),(0,gi.createAction)(ZA)(),(0,gi.createAction)(JA)(),(0,gi.createAction)(eT)(),(0,gi.createAction)(tT)();var iT="@iiif/BATCH",nT="@iiif/BATCH_IMPORT";(0,gi.createAction)(iT)(),(0,gi.createAction)(nT)();function rT(){let e=Ut().getStore();return Ee(()=>t=>e.dispatch(t),[e])}function iy(e){return typeof e!="string"&&e&&e.bindToVault}function sT(){let e=Ut(),t=Se([]),i=rT(),n=Ee(()=>`vault://annotation-page/${new Date().getTime()}/${Math.round(Math.random()*1e9).toString(16)}`,[]);It(()=>{let c={id:n,type:"AnnotationPage",behavior:[],motivation:null,label:null,thumbnail:[],summary:null,requiredStatement:null,metadata:[],rights:null,provider:[],items:[],seeAlso:[],homepage:[],logo:[],rendering:[],service:[]};i(dh.importEntities({entities:{AnnotationPage:{[c.id]:c}}}))},[n]);let s=Ci(c=>n?c.iiif.entities.AnnotationPage[n]:null,[n]),a=je((c,h)=>{if(n){if(iy(c)){let y=c;y.__vault||y.bindToVault(e),c=typeof y.source=="string"?y.source:y.source.id,t.current[c]=y}else typeof c!="string"&&(c=c.id);let m=e.get({id:n,type:"AnnotationPage"}),f=e.get({id:c,type:"Annotation"});m&&f&&(m.items.find(y=>y.id===f.id)||i(dh.addReference({id:n,type:"AnnotationPage",key:"items",reference:{id:c,type:"Annotation"},index:h})))}},[n]),l=je(c=>{n&&(iy(c)?c=typeof c.source=="string"?c.source:c.source.id:typeof c!="string"&&(c=c.id),t.current[c]&&t.current[c].beforeRemove(),e.get({id:n,type:"AnnotationPage"})&&i(dh.removeReference({id:n,type:"AnnotationPage",key:"items",reference:{id:c,type:"Annotation"}})))},[n]);return[s,{addAnnotation:a,removeAnnotation:l}]}ii(null),ii(null),Z.createContext(null),Z.createContext(null);function oT(e){return{addEventListener(t,i,n,s){if(t)return e.setMetaValue([t.id,"eventManager",i],a=>{let l=a||[];for(let c of l)if(c.callback===n)return l;return[...l,{callback:n,scope:s}]}),n},removeEventListener(t,i,n){!t||e.setMetaValue([t.id,"eventManager",i],s=>(s||[]).filter(a=>a.callback!==n))},getListenersAsProps(t,i){let n=typeof t=="string"?{id:t}:t;if(!n||!n.id)return{};let s=e.getResourceMeta(n.id,"eventManager"),a={};if(s&&n)for(let l of Object.keys(s))a[l]=c=>{let h=e.get(n);for(let{callback:m,scope:f}of s[l]||[])(!f||i&&f.indexOf(i)!==-1)&&m(c,h)};return a}}}function xl(e,t){let i=Ut(),n=Ee(()=>oT(i),[i]),s=Ci(()=>e&&e.id?i.getResourceMeta(e.id,"eventManager"):null,[e]);return Ee(()=>e?n.getListenersAsProps(e,t):{},[s,e,i,t])}function ny(e){return{applyStyles(t,i,n){let s=typeof t=="string"?t:t.id;return e.setMetaValue([s,"styles",i],n)},getAppliedStyles(t){let i=typeof t=="string"?t:t.id;return e.getResourceMeta(i,"styles")}}}function Vr(e,t){let i=Ut(),n=Ee(()=>ny(i),[i]);return Ci(()=>{if(!e)return null;let s=n.getAppliedStyles(e.id);return s?t?s[t]:s:void 0},[e,t])}var aT=Object.defineProperty,lT=Object.defineProperties,uT=Object.getOwnPropertyDescriptors,ry=Object.getOwnPropertySymbols,cT=Object.prototype.hasOwnProperty,hT=Object.prototype.propertyIsEnumerable,sy=(e,t,i)=>t in e?aT(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,oy=(e,t)=>{for(var i in t||(t={}))cT.call(t,i)&&sy(e,i,t[i]);if(ry)for(var i of ry(t))hT.call(t,i)&&sy(e,i,t[i]);return e},ay=(e,t)=>lT(e,uT(t)),dT=/&?(xywh=)?(pixel:|percent:|pct:)?([0-9]+(?:\.[0-9]+)?),([0-9]+(?:\.[0-9]+)?),([0-9]+(?:\.[0-9]+)?),([0-9]+(?:\.[0-9]+)?)/,pT=/&?(t=)(npt:)?([0-9]+(.[0-9]+)?)?(,([0-9]+(.[0-9]+)?))?/;function _l(e){if(Array.isArray(e))return e.reduce((t,i)=>{let{selector:n,selectors:s}=_l(i);return n&&(t.selector||(t.selector=n),t.selectors.push(...s)),t},{selector:null,selectors:[]});if(!e)return{selector:null,selectors:[]};if(typeof e=="string"){let[t,i]=e.split("#");return i?_l({type:"FragmentSelector",value:i}):{selector:null,selectors:[]}}if(e.type==="PointSelector"&&(e.t||e.t===0)){let t={type:"TemporalSelector",temporal:{startTime:e.t}};return{selector:t,selectors:[t]}}if(e.type==="FragmentSelector"){let t=dT.exec(e.value);if(t){let n={type:"BoxSelector",spatial:{unit:t[2]==="percent:"||t[2]==="pct:"?"percent":"pixel",x:parseFloat(t[3]),y:parseFloat(t[4]),width:parseFloat(t[5]),height:parseFloat(t[6])}};return{selector:n,selectors:[n]}}let i=e.value.match(pT);if(i){let n={type:"TemporalSelector",temporal:{startTime:i[4]?parseFloat(i[4]):0,endTime:i[7]?parseFloat(i[7]):void 0}};return{selector:n,selectors:[n]}}return{selector:null,selectors:[]}}return{selector:null,selectors:[]}}function Hn(e,t={}){if(Array.isArray(e))return Hn(e[0]);if(typeof e=="string"){let[i,n]=e.split("#");return n?Hn({type:"SpecificResource",source:{id:i,type:"Unknown"},selector:{type:"FragmentSelector",value:n}}):{type:"SpecificResource",source:{id:i,type:t.typeMap&&t.typeMap[i]||"Unknown"},selector:null,selectors:[]}}if(e.type==="Choice"||e.type==="List"||e.type==="Composite"||e.type==="Independents")return Hn(e.items[0]);if(e.type==="SpecificResource"){e.source.type==="Canvas"&&e.source.partOf&&typeof e.source.partOf=="string"&&(e.source.partOf=[{id:e.source.partOf,type:"Manifest"}]);let{selector:i,selectors:n}=e.selector?_l(e.selector):{selector:null,selectors:[]};return{type:"SpecificResource",source:e.source,selector:i,selectors:n}}if(e.id){e.type==="Canvas"&&e.partOf&&typeof e.partOf=="string"&&(e.partOf=[{id:e.partOf,type:"Manifest"}]);let[i,n]=e.id.split("#");return n?Hn({type:"SpecificResource",source:ay(oy({},e),{id:i}),selector:{type:"FragmentSelector",value:n}}):{type:"SpecificResource",source:ay(oy({},e),{id:i}),selector:null,selectors:[]}}return{type:"SpecificResource",source:e,selector:null,selectors:[]}}function ph(e={},t=[]){let{id:i,selector:n}=e,s=Qr(),a=Ut(),l=i||s.annotation,c=Ci(m=>l?m.iiif.entities.Annotation[l]:void 0,[l]),h=Ci(m=>c&&c.body?c.body.map(f=>f?m.iiif.entities[f.type][f.id]:null).filter(Boolean):[],[c]);return Ee(()=>{if(!c)return;let m=Ei(ri({},c),{body:h,target:Hn(c.target,{typeMap:a.getState().iiif.mapping})});return n?n(m):m},[c,n,h,...t])}function pr(e={},t=[]){let{id:i,selector:n}=e,s=Qr(),a=i||s.canvas,l=Ci(c=>a?c.iiif.entities.Canvas[a]:void 0,[a]);return Ee(()=>{if(l)return n?n(l):l},[l,n,...t])}function ly(e){return e.type==="SpecificResource"?[e.source,{selector:e.selector}]:[e,{selector:null}]}function fT(e,t,i){let n=[],s=null,a=[];for(let l of t){let c=e.get(l.body,{skipSelfReturn:!1});for(let h of c){if(!h)continue;let[m,{selector:f}]=ly(h),y=(m.type||"unknown").toLowerCase();if(y==="choice"){let S=e.get(m.items),C=i.length?i.map(_=>S.find(P=>P.id===_)).filter(Boolean):[S[0]];C.length===0&&C.push(S[0]),s={type:"single-choice",items:S.map(_=>({id:_.id,label:_.label,selected:C.indexOf(_)!==-1})),label:h.label},c.push(...C);continue}n.indexOf(y)===-1&&n.push(y),a.push({annotationId:l.id,type:y,resource:m,target:l.target,selector:f})}}return{types:n,items:a,choice:s}}function uy(e,t){let{selector:i,source:n}=Oo(t);if(n.id!==e.id)return[null,n];let s={type:"BoxSelector",spatial:{x:0,y:0,width:e.width,height:e.height}};return[i?i.type==="TemporalSelector"?{type:"TemporalBoxSelector",temporal:i.temporal,spatial:s.spatial}:i:null,n]}var gT={makeChoice:()=>{}},fh={type:"unknown"},si=e=>({type:"unknown",reason:e,annotations:{pages:[]}}),mT=(e,t)=>({type:"empty",width:e,height:t,annotations:{pages:[]},image:null,images:[]});function vT(e,t){var i;let n=(i=e==null?void 0:e.iiif)==null?void 0:i.meta[t];return n?n.annotationPageManager:null}function yT(e,t){return Ci(i=>{let n=[];if(!e)return n;let s=Object.keys(i.iiif.entities.AnnotationPage);for(let a of s)if(!t||t.indexOf(a)!==-1){let l=vT(i,a);l&&l.views&&l.views[e]&&n.push(a)}return n},[e,t])}function bT({canvas:e,manifest:t,all:i,canvases:n}){let s=[];if(t)for(let a of t.annotations)s.indexOf(a.id)===-1&&s.push(a.id);if(i){if(n&&n.length)for(let a of n)for(let l of a.annotations)s.indexOf(l.id)===-1&&s.push(l.id)}else if(e)for(let a of e.annotations)s.indexOf(a.id)===-1&&s.push(a.id);return s}function wT(e,t){var i;let n=(i=e==null?void 0:e.iiif)==null?void 0:i.meta[t];return n?n.annotationPageManager:null}function gh(e,t={}){let i=Ut(),n=dr(),s=pr(),a=Jv(),l=Ee(()=>bT({all:t.all,manifest:n,canvas:s,canvases:a}),[t.all,s,a,n]),c=yT(e,t.all?void 0:l),h=je(f=>{!e||i.setMetaValue([f,"annotationPageManager","views"],y=>y&&!y[e]?y:Ei(ri({},y||{}),{[e]:!1}))},[e,i]),m=je((f,y={})=>{if(!e)return;let S=i.getState(),C=[];if(y!=null&&y.deselectOthers){let _=Object.keys(S.iiif.entities.AnnotationPage);for(let P of _){let I=wT(S,P);I&&I.views&&I.views[e]&&C.push(P)}}for(let _ of C)h(_);i.setMetaValue([f,"annotationPageManager","views"],_=>_&&_[e]?_:Ei(ri({},_||{}),{[e]:!0}))},[e,h,i]);return{availablePageIds:l,enabledPageIds:c,setPageEnabled:m,setPageDisabled:h}}function xT(e,t){return Ci((i,n)=>n.get(e.map(s=>({id:s,type:t}))),[e,t])}var cy=Z.createContext(new vl);function mh(){return Zt(cy)}function hy(){let e=mh(),[t,i]=Ne({}),n=Se(!1);return de(()=>()=>{n.current=!0},[]),[je((s,{height:a,width:l})=>{if(s){let c=s.id||s["@id"],h=e.loadServiceSync({id:c,width:s.width||l,height:s.height||a,source:s});h?s=h:t[c]||(n.current||i(m=>Ei(ri({},m),{[c]:"loading"})),e.loadService({id:c,width:s.width||l,height:s.height||a}).then(()=>{n.current||i(m=>Ei(ri({},m),{[c]:"done"}))}))}return s},[e,t]),t]}function _T(e={}){let t=ph(),i=pr(e.canvasId?{id:e.canvasId}:void 0);return Ci((n,s)=>{if(!i)return[];if(t&&e.enableSingleAnnotation)return[t];let a=s.get(i.items),l=[];for(let c of a)l.push(...s.get(c.items));return l},[i])}function ST(e,t=[]){let i=Ut(),n=_T({enableSingleAnnotation:e==null?void 0:e.enableSingleAnnotation}),[s,a]=Ne((e==null?void 0:e.defaultChoices)||[]),l=Ee(()=>fT(i,n,s),[i,n,s,...t]),c={makeChoice:je((h,{deselectOthers:m=!0,deselect:f=!1}={})=>{if(l.choice){if(l.choice.type!=="single-choice")throw new Error("Complex choice not supported yet");a(y=>{if(f){let C=y.filter(_=>_!==h);if(C.length===0){let _=l.items[0].resource.id;return _?[_]:[]}return C}if(m)return[h];let S=[...y];if(S.length===0&&l.items.length){let C=l.items[0].resource.id;C&&S.push(C)}return y.indexOf(h)!==-1?y:[...y,h]})}},[l.choice])};return[l,c]}function ET(e,t,i){let n=[];for(let s of t.items){let a=s.resource&&s.resource.type==="SpecificResource"?s.resource.source:s.resource;if(!a.id)return si("No resource Identifier");let l;if(a.service){let _=oh(a);_[0]&&(l=i(_[0],e))}let c={type:"BoxSelector",spatial:{x:0,y:0,width:e.width,height:e.height}},[h,m]=uy(e,s.target);if(m.id!==e.id)continue;let f={type:"BoxSelector",spatial:{x:0,y:0,width:e.width,height:e.height}},y=s.resource.type==="SpecificResource"?Hn(s.resource):null,S=y&&y.selector&&(y.selector.type==="BoxSelector"||y.selector.type==="TemporalBoxSelector")?{type:"BoxSelector",spatial:{x:y.selector.spatial.x,y:y.selector.spatial.y,width:y.selector.spatial.width,height:y.selector.spatial.height}}:f;l&&!l.id&&(l.id=l["@id"]);let C={id:a.id,type:"Image",annotationId:s.annotationId,width:h?a.width:e.width,height:h?a.height:e.height,service:l,sizes:l&&l.sizes?l.sizes:a.width&&a.height?[{width:a.width,height:a.height}]:[],target:h&&h.type!=="PointSelector"?h:c,selector:S};n.push(C)}return{type:"images",image:n[0],images:n,choice:t.choice}}var CT=["model/gltf-binary"];function kT(e,t){let i=t.items[0].resource;return i.format?CT.indexOf(i.format)===-1?si(`3D format: ${i.format} is unsupported`):{type:"3d-model",model:i}:si("Unknown format")}function AT(e,t){var i;if(!e.duration)return si("No duration on canvas");if(t.items.length>1)return si("Only one audio source supported");let n=(i=t.items[0])==null?void 0:i.resource;return n?n.format?{type:"media",media:{annotationId:t.items[0].annotationId,duration:e.duration,url:n.id,type:"Sound",target:{type:"TemporalSelector",temporal:{startTime:0,endTime:e.duration}},format:n.format,selector:{type:"TemporalSelector",temporal:{startTime:0,endTime:e.duration}}},annotations:{pages:[]}}:si("Audio does not have format"):si("Unknown audio")}function TT(e,t){var i;let n=t.items.filter(a=>a.type==="video");if(!e.duration)return si("No duration on canvas");if(n.length>1)return si("Only one video source supported");let s=(i=n[0])==null?void 0:i.resource;return s?s.format?{type:"media",media:{annotationId:t.items[0].annotationId,duration:e.duration,url:s.id,type:"Video",items:[],target:{type:"TemporalSelector",temporal:{startTime:0,endTime:e.duration}},format:s.format,selector:{type:"TemporalSelector",temporal:{startTime:0,endTime:e.duration}}},annotations:{pages:[]}}:si("Video does not have format"):si("Unknown video")}function dy(e,t={},i){let n=e.language||i||"none";switch(e.type){case"TextualBody":{typeof e.value<"u"&&(t[n]=e.value);break}case"List":case"Composite":case"Choice":e.items&&e.items.forEach(s=>dy(s,t,n))}return t}function PT(e,t){let i=[];return t.items.forEach(n=>{if(n.resource){let[s]=uy(e,n.target);i.push({annotationId:n.annotationId,text:dy(n.resource),target:s})}}),{type:"textual-content",items:i}}function RT(e){let t=dr(),i=pr(),n=Ut(),[s,a]=hy(),{enabledPageIds:l}=gh((e==null?void 0:e.annotationPageManagerId)||(t==null?void 0:t.id)||(i==null?void 0:i.id),{all:!1}),c=xT(l,"AnnotationPage"),h=(e==null?void 0:e.strategies)||["empty","images","media","textual-content","complex-timeline"],[m,f]=ST(e,[a]),y=Ee(()=>{if(!i)return fh;if(m.types.length===0)return h.indexOf("empty")!==-1?mT(i.width,i.height):fh;if(m.types.length!==1)if(m.types.length===2&&m.types.indexOf("text")!==-1)m.types=m.types.filter(C=>C!=="text");else return h.indexOf("complex-timeline")===-1?si("Complex timeline not supported"):si("ComplexTimelineStrategy not yet supported");let S=m.types[0];return S==="image"?h.indexOf("images")===-1?si("Image not supported"):ET(i,m,s):S==="Model"||S==="model"?h.indexOf("3d-model")===-1?si("3D not supported"):kT(i,m):S==="textualbody"?h.indexOf("textual-content")===-1?si("Textual content not supported"):PT(i,m):S==="sound"||S==="audio"?h.indexOf("media")===-1?si("Media not supported"):AT(i,m):S==="video"?h.indexOf("media")===-1?si("Media not supported"):TT(i,m):fh},[i,m,n,f.makeChoice]);return Ee(()=>y.type==="unknown"?[y,gT]:[Ei(ri({},y),{annotations:{pages:c}}),f],[y,c])}var OT=(e,t=[])=>{let i=Ut();de(()=>{e(i)},[i,...t])};function IT(e,t={}){let i=t.imageServiceLoader||new vl;async function n(s,a,l,c=[],h){if(typeof s=="string")return{best:sh(s),fallback:[],log:[]};let m=e.get(s);if(typeof m=="string")return{best:sh(m),fallback:[],log:[]};switch(m.type){case"Annotation":{let f=m.body,y=e.get(f[0]);return h&&!y.width&&(y.width=h.width,y.height=h.height),await i.getThumbnailFromResource(y,a,l,c)}case"Canvas":{let f=m;if(f.thumbnail&&f.thumbnail.length){let y=e.get(f.thumbnail[0]),S=await i.getImageCandidates(y,l);S&&S.length&&c.push(...S)}return n(f.items[0],a,l,c,{width:f.width,height:f.height})}case"AnnotationPage":return n(m.items[0],a,l,c,h);case"Choice":return n(m.items[0],a,l,c,h);case"Collection":{let f=m.items[0];return n(f,a,l,c,h)}case"Manifest":{let f=m.items[0];return n(f,a,l,c,h)}case"SpecificResource":case"Image":case"Dataset":case"Sound":case"Text":case"TextualBody":case"Video":return h&&!m.width&&(m.width=h.width,m.height=h.height),i.getThumbnailFromResource(m,a,l,c);case"Service":case"Range":case"AnnotationCollection":case"CanvasReference":case"ContentResource":return{best:void 0,fallback:[],log:[]}}return{best:void 0,fallback:[],log:[]}}return{getBestThumbnailAtSize:n}}function LT(e,t,{canvasId:i,manifestId:n}={}){let s=Ut(),a=mh(),l=Ee(()=>IT(s,{imageServiceLoader:a}),[s,a]),[c,h]=Ne(),m=dr(n?{id:n}:void 0),f=pr(i?{id:i}:void 0),y=f||m,S=Se(!1);if(de(()=>(S.current=!1,()=>{S.current=!0}),[]),!y)throw new Error("Must be called under a manifest or canvas context.");return OT(C=>{l.getBestThumbnailAtSize(y,e,t).then(_=>{_.best&&!S.current&&h(_.best)})},[y]),c}function $T(e){return{isMuted:!1,playRequested:!1,isPlaying:!1,isFinished:!1,volume:100,duration:e}}function NT(e,t){switch(t.type){case"FINISHED":return Ei(ri({},e),{isFinished:!0,isPlaying:!1,playRequested:!1});case"PLAY_PAUSE":return Ei(ri({},e),{isFinished:!1,isPlaying:!e.isPlaying});case"PLAY_REQUESTED":return Ei(ri({},e),{isFinished:!1,playRequested:!0});case"PAUSE":return Ei(ri({},e),{isPlaying:!1});case"PLAY":return Ei(ri({},e),{isFinished:!1,playRequested:!1,isPlaying:!0});case"MUTE":return Ei(ri({},e),{isMuted:!0});case"SET_VOLUME":return Ei(ri({},e),{volume:t.volume,isMuted:t.volume===0});case"TOGGLE_MUTE":return Ei(ri({},e),{isMuted:!e.isMuted});case"UNMUTE":return Ei(ri({},e),{isMuted:!1})}return e}function MT(e){let t=Math.round(e);return`${Math.floor(t/60)}:${`${t%60}`.padStart(2,"0")}`}function py(e){let[t,i]=ys(NT,$T(e.duration)),n=Se(null),s=Se(null),a=Se(null),l=Se(!1),c=je(()=>{s.current&&n.current&&(s.current.innerHTML=MT(n.current.currentTime),a.current&&(a.current.style.width=`${n.current.currentTime/e.duration*100}%`),l.current!==n.current.muted&&(l.current=n.current.muted,i(n.current.muted?{type:"MUTE"}:{type:"UNMUTE"})))},[e.duration]),h=je(()=>{n.current&&(i({type:"PLAY_REQUESTED"}),n.current.play().then(()=>{i({type:"PLAY"})}),c())},[c]),m=je(()=>{n.current&&(n.current.duration>0&&n.current.paused?h():f())},[c]),f=je(()=>{n.current&&(n.current.pause(),i({type:"PAUSE"}),c())},[c]),y=je(()=>{n.current&&(n.current.muted=!n.current.muted,i(n.current.muted?{type:"MUTE"}:{type:"UNMUTE"}))},[]),S=je(()=>{n.current&&(n.current.muted=!0,i({type:"MUTE"}))},[]),C=je(()=>{n.current&&(n.current.muted=!1,i({type:"UNMUTE"}))},[]),_=je(L=>{n.current&&(n.current.muted=!1,n.current.volume=L/100,i({type:"SET_VOLUME",volume:L}))},[]),P=je(L=>{n.current&&(n.current.currentTime=Math.max(0,Math.min(L*e.duration,e.duration)),c())},[]),I=je(L=>{n.current&&(n.current.currentTime=Math.max(0,Math.min(L,e.duration)),c())},[]);return de(()=>{let L=setInterval(()=>{c()},350);return()=>clearInterval(L)},[c,e.duration]),de(()=>{let L=()=>{i({type:"FINISHED"})},E=n.current;return E==null||E.addEventListener("ended",L),()=>E==null?void 0:E.removeEventListener("ended",L)},[]),[{element:n,currentTime:s,progress:a},t,{play:h,pause:f,playPause:m,mute:S,unmute:C,toggleMute:y,setVolume:_,setDurationPercent:P,setTime:I}]}var FT=ii(null),zT=ii(null),BT=ii(null);function jT({actions:e,state:t,children:i,currentTime:n,progress:s,element:a}){return ni(BT.Provider,{value:{currentTime:n,progress:s,element:a},children:ni(zT.Provider,{value:e,children:ni(FT.Provider,{value:t,children:i})})})}function DT(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fy(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function UT(e,t,i){return t&&fy(e.prototype,t),i&&fy(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}Z.createContext(),function(){function e(){DT(this,e),this.usedNamespaces={}}return UT(e,[{key:"addUsedNamespaces",value:function(t){var i=this;t.forEach(function(n){i.usedNamespaces[n]||(i.usedNamespaces[n]=!0)})}},{key:"getUsedNamespaces",value:function(){return Object.keys(this.usedNamespaces)}}]),e}();function WT(e={},t=[]){let{id:i,selector:n}=e,s=Qr(),a=i||s.annotationPage,l=Ci(c=>a?c.iiif.entities.AnnotationPage[a]:void 0,[a]);return Ee(()=>{if(l)return n?n(l):l},[l,...t])}function Sl(){let e=Zt(lh);return e&&e.vault?e.vault:dv()}function HT(){let e=Ut();return Ee(()=>ny(e),[e])}qe();async function qT(e){if(!e)return null;switch(e){case"static":return{render:"static",interactive:!1,viewport:!0};case"responsive":return{render:"static",interactive:!1,viewport:!1};case"zoom":return{render:"canvas",interactive:!0,viewport:!0}}if(e.startsWith("http"))return fetch(e).then(t=>t.json());if(e.startsWith("#")){let t=document.getElementById(e.slice(1));if(t)try{return JSON.parse(t.innerText)}catch{console.error("Invalid JSON on element",t)}}return null}function QT(e,t){let[i,n]=Ne(!1),[s,a]=Ne({}),l=e&&!s.__loaded,c=!!((!e||s.__loaded)&&i);return It(()=>{let h=[];return e&&qT(e).then(m=>{if(m){let f=m,{media:y}=f,S=le(f,["media"]),C=Object.keys(y||{}),_=C.map(I=>({query:I,mql:window.matchMedia(I)})),P=()=>{if(!_.length||!y)return A({__loaded:!0},S);let I=_.filter(({mql:E})=>E.matches),L=A(A({__loaded:!0},S),I.reduce((E,N)=>Object.assign(E,y[N.query]),{}));if(t)for(let E of I)t(E.query,L);return L};for(let I of C){let L=window.matchMedia(I),E=()=>{let N=P();a(N)};L.addEventListener("change",E),h.push(()=>{L.removeEventListener("change",E)})}a(P())}else a({__loaded:!0})}).catch(()=>{a({__loaded:!0})}),()=>{h.forEach(m=>m())}},[c,e]),{internalConfig:s,isReady:c,isConfigBlocking:l,setIsReady:n}}qe(),qe();function ze(e,{parse:t,defaultValue:i}={}){let n=Se(),[s,a]=Ne(()=>t?t(e):e),l=je(c=>{let h=t?t(c):c;typeof i<"u"&&typeof h>"u"&&(h=i),(n.current||s)!==h&&(a(h),n.current=h)},[]);return It(()=>{l(e)},[e]),[s,l,a,n]}function VT({max:e,percentScale:t,upscaled:i,confined:n,width:s,height:a}){let l=[];return i&&l.push("^"),e?(l.push("max"),l.join("")):(n&&l.push("!"),t&&l.push(`pct:${t}`),s&&l.push(`${s}`),l.push(","),a&&l.push(`${a}`),l.join(""))}function GT(e){let t={upscaled:!1,max:!1,confined:!1};if(e[0]==="^"&&(t.upscaled=!0,e=e.slice(1)),(e==="max"||e==="full")&&(t.max=!0),e[0]==="!"&&(t.confined=!0,e=e.slice(1)),e[0]==="p")return t.percentScale=parseFloat(e.slice(4)),t;let i=e.split(",").map(n=>n.trim());return i[0]!==""&&(t.width=parseInt(i[0],10)),i[1]!==""&&(t.height=parseInt(i[1],10)),t}function El(e){return e==null||e<0?0:e}function Cl(e){return YT(typeof e=="string"?e:JSON.stringify(e))}function kl(e,t){if(e=e.trim(),e[0]==="{")return t?Promise.resolve(JSON.parse(e)):JSON.parse(e);if(e.startsWith("http")){if(!t)throw new Error("Cannot fetch remote fetch with async=false in parseContentState");return fetch(e).then(i=>i.json())}return kl(KT(e),t)}function YT(e){let t=encodeURIComponent(e);return(typeof btoa>"u"?Buffer.from(t,"utf-8").toString("base64"):btoa(t)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function KT(e){let t=XT(e).replace(/-/g,"+").replace(/_/g,"/"),i=typeof atob>"u"?Buffer.from(t,"base64").toString("utf-8"):atob(t);return decodeURIComponent(i).trim()}function XT(e){let t=e.length%4;if(t===1)throw new Error("InvalidLengthError: Input base64url string is the wrong length to determine padding");return e+(t?"====".slice(0,4-t):"")}function zs(e){if(!e)throw new Error("Content state is empty");Array.isArray(e)||(e=[e]);let t="vault://virtual-annotation/"+new Date().getTime(),i=["contentState"],n=[];for(let s of e){if(typeof s=="string")throw new Error("Content state is a [String] type and cannot be inferred");if(s.type==="Annotation"){if(t=s.id,Array.isArray(s.motivation))for(let l of s.motivation)i.indexOf(l)===-1&&i.push(l);if(Array.isArray(s.target))for(let l of s.target){let c=Hn(l);n.push(c)}else{let l=Hn(s.target);n.push(l)}continue}let a=Hn(s);n.push(a)}return{id:t,type:"Annotation",motivation:["contentState",...e.motivation||[]],target:n,extensions:{}}}function ZT(e){if(!e)return[];typeof e=="string"&&(e=e.split("|")),Array.isArray(e)||(e=[e]);let t=[];for(let i of e)typeof i=="string"&&(i=GT(i)),t.push(i);return t}function vh(e){if(typeof e=="string"){let t=e.match(/^(pct|pixel|percent)?:?([0-9,\s]+)/);if(t)return vh({type:"FragmentSelector",value:`xywh=${t[1]?t[1]==="pixel"?"pixel:":"percent:":""}${t[2]}`})}return e?_l(e):void 0}function gy(e){return e?Array.isArray(e)?e:e.indexOf(",")!==-1?e.split(",").map(t=>t.trim()):[e]:[]}function JT(e){let t=gy(e),i=[];for(let n of t){let[s,a]=n.split("#");if(a){let l=a.match(/opacity=([01]?\.[0-9]+)/);if(l){let c=parseFloat(l[1]);if(c<1&&c>=0){i.push({id:s,opacity:c});continue}}}i.push({id:s})}return i}function dt(e,t){return typeof e>"u"?t:typeof e=="string"?e.toLowerCase()==="true":t?typeof e>"u"?t:!1:e}function kn(e,t){return typeof e>"u"||e===null||e===""?t:(typeof e=="string"&&(e=parseInt(""+e,10)),typeof e<"u"&&!Number.isNaN(e)?e:t)}function Al(e){if(!e)return null;if(typeof e=="string"&&e.startsWith("http"))return{type:"remote-content-state",id:e};try{return zs(typeof e=="string"?kl(e):e)}catch{return null}}var eP=class{constructor(e,t){this._className="",this.onChange=e||(()=>{}),this.className=Array.isArray(t)?t.join(" "):t||""}set className(e){this._className=e}get className(){return this._className}add(e){this.className.split(" ").includes(e.trim())||(this.className+=" "+e.trim())}remove(e){this.className=this.className.split(" ").filter(t=>t&&t!==e).join(" ")}toggle(e,t){let i=this.className.split(" ");t&&!i.includes(e)&&(this.className+=" "+e.trim())}contains(e){return this.className.split(" ").includes(e.trim())}getClassName(){return this.className}};function yh(e){return{addEventListener(t,i,n,s){if(t)return e.setMetaValue([t.id,"eventManager",i],a=>{let l=a||[];for(let c of l)if(c.callback===n)return l;return[...l,{callback:n,scope:s}]}),n},removeEventListener(t,i,n){!t||e.setMetaValue([t.id,"eventManager",i],s=>(s||[]).filter(a=>a.callback!==n))},getListenersAsProps(t,i){let n=typeof t=="string"?{id:t}:t;if(!n||!n.id)return{};let s=e.getResourceMeta(n.id,"eventManager"),a={};if(s&&n)for(let l of Object.keys(s))a[l]=c=>{let h=e.get(n);for(let{callback:m,scope:f}of s[l]||[])(!f||i&&f.indexOf(i)!==-1)&&m(c,h)};return a}}}function bh(e){return{applyStyles(t,i,n){let s=typeof t=="string"?t:t.id;return e.setMetaValue([s,"styles",i],n)},getAppliedStyles(t){let i=typeof t=="string"?t:t.id;return e.getResourceMeta(i,"styles")}}}function Gr(e){return e.endsWith("info.json")?e:e.endsWith("/")?`${e}info.json`:`${e}/info.json`}var tP="http://library.stanford.edu/iiif/image-api/compliance.html#level0",my="http://library.stanford.edu/iiif/image-api/compliance.html#level1",vy="http://library.stanford.edu/iiif/image-api/compliance.html#level2",iP="http://library.stanford.edu/iiif/image-api/conformance.html#level0",yy="http://library.stanford.edu/iiif/image-api/conformance.html#level1",by="http://library.stanford.edu/iiif/image-api/conformance.html#level2",nP="http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level0",wy="http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level1",xy="http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level2",rP="http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level0",_y="http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level1",Sy="http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level2",sP="http://iiif.io/api/image/1/level0.json",oP="http://iiif.io/api/image/1/profiles/level0.json",Ey="http://iiif.io/api/image/1/level1.json",Cy="http://iiif.io/api/image/1/profiles/level1.json",ky="http://iiif.io/api/image/1/level2.json",Ay="http://iiif.io/api/image/1/profiles/level2.json",aP="http://iiif.io/api/image/2/level0.json",lP="http://iiif.io/api/image/2/profiles/level0.json",Ty="http://iiif.io/api/image/2/level1.json",Py="http://iiif.io/api/image/2/profiles/level1.json",Ry="http://iiif.io/api/image/2/level2.json",Oy="http://iiif.io/api/image/2/profiles/level2.json",uP="level0",Iy="level1",Ly="level2",cP="http://iiif.io/api/image/2/level0",$y="http://iiif.io/api/image/2/level1",Ny="http://iiif.io/api/image/2/level2",My=[Ny,vy,by,xy,Sy,ky,Ay,Ry,Oy,Ly],Fy=[...My,$y,my,yy,wy,_y,Ey,Cy,Ty,Py,Iy],hP=[cP,$y,Ny,tP,my,vy,iP,yy,by,nP,wy,xy,rP,_y,Sy,sP,oP,Ey,Cy,ky,Ay,aP,lP,Ty,Py,Ry,Oy,uP,Iy,Ly],dP={extraFormats:["jpg"],extraQualities:["default"],extraFeatures:["sizeByWhListed"]},pP={extraFormats:["jpg"],extraQualities:["default"],extraFeatures:["baseUriRedirect","cors","jsonldMediaType","regionByPx","regionSquare","sizeByWhListed","sizeByH","sizeByW","sizeByWh"]},fP={extraFormats:["jpg","png"],extraQualities:["default"],extraFeatures:["baseUriRedirect","cors","jsonldMediaType","regionByPct","regionByPx","regionSquare","rotationBy90s","sizeByWhListed","sizeByConfinedWh","sizeByH","sizeByPct","sizeByW","sizeByWh"]};function gP(e){return My.indexOf(e)!==-1?fP:Fy.indexOf(e)!==-1?pP:dP}function mP(e){let t=e?Array.isArray(e.profile)?e.profile:[e.profile]:[],i={extraQualities:[],extraFormats:[],extraFeatures:[]};for(let n of t)if(typeof n=="string"&&(n=gP(n)),!!n){if(n.formats)for(let s of n.formats)i.extraFormats.indexOf(s)===-1&&i.extraFormats.push(s);if(n.qualities)for(let s of n.qualities)i.extraQualities.indexOf(s)===-1&&i.extraQualities.push(s);if(n.supports)for(let s of n.supports)i.extraFeatures.indexOf(s)===-1&&i.extraFeatures.push(s);if(n.maxHeight&&(i.maxHeight=n.maxHeight),n.maxWidth&&(i.maxWidth=n.maxWidth),n.maxArea&&(i.maxArea=n.maxArea),n.extraFormats)for(let s of n.extraFormats)i.extraFormats.indexOf(s)===-1&&i.extraFormats.push(s);if(n.extraQualities)for(let s of n.extraQualities)i.extraQualities.indexOf(s)===-1&&i.extraQualities.push(s);if(n.extraFeatures)for(let s of n.extraFeatures)i.extraFeatures.indexOf(s)===-1&&i.extraFeatures.push(s);n.maxHeight&&(i.maxHeight=n.maxHeight),n.maxWidth&&(i.maxWidth=n.maxWidth),n.maxArea&&(i.maxArea=n.maxArea)}if(e.extraFormats)for(let n of e.extraFormats)i.extraFormats.indexOf(n)===-1&&i.extraFormats.push(n);if(e.extraFeatures)for(let n of e.extraFeatures)i.extraFeatures.indexOf(n)===-1&&i.extraFeatures.push(n);if(e.extraQualities)for(let n of e.extraQualities)i.extraQualities.indexOf(n)===-1&&i.extraQualities.push(n);return i}function vP(e){try{if(e==="full")return{full:!0};if(e==="square")return{square:!0};let t=e.startsWith("pct:"),i=e.substr(t?4:0).split(",").map(n=>parseFloat(n));return{x:i[0],y:i[1],w:i[2],h:i[3],percent:t}}catch{throw new Error("Expected 'full', 'square' or 'x,y,w,h'. Found "+e)}}function yP(e){let t={upscaled:!1,max:!1,confined:!1};if(e[0]==="^"&&(t.upscaled=!0,e=e.slice(1)),e==="max"||e==="full")return t.max=!0,t.serialiseAsFull=e==="full",t;if(e[0]==="!"&&(t.confined=!0,e=e.slice(1)),e[0]==="p")return t.percentScale=parseFloat(e.slice(4)),t;let i=e.split(",").map(n=>n.trim());return i.length&&(i[0]!==""&&(t.width=parseInt(i[0],10)),i[1]!==""&&(t.height=parseInt(i[1],10))),t}function bP(e){let t={angle:0};if(e[0]==="!"&&(t.mirror=!0,e=e.substr(1)),t.angle=parseFloat(e)%360,Number.isNaN(t.angle))throw new Error(`Invalid rotation ${e}`);return t}function wP(e,t=""){let i=e.match(/^(([a-zA-Z]+):\/\/([^/]+))?((.*)+)/);if(!i)throw new Error(`Invalid or unknown input ${e}`);let n=i[2],s=i[3],a=i[4];if(a[0]==="/"&&(a=a.substr(1)),t.length>0){if(t[0]==="/"&&(t=t.substr(1)),t!==a.substr(0,t.length))throw new Error(`Path does not start with prefix (path: ${a}, prefix: ${t})`);a=a.substr(t.length)}return{scheme:n,server:s,path:a,prefix:t}}function xP(e,t=""){let{path:i,scheme:n,server:s,prefix:a}=wP(e,t),l=i.split("/").reverse(),[c,h,m,f,...y]=l,S=y.reverse().filter(Boolean).join("/");if(l.length===1||c==="")return{type:"base",scheme:n,server:s,prefix:a,identifier:S};if(c==="info.json"){let[,..._]=l;return{type:"info",scheme:n,server:s,prefix:a,identifier:_.reverse().filter(Boolean).join("/")}}let C=c.split(".");return{type:"image",scheme:n,server:s,prefix:a,identifier:S,originalPath:i,region:vP(f),size:yP(m),rotation:bP(h),quality:C[0],format:C[1]}}function _P(e){let t=xP(Gr(e.id));if(t.type!=="info")throw new Error("Invalid service URL");let i=mP(e);return{identifier:t.identifier,originalPath:"",server:t.server,prefix:t.prefix,scheme:t.scheme,type:"image",quality:i.extraQualities.indexOf("default")===-1?i.extraQualities[0]:"default",region:{full:!0},size:{max:!0,upscaled:!1,confined:!1},format:"jpg",rotation:{angle:0}}}function SP(e,t,i){let n=i.length,s=[];for(let a=0;a<n;a++){let l=i[a].width;s.push(e/l)}return s}function EP(e,t,i){let n=i.length,s=[];for(let a=0;a<n;a++){let l=i[a];s.push({width:Math.floor(e/l),height:Math.floor(t/l)})}return s}function Wt(e){if(e["@id"])return e["@id"];if(e.id)return e.id}function wh(e){if(!e||!e.profile||!Wt(e))return!1;let t=Array.isArray(e.profile)?e.profile:[e.profile];for(let i of t)if(typeof i=="string"&&hP.indexOf(i)!==-1)return!0;return!1}function CP(e){if(!wh(e))return!1;let t=Array.isArray(e.profile)?e.profile:[e.profile];for(let i of t)if(typeof i=="string"){if(Fy.indexOf(i)!==-1)return!0}else{let n=[...i.supports||[],...i.extraFeatures||[]];if(n.indexOf("regionByPx")!==-1&&(n.indexOf("sizeByW")!==-1||n.indexOf("sizeByWh")!==-1))return!0}return!1}function kP(e){if(!CP(e))return[];let t=[],i=Array.isArray(e.profile)?e.profile:[e.profile],n=i.length;for(let s=0;s<n;s++){let a=i[s];if(typeof a!="string"&&(a.maxHeight||a.maxWidth))return[{id:Wt(e),type:"variable",minWidth:0,minHeight:0,maxHeight:a.maxHeight||a.maxWidth,maxWidth:a.maxWidth||a.maxHeight}]}if(e.tiles){let s=e.tiles.length;for(let a=0;a<s;a++){let l=e.tiles[a];(l.height||l.width)&&t.push({id:Wt(e),type:"variable",minHeight:0,minWidth:0,maxHeight:l.height||l.width,maxWidth:l.width})}}return t}function zy(e){let t=/^.*\/(full)\/(((\d+),(\d+)?)|max)\/(\d+)\/default\.(jpg|png|jpeg)$/,i=e.match(t);if(i){let n=i[1],s=parseInt(i[4],10),a=parseInt(i[5],10),l=i[7];if((n==="max"||n==="full")&&s&&a&&l)return{type:"fixed",id:e,height:a,width:s}}return{type:"unknown",id:e}}function AP(e){if(e["@type"])return e["@type"];if(e.type)return e.type}function xh(e){if(typeof e=="string")return zy(e);let t=AP(e);if(t!=="Image"&&t!=="sc:Image")return null;let i=e,n=Wt(i);return n?n&&i.width&&i.height?{id:n,type:"fixed",width:i.width,height:i.height,unsafe:!0}:zy(n):null}function TP(e){return wh(e)?(e&&e.sizes?e.sizes:[]).map(t=>({id:Wt(e),type:"fixed-service",height:t.height,width:t.width})):[]}function By(e){let t=[],i=e.length;for(let n=0;n<i;n++){let s=TP(e[n]);s.length&&t.push(...s);let a=kP(e[n]);a.length&&t.push(...a)}return t}function jy(e){let t=e.service?Array.isArray(e.service)?e.service:[e.service]:[],i=t.length,n=[];for(let s=0;s<i;s++)wh(t[s])&&n.push(t[s]);return n}function PP(e,t=!0,i){let n=[],s=xh(e);if(s===null)return n;let a=e;if(n.push(s),t&&a.width&&a.height){let l=[],c=jy(a);for(let h of c){let m={id:Wt(h),width:a.width,height:a.height};if(i.canLoadSync(m)){let f=i.loadServiceSync(m);f&&(f.height||(f.height=a.height),f.width||(f.width=a.width),l.push(...By([f])))}}if(l.length)return n.push(...l),n}return a.service&&n.push(...By(a.service)),n}function RP({x:e=0,y:t=0,w:i,h:n,full:s,square:a,percent:l}){if(s)return"full";if(a)return"square";if(typeof i>"u"||typeof n>"u")throw new Error("RegionParameter: invalid region");let c=`${e},${t},${i},${n}`;return l?`pct:${c}`:c}function OP({max:e,percentScale:t,upscaled:i,confined:n,width:s,height:a,serialiseAsFull:l}){let c=[];return i&&c.push("^"),e?(c.push(l?"full":"max"),c.join("")):(n&&c.push("!"),t&&c.push(`pct:${t}`),s&&c.push(`${s}`),c.push(","),a&&c.push(`${a}`),c.join(""))}function IP(e){return`${e.mirror?"!":""}${(e.angle||0)%360}`}var LP=Object.defineProperty,$P=Object.defineProperties,NP=Object.getOwnPropertyDescriptors,Dy=Object.getOwnPropertySymbols,MP=Object.prototype.hasOwnProperty,FP=Object.prototype.propertyIsEnumerable,Uy=(e,t,i)=>t in e?LP(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,Lo=(e,t)=>{for(var i in t||(t={}))MP.call(t,i)&&Uy(e,i,t[i]);if(Dy)for(var i of Dy(t))FP.call(t,i)&&Uy(e,i,t[i]);return e},$o=(e,t)=>$P(e,NP(t));function zP(e,t){let i=e.prefix.startsWith("/")?e.prefix.substr(1):e.prefix,n=`${e.scheme}://${e.server}/${i?`${i}/`:""}${e.identifier}`;if(e.type==="base")return n;if(e.type==="info")return`${n}/info.json`;let{region:s,size:a,rotation:l,format:c,quality:h}=e;if(t){let m=t["@context"]?Array.isArray(t["@context"])?t["@context"]:[t["@context"]]:[],f=m.indexOf("http://iiif.io/api/image/2/context.json")!==-1,y=m.indexOf("http://iiif.io/api/image/3/context.json")!==-1;if((a.width===t.width&&!a.height||a.height===t.height&&!a.width||a.width===t.width&&a.height===t.height)&&(a=$o(Lo({},a),{max:!0})),f&&(a.max&&!a.serialiseAsFull&&(a=$o(Lo({},a),{serialiseAsFull:!0})),!a.max&&a.width&&a.height&&(a=$o(Lo({},a),{height:void 0}))),y&&(a.max&&a.serialiseAsFull&&(a=$o(Lo({},a),{serialiseAsFull:!1})),a.width&&!a.height&&t.width&&t.height)){let S=t.height/t.width;a=$o(Lo({},a),{height:Math.ceil(a.width*S)})}}return[n,RP(s),OP(a),IP(l),`${h}.${c}`].filter(Boolean).join("/")}function _h(e,t,i){let n=_P({id:Gr(Wt(e)),profile:"level2",type:"ImageService2"});if(n.type!=="image")throw new Error("Invalid service");return n.size.max=!1,n.size.width=t,n.size.height=i,{id:zP(n),type:"fixed",width:t,height:i||e.height/(e.width||1)*t,unsafe:e.width>t}}function Bs(e){let t=e.replace(/(https?:\/\/)?(www.)?/i,"");return t.indexOf("/")!==-1?t.split("/")[0]:t}function BP(e,t,i){let n=e.width?e.width:e.maxWidth;return i.height<=e.maxHeight&&i.width<=e.maxWidth&&i.height>=e.minHeight&&i.width>=e.minWidth&&(!t||Math.abs(i.width-n)<Math.abs(t.width-n))}function jP(e,t){let i=[],n=Object.assign({unsafeImageService:!1,atAnyCost:!0,fallback:!0,minHeight:64,minWidth:64,maxHeight:1/0,maxWidth:1/0,returnAllOptions:!1,preferFixedSize:!1,allowUnsafe:!1,explain:!1,height:0,width:0},e),s=[],a=[],l=null,c=(m,f)=>{if(BP(n,f,m)){if(n.preferFixedSize&&m.unsafe){a.push(m);return}n.returnAllOptions&&f&&a.push(f),l=m}else n.returnAllOptions&&a.push(m)},h=t.length;for(let m=0;m<h;m++){let f=t[m](),y=f.length;for(let S=0;S<y;S++){let C=f[S];if(C.type==="unknown"&&n.atAnyCost&&s.push(C),C.type==="fixed"&&(C.unsafe?s.push(C):c(C,l)),C.type==="fixed-service")if(n.unsafeImageService){let _=_h(C,n.width,n.height);c(_,l)}else{let _=_h(C,C.width,C.height);c(_,l)}if(C.type==="variable"&&C.maxWidth){let _=_h({id:C.id,type:"fixed-service",width:C.maxWidth,height:C.maxWidth},C.maxWidth);c(_,l)}}if(l&&!n.returnAllOptions){if(l.unsafe||n.allowUnsafe)continue;break}}return n.atAnyCost&&a.length===0?{best:l||s[0],fallback:s.slice(1),log:i}:n.returnAllOptions?{best:n.atAnyCost?l||a[0]||s[0]:l||a[0],fallback:[...a,...s],log:i}:{best:l||a[0]||null,fallback:l?a:a.slice(1),log:i}}var DP=Object.defineProperty,UP=Object.defineProperties,WP=Object.getOwnPropertyDescriptors,Wy=Object.getOwnPropertySymbols,HP=Object.prototype.hasOwnProperty,qP=Object.prototype.propertyIsEnumerable,Hy=(e,t,i)=>t in e?DP(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,QP=(e,t)=>{for(var i in t||(t={}))HP.call(t,i)&&Hy(e,i,t[i]);if(Wy)for(var i of Wy(t))qP.call(t,i)&&Hy(e,i,t[i]);return e},VP=(e,t)=>UP(e,WP(t));function GP(e,t,i){let n=e>t?e:t,s=i.length,a=[];for(let l=0;l<s;l++){let c=i[l],h=c.scaleFactors[0],m=n/h,f=[h];for(;m>=c.width;)h=h*2,f.push(h),m=m/2;a.push(VP(QP({},c),{scaleFactors:f}))}return a}function YP(e,t){if(e.length!==t.length)return!1;if(e.length===0&&t.length===0)return!0;let i=e.length,n=!0;for(let a=0;a<i;a++){let l=e[a],c=t[a];if(l.width!==c.width||l.height!==c.height){n=!1;break}}if(n)return!0;let s=0;for(let a=0;a<i;a++)for(let l=0;l<i;l++)if(e[a].width===t[l].width&&e[a].height===t[l].height){s++;break}return s===i}function qy(e){if(e&&e.profile){let t=e.profile;if(t){let i=Array.isArray(t)?t:[t];return i.includes("level0")||i.includes("http://iiif.io/api/image/2/level0.json")||i.includes("http://iiif.io/api/image/1/level0.json")||i.includes("http://iiif.io/api/image/1/profiles/level0.json")}}return!1}var Yr=(e,t,i)=>new Promise((n,s)=>{var a=h=>{try{c(i.next(h))}catch(m){s(m)}},l=h=>{try{c(i.throw(h))}catch(m){s(m)}},c=h=>h.done?n(h.value):Promise.resolve(h.value).then(a,l);c((i=i.apply(e,t)).next())}),KP=class{constructor(){this.config={verificationsRequired:1,approximateServices:!0,enableFetching:!0,disableThrottling:!1},this.fetchingCount=0,this.imageServices={},this.knownImageServers={}}setConfig(e){Object.assign(this.config,e)}sample(e,t,i=!0){let n=Bs(Wt(e)),s=Gr(Wt(e)),a=this.knownImageServers[n];return this.imageServices[s]=Object.assign(e,{real:!0}),!a&&e.tiles&&!qy(e)?(this.knownImageServers[n]={verifications:0,malformed:!1,root:n,preLoaded:i,sampledId:Wt(e),verified:!1,server:null,result:{context:e["@context"]||[],sampledProfile:e.profile,resourceServiceRatio:t&&e.height?t.height/e.height:1,sampledSizes:e.sizes||[],sizeRatios:SP(e.width,e.height,e.sizes||[]),sampledTiles:e.tiles||[]}},!0):this.verify(e)}preLoad(e,t=!0){this.knownImageServers[e.root]=e,t&&(this.knownImageServers[e.root].malformed=!1,this.knownImageServers[e.root].verifications=this.config.verificationsRequired)}predict(e,t=!1,i=!1){let n=e==null?void 0:e.source,s=Bs(Wt(e)),a=this.knownImageServers[s];if(!a||!a.result||!i&&(a.malformed||a.verifications<this.config.verificationsRequired)||qy(e.source))return null;let l=Gr(Wt(e));return this.imageServices[l]||(this.imageServices[l]={"@context":a.result.context,"@id":Wt(e),id:Wt(e),protocol:"http://iiif.io/api/image",tiles:(n==null?void 0:n.tiles)||GP(e.width,e.height,a.result.sampledTiles),sizes:(n==null?void 0:n.sizes)||EP(Math.round(e.width/a.result.resourceServiceRatio),Math.round(e.height/a.result.resourceServiceRatio),a.result.sizeRatios),profile:(n==null?void 0:n.profile)||a.result.sampledProfile,height:(n==null?void 0:n.height)||e.height,width:(n==null?void 0:n.width)||e.width,real:!1}),this.imageServices[l]}getThumbnailFromResource(e,t){return Yr(this,arguments,function*(i,n,s=!0,a=[]){let l=yield this.getImageCandidates(i,s);return jP(n,[()=>a,()=>l])})}getImageCandidates(e,t=!0){return Yr(this,null,function*(){let i=e;if(t&&i.height&&i.width){let n=jy(i);for(let s of n){let a={id:Wt(s),width:s.width?s.width:i.width,height:s.height?s.height:i.height,source:s};yield this.loadService(a)}}return PP(e,t,this)})}verify(e){return Yr(this,null,function*(){let t=this.predict(e,!1,!0),i=yield this.fetchService(Wt(e));if(!t)return!1;let n=t.height===i.height&&t.width===i.width&&t["@context"]===i["@context"]&&YP(t.sizes||[],i.sizes||[]);if(n){let s=Bs(Wt(e));this.knownImageServers[s].verifications+=1,this.knownImageServers[s].verifications>=this.config.verificationsRequired&&(this.knownImageServers[s].verified=!0)}return n})}canLoadSync(e){let t=typeof e=="string"?e:Wt(e),i=Gr(t);if(this.imageServices[i])return!0;let n=this.knownImageServers[Bs(t)];return n&&!n.malformed&&n.verifications>=this.config.verificationsRequired}markAsMalformed(e){return Yr(this,null,function*(){return this.knownImageServers[Bs(Wt(e))].malformed=!0,this.loadService(e,!0)})}fetchService(e,t=!1){return Yr(this,null,function*(){let i=Gr(e);if(this.imageServices[i]&&(!t||this.imageServices[i].real))return this.imageServices[i];if(!this.config.enableFetching)throw new Error("Fetching is not enabled");let n=yield this.fetch(i).then(s=>s.json());return!n.id&&n["@id"]&&(n.id=n["@id"]),n.id!==e&&(n.id=e,n["@id"]&&(n["@id"]=e)),this.imageServices[i]=Object.assign(n,{real:!0}),this.imageServices[i]})}fetch(e,t){return Yr(this,null,function*(){return fetch(e,t)})}loadService(e,t=!1){return Yr(this,null,function*(){if(!this.config.disableThrottling){let s=!0;for(;s;)if(this.fetchingCount>=this.config.verificationsRequired)yield new Promise(a=>setTimeout(a,500));else{s=!1;break}}let i=this.knownImageServers[Bs(Wt(e))];if(i&&!i.malformed&&!t){yield i.result;let s=this.loadServiceSync(e);if(s)return s}this.fetchingCount++;let n=yield this.fetchService(Wt(e),t);return this.fetchingCount--,n.real&&this.sample(n,e),n})}loadServiceSync(e){let t=Gr(Wt(e));return this.imageServices[t]?this.imageServices[t]:this.predict(e)}};function XP(e,t={}){let i=t.imageServiceLoader||new KP;async function n(s,a,l,c=[],h){if(typeof s=="string")return{best:xh(s),fallback:[],log:[]};let m=e.get(s);if(typeof m=="string")return{best:xh(m),fallback:[],log:[]};switch(m.type){case"Annotation":{let f=m.body,y=e.get(f[0]);return h&&!y.width&&(y.width=h.width,y.height=h.height),await i.getThumbnailFromResource(y,a,l,c)}case"Canvas":{let f=m;if(f.thumbnail&&f.thumbnail.length){let y=e.get(f.thumbnail[0]),S=await i.getImageCandidates(y,l);S&&S.length&&c.push(...S)}return n(f.items[0],a,l,c,{width:f.width,height:f.height})}case"AnnotationPage":return n(m.items[0],a,l,c,h);case"Choice":return n(m.items[0],a,l,c,h);case"Collection":{let f=m.items[0];return n(f,a,l,c,h)}case"Manifest":{let f=m.items[0];return n(f,a,l,c,h)}case"SpecificResource":case"Image":case"Dataset":case"Sound":case"Text":case"TextualBody":case"Video":return h&&!m.width&&(m.width=h.width,m.height=h.height),i.getThumbnailFromResource(m,a,l,c);case"Service":case"Range":case"AnnotationCollection":case"CanvasReference":case"ContentResource":return{best:void 0,fallback:[],log:[]}}return{best:void 0,fallback:[],log:[]}}return{getBestThumbnailAtSize:n}}function ZP(e,t,i=[],n=!1){if(!e||!t||t.length===0)return;if(t.length===1)return t[0];if(t.indexOf(e)!==-1)return e;let s=e.indexOf("-")!==-1?e.slice(0,e.indexOf("-")):null;if(s&&t.indexOf(s)!==-1)return s;for(let a of i)if(t.indexOf(a)!==-1)return a;if(!n){let a=t.map(l=>l.indexOf("-")!==-1?l.slice(0,l.indexOf("-")):null).indexOf(e);if(a!==-1)return t[a];for(let l of i){let c=l.indexOf("-")!==-1?l.slice(0,l.indexOf("-")):null,h=c?t.indexOf(c):-1;if(h!==-1)return t[h]}}return t.indexOf("none")!==-1?"none":t.indexOf("@none")!==-1?"@none":t[0]}function JP(e,t,i={}){let{strictFallback:n=!1,defaultText:s="",separator:a=`
`,fallbackLanguages:l=[],closest:c}=i,h=Object.keys(e||{}),m=c?t:ZP(t,h,l,n);if(!e)return s;if(typeof e=="string")return e;let f=m?e[m]:void 0;return f?typeof f=="string"?f:f.join(a):""}function An(e,t={}){return JP(e,typeof navigator<"u"?navigator.language:void 0,t)}var e2=function(){function e(t,i){var n=[],s=!0,a=!1,l=void 0;try{for(var c=t[Symbol.iterator](),h;!(s=(h=c.next()).done)&&(n.push(h.value),!(i&&n.length===i));s=!0);}catch(m){a=!0,l=m}finally{try{!s&&c.return&&c.return()}finally{if(a)throw l}}return n}return function(t,i){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),No=Math.PI*2,Sh=function(e,t,i,n,s,a,l){var c=e.x,h=e.y;c*=t,h*=i;var m=n*c-s*h,f=s*c+n*h;return{x:m+a,y:f+l}},t2=function(e,t){var i=t===1.5707963267948966?.551915024494:t===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(t/4),n=Math.cos(e),s=Math.sin(e),a=Math.cos(e+t),l=Math.sin(e+t);return[{x:n-s*i,y:s+n*i},{x:a+l*i,y:l-a*i},{x:a,y:l}]},Qy=function(e,t,i,n){var s=e*n-t*i<0?-1:1,a=e*i+t*n;return a>1&&(a=1),a<-1&&(a=-1),s*Math.acos(a)},i2=function(e,t,i,n,s,a,l,c,h,m,f,y){var S=Math.pow(s,2),C=Math.pow(a,2),_=Math.pow(f,2),P=Math.pow(y,2),I=S*C-S*P-C*_;I<0&&(I=0),I/=S*P+C*_,I=Math.sqrt(I)*(l===c?-1:1);var L=I*s/a*y,E=I*-a/s*f,N=m*L-h*E+(e+i)/2,F=h*L+m*E+(t+n)/2,U=(f-L)/s,q=(y-E)/a,G=(-f-L)/s,V=(-y-E)/a,ae=Qy(1,0,U,q),W=Qy(U,q,G,V);return c===0&&W>0&&(W-=No),c===1&&W<0&&(W+=No),[N,F,ae,W]},n2=function(e){var t=e.px,i=e.py,n=e.cx,s=e.cy,a=e.rx,l=e.ry,c=e.xAxisRotation,h=c===void 0?0:c,m=e.largeArcFlag,f=m===void 0?0:m,y=e.sweepFlag,S=y===void 0?0:y,C=[];if(a===0||l===0)return[];var _=Math.sin(h*No/360),P=Math.cos(h*No/360),I=P*(t-n)/2+_*(i-s)/2,L=-_*(t-n)/2+P*(i-s)/2;if(I===0&&L===0)return[];a=Math.abs(a),l=Math.abs(l);var E=Math.pow(I,2)/Math.pow(a,2)+Math.pow(L,2)/Math.pow(l,2);E>1&&(a*=Math.sqrt(E),l*=Math.sqrt(E));var N=i2(t,i,n,s,a,l,f,S,_,P,I,L),F=e2(N,4),U=F[0],q=F[1],G=F[2],V=F[3],ae=Math.abs(V)/(No/4);Math.abs(1-ae)<1e-7&&(ae=1);var W=Math.max(Math.ceil(ae),1);V/=W;for(var se=0;se<W;se++)C.push(t2(G,V)),G+=V;return C.map(function(pe){var ue=Sh(pe[0],a,l,P,_,U,q),we=ue.x,he=ue.y,_e=Sh(pe[1],a,l,P,_,U,q),et=_e.x,J=_e.y,ke=Sh(pe[2],a,l,P,_,U,q),Ie=ke.x,Ve=ke.y;return{x1:we,y1:he,x2:et,y2:J,x:Ie,y:Ve}})},r2=o2,Eh={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},s2=/([astvzqmhlc])([^astvzqmhlc]*)/ig;function o2(e){var t=[];return e.replace(s2,function(i,n,s){var a=n.toLowerCase();for(s=l2(s),a=="m"&&s.length>2&&(t.push([n].concat(s.splice(0,2))),a="l",n=n=="m"?"l":"L");;){if(s.length==Eh[a])return s.unshift(n),t.push(s);if(s.length<Eh[a])throw new Error("malformed path data");t.push([n].concat(s.splice(0,Eh[a])))}}),t}var a2=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig;function l2(e){var t=e.match(a2);return t?t.map(Number):[]}var u2=c2;function c2(e){var t=0,i=0,n=0,s=0;return e.map(function(a){a=a.slice();var l=a[0],c=l.toUpperCase();if(l!=c)switch(a[0]=c,l){case"a":a[6]+=n,a[7]+=s;break;case"v":a[1]+=s;break;case"h":a[1]+=n;break;default:for(var h=1;h<a.length;)a[h++]+=n,a[h++]+=s}switch(c){case"Z":n=t,s=i;break;case"H":n=a[1];break;case"V":s=a[1];break;case"M":n=t=a[1],s=i=a[2];break;default:n=a[a.length-2],s=a[a.length-1]}return a})}function h2(e){let t=r2(e),i=u2(t),n,s=0,a=0,l=0,c=0,h,m,f=0,y=0,S=[];for(let C=0;C<i.length;C++){let _=i[C],P=_[0];switch(P){case"M":s=_[1],a=_[2];break;case"H":_=["L",_[1],a];break;case"V":_=["L",s,_[1]];break;case"S":{let I=f,L=y;(n==="C"||n=="S")&&(I+=I-l,L+=L-c),_=["C",I,L,_[1],_[2],_[3],_[4]]}break;case"T":n==="Q"||n=="T"?(h=f*2-h,m=y*2-m):(h=f,m=y),_=["Q",h,m,_[1],_[2]];break;case"Q":h=_[1],m=_[2];break;case"A":{let I=n2({px:f,py:y,cx:_[6],cy:_[7],rx:_[1],ry:_[2],xAxisRotation:_[3],largeArcFlag:_[4],sweepFlag:_[5]});if(!I.length)continue;for(let[L,E]of I.entries())_=["C",E.x1,E.y1,E.x2,E.y2,E.x,E.y],L<I.length-1&&S.push(_);_=_}break;case"Z":_=["L",s,a];break}n=P,f=_[_.length-2],y=_[_.length-1],["C","Q","A"].indexOf(P)>-1?(l=_[_.length-4],c=_[_.length-3]):(l=f,c=y),S.push(_)}return S}function d2(e,t,i,n=1){return new Vy(e,t,i).subdivide(n)}function p2(e,t,i,n,s=1){return new Gy(new Float64Array([e.x,e.y,t.x,t.y,i.x,i.y,n.x,n.y])).subdivide(s)}function f2(e){return e.x*e.x+e.y*e.y}function Mo(e){return e/(1-.67+Math.pow(Math.pow(.67,4)+.25*e*e,.25))}function js(e){return e*(1-.39+Math.sqrt(.39*.39+.25*e*e))}var Vy=class{constructor(e,t,i){this.start=e,this.control=t,this.end=i}eval(e){let t=1-e;return{x:this.start.x*t*t+2*this.control.x*t*e+this.end.x*e*e,y:this.start.y*t*t+2*this.control.y*t*e+this.end.y*e*e}}mapToBasic(){let{x:e,y:t}=this.start,{x:i,y:n}=this.control,{x:s,y:a}=this.end,l=2*i-e-s,c=2*n-t-a,h=(i-e)*l+(n-t)*c,m=(s-i)*l+(a-n)*c,f=(s-e)*c-(a-t)*l,y=h/f,S=m/f,C=Math.abs(f)/(Math.hypot(l,c)*Math.abs(S-y));return{x0:e,x2:s,scale:C,cross:f}}subdivide(e){let t=this.mapToBasic(),i=Mo(t.x0),n=Mo(t.x2),s=.5*Math.abs(n-i)*Math.sqrt(t.scale/e),a=Math.ceil(s),l=js(i),c=js(n),h=[0];for(let m=1;m<a;m++){let f=(js(i+(n-i)*m/a)-l)/(c-l);h.push(f)}return h.push(1),h.map(m=>this.eval(m))}},Gy=class{constructor(e){this.c=e}weightsum(e,t,i,n){let s=e*this.c[0]+t*this.c[2]+i*this.c[4]+n*this.c[6],a=e*this.c[1]+t*this.c[3]+i*this.c[5]+n*this.c[7];return{x:s,y:a}}eval(e){let t=1-e,i=t*t*t,n=3*t*t*e,s=3*t*e*e,a=e*e*e;return this.weightsum(i,n,s,a)}deriv(e){let t=1-e,i=-3*t*t,n=3*e*e,s=-6*e*t-i,a=6*e*t-n;return this.weightsum(i,s,a,n)}midpoint_quadbez(){let e=this.weightsum(-.25,.75,.75,-.25);return new Vy({x:this.c[0],y:this.c[1]},e,{x:this.c[6],y:this.c[7]})}subsegment(e,t){let i=new Float64Array(8),n=this.eval(e),s=this.eval(t);i[0]=n.x,i[1]=n.y;let a=(t-e)/3,l=this.deriv(e);i[2]=n.x+a*l.x,i[3]=n.y+a*l.y;let c=this.deriv(t);return i[4]=s.x-a*c.x,i[5]=s.y-a*c.y,i[6]=s.x,i[7]=s.y,new Gy(i)}subdivide(e){let t=.1*e,i=e-t,n=Math.sqrt(i),s=f2(this.weightsum(1,-3,3,-1)),a=Math.ceil(Math.pow(s/(432*t*t),1/6)),l=[],c=0;for(let C=0;C<a;C++){let _=C/a,P=(C+1)/a,I=this.subsegment(_,P).midpoint_quadbez(),L=I.mapToBasic(),E=Mo(L.x0),N=Mo(L.x2),F=Math.sqrt(L.scale),U=Math.abs(N-E)*F;if(Math.sign(L.x0)!=Math.sign(L.x2)){let q=n/F,G=n*Math.abs(N-E)/Mo(q);U=Math.max(U,G)}l.push({quad:I,a0:E,a2:N,val:U}),c+=U}let h=.5*c/n,m=Math.ceil(h),f=[{x:this.c[0],y:this.c[1]}],y=0,S=0;for(let C=1;C<m;C++){let _=c*C/m;for(;y+l[S].val<_;)y+=l[S].val,S++;let P=l[S].a0,I=l[S].a2,L=js(P),E=js(I),N=P+(I-P)*(_-y)/l[S].val,F=(js(N)-L)/(E-L);f.push(l[S].quad.eval(F))}return f.push({x:this.c[6],y:this.c[7]}),f}},g2=/&?(xywh=)?(pixel:|percent:|pct:)?([0-9]+(?:\.[0-9]+)?),([0-9]+(?:\.[0-9]+)?),([0-9]+(?:\.[0-9]+)?),([0-9]+(?:\.[0-9]+)?)/,m2=/&?(t=)(npt:)?([0-9]+(.[0-9]+)?)?(,([0-9]+(.[0-9]+)?))?/,Yy=/^rgba\((\d+),(\d+),(\d+),([0-9.]+)\)$/;function Ch(e,{domParser:t,svgPreprocessor:i}={}){var n,s;if(Array.isArray(e))return e.reduce((a,l)=>{let{selector:c,selectors:h}=Ch(l);return c&&(a.selector||(a.selector=c),a.selectors.push(...h)),a},{selector:null,selectors:[]});if(!e)return{selector:null,selectors:[]};if(typeof e=="string"){let[a,l]=e.split("#");return l?Ch({type:"FragmentSelector",value:l}):{selector:null,selectors:[]}}if(e.type==="PointSelector"&&(e.t||e.t===0)){let a={type:"TemporalSelector",temporal:{startTime:e.t}};return{selector:a,selectors:[a]}}if(e.type==="FragmentSelector"){let a=g2.exec(e.value);if(a){let c={type:"BoxSelector",spatial:{unit:a[2]==="percent:"||a[2]==="pct:"?"percent":"pixel",x:parseFloat(a[3]),y:parseFloat(a[4]),width:parseFloat(a[5]),height:parseFloat(a[6])}};return{selector:c,selectors:[c]}}let l=e.value.match(m2);if(l){let c={type:"TemporalSelector",temporal:{startTime:l[4]?parseFloat(l[4]):0,endTime:l[7]?parseFloat(l[7]):void 0}};return{selector:c,selectors:[c]}}return{selector:null,selectors:[]}}if(e.type==="SvgSelector"&&"value"in e){t||(typeof window<"u"?t=new window.DOMParser:console.warn("No DOMParser available, cannot parse SVG selector, `points`, `spatial` and `style` will be unavailable and the SVG will not be normalized."));let a=[],l,c,h=(n=i==null?void 0:i(e.value))!=null?n:e.value,m;if(t){let y=t.parseFromString(e.value,"image/svg+xml").querySelector("svg");if(!y)return console.warn(`Illegal SVG selector: ${e.value}`),{selector:null,selectors:[]};let S=Ky(y);S&&(a=S.points,m=S.shapeType,l=[Math.min(...a.map(C=>C[0])),Math.min(...a.map(C=>C[1])),Math.max(...a.map(C=>C[0])),Math.max(...a.map(C=>C[1]))],{style:c,svg:h}=(s=b2(S.element))!=null?s:{svg:h})}let f={type:"SvgSelector",svg:h,svgShape:m,style:c,points:a.length?a:void 0,spatial:l?{unit:"pixel",x:l[0],y:l[1],width:l[2]-l[0],height:l[3]-l[1]}:void 0};return{selector:f,selectors:[f]}}return{selector:null,selectors:[]}}function v2(e){let t=e.map(n=>n[0]).reduce((n,s)=>(n[s]+=1,n),{C:0,Q:0,L:0,M:0}),i=new Set(e.map(n=>n[0]));if(t.C>0||t.Q>0)return"path";if(t.L>0&&(i.size===1||i.size===2&&i.has("M"))){if(t.L===4)return"rect";let n=e.slice(-1)[0];return e[0][0]==="M"&&n[0]==="L"&&n[1]==e[0][1]&&n[2]===e[0][2]||n[1]===0&&n[2]===0?"polygon":"polyline"}return"path"}function Ky(e){var t,i,n,s,a,l,c,h,m,f,y,S,C,_,P,I,L;for(let E of Array.from(e.children))switch(E==null?void 0:E.tagName.toLowerCase()){case"g":{let N=Ky(E);if(N)return N}continue;case"path":{let N=E.getAttribute("d");if(!N)continue;let F=h2(N);return{element:E,points:y2(F),shapeType:v2(F)}}case"circle":{let N=parseFloat((t=E.getAttribute("cx"))!=null?t:"0"),F=parseFloat((i=E.getAttribute("cy"))!=null?i:"0"),U=parseFloat((n=E.getAttribute("r"))!=null?n:"0");if(!U)continue;let q=[];for(let G=0;G<=360;G+=12){let V=G*Math.PI/180;q.push([N+U*Math.cos(V),F+U*Math.sin(V)])}return{element:E,points:q,shapeType:"circle"}}case"ellipse":{let N=parseFloat((s=E.getAttribute("cx"))!=null?s:"0"),F=parseFloat((a=E.getAttribute("cy"))!=null?a:"0"),U=parseFloat((l=E.getAttribute("rx"))!=null?l:"0"),q=parseFloat((c=E.getAttribute("ry"))!=null?c:"0");if(!U&&!q)continue;let G=[];for(let V=0;V<=360;V+=12){let ae=Math.tan(V/360*Math.PI),W=U*(1-ae**2)/(1+ae**2),se=q*2*ae/(1+ae**2);G.push([N+W,F+se])}return{element:E,points:G,shapeType:"ellipse"}}case"line":{let N=parseFloat((h=E.getAttribute("x0"))!=null?h:"0"),F=parseFloat((m=E.getAttribute("y0"))!=null?m:"0"),U=parseFloat((f=E.getAttribute("x1"))!=null?f:"0"),q=parseFloat((y=E.getAttribute("y1"))!=null?y:"0");if(N===U&&F===q)continue;return{element:E,points:[[N,F],[U,q]],shapeType:"polyline"}}case"polygon":case"polyline":{let N=(C=(S=E.getAttribute("points"))==null?void 0:S.split(" ").map(U=>U.split(",").map(parseFloat)))!=null?C:[];if(!N.length)continue;let F="polyline";return E.tagName.toLowerCase()==="polygon"&&(N.push(N[0]),F="polygon"),{element:E,points:N,shapeType:F}}case"rect":{let N=parseFloat((_=E.getAttribute("x"))!=null?_:"0"),F=parseFloat((P=E.getAttribute("y"))!=null?P:"0"),U=parseFloat((I=E.getAttribute("width"))!=null?I:"0"),q=parseFloat((L=E.getAttribute("height"))!=null?L:"0");if(!U||!q)continue;return{element:E,points:[[N,F],[N+U,F],[N+U,F+q],[N,F+q],[N,F]],shapeType:"rect"}}default:continue}return null}function y2(e){var t;let i=[];for(let n=0;n<e.length;n++){let s=(t=i[i.length-1])!=null?t:[0,0],a=e[n];switch(a[0]){case"M":case"L":i.push([a[1],a[2]]);continue;case"C":i.push(...p2({x:s[0],y:s[1]},{x:a[1],y:a[2]},{x:a[3],y:a[4]},{x:a[5],y:a[6]}).map(l=>[l.x,l.y]).slice(1));continue;case"Q":i.push(...d2({x:s[0],y:s[1]},{x:a[1],y:a[2]},{x:a[3],y:a[4]}).map(l=>[l.x,l.y]).slice(1));continue}}return i}function b2(e){let t={};if(e.hasAttribute("fill")?(t.fill=e.getAttribute("fill"),e.removeAttribute("fill")):e.style.fill&&(t.fill=e.style.fill),t.fill){let n=Yy.exec(t.fill);n&&(t.fillOpacity=parseFloat(n[4]),t.fill=`rgb(${n[1]}, ${n[2]}, ${n[3]})`)}if(e.hasAttribute("fill-opacity")?(t.fillOpacity=parseFloat(e.getAttribute("fill-opacity")),e.removeAttribute("fill-opacity")):e.style.fillOpacity&&(t.fillOpacity=parseFloat(e.style.fillOpacity)),e.hasAttribute("stroke")?(t.stroke=e.getAttribute("stroke"),e.removeAttribute("stroke")):e.style.stroke&&(t.stroke=e.style.stroke),t.stroke){let n=Yy.exec(t.stroke);n&&(t.strokeOpacity=parseFloat(n[4]),t.stroke=`rgb(${n[1]}, ${n[2]}, ${n[3]})`)}e.hasAttribute("stroke-opacity")?(t.strokeOpacity=parseFloat(e.getAttribute("stroke-opacity")),e.removeAttribute("stroke-opacity")):e.style.strokeOpacity&&(t.strokeOpacity=parseFloat(e.style.strokeOpacity)),e.hasAttribute("stroke-width")?(t.strokeWidth=e.getAttribute("stroke-width"),e.removeAttribute("stroke-width")):e.style.strokeWidth&&(t.strokeWidth=e.style.strokeWidth),e.hasAttribute("stroke-dasharray")?(t.strokeDasharray=e.getAttribute("stroke-dasharray"),e.removeAttribute("stroke-dasharray")):e.style.strokeDasharray&&(t.strokeDasharray=e.style.strokeDasharray);let i=e;for(;i.tagName.toLowerCase()!=="svg";)if(i=i.parentElement,i===null)throw new Error("Could not find root SVG element");return{svg:i.outerHTML,style:Object.keys(t).length>0?t:void 0}}function w2(e){return e.type==="SpecificResource"?[e.source,{selector:e.selector}]:[e,{selector:null}]}function x2(e){function t(s){let a=s?typeof s=="string"?e.get(s):s:null;if(!a)return[];let l=e.get(a.items),c=[];for(let h of l)c.push(...e.get(h.items));return c}function i(s,a=[]){let l=Array.isArray(s)?s:t(s),c=[],h=null,m=[];for(let f of l){if(f.type!=="Annotation")throw new Error("getPaintables() accept either a canvas or list of annotations");let y=e.get(f.body);for(let S of y){let[C,{selector:_}]=w2(S),P=(C.type||"unknown").toLowerCase();if(P==="choice"){let I=e.get(C.items),L=a.length?a.map(E=>I.find(N=>N.id===E)).filter(Boolean):[I[0]];L.length===0&&L.push(I[0]),h={type:"single-choice",items:I.map(E=>({id:E.id,label:E.label,selected:L.indexOf(E)!==-1})),label:S.label},y.push(...L);continue}c.indexOf(P)===-1&&c.push(P),m.push({type:P,resource:C,target:f.target,selector:_})}}return{types:c,items:m,choice:h}}function n(s){let{choice:a}=i(s);return a}return{getAllPaintingAnnotations:t,getPaintables:i,extractChoices:n}}function Xy(e,t){for(let i of t.items){if(i.type==="Canvas")return i;if(i.type==="Range"){let n=Xy(e,e.get(i));if(n)return n}}return null}function _2(e,t,i){for(let n of t.structures){let s=Zy(e,e.get(n),i);if(s)return s}return null}function Zy(e,t,i){var n;for(let s of t.items){let a=(n=s.id)==null?void 0:n.split("#")[0];if(s.type==="SpecificResource"&&s.source===i||s.type==="Canvas"&&i===a)return t;if(s.type==="Range"){let l=Zy(e,e.get(s),i);if(l)return l}}return null}var S2=class{constructor(e){this.__vault=null,this.__eventsHelper=null,this.__stylesHelper=null,this.__e={},this.htmlProps={},this.handlers=[],this.__annotation=typeof e=="string"?{id:e,type:"Annotation"}:{id:e.id,type:"Annotation"},this.classList=new eP(t=>{this.__stylesHelper&&this.__stylesHelper.applyStyles(this.__annotation,"html",D(A({},this.htmlProps),{className:t}))}),this.source=e}get className(){return this.classList.getClassName()}set className(e){this.classList.className=e}set href(e){this.__stylesHelper&&this.__stylesHelper.applyStyles(this.__annotation,"html",{href:e}),this.htmlProps.href=e}set title(e){this.__stylesHelper&&this.__stylesHelper.applyStyles(this.__annotation,"html",{title:e}),this.htmlProps.title=e}set target(e){this.__stylesHelper&&this.__stylesHelper.applyStyles(this.__annotation,"html",{target:e}),this.htmlProps.target=e}applyStyle(e){this.style=nm(this.style,e),this.__stylesHelper&&this.__stylesHelper.applyStyles(this.__annotation,"atlas",this.style)}addEventListener(e,t){this.__eventsHelper&&this.__eventsHelper.addEventListener(this.__annotation,e,t),this.handlers.push([e,t])}removeEventListener(e,t){this.__eventsHelper&&this.__eventsHelper.removeEventListener(this.__annotation,e,t),this.handlers=this.handlers.filter(i=>i[0]===e&&i[1]===t)}bindToVault(e){this.__vault=e,this.__eventsHelper=yh(e),this.__stylesHelper=bh(e);for(let[t,i]of this.handlers)this.__eventsHelper.addEventListener(this.__annotation,t,i);this.__stylesHelper.applyStyles(this.__annotation,"atlas",this.style),this.__stylesHelper.applyStyles(this.__annotation,"html",D(A({},this.htmlProps),{className:this.classList.getClassName()}))}getSource(){return this.source}getAnnotation(){return this.__annotation}beforeRemove(){if(this.onBeforeRemove&&this.onBeforeRemove(),this.__vault){if(this.__eventsHelper)for(let[e,t]of this.handlers)this.__eventsHelper.removeEventListener(this.__annotation,e,t);this.__vault=null}}};qe();var mi=Be(oc(),1),Jy="@iiif/IMPORT_ENTITIES",e0="@iiif/MODIFY_ENTITY_FIELD",t0="@iiif/REORDER_ENTITY_FIELD",i0="@iiif/ADD_REFERENCE",n0="@iiif/REMOVE_REFERENCE",r0=(0,mi.createAction)(Jy)(),E2=(0,mi.createAction)(e0)(),C2=(0,mi.createAction)(t0)(),k2=(0,mi.createAction)(i0)(),A2=(0,mi.createAction)(n0)(),T2={importEntities:r0,modifyEntityField:E2,reorderEntityField:C2,addReference:k2,removeReference:A2},s0="@iiif/ADD_MAPPING",o0="@iiif/ADD_MAPPINGS",P2=(0,mi.createAction)(s0)(),R2=(0,mi.createAction)(o0)(),a0="@iiif/SET_META_VALUE",l0="@iiif/SET_META_VALUE_DYNAMIC",u0="@iiif/UNSET_META_VALUE",O2=(0,mi.createAction)(a0)(),I2=(0,mi.createAction)(l0)(),L2=(0,mi.createAction)(u0)(),c0={setMetaValue:O2,setMetaValueDynamic:I2,unsetMetaValue:L2},kh="RESOURCE_ERROR",h0="RESOURCE_LOADING",Ah="RESOURCE_READY",d0="@iiif/REQUEST_RESOURCE",p0="@iiif/REQUEST_ERROR",f0="@iiif/REQUEST_MISMATCH",g0="@iiif/REQUEST_COMPLETE",m0="@iiif/REQUEST_OFFLINE_RESOURCE",$2=(0,mi.createAction)(d0)(),v0=(0,mi.createAction)(p0)(),N2=(0,mi.createAction)(f0)(),M2=(0,mi.createAction)(g0)();(0,mi.createAction)(m0)();var Th="@iiif/BATCH",y0="@iiif/BATCH_IMPORT",Ph=(0,mi.createAction)(Th)();(0,mi.createAction)(y0)();var F2=(e,t)=>{let{entities:i,resource:n,mapping:s}=Im(t);if(n.id===void 0)return[v0({id:e,message:"ID is not defined in resource."})];let a=[r0({entities:i}),R2({mapping:s})];return n.id!==e&&(a.push(P2({id:e,type:n.type})),a.push(N2({requestId:e,actualId:n.id}))),a.push(M2({id:e})),a},b0=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function z2(e,t){return!!(e===t||b0(e)&&b0(t))}function w0(e,t){if(!Array.isArray(e)||!Array.isArray(t))return e===t;if(e.length!==t.length)return!1;for(let i=0;i<e.length;i++)if(!z2(e[i],t[i]))return!1;return!0}function Rh(e,t){let i=e.iiif.requests[t],n=e.iiif.mapping[t];if(!(!n||!e.iiif.entities[n][i.resourceUri]))return e.iiif.entities[n][i.resourceUri]}function x0(e,t,{waitTimeout:i=30}={}){return async(n,s)=>{let a=e.getState(),l=a.iiif.requests[n];if(l)switch(l.loadingState){case kh:break;case h0:{let c,h=!1;try{let m=await Promise.race([new Promise((f,y)=>{h||(c=e.subscribe(()=>{let S=e.getState();if(S.iiif.requests[n].loadingState===kh){y();return}if(S.iiif.requests[n].loadingState===Ah){let C=Rh(S,n);C?f(C):y()}}))}),new Promise((f,y)=>setTimeout(()=>{h=!0,y()},i*60))]);if(c&&c(),m)return m}catch{c&&c();break}break}case Ah:{let c=Rh(a,n);if(c)return c;break}}e.dispatch($2({id:n}));try{let c=await t(n,s);!c.id&&!c["@id"]&&(c["@type"]&&(c["@id"]=n),c.id=n);let h=F2(n,c);return e.dispatch(Ph({actions:h})),Rh(e.getState(),n)}catch(c){throw e.dispatch(v0({id:n,message:c.toString()})),c}}}function B2(){return{Collection:{},Manifest:{},Canvas:{},AnnotationPage:{},AnnotationCollection:{},Annotation:{},ContentResource:{},Range:{},Service:{},Selector:{},Agent:{}}}var j2=(e={},t)=>{switch(t.type){case s0:return D(A({},e),{[t.payload.id]:t.payload.type});case o0:return A(A({},e),t.payload.mapping);default:return e}};function Oh(e,t,i,n){return!(!e[i]||!e[i][t]||!e[i][t][n]||!Array.isArray(e[i][t][n]))}function D2(e,t){let i={},n=[];for(let[s,a]of Object.entries(e||{})){n.push(s);let l=(t||{})[s];if(!l||l.length===0){i[s]=a;continue}i[s]=l}for(let[s,a]of Object.entries(t||{}))n.indexOf(s)===-1&&(i[s]=a);return i}var U2=(e=B2(),t)=>{var i;switch(t.type){case e0:{if(!e[t.payload.type]||!e[t.payload.type][t.payload.id])return e;let n=e[t.payload.type][t.payload.id];return typeof n=="string"?e:D(A({},e),{[t.payload.type]:D(A({},e[t.payload.type]),{[t.payload.id]:D(A({},n),{[t.payload.key]:t.payload.value})})})}case t0:{if(!Oh(e,t.payload.id,t.payload.type,t.payload.key))return e;let n=e[t.payload.type][t.payload.id];if(typeof n=="string")return e;let s=Array.from(n[t.payload.key]),[a]=s.splice(t.payload.startIndex,1);return s.splice(t.payload.endIndex,0,a),D(A({},e),{[t.payload.type]:D(A({},e[t.payload.type]),{[t.payload.id]:D(A({},n),{[t.payload.key]:s})})})}case Jy:{let n=Object.keys(t.payload.entities),s=A({},e);for(let a of n){let l=t.payload.entities[a],c=A({},e[a]||{}),h=!1,m=Object.keys(l||{})||[];if(l&&m){for(let f of m)h=!0,c[f]=e[a][f]?D2(e[a][f],l[f]):l[f];h&&(s[a]=c)}}return s}case i0:{if(!Oh(e,t.payload.id,t.payload.type,t.payload.key))return e;let n=e[t.payload.type][t.payload.id],s=Array.from(n[t.payload.key]);return s.splice(t.payload.index||s.length+1,0,t.payload.reference),D(A({},e),{[t.payload.type]:D(A({},e[t.payload.type]),{[t.payload.id]:D(A({},n),{[t.payload.key]:s})})})}case n0:{if(!Oh(e,t.payload.id,t.payload.type,t.payload.key))return e;let n=e[t.payload.type][t.payload.id],s=Array.from(n[t.payload.key]),a=t.payload.index||s.findIndex(l=>l&&l.id===t.payload.reference.id);return a===-1||((i=s[a])==null?void 0:i.id)!==t.payload.reference.id?e:(s.splice(a,1),D(A({},e),{[t.payload.type]:D(A({},e[t.payload.type]),{[t.payload.id]:D(A({},n),{[t.payload.key]:s})})}))}default:return e}},W2=(e={},t)=>{switch(t.type){case d0:case m0:return D(A({},e),{[t.payload.id]:{requestUri:t.payload.id,loadingState:h0,uriMismatch:!1,resourceUri:t.payload.id}});case f0:return D(A({},e),{[t.payload.requestId]:D(A({},e[t.payload.requestId]||{}),{uriMismatch:!0,resourceUri:t.payload.actualId}),[t.payload.actualId]:{requestUri:t.payload.requestId,loadingState:e[t.payload.requestId].loadingState,uriMismatch:!0,resourceUri:t.payload.actualId}});case p0:return D(A({},e),{[t.payload.id]:D(A({},e[t.payload.id]||{}),{loadingState:kh,error:t.payload.message})});case g0:return D(A({},e),{[t.payload.id]:D(A({},e[t.payload.id]||{}),{loadingState:Ah,error:void 0})})}return e},H2=(e={},t)=>{let{id:i,updateValue:n,value:s,meta:a,key:l}=t&&t.payload||{};switch(t.type){case a0:return D(A({},e),{[i]:D(A({},e[i]||{}),{[a]:D(A({},e[i]?e[i][a]||{}:{}),{[l]:s})})});case l0:return D(A({},e),{[i]:D(A({},e[i]||{}),{[a]:D(A({},e[i]?e[i][a]||{}:{}),{[l]:e[i]&&e[i][a]?n(e[i][a][l]):n(void 0)})})});case u0:return e[i]&&e[i][a]&&e[i][a][l]?D(A({},e),{[i]:D(A({},e[i]||{}),{[a]:D(A({},e[i]?e[i][a]||{}:{}),{[l]:void 0})})}):e;default:return e}};function q2(e){return(t,i)=>i&&i.type===Th?i.payload.actions.reduce(e,t):i&&i.type===y0?i.payload.state:e(t,i)}var Q2=pl({mapping:j2,entities:U2,requests:W2,meta:H2}),V2=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Ur;function G2(e={}){let{enableDevtools:t=!0,iiifStoreName:i="iiif",defaultState:n={},extraMiddleware:s=[],customReducers:a={}}=e,l=pl(A({[i]:Q2},a));return Yc(q2(l),n,t?V2(fl(...s)):Ur(fl(...s)))}function Y2(e){return{all:e=e||new Map,on:function(t,i){var n=e.get(t);n?n.push(i):e.set(t,[i])},off:function(t,i){var n=e.get(t);n&&(i?n.splice(n.indexOf(i)>>>0,1):e.set(t,[]))},emit:function(t,i){var n=e.get(t);n&&n.slice().map(function(s){s(i)}),(n=e.get("*"))&&n.slice().map(function(s){s(t,i)})}}}var K2=class{constructor(e,t){Qe(this,"options"),Qe(this,"store"),Qe(this,"emitter"),Qe(this,"isBatching",!1),Qe(this,"batchQueue",[]),Qe(this,"remoteFetcher"),Qe(this,"staticFetcher"),Qe(this,"defaultFetcher",i=>fetch(i).then(n=>n.json())),Qe(this,"middleware",i=>n=>s=>{if(s.type===Th){for(let c of s.payload.actions)this.emitter.emit(c.type,{realAction:c,state:i.getState()});let l=n(s);for(let c of s.payload.actions)this.emitter.emit(`after:${s.type}`,{action:s,state:l});return l}this.emitter.emit(s.type,{action:s,state:i.getState()});let a=n(s);return this.emitter.emit(`after:${s.type}`,{action:s,state:a}),a}),this.options=Object.assign({reducers:{},middleware:[],defaultState:{},customFetcher:this.defaultFetcher,enableDevtools:!0},e||{}),this.store=t||G2({customReducers:this.options.reducers,extraMiddleware:[...this.options.middleware,this.middleware],defaultState:this.options.defaultState,enableDevtools:this.options.enableDevtools}),this.emitter=Y2(),this.remoteFetcher=x0(this.store,this.options.customFetcher),this.staticFetcher=x0(this.store,(i,n)=>n)}batch(e){this.isBatching=!0;try{e(this),this.store.dispatch(Ph({actions:this.batchQueue}))}catch(t){throw this.batchQueue=[],this.isBatching=!1,t}this.batchQueue=[],this.isBatching=!1}async asyncBatch(e){this.isBatching=!0;try{await e(this),this.store.dispatch(Ph({actions:this.batchQueue}))}catch(t){throw this.batchQueue=[],this.isBatching=!1,t}this.batchQueue=[],this.isBatching=!1}modifyEntityField(e,t,i){this.dispatch(T2.modifyEntityField({id:e.id,type:e.type,key:t,value:i}))}dispatch(e){this.isBatching?this.batchQueue.push(e):this.store.dispatch(e)}serialize(e,t){return $m(this.getState().iiif,e,t)}toPresentation2(e){return this.serialize(e,Mm)}toPresentation3(e){return this.serialize(e,Bm)}hydrate(e,t){return this.get(e,t,{skipSelfReturn:!1})}get(e,t,i={}){typeof t!="string"&&(i=t||{},t=void 0);let{skipSelfReturn:n=!0}=i||{};if(Array.isArray(e))return e.map(h=>this.get(h,i));let s=this.getState();if(typeof e=="string"){let h=t||s.iiif.mapping[e];if(!h)return n?null:{id:e,type:"unknown"};e={id:e,type:h}}let a=t||e.type,l=e.id,c=s.iiif.entities[a];if(!c){let h=s.iiif.requests[l];return h&&h.resourceUri!==l?this.get(h.resourceUri,i):n?null:e}return c[e.id]||(n?null:e)}select(e){return e(this.getState())}getStore(){return this.store}getState(){return this.store.getState()}loadManifest(e,t){let i=typeof e=="string"?e:e.id;return this.load(i,t)}loadCollection(e,t){let i=typeof e=="string"?e:e.id;return this.load(i,t)}load(e,t){let i=typeof e=="string"?e:e.id;return t?this.staticFetcher(i,t):this.remoteFetcher(i)}areInputsEqual(e,t){return w0(e,t)}subscribe(e,t,i){typeof i>"u"&&(typeof t>"u"||t===!1||t===!0)&&(i=t,t=e,e=s=>s);let n=i?null:e(this.store.getState());return i||t(n,this),this.store.subscribe(()=>{let s=this.store.getState(),a=e(s);n!==a&&!w0(n,a)&&t(a,this),n=a})}async ensureLoaded(e){let t=typeof e=="string"?e:e.id;this.requestStatus(t)||await this.load(t)}requestStatus(e){return this.select(t=>t.iiif.requests[e])}getResourceMeta(e,t){let i=this.getState().iiif.meta[e];if(i)return t?i[t]:i}setMetaValue([e,t,i],n){this.dispatch(typeof n=="function"?c0.setMetaValueDynamic({id:e,meta:t,key:i,updateValue:n}):c0.setMetaValue({id:e,meta:t,key:i,value:n}))}};function X2(){return typeof self<"u"?self:typeof window<"u"?window:typeof Cu<"u"?Cu:{}}function Ih(e){let t=X2();try{let n=t.IIIF_VAULT;if(n)return n}catch{}let i=new K2(e);try{t.IIIF_VAULT=i}catch{}return i}var Kr=Z2();function Z2(e){let t={},i=(s,a)=>{var l;return t[s]===void 0&&(t[s]=[]),(l=t[s])==null||l.push(a),()=>{n(s,a)}},n=(s,a)=>{var l,c,h;let m=(c=(l=t[s])==null?void 0:l.indexOf(a))!=null?c:-1;(h=t[s])==null||h.splice(m>>>0,1)};return{on:i,off:n,once:(s,a)=>{let l=c=>{a(c),n(s,l)};i(s,l)},emit:(s,a)=>{var l;(l=t[s])==null||l.forEach(c=>{try{c(a)}catch(h){e==null||e.onError(h)}})}}}function Tl(e){let t=Se(),i=.75,n=1/.75,s=Sl(),a=e.vault||s||Ih(),l=mh(),c=Se({}),{isReady:h,isConfigBlocking:m,setIsReady:f,internalConfig:y}=QT(e.preset,(ve,Me)=>{t.current?t.current.dispatchEvent(new CustomEvent("media",{detail:{query:ve,config:Me}})):c.current[ve]=Me}),S=Ee(()=>yh(a),[a]),C=Ee(()=>bh(a),[a]),_=Ee(()=>XP(a,{imageServiceLoader:l}),[a,l]),[P]=ze(e.nested||y.nested,{parse:dt,defaultValue:!1}),[I]=ze(e.x||y.x,{parse:kn,defaultValue:0}),[L]=ze(e.y||y.y,{parse:kn,defaultValue:0}),E=Se(),[N]=ze(e.render||y.render,{defaultValue:"canvas"}),[F]=ze(e.class),[U]=ze(e.virtualSizes||y.virtualSizes,{parse:ZT}),[q]=ze(e.height||y.height,{parse:kn}),[G]=ze(e.width||y.width,{parse:kn}),[V]=ze(e.a11yRole||void 0),[ae]=ze(e.a11yTitle||void 0),[W]=ze(e.interactive||y.interactive,{parse:dt,defaultValue:!0}),[se]=ze(e.background),[pe]=ze(e.viewport||y.viewport,{parse:dt,defaultValue:!0}),[ue]=ze(e.responsive||y.responsive,{parse:dt,defaultValue:!0}),[we]=ze(e.moveEvents||y.moveEvents,{parse:dt,defaultValue:!1}),[he]=ze(e.granularMoveEvents||y.granularMoveEvents,{parse:dt,defaultValue:!1}),[_e]=ze(e.clickToEnableZoom||e.clickToEnableZoom,{parse:dt,defaultValue:!0}),[et]=ze(e.disableKeyboardNavigation||y.disableKeyboardNavigation,{parse:dt,defaultValue:!1}),[J]=ze(e.debug||y.debug,{parse:dt}),[ke]=ze(e.enablePanOnWait||y.enablePanOnWait,{parse:dt,defaultValue:void 0}),[Ie]=ze(e.ignoreSingleFingerTouch||y.ignoreSingleFingerTouch,{parse:dt,defaultValue:void 0}),[Ve]=ze(e.requireMetaKeyForWheelZoom||y.requireMetaKeyForWheelZoom,{parse:dt,defaultValue:!1}),[it]=ze(e.panOnWaitDelay||y.panOnWaitDelay,{parse:kn,defaultValue:40}),[te]=ze(e.enableNavigator||y.enableNavigator,{parse:dt}),[Oe,Nt,Qt,Ht]=ze(e.target||e.region||y.target||y.region,{parse:vh}),[yt,Ct,,oi]=ze(e.rotation,{parse:kn}),[Jt,Mt,,Yt]=ze(e.highlight||y.highlight,{parse:vh}),[mt]=ze(e.styleId||y.styleId),[$e]=ze(e.highlightCssClass||y.highlightCssClass,{defaultValue:"canvas-panel-highlight"}),[Ue,,,nt]=ze(e.preferredFormats||y.preferredFormats,{parse:gy}),[De]=ze(e.homeCover,{parse:ve=>ve==="false"?!1:ve==="true"?!0:ve==="start"?"start":ve==="end"?"end":!1}),[Ke,ot]=ze(e.atlasMode||y.atlasMode),[tt,Ni]=Ne(""),[Xr,Zr]=Ne(""),[Jr]=ze(e.stylesheet||y.stylesheet),ji=Se({}),[Ol,Fh]=Ne("");function zh(ve,Me={}){return ze(e[ve]||y[ve],Me)}function Bo(){if(t.current&&E.current){let ve=t.current.getBoundingClientRect(),Me=E.current.world.height||1,bt=E.current.world.width||1;return bt/Me<1?ve.height/Me:ve.width/bt}return-1}let Us=Se({});de(()=>{let ve=Kr.on("onResetSeen",()=>{Us.current={}}),Me=Ft=>{let kt=Ft.choice;if(t!=null&&t.current&&kt&&kt.items){let ie=kt.items;ie.sort((wt,pt)=>wt.id<pt.id?-1:wt.id>pt.id?1:0);let Re=ie.map(wt=>wt.id).join(""),at=ie.map(wt=>wt.selected).join("");if(Us.current[Re]&&Us.current[Re]==at)return;Us.current[Re]=at,kt.partOf=Ft.partOf,t.current.dispatchEvent(new CustomEvent("choice",{detail:{choice:kt}}))}},bt=Kr.on("onChoiceChange",Me);return()=>{ve(),bt()}},[]),de(()=>{if(E.current&&t.current){let ve=A({},jo(E.current));tt=="queued"&&ve&&(ve==null?void 0:ve.scaleFactor)<1&&ve.scaleFactor>0&&t.current!=null&&(Ni("fired"),setTimeout(()=>{var Me;(Me=t.current)==null||Me.dispatchEvent(new CustomEvent("world-ready",{detail:ve}))},100))}},[h,t.current,Ol,tt]),de(()=>{var ve;let Me=E.current,bt=(ve=E.current)==null?void 0:ve.transitionManager;if(Me&&bt&&h){let Ft=!1,kt=0;return Me.world.addLayoutSubscriber(async(ie,Re)=>{if(ie!=="repaint"&&t.current){if(["recalculate-world-size","zoom-to","go-home","goto-region"].includes(ie)){if(ie=="recalculate-world-size"&&Ni("queued"),bt.hasPending()){if(Ft)return;Ft=!0,await new Promise(Bh=>setTimeout(Bh,bt.pendingTransition.total_time-bt.pendingTransition.elapsed_time)),Ft=!1}let at=Bo(),wt=Math.abs(at-Me._lastGoodScale)<2e-4;wt?kt++:kt=0;let pt={detail:A(D(A({source:ie,minZoomCount:kt},jo(Me)),{isMin:wt,isMax:Math.abs(Me.maxScaleFactor-Me._lastGoodScale)<2e-4}),Re||{})};t.current.dispatchEvent(new CustomEvent("zoom",pt));return}t.current.dispatchEvent(new CustomEvent(ie,{detail:Re}))}})}return()=>{}},[h,Ol]);function jo(ve){let Me=ve._lastGoodScale,bt=Bo(),Ft=ve.getZoomedPosition(n,{}),kt=ve.getZoomedPosition(i,{}),ie={width:Math.round(kt[3]),height:Math.round(kt[4])},Re={width:Math.round(Ft[3]),height:Math.round(Ft[4])},at={width:Math.round(ve.target[3]),height:Math.round(ve.target[4])},wt=2,pt=at.height+wt<Re.height&&at.width+wt<Re.width;return{canZoomIn:at.height>ie.height&&at.width>ie.width,canZoomOut:pt,scaleFactor:ve.getScaleFactor(),current:Me,max:ve.maxScaleFactor,min:bt,worldHeight:ve.world.height,worldWidth:ve.world.width}}de(()=>{var ve;let Me=E.current,bt=(ve=E.current)==null?void 0:ve.transitionManager;if(h&&Me&&we){let Ft=-1,kt=-1,ie=!1;return Me.registerHook("useAfterFrame",async()=>{if(t.current&&(Me.target[1]!==Ft||Me.target[2]!==kt)){if(!he&&bt){if(ie)return;bt.hasPending()&&(ie=!0,await new Promise(Re=>setTimeout(Re,bt.pendingTransition.total_time-bt.pendingTransition.elapsed_time)),ie=!1)}t.current.dispatchEvent(new CustomEvent("move",{detail:{x:Me.x,y:Me.y,width:Me.width,height:Me.height,points:Me.target,lastX:Ft,lastY:kt}})),Ft=Me.x,kt=Me.y}})}return()=>{}},[h,we]);function Il(ve){It(()=>{e.__registerPublicApi&&e.__registerPublicApi(ve)},[])}return Il(ve=>{t.current=ve;let Me,bt,Ft=!1;if(_e){Me=Re=>{Re.stopPropagation()};let ie=()=>{Me&&!Ft&&(Ft=!0,ve.addEventListener("wheel",Me,{capture:!0}),ve.addEventListener("touchstart",Me,{capture:!0}))};bt=()=>{Me&&Ft&&(Ft=!1,ve.removeEventListener("wheel",Me,{capture:!0}),ve.removeEventListener("touchstart",Me,{capture:!0}))},ie(),document.addEventListener("click",Re=>{document.activeElement!==ve&&ie()})}ve.addEventListener("click",ie=>{bt&&bt();let Re=ie.composedPath()[0];Re&&ve!==document.activeElement&&Re.focus()});let kt=Object.keys(c.current);if(kt.length){for(let ie of kt)ve.dispatchEvent(new CustomEvent("media",{detail:{query:ie,config:c.current[ie]}}));c.current={}}return{vault:a,events:S,styles:C,thumbnailHelper:_,imageServiceLoader:l,getRotation:()=>oi.current,setRotation:ie=>{ve.setAttribute("rotation",ie.toString())},getHighlight:()=>Yt.current,setHighlight:ie=>{typeof ie=="string"?ve.setAttribute("highlight",ie):Mt(ie)},getTarget:()=>Ht.current,setTarget:ie=>{typeof ie=="string"?ve.setAttribute("target",ie):Nt(ie)},setDefaultChoiceIds:ie=>{ve.setAttribute("choice-id",ie.join(","))},getPosition(){var ie,Re,at,wt;return{x:(ie=E.current)==null?void 0:ie.x,y:(Re=E.current)==null?void 0:Re.y,width:(at=E.current)==null?void 0:at.width,height:(wt=E.current)==null?void 0:wt.height}},getMaxZoom(){var ie;return((ie=E.current)==null?void 0:ie.maxScaleFactor)||1},getMinZoom(){return Bo()||0},makeChoice(ie,Re){Kr.emit("onMakeChoice",{id:ie,options:Re})},zoomIn(ie){E.current&&E.current.world.trigger("zoom-to",{point:ie,factor:i})},zoomOut(ie){E.current&&E.current.world.trigger("zoom-to",{point:ie,factor:n})},zoomBy(ie,Re){E.current&&E.current.world.trigger("zoom-to",{point:Re,factor:ie})},zoomTo(ie,Re,at){E.current&&E.current.world.zoomTo(ie,Re,at)},withAtlas(ie){E.current?ie(E.current):ji.current=D(A({},ji.current),{[new Date().getTime()]:Re=>ie(Re)})},goHome(ie=!1){E.current?E.current.world.goHome(ie):ji.current=D(A({},ji.current),{viewport:Re=>Re.world.goHome(ie)})},getZoom(){var ie;return(ie=E.current)==null?void 0:ie._lastGoodScale},getScaleInformation(){let ie=E.current;if(ie!=null)return A({},jo(ie))},goToTarget(ie,Re={}){E.current?E.current.world.gotoRegion(A(A({},ie),Re)):ji.current=D(A({},ji.current),{viewport:at=>{at.world.gotoRegion(A(A({},ie),Re))}})},setFps(ie){E.current?E.current.fpsLimit=ie:ji.current=D(A({},ji.current),{setFps:Re=>{Re.fpsLimit=ie}})},clearTarget(){Nt(void 0),E.current?E.current.world.goHome(!0):ji.current=D(A({},ji.current),{viewport:ie=>{ie.world.goHome(!0)}})},setPreferredFormats(ie){ve.setAttribute("preferred-formats",ie.join(","))},getPreferredFormats(){return nt.current||[]},setMode(ie){ve.setAttribute("atlas-mode",ie)},applyStyles(ie,Re){C.applyStyles(typeof ie=="string"?{id:ie}:ie,"atlas",Re)},applyHTMLProperties(ie,Re){C.applyStyles(typeof ie=="string"?{id:ie}:ie,"html",Re)},setClassName(ie,Re){C.applyStyles(typeof ie=="string"?{id:ie}:ie,"html",{className:Re})},createAnnotationDisplay(ie){return new S2(ie)},getThumbnail(ie,Re,at){return _.getBestThumbnailAtSize(ie,Re,at)},addVaultEventListener(ie,Re,at,wt){return S.addEventListener(ie,Re,at,wt)},removeVaultEventListener(ie,Re,at){S.removeEventListener(ie,Re,at)},getListenersAsProps(ie,Re){return S.getListenersAsProps(ie,Re)}}}),de(()=>{if(E.current){let ve=Object.values(ji.current);for(let Me of ve)Me(E.current);ji.current={}}},[h]),It(()=>{if(mt){let ve=document.getElementById(mt);ve&&Zr(ve.innerText)}},[h,mt]),It(()=>{if(t.current&&!et){let ve=bt=>{var Ft,kt,ie;if(E.current&&E.current.transitionManager){let Re=E.current.transitionManager,at=Re.pendingTransition.done?E.current.target:Re.pendingTransition.to,wt=Math.min(at[3]-at[1],at[4]-at[2])*.1,pt;switch(bt.key){case"=":{(Ft=E.current.world)==null||Ft.zoomIn();return}case"-":{(kt=E.current.world)==null||kt.zoomOut();return}case"0":{(ie=E.current.world)==null||ie.goHome();return}case"ArrowRight":{bt.preventDefault(),pt=at.slice(0),pt[1]=pt[1]+wt,pt[3]=pt[3]+wt;break}case"ArrowLeft":{bt.preventDefault(),pt=at.slice(0),pt[1]=pt[1]-wt,pt[3]=pt[3]-wt;break}case"ArrowUp":{bt.preventDefault(),pt=at.slice(0),pt[2]=pt[2]-wt,pt[4]=pt[4]-wt;break}case"ArrowDown":{bt.preventDefault(),pt=at.slice(0),pt[2]=pt[2]+wt,pt[4]=pt[4]+wt;break}}pt&&Re.applyTransition(pt,{duration:500,easing:En.easeOutExpo,constrain:!0})}},Me=t.current;return Me.addEventListener("keydown",ve),()=>{Me.removeEventListener("keydown",ve)}}return()=>{}},[et]),{atlasProps:Ee(()=>({children:null,nested:P,responsive:ue,viewport:pe,enableNavigator:te,onCreated:ve=>{Ni(""),f(!0),Fh(ve.runtime.id),E.current=ve.runtime},homePosition:Oe&&Oe.selector&&Oe.selector.type==="BoxSelector"?Oe.selector.spatial:void 0,renderPreset:N==="static"?["static-preset",{interactive:W}]:["default-preset",{interactive:W,unstable_webglRenderer:N==="webgl",controllerConfig:{ignoreSingleFingerTouch:Ie,enablePanOnWait:ke,requireMetaKeyForWheelZoom:Ve,panOnWaitDelay:it}}],width:G||void 0,height:q||(ue?void 0:512),role:V,title:ae}),[ue,pe,Oe,N,te,y,V,ae]),background:se,isReady:h,isConfigBlocking:m,setIsReady:f,internalConfig:y,target:Oe,setParsedTarget:Qt,highlight:Jt,highlightCssClass:$e,preferredFormats:Ue,render:N,interactive:W,mode:Ke,setMode:ot,virtualSizes:U,styleId:mt,responsive:ue,viewport:pe,debug:J,enableNavigator:te,height:q,width:G,className:F,inlineStyles:Xr,inlineStyleSheet:Jr,vault:a,nested:P,x:I,y:L,rotation:yt,homeCover:De,useProp:zh,useRegisterWebComponentApi:Il,runtime:E,webComponent:t}}Ye(),qe();var Lh=ii(!1);function J2(e){let t=hl();return de(()=>{t&&e.onCreated(t)},[t]),null}function $h(e){var t=e,{children:i,onCreated:n,responsive:s,viewport:a,nested:l}=t,c=le(t,["children","onCreated","responsive","viewport","nested"]);let[h,m]=Ne(!1),f=Zt(Lh);return l||f?$(Je,null,n?$(J2,{onCreated:n}):null,i):$(Lh.Provider,{value:!0},$(WE,D(A({},c),{onCreated:y=>{if(m(!0),n)return y.runtime.updateNextFrame(),n(y)},unstable_noReconciler:!0}),$(Lh.Provider,{value:!0},h?i:null)))}Ye();function _0(e){var t=e,{children:i}=t,n=le(t,["children"]);let s=Sl(),{setIsReady:a,atlasProps:l,isReady:c,className:h}=Tl(n);return $(hr,{vault:s},$($h,A({onCreated:()=>{a(!0)},viewport:!0,className:h||""},l),c?$("slot",null,i):null))}if(typeof window<"u"){let e={shadow:!0,onConstruct(t){t._props={__registerPublicApi:i=>{Object.assign(t,i(t))}}}};Tr(_0,"atlas-viewer",[],e),Tr(_0,"layout-container",[],e)}Ye(),qe(),Ye(),qe();var S0=()=>()=>({}),Nh=ii(S0);function Fo(e,t){let i=Se(),n=Zt(Nh)||S0;i.current!==t&&n(e),i.current=t}Ye();var eR=Be(Qp());qe(),Ye(),Ye(),qe();var E0=ii(null);function fr({displayName:e,component:t,customConstructor:i}){let n=di(function(s,a){var l=s,{children:c}=l,h=le(l,["children"]);let[m,f]=Ne(),y=hl(),S=Zt(E0),C=Se(h);return de(()=>(y&&y.runtime&&f(i?i(h):new t),()=>{}),[]),de(()=>{if(y&&y.runtime&&m){let _=y.runtime,P=y.runtime.world,I=S||P;I.appendChild(m),a&&(typeof a=="function"?a(m):a.current=m),m instanceof rr&&(_.world=m),m instanceof Os||(_.pendingUpdate=!0,_.world&&_.world.needsRecalculate&&(_.world.recalculateWorldSize(),_.world.triggerRepaint()));let L=I,E=m;return()=>{E&&(L.removeChild(E),_.pendingUpdate=!0,_.world&&_.world.needsRecalculate&&(_.world.recalculateWorldSize(),_.world.triggerRepaint()))}}return()=>{}},[m,y==null?void 0:y.runtime]),de(()=>{m&&y&&y.runtime&&(Bc(y.runtime.world,h),zc(m,C.current,h),C.current=h,y.runtime.pendingUpdate=!0,y.runtime.world&&(y.runtime.world.needsRecalculate=!0,y.runtime.world.needsRecalculate&&(y.runtime.world.recalculateWorldSize(),y.runtime.world.triggerRepaint())))},[m,h]),m?$(E0.Provider,{value:m},c):null});return n.displayName=e,Vu(n)}Ye(),qe();var tR=e=>{var t=e,{height:i,tiles:n,width:s,x:a,y:l,style:c,skipSizes:h=!1,skipThumbnail:m=!1,rotation:f=0,useFloorCalc:y=!1,viewport:S,tileFormat:C,children:_}=t,P=le(t,["height","tiles","width","x","y","style","skipSizes","skipThumbnail","rotation","useFloorCalc","viewport","tileFormat","children"]);let I=s/n.width,L=n.imageService.tiles||[],E=n.imageService.sizes||[],N=n.imageService.id||n.imageService["@id"],F=Ee(()=>{let q=N;return q&&q.endsWith("/info.json")?q.slice(0,-1*10):q},[N]),U=c&&typeof c.opacity<"u"&&c.opacity!==1;return $(Ds,A({key:F,scale:I,height:n.height,width:n.width,x:a,rotation:f,y:l},P),$(iR,{key:"composite-"+F,id:F,width:n.width,height:n.height,renderOptions:U?{renderLayers:1,renderSmallestFallback:!1}:S?{renderLayers:1,renderSmallestFallback:!0}:{renderLayers:2,renderSmallestFallback:!0}},_,n.thumbnail&&!U&&!m?$(zo,{uri:n.thumbnail.id,target:{width:n.width,height:n.height},display:{width:n.thumbnail.width,height:n.thumbnail.height},style:c}):null,h?null:E.map((q,G)=>{let{prefix:V,server:ae,scheme:W,path:se}=Bv(F);return $(zo,{key:G,uri:qv({scheme:W,server:ae,prefix:V,identifier:se,originalPath:"",type:"image",region:{full:!0},size:{max:!1,upscaled:!1,confined:!1,width:q.width,height:q.height},rotation:{angle:0,mirror:!1},format:"jpg",quality:"default"},n.imageService),target:{width:n.width,height:n.height},display:{width:q.width,height:q.height},style:c})}),L.map(q=>(q.scaleFactors||[]).map(G=>$(nR,{key:`${q}-${G}`,uri:F,display:{width:n.width,height:n.height},tile:q,scaleFactor:G,style:c,format:C,useFloorCalc:y})))))};fr({displayName:"Atlas.World",component:rr,customConstructor:e=>new rr(e.width,e.height)});var Ds=fr({displayName:"Atlas.WorldObject",component:Os}),C0=fr({displayName:"Atlas.Box",component:Is}),zo=fr({displayName:"Atlas.SingleImage",component:cn});fr({displayName:"Atlas.ImageTexture",component:Ca});var iR=fr({displayName:"Atlas.CompositeResource",component:Sc,customConstructor:e=>new Sc({id:e.id,width:e.width,height:e.height,images:[],renderOptions:e.renderOptions})}),nR=fr({displayName:"Atlas.TiledImage",component:nr,customConstructor:e=>nr.fromTile(e.uri,e.display,e.tile,e.scaleFactor,void 0,e.format,e.useFloorCalc)});fr({displayName:"Atlas.Text",component:So}),Ye(),qe(),Ye(),qe(),qe(),qe(),Ye(),qe();var Mh=di((e,t)=>{var i=e,{children:n}=i,s=le(i,["children"]);let a=Se(),l=ar(),c=Se(0),h=Se(),[m,f]=ys(y=>y+1,0);return Wc(()=>{if(s.relative){let y=a.current;if(y&&l){let S=l.getScaleFactor();c.current!==S&&(c.current=S,y.style.transformOrigin="0 0",y.style.transform=`scale(${1/c.current})`,y.style.width=`${c.current*100}%`,y.style.height=`${c.current*100}%`)}}},[s.relative]),It(()=>{let y=h.current;if(!y){let S=setTimeout(f,100);return()=>{clearTimeout(S)}}return t&&y&&(typeof t=="function"?t(y):t.current=y),y&&y.__host?s.relative?xs($("div",{ref:a},n),y.__host.element):xs(n,y.__host.element):y&&(y.__onCreate=()=>{s.relative?xs($("div",{ref:a},n),y.__host.element):xs(n,y.__host.element)}),()=>{}},[m,t,n,h,s.relative]),$(C0,A({html:!0,ref:h},s))});Ye();var rR=e=>{var t=e,{handleSize:i=9,resizable:n,onSave:s,children:a}=t,l=le(t,["handleSize","resizable","onSave","children"]);let{portalRef:c,mode:h,mouseEvent:m,isEditing:f}=GE({x:l.x||0,y:l.y||0,width:l.width,height:l.height},s),y=Ee(()=>m("translate"),[m]),S=Ee(()=>m("east"),[m]),C=Ee(()=>m("west"),[m]),_=Ee(()=>m("south"),[m]),P=Ee(()=>m("north"),[m]),I=Ee(()=>m("south-east"),[m]),L=Ee(()=>m("south-west"),[m]),E=Ee(()=>m("north-east"),[m]),N=Ee(()=>m("north-west"),[m]);return $(Je,null,$(Ds,A({},l),a,$(Mh,{ref:c,target:{x:0,y:0,height:l.height,width:l.width},relative:!0,interactive:!1},h==="sketch"&&n?$(Je,null,$("div",{onMouseDown:y,onTouchStart:y,style:{display:"block",width:"100%",height:"100%",border:"1px dashed #999",boxSizing:"border-box",pointerEvents:f?"none":h==="sketch"?"initial":"none"}}),$("div",{title:"east",onTouchStart:S,onMouseDown:S,style:{cursor:"e-resize",position:"absolute",background:"#fff",height:i*2,width:i,right:0,top:"50%",transform:`translate(${i/2}px, -${i}px)`,zIndex:999,boxShadow:"0px 2px 3px 0 rgba(0,0,0,0.5)",border:"1px solid #999",pointerEvents:f?"none":h==="sketch"?"initial":"none"}}),$("div",{title:"west",onMouseDown:C,style:{cursor:"w-resize",position:"absolute",background:"#fff",height:i*2,width:i,left:0,top:"50%",transform:`translate(-${i/2}px, -${i}px)`,zIndex:999,boxShadow:"0px 2px 3px 0 rgba(0,0,0,0.5)",border:"1px solid #999",pointerEvents:f?"none":h==="sketch"?"initial":"none"}}),$("div",{title:"north",onMouseDown:P,style:{cursor:"n-resize",position:"absolute",background:"#fff",height:i,width:i*2,left:"50%",top:0,transform:`translate(-${i}px, -${i/2}px)`,zIndex:999,boxShadow:"0px 2px 3px 0 rgba(0,0,0,0.5)",border:"1px solid rgba(0,0,0,.5)",pointerEvents:f?"none":h==="sketch"?"initial":"none"}}),$("div",{title:"south",onMouseDown:_,style:{cursor:"s-resize",position:"absolute",background:"#fff",height:i,width:i*2,left:"50%",bottom:0,transform:`translate(-${i}px, ${i/2}px)`,zIndex:999,boxShadow:"0px 2px 3px 0 rgba(0,0,0,0.5)",border:"1px solid #999",pointerEvents:f?"none":h==="sketch"?"initial":"none"}}),$("div",{title:"north-east",onMouseDown:E,style:{cursor:"ne-resize",position:"absolute",background:"#fff",height:i,width:i,right:0,top:0,transform:`translate(${i/2}px, -${i/2}px)`,zIndex:999,boxShadow:"0px 2px 3px 0 rgba(0,0,0,0.5)",border:"1px solid #999",pointerEvents:f?"none":h==="sketch"?"initial":"none"}}),$("div",{title:"south-east",onMouseDown:I,style:{cursor:"se-resize",position:"absolute",background:"#fff",height:i,width:i,bottom:0,right:0,transform:`translate(${i/2}px, ${i/2}px)`,zIndex:999,boxShadow:"0px 2px 3px 0 rgba(0,0,0,0.5)",border:"1px solid #999",pointerEvents:f?"none":h==="sketch"?"initial":"none"}}),$("div",{title:"south-west",onMouseDown:L,style:{cursor:"sw-resize",position:"absolute",background:"#fff",height:i,width:i,bottom:0,left:0,transform:`translate(-${i/2}px, ${i/2}px)`,zIndex:999,boxShadow:"0px 2px 3px 0 rgba(0,0,0,0.5)",border:"1px solid #999",pointerEvents:f?"none":h==="sketch"?"initial":"none"}}),$("div",{title:"north-west",onMouseDown:N,style:{cursor:"nw-resize",position:"absolute",background:"#fff",height:i,width:i,top:0,left:0,transform:`translate(-${i/2}px, -${i/2}px)`,zIndex:999,boxShadow:"0px 2px 3px 0 rgba(0,0,0,0.5)",border:"1px solid #999",pointerEvents:f?"none":h==="sketch"?"initial":"none"}})):null)))};Ye();var Pl=e=>{var t=e,{children:i,interactive:n,region:s,onClick:a,onSave:l,isEditing:c,className:h,style:m}=t,f=le(t,["children","interactive","region","onClick","onSave","isEditing","className","style"]);let y=Mc(),S=je(C=>{l&&l(A({id:s.id,x:s.x,y:s.y,height:s.height,width:s.width},C))},[l,s.id,s.x,s.y,s.height,s.width]);return $(rR,{x:s.x,y:s.y,width:s.width,height:s.height,resizable:c,onSave:S,onClick:y==="explore"&&a?C=>{a(s)}:()=>{}},$(C0,A({html:!0,className:h,interactive:!0,relativeStyle:!0,target:{x:0,y:0,width:s.width,height:s.height},style:m},f)),i)};Ye(),qe(),Ye();function k0({annotationId:e,interactive:t,relative:i}){var n;let s=ph({id:e}),a={fill:"rgba(0,0,0,0)"},l={fill:"rgba(0,0,0,0)"};if(!((n=s==null?void 0:s.motivation)!=null&&n.includes("supplementing"))||!s.body)return null;let c=(Array.isArray(s.body)?s.body:[s.body]).filter(m=>m.type==="TextualBody"),h=s.target.selector;return h?$(Je,null,$("rect",{x:i?0:h.spatial.x,y:i?0:h.spatial.y,width:h.spatial.width,height:h.spatial.height,style:l}),$("text",{x:i?0:h.spatial.x,y:(i?0:h.spatial.y)+h.spatial.height*.75,textLength:h.spatial.width,fontSize:`${h.spatial.height}px`,lengthAdjust:"spacingAndGlyphs",className:"text-line-segment",part:"text-line-segment",style:D(A({},a),{pointerEvents:t?"initial":void 0})},c[0].value||"")):null}function sR({annotation:e,textSelectionEnabled:t}){var i;let n=Ut();return!((i=e==null?void 0:e.motivation)!=null&&i.includes("supplementing"))||!e.body?null:$(Mh,{target:D(A({},e.target.selector.spatial),{x:0,y:0}),interactive:t},$(hr,{vault:n},$("svg",{height:e.target.selector.spatial.height,width:e.target.selector.spatial.width,style:{userSelect:t?"text":void 0}},$(k0,{annotationId:e.id,interactive:t,relative:!0}))))}var oR=({id:e,style:t,className:i,interactive:n,textSelectionEnabled:s})=>{let a=ph({id:e}),l=Vr(a,"atlas"),c=Vr(a,"html"),h=xl(a,["atlas"]),m=pr(),f=Ee(()=>nm(t,l),[t,l]);return m&&a&&a.target&&a.target.selector&&a.target.selector.type==="BoxSelector"&&a.target.source&&a.target.source.id===m.id?$(Pl,A({id:a.id,isEditing:!0,region:a.target.selector.spatial,style:f,className:(c==null?void 0:c.className)||i,interactive:!!(c!=null&&c.href||n),href:(c==null?void 0:c.href)||null,title:(c==null?void 0:c.title)||null,hrefTarget:(c==null?void 0:c.target)||null},h),$(sR,{annotation:a,textSelectionEnabled:s})):null},A0=({className:e,page:t,textSelectionEnabled:i})=>{var n;let s=Vr(t,"atlas"),a=Vr(t,"html");return Ci(l=>t.id?l.iiif.entities.AnnotationPage[t.id]:null,[]),$(Je,null,(n=t.items)==null?void 0:n.map(l=>$(oR,{key:l.id,id:l.id,style:s,className:(a==null?void 0:a.className)||e,textSelectionEnabled:i})))};Ye(),qe();function aR(){let e=ar(),[t,i]=Ne(),[n,s]=Ne();return Wc(()=>{e&&(!t||e.focalPosition[1]!==t[1]||e.focalPosition[2]!==t[2]||e.focalPosition[3]!==t[3]||e.focalPosition[4]!==t[4])&&i(new Float32Array(e.focalPosition)),e&&(!n||e.homePosition[1]!==n[1]||e.homePosition[2]!==n[2]||e.homePosition[3]!==n[3]||e.homePosition[4]!==n[4])&&s(new Float32Array(e.homePosition))},[t,n]),$(Je,null,t?$(Pl,{id:"focal",onClick:()=>{},onSave:()=>{},isEditing:!1,className:"test",region:{id:"focal",x:t[1],y:t[2],width:t[3]-t[1],height:t[4]-t[2]},style:{backgroundColor:"rgba(0, 0, 244, 0.5)"}}):null,n?$(Pl,{id:"home",onClick:()=>{},onSave:()=>{},isEditing:!1,className:"test",region:{id:"home",x:n[1],y:n[2],width:n[3]-n[1],height:n[4]-n[2]},style:{backgroundColor:"rgba(0, 200, 0, 0.5)"}}):null)}qe(),Ye();function lR(e,t){let i=cr(e.id||e["@id"]||"").slice(0,-10);return!i||t.percentScale||!t.width||t.confined||!e.height||!e.width?[null,{height:0,width:0}]:[[i,"full",VT(t),"0","default.jpg"].join("/"),{width:t.width||1,height:t.confined?e.height/e.width*t.width:t.height||e.height/e.width*t.width}]}qe(),qe();function T0({id:e,image:t,thumbnail:i,isStatic:n,virtualSizes:s=[],x:a=0,y:l=0,rotation:c=0,annotations:h,tileFormat:m,skipSizes:f,annotationId:y,skipThumbnail:S,useFloorCalc:C}){var _,P,I,L;let E=Vr(y?{id:y,type:"Annotation"}:void 0,"atlas"),N=Vr({id:e,type:"ContentResource"},"atlas"),F=Ee(()=>A(A({},E),N),[E,N]),U=xl(y?{id:y,type:"Annotation"}:void 0,["atlas"]),q=xl({id:e,type:"ContentResource"},["atlas"]);return $(Z.Fragment,null,t.service?$(Je,{key:"service"},$(tR,A(A({viewport:n,tiles:{id:t.service.id,height:t.height!==t.service.height&&t.service.height!==void 0?t.service.height:t.height,width:t.width!==t.service.width&&t.service.width!==void 0?t.service.width:t.width,imageService:t.service,thumbnail:!S&&i&&i.type==="fixed"?i:void 0},skipSizes:f,skipThumbnail:S,x:((_=t.target)==null?void 0:_.spatial.x)+a,y:((P=t.target)==null?void 0:P.spatial.y)+l,rotation:c,useFloorCalc:C,width:(I=t.target)==null?void 0:I.spatial.width,height:(L=t.target)==null?void 0:L.spatial.height,style:F,tileFormat:m},U),q),t.service&&s.map(G=>{if(t.service){let[V,{height:ae,width:W}]=lR(t.service,G);return V?$(zo,{priority:!0,style:F,key:V,uri:V,target:t.target.spatial,display:{height:ae,width:W}}):null}return null})),h):$(Je,{key:"no-service"},$(zo,A(A({style:F,uri:t.id,target:t.target.spatial,display:t.width&&t.height?{width:t.width,height:t.height}:void 0},U),q)),h))}Ye(),qe();function uR(){let[e,{addAnnotation:t,removeAnnotation:i}]=sT(),n=Ut(),s=HT(),a=Se([]),l=e==null?void 0:e.id,c=Ee(()=>yh(n),[n]);return Fo(()=>({annotations:{add(h){t(h)},get(h){if(l){let m=(n.get({id:l,type:"AnnotationPage"}).items||[]).find(f=>f.id===h);return m?n.get(m):null}return null},getSource(h){return a.current[h]||null},getAll(){if(l){let h=n.get({id:l,type:"AnnotationPage"});return h?n.get(h.items)||[]:[]}return[]},remove(h){i(h)},applyStyles(h){l&&s.applyStyles(l,"atlas",h)},addEventListener(h,m){if(l)return c.addEventListener({id:l,type:"AnnotationPage"},h,m)},applyHTMLProperties(h){l&&s.applyStyles(l,"html",h)}}}),l),[e,{addAnnotation:t,removeAnnotation:i}]}qe();var P0=ii(null);function cR(){let e=Zt(P0);return[e.fullPage,{addAnnotation:e.addAnnotation,removeAnnotation:e.removeAnnotation}]}function R0({children:e}){let[t,{addAnnotation:i,removeAnnotation:n}]=uR();return $(P0.Provider,{value:Ee(()=>({fullPage:t,addAnnotation:i,removeAnnotation:n}),[t])},e)}Ye();function hR({media:e,children:t}){let[{element:i,currentTime:n,progress:s},a,l]=py({duration:e.duration});return Fo(c=>(c.mediaActions=l,c.mediaElement=i,c.setMediaProgressElement=h=>{s.current=h},c.dispatchEvent(new Event("media-displayed")),c.dispatchEvent(new Event("audio-displayed")),{}),e.url),$(jT,{state:a,actions:l,currentTime:n,progress:s,element:i},$("video",{ref:i,src:e.url}),t)}Ye();function dR({media:e}){let[{element:t,currentTime:i,progress:n},s,a]=py({duration:e.duration}),l=a.playPause;return Fo(c=>(c.mediaActions=a,c.mediaElement=t,c.setMediaProgressElement=h=>{n.current=h},c.dispatchEvent(new Event("media-displayed")),c.dispatchEvent(new Event("audio-displayed")),{}),e.url),$("div",{className:"video-container",part:"video-container",onClick:l},$("style",null,`
            .video-container {
              position: absolute;
              top: 0;
              bottom: 0;
              left: 0;
              right: 0;
              background: #000;
              z-index: 13;
              display: flex;
              justify-content: center;
              pointer-events: visible;
            }
          `),$("video",{ref:t,src:e.url,style:{width:"100%",objectFit:"contain"}}))}Ye();function pR({annotationPageId:e,selectionEnabled:t}){let i=WT({id:e}),n=pr(),s=Ut(),a=Vr(i,"text-lines");return!i||!i.items||!n?null:$(Ds,A({},{x:0,y:0,width:n.width,height:n.height}),$(Mh,{target:{x:0,y:0,width:n.width,height:n.height}},$(hr,{vault:s},$("svg",{tabindex:0,"aria-name":"","aria-live":"off","aria-atomic":"true","aria-relevant":"all","aria-expanded":"true",role:"article",style:D(A({},a),{userSelect:"text"}),width:n.width,height:n.height},i.items.map(l=>$(k0,{key:`line-${l.id}`,annotationId:l.id,interactive:t}))))))}function fR(e,t){let i=[],n={};for(let s of e){let a={},l=[],c=t.get(s),h=(c==null?void 0:c.items)||[];for(let m of h){let f=t.get(m);if(f.motivation)for(let y of f.motivation)l.includes(y)||l.push(y),a[y]=a[y]?a[y]:[],a[y].push(f.id)}i.push({typeMap:a,allTypes:l,id:s});for(let m of l)n[m]=n[m]||[],n[m].push(s)}return{pagesWithTypes:i,pageMapping:n}}function O0({x:e,y:t,highlight:i,annoMode:n,onCreated:s,debug:a,virtualSizes:l,highlightCssClass:c,defaultChoices:h,isStatic:m,textSelectionEnabled:f,textEnabled:y,disableThumbnail:S,skipSizes:C,rotation:_,useFloorCalc:P}){var I;let L=dr(),E=pr(),N=xl(E,["deep-zoom"]),[F]=cR(),U=Ut(),q=Ee(()=>bh(U),[U]),[G,V]=RT({strategies:["images","media"],defaultChoices:h==null?void 0:h.map(({id:he})=>he)}),ae=gh((L==null?void 0:L.id)||(E==null?void 0:E.id)),W=Ci((he,_e)=>ae.availablePageIds.map(et=>_e.get(et)),[...ae.availablePageIds]);de(()=>{let he=x2(U);if(E!=null&&E.id){let _e=(h==null?void 0:h.map(({id:J})=>J))||[],et=he.getAllPaintingAnnotations(E.id);for(let J of et){if(J.type!=="Annotation")throw new Error("getPaintables() accept either a canvas or list of annotations");let ke=Array.from(Array.isArray(J.body)?J.body:[J.body]);for(let Ie of ke){let[Ve,{selector:it}]=ly(Ie),te=U.get(Ve);if((te.type||"unknown").toLowerCase()!=="choice")continue;let Oe=U.get(te.items),Nt=_e.length?_e.map(Ht=>Oe.find(yt=>yt.id===Ht)).filter(Boolean):[Oe[0]];Nt.length===0&&Nt.push(Oe[0]);let Qt={type:"single-choice",items:Oe.map(Ht=>({id:Ht.id,label:Ht.label,selected:Nt.indexOf(Ht)!==-1})),label:Ve.label};Kr.emit("onChoiceChange",{choice:Qt,partOf:{canvasId:E.id,choiceId:te.id,manifestId:L==null?void 0:L.id}})}}he.extractChoices(E.id)}},[E==null?void 0:E.id,V,h]);let se=Ee(()=>fR(ae.availablePageIds,U),W),pe=(I=se.pageMapping.supplementing)!=null&&I.length?se.pageMapping.supplementing[0]:null;de(()=>{let he=Kr.on("onMakeChoice",_e=>{V.makeChoice(_e.id,_e.options)});return()=>{he()}},[V]),de(()=>{if(y){let he=[];for(let _e of ae.availablePageIds)U.requestStatus(_e)||he.push(U.load(_e))}},[E==null?void 0:E.id,y]),de(()=>{if(h)for(let he of h)typeof he.opacity<"u"&&q.applyStyles({id:he.id},"atlas",{opacity:he.opacity})},[h]);let ue=LT({maxWidth:256,maxHeight:256});if(!E)return null;if(G.type==="media"){if(G.media.type!=="Sound"&&G.media.type!=="Video")throw new Error("Unknown media type");return $(Ds,A({key:G.type,height:E.height||1e3,width:E.width||1e3,x:e,y:t},N),G.media.type==="Sound"?$(hR,{media:G.media}):null,G.media.type==="Video"?$(dR,{media:G.media}):null)}if(G.type==="unknown"){if(ue&&ue.type==="fixed")return $(Ds,{height:E.height,width:E.width,x:e,y:t},$(zo,{uri:ue.id,target:{x:0,y:0,width:E.width,height:E.height},display:ue.width&&ue.height?{width:ue.width,height:ue.height}:void 0}));throw new Error("Unknown image strategy")}let we=$(Je,null,n?$(em,{onCreate:he=>{s&&s(he)}}):null,i&&i.selector&&i.selector.type==="BoxSelector"?$(Pl,{id:"highlight",isEditing:!0,onClick:()=>{},onSave:()=>{},region:i.selector.spatial,style:c?void 0:{border:"3px solid red"},className:c}):null,F?$(A0,{page:F,textSelectionEnabled:f}):null,G.annotations&&G.annotations.pages?G.annotations.pages.map(he=>$(A0,{key:he.id,page:he,textSelectionEnabled:f})):null,a?$(aR,null):null,y&&pe?$(pR,{annotationPageId:pe,selectionEnabled:f}):null);return $(Ds,A({key:G.type,height:E.height,width:E.width,x:e,y:t},N),G.type==="images"?G.images.map((he,_e)=>$(T0,{isStatic:m,key:he.id,image:he,id:he.id,rotation:_,annotationId:he.annotationId,thumbnail:_e===0&&!S?ue:void 0,virtualSizes:l,annotations:we,skipSizes:C,skipThumbnail:S,useFloorCalc:P})):null)}qe(),Ye(),qe();function Rl({error:e,resetErrorBoundary:t,aspectRatio:i,height:n=512,width:s}){let a=i?{paddingTop:`${i*100}%`}:{height:n,width:s},l="img";return de(()=>{console.error(e)},[e]),$("slot",{name:"fallback"},$("div",{role:"alert",style:A({background:"#000",color:"#fff",display:"flex",flexDirection:"column",alignContent:"center",justifyContent:"center",fontFamily:"monospace"},a)},$("div",{style:{padding:"1em",textAlign:"center"}},$(l,{className:"img-oops",part:"image-oops",width:11*3,height:8*3,src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAICAYAAAAvOAWIAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAC6ADAAQAAAABAAAACAAAAADGHiDWAAAAO0lEQVQYGWP4DwQMQACjQWxkABOH0TgVwjRhKIQLwFRAaZg4jEaTphKXEWYOPmsYgQCmjnQPwnXiYQAAP/M3zvinPKAAAAAASUVORK5CYII="}),$("h2",null,"Unable to load image"),$("pre",null,e==null?void 0:e.message),t?$("button",{style:{color:"#fff",border:"2px solid #fff",background:"#000",fontFamily:"monospace",padding:"0.25em 1em"},onClick:t},"Try again"):null,$("style",null,".img-oops { border: 3px solid white; padding: 15px; image-rendering: auto; image-rendering: crisp-edges; image-rendering: pixelated; margin-bottom: 10px; }"))))}function gR(e,t){var i=e,{unit:n}=i,s=le(i,["unit"]);return n==="percent"?{x:t.width*(s.x/100),y:t.height*(s.y/100),width:t.width*(s.width/100),height:t.height*(s.height/100)}:s}Ye(),qe();var mR=uh;function vR(e){let t=Jv(),i=NA(),n=hh(),s=Se(!1),a=Se();Fo(h=>(a.current=h,h.sequence=i,s.current||(s.current=!0,h.dispatchEvent(new CustomEvent("sequence",{detail:i}))),{}),[i]),de(()=>{a.current&&(Kr.emit("onResetSeen"),a.current.dispatchEvent(new CustomEvent("sequence-change",{detail:{index:i.currentSequenceIndex,total:i.sequence.length}})))},[i.currentSequenceIndex,n]);let l=0,c=t.map((h,m)=>{let f=l;return l+=h.width+(e.margin||0),$(mR,{key:h.id,canvas:h.id},$(O0,D(A({key:h.id},e),{x:f})))});return $(Je,null,c)}var yR=eR.ErrorBoundary;function I0(e){let t=Ut(),i=Qr(),n=pr(),s=dr(),a=gh((s==null?void 0:s.id)||(n==null?void 0:n.id)),[l,c]=Ne(!1),h=e.rotation||0,m=!e.displayOptions.viewport&&n?e.displayOptions.homePosition?e.displayOptions.homePosition.width/e.displayOptions.homePosition.height:n.width/n.height:void 0;Fo(_=>a?(_.annotationPageManager||(_.annotationPageManager={}),_.annotationPageManager.availablePageIds=a.availablePageIds,_.annotationPageManager.enabledPageIds=a.enabledPageIds,_.annotationPageManager.setPageEnabled=a.setPageEnabled,_.annotationPageManager.setPageDisabled=a.setPageDisabled,{}):{},[a.availablePageIds,a.enabledPageIds,a.setPageEnabled,a.setPageDisabled].join("/")),It(()=>{e.followAnnotations!==!1&&a.availablePageIds.map(_=>{t.requestStatus(_)||t.load(_)})},[a.availablePageIds,e.followAnnotations]),Ci(_=>i.canvas?_.iiif.entities.Canvas[i.canvas]:null,[]);let[f,y]=Ee(()=>{let _=e.displayOptions,{width:P,height:I,homePosition:L,containerProps:E}=_,N=le(_,["width","height","homePosition","containerProps"]),F=e.displayOptions.homePosition&&n?gR(e.displayOptions.homePosition,n):null;return F&&(N.homePosition=F),P&&(N.width=P),I&&(N.height=I),[N,E]},[e.displayOptions,n]),S=_=>{_.altKey&&_.code==="KeyB"&&c(!0)},C=e.renderMultiple?vR:O0;return $(yR,{fallbackRender:_=>$(Rl,A({height:f.height,width:f.width,aspectRatio:m},_))},$($h,D(A({key:e.renderMultiple?"":n==null?void 0:n.id,aspectRatio:m,containerProps:A({onKeyDown:S},y||{}),className:e.className,background:e.background},f),{mode:l?"sketch":e.mode,homeCover:e.homeCover,homeOnResize:!!e.homeCover}),$(C,{isStatic:!e.interactive,debug:e.debug,virtualSizes:e.virtualSizes,highlight:e.highlight,highlightCssClass:e.highlightCssClass,annoMode:l,defaultChoices:e.defaultChoices,disableThumbnail:e.disableThumbnail,skipSizes:e.skipSizes,rotation:h,useFloorCalc:e.useFloorCalc,onCreated:_=>{s&&n&&_&&navigator.clipboard.writeText(Cl({id:`${n.id}#xywh=${_.x},${_.y},${_.width},${_.height}`,type:"Canvas",partOf:[{id:s.id,type:"Manifest"}]})),c(!1)},x:e.x,y:e.y,textSelectionEnabled:e.textSelectionEnabled,textEnabled:e.textEnabled,margin:e.margin}),e.children))}Ye();function bR(e){return $("svg",A({width:"1em",height:"1em",viewBox:"0 0 38 38",xmlns:"http://www.w3.org/2000/svg",stroke:"#000"},e),$("g",{transform:"translate(1 1)",strokeWidth:2,fill:"none",fillRule:"evenodd"},$("circle",{strokeOpacity:.5,cx:18,cy:18,r:18}),$("path",{d:"M36 18c0-9.94-8.06-18-18-18"},$("animateTransform",{attributeName:"transform",type:"rotate",from:"0 18 18",to:"360 18 18",dur:"1s",repeatCount:"indefinite"}))))}Ye(),qe();var wR=({manifestId:e,children:t})=>{let{manifest:i,isLoaded:n,error:s}=bl(e,{});return de(()=>{s&&console.error(s)},[s]),s?$(Rl,{error:new Error(`Unable to load Manifest: ${e} 
 
 ${s.toString()}`)}):!n||!i?$(bR,null):$(wl,{manifest:i.id},t)};qe();var L0=["width","height","target","region","highlight","highlight-css-class","disable-keyboard-navigation","click-to-enable-zoom","preferred-formats","atlas-mode","style-id","debug","preset","responsive","interactive","class","move-events","granular-move-events","a11y-title","a11y-role"],xR=[...L0,"manifest-id","canvas-id","choice-id","text-selection-enabled","disable-thumbnail","text-enabled","follow-annotations","iiif-content","home-cover","rotation","background"],_R=e=>{let{vault:t,webComponent:i,runtime:n,atlasProps:s,isConfigBlocking:a,setParsedTarget:l,highlight:c,highlightCssClass:h,preferredFormats:m,virtualSizes:f,viewport:y,debug:S,mode:C,interactive:_,x:P,y:I,homeCover:L,className:E,inlineStyles:N,inlineStyleSheet:F,useProp:U,useRegisterWebComponentApi:q,setMode:G,background:V}=Tl(e),[ae,W]=Ne(void 0),se=Se([]),[pe,ue]=Ne(),[we,,he]=U("iiifContent",{parse:Al}),[_e,et,,J]=U("canvasId"),[ke,Ie,,Ve]=U("rotation",{parse:kn,defaultValue:0}),[it,te,,Oe]=U("manifestId"),[Nt]=U("followAnnotations",{parse:dt,defaultValue:!0}),[Qt,,,Ht]=U("choiceId",{parse:JT}),[yt]=U("textSelectionEnabled",{parse:dt,defaultValue:!0}),[Ct]=U("disableThumbnail",{parse:dt,defaultValue:!1}),[oi]=U("skipSizes",{parse:dt,defaultValue:!1}),[Jt]=U("textEnabled",{parse:dt,defaultValue:!1}),[Mt]=U("useFloorCalc",{parse:dt,defaultValue:!1}),Yt=we&&we.type!=="remote-content-state"?we:null,mt=we&&we.type==="remote-content-state"?we.id:null,$e=je(De=>{i.current&&(Kr.emit("onResetSeen"),i.current.dispatchEvent(new CustomEvent("canvas-change",{detail:{canvas:De}})))},[]),Ue=je(De=>{if(ae){let Ke={id:`${_e}#xywh=${El(De.x)},${El(De.y)},${De.width},${De.height}`,type:"Canvas",partOf:[{id:it,type:"Manifest"}]},ot={contentState:Ke,normalisedContentState:zs(Ke),encodedContentState:Cl(Ke),selection:{type:"BoxSelector",spatial:De}};se.current.push(ot),ae(ot)}},[ae,it,_e]);if(q(De=>({vault:t,setCanvas:Ke=>{De.setAttribute("canvas-id",Ke)},setManifest:Ke=>{De.setAttribute("manifest-id",Ke)},setDefaultChoiceIds:Ke=>{De.setAttribute("choice-id",Ke.join(","))},getDefaultChoiceIds(){return(Ht.current||[]).map(({id:Ke})=>Ke)},getCanvasId(){return J.current},getContentState(){var Ke,ot,tt,Ni;let Xr=Oe!=null&&Oe.current?Oe==null?void 0:Oe.current:it,Zr={id:`${J!=null&&J.current?J==null?void 0:J.current:_e}#xywh=${(Ke=n.current)==null?void 0:Ke.x},${(ot=n.current)==null?void 0:ot.y},${(tt=n.current)==null?void 0:tt.width},${(Ni=n.current)==null?void 0:Ni.height}`,type:"Canvas",partOf:[{id:Xr,type:"Manifest"}]};return{contentState:Zr,normalisedContentState:zs(Zr),encodedContentState:Cl(Zr)}},getPosition(){var Ke,ot,tt,Ni;return{x:(Ke=n.current)==null?void 0:Ke.x,y:(ot=n.current)==null?void 0:ot.y,width:(tt=n.current)==null?void 0:tt.width,height:(Ni=n.current)==null?void 0:Ni.height}},getManifestId(){return Oe.current},disableTextSelection(){De.setAttribute("text-selection-enabled","false")},enableTextSelection(){De.setAttribute("text-selection-enabled","true")},enableText(){De.setAttribute("text-enabled","true")},disableText(){De.setAttribute("text-enabled","true")},easingFunctions(){return En},getContentStateStack(){return se.current},transition(Ke){var ot,tt;(ot=n.current)!=null&&ot.transitionManager&&Ke((tt=n.current)==null?void 0:tt.transitionManager)},enableContentStateSelection(Ke){G("sketch"),W(ot=>ot||Ke)},disableContentStateSelection(){W(void 0),G("explore"),se.current=[]},setContentStateFromText(Ke,ot=!1){if(Ke==null||Ke.trim()==="")return;let tt=zs(kl(Ke));tt.immediate=ot;let Ni=tt.target[0];J.current===Ni.source.id?n.current&&tt.target&&tt.target[0]&&tt.target[0].selector&&tt.target[0].selector.type==="BoxSelector"&&n.current.world.gotoRegion(D(A({},tt.target[0].selector.spatial),{immediate:ot})):he(tt)}})),It(()=>{mt&&!pe&&fetch(mt).then(De=>De.json()).then(De=>{he(Al(De))}).catch(De=>{console.error(De),ue(new Error(`Failed to load content state from ${mt} 

 ${De.toString()}`))})},[mt,pe]),It(()=>{if(Yt&&Yt.target.length){let De=Yt.target[0];if(De.type==="SpecificResource"&&De.source.type==="Canvas"){let Ke=(De.source.partOf||[]).find(ot=>ot.type==="Manifest");if(et(De.source.id),Ke&&te(Ke.id),De.selector&&n.current&&i.current)if(De.selector.type==="BoxSelector"){let{x:ot,y:tt,width:Ni,height:Xr}=De.selector.spatial;n.current.world.gotoRegion({x:ot,y:tt,width:Ni,height:Xr,immediate:Yt.immediate})}else l(De)}}},[Yt]),de(()=>{$e(_e)},[_e]),a)return null;if(pe)return $(Rl,{error:pe,resetErrorBoundary:()=>ue(null)});let nt=_e?$(uh,{canvas:_e},$(I0,{key:`${_e}-${y?"v1":"v0"}`,interactive:_,defaultChoices:Qt,followAnnotations:Nt,className:E,highlight:c,debug:S,background:V,virtualSizes:f,highlightCssClass:h,canvasId:_e,displayOptions:s,mode:C,rotation:ke||0,x:P,y:I,textEnabled:Jt,textSelectionEnabled:yt,disableThumbnail:Ct,skipSizes:oi,homeCover:L,useFloorCalc:Mt},$("slot",{name:"atlas"}),ae?$(em,{onCreate:Ue}):null),$("slot",null)):null;return $(Nh.Provider,{value:e.__registerPublicApi},$(hr,{vault:t},$(R0,null,it?$(wR,{manifestId:it},nt):nt)),N?$("style",null,N):null,F?$("link",{rel:"stylesheet",href:F}):null)};typeof window<"u"&&Tr(_R,"canvas-panel",xR,{shadow:!0,onConstruct(e){Object.defineProperty(e,"vault",{get(){return e._props.vault},set(t){e._props.vault=t}}),e._props={__registerPublicApi:t=>{Object.assign(e,t(e))}}}}),Ye(),qe();var SR=Be(Qp()),ER=SR.ErrorBoundary;function CR(e){let{atlasProps:t,isConfigBlocking:i,setIsReady:n,preferredFormats:s,virtualSizes:a,height:l,width:c,className:h,inlineStyles:m,inlineStyleSheet:f,viewport:y,vault:S,useProp:C,interactive:_,x:P,y:I,homeCover:L,background:E}=Tl(e),[N]=C("src"),[F]=C("nested",{parse:dt}),[U]=C("rotation",{parse:kn}),[q,G]=C("tileFormat"),[V]=C("skipSizes",{parse:dt}),[ae]=C("disableThumbnail",{parse:dt}),[W,se]=hy(),pe=se[N],ue=Ee(()=>{let he=W({id:N},{});return he&&he.preferredFormats&&he.preferredFormats.length===1&&G(he.preferredFormats[0]),he&&he.height&&he.width&&pe!=="loading"?{id:N,width:he.width,height:he.height,service:he,type:"Image",selector:{type:"BoxSelector",spatial:{x:0,y:0,width:he.width,height:he.height}},target:{type:"BoxSelector",spatial:{x:0,y:0,width:he.width,height:he.height}}}:null},[W,N,se]);if(!ue||!ue.height||!ue.width||i)return null;let we=y?void 0:t.homePosition?t.homePosition.width/t.homePosition.height:ue.width/ue.height;return $(ER,{fallbackRender:he=>$(Rl,A({height:l,width:c,aspectRatio:we},he))},$(hr,{vault:S},$($h,A({onCreated:()=>{n(!0)},viewport:!0,aspectRatio:we,className:h,nested:F,homeCover:L,background:E,homeOnResize:!!L,rotation:U},t),$(T0,{key:ue.id,image:ue,id:ue.id,isStatic:!_,virtualSizes:a,skipSizes:V,skipThumbnail:ae,x:P,y:I,rotation:U,tileFormat:q}))),m?$("style",null,m):null,f?$("link",{rel:"stylesheet",href:f}):null,e.children?$("slot",null,e.children):null)}function kR(e){let t=Ee(()=>new vl,[]);return $(cy.Provider,{value:t},$(CR,A({},e)))}typeof window<"u"&&Tr(kR,"image-service",["src","nested","x","y","width","height","target","region","highlight","highlight-css-class","text-selection-enabled","disable-keyboard-navigation","click-to-enable-zoom","preferred-formats","atlas-mode","style-id","debug","preset","responsive","interactive","iiif-content","class","choice-id","move-events","granular-move-events","home-cover","tile-format","rotation","background"],{shadow:!0,onConstruct(e){e._props={__registerPublicApi:t=>{Object.assign(e,t(e))}}}}),Ye(),qe();var AR=[...L0,"manifest-id","range-id","start-canvas","paging-enabled","text-selection-enabled","text-enabled","follow-annotations","margin","background"];function TR(e){let{vault:t,webComponent:i,runtime:n,atlasProps:s,isConfigBlocking:a,setParsedTarget:l,highlight:c,highlightCssClass:h,preferredFormats:m,virtualSizes:f,viewport:y,debug:S,mode:C,interactive:_,x:P,y:I,className:L,inlineStyles:E,inlineStyleSheet:N,useProp:F,useRegisterWebComponentApi:U,setMode:q,background:G}=Tl(e),[V,ae,,W]=F("manifestId"),[se,,,pe]=F("rangeId"),[ue,we,,he]=F("startCanvas"),[_e]=F("margin",{parse:kn,defaultValue:0}),[et]=F("pagingEnabled",{parse:dt,defaultValue:!0}),[J]=F("textSelectionEnabled",{parse:dt,defaultValue:!0}),[ke]=F("textEnabled",{parse:dt,defaultValue:!1}),[Ie]=F("followAnnotations",{parse:dt,defaultValue:!0}),[Ve,,it]=F("iiifContent",{parse:Al}),te=Ve&&Ve.type!=="remote-content-state"?Ve:null,Oe=Ve&&Ve.type==="remote-content-state"?Ve.id:null,[Nt,Qt]=Ne(),[Ht]=F("skipSizes",{parse:dt,defaultValue:!1});return U(yt=>({vault:t,setManifest:Ct=>{yt.setAttribute("manifest-id",Ct)},setRange:Ct=>{yt.setAttribute("range-id",Ct)},getRangeId(){return pe.current},getContentState(){let Ct=W!=null&&W.current?W==null?void 0:W.current:V,oi=i.current.sequence,Jt=oi.items[oi.sequence[oi.currentSequenceIndex][0]].id,{x:Mt,y:Yt,width:mt,height:$e}=(n==null?void 0:n.current)||{},Ue={id:`${Jt}#xywh=${El(Mt)},${El(Yt)},${mt},${$e}`,type:"Canvas",partOf:[{id:Ct,type:"Manifest"}]};return{contentState:Ue,normalisedContentState:zs(Ue),encodedContentState:Cl(Ue)}},setContentStateFromText(Ct,oi=!1){if(Ct==null||Ct.trim()==="")return;let Jt=zs(kl(Ct));Jt.immediate=oi,it(Jt)},getManifestId(){return W.current},disableTextSelection(){yt.setAttribute("text-selection-enabled","false")},enableTextSelection(){yt.setAttribute("text-selection-enabled","true")},enableText(){yt.setAttribute("text-enabled","true")},disableText(){yt.setAttribute("text-enabled","true")}})),It(()=>{Oe&&!Nt&&fetch(Oe).then(yt=>yt.json()).then(yt=>{it(Al(yt))}).catch(yt=>{console.error(yt),Qt(new Error(`Failed to load content state from ${Oe} 

 ${yt.toString()}`))})},[Oe,Nt]),It(()=>{var yt;if(te&&te.target.length){let Ct=te.target[0];if(Ct.type==="SpecificResource"&&Ct.source.type==="Canvas"){let oi=(Ct.source.partOf||[]).find(Jt=>Jt.type==="Manifest");if(i.current.sequence.setCurrentCanvasId(Ct.source.id),oi&&ae(oi.id),Ct.selector&&Ct.selector.type==="BoxSelector"){let{x:Jt,y:Mt,width:Yt,height:mt}=Ct.selector.spatial;(yt=n==null?void 0:n.current)==null||yt.world.gotoRegion({x:Jt,y:Mt,width:Yt,height:mt,immediate:te.immediate})}}}},[te]),!V||a?null:$(Nh.Provider,{value:e.__registerPublicApi},$(hr,{vault:t},$(R0,null,$($A,{manifest:V,startCanvas:ue,rangeId:se,pagingEnabled:et},$(I0,{renderMultiple:!0,key:`${ue}-${y?"v1":"v0"}`,background:G,interactive:_,followAnnotations:Ie,className:L,highlight:c,debug:S,virtualSizes:f,highlightCssClass:h,displayOptions:s,mode:C,textEnabled:ke,skipSizes:Ht,textSelectionEnabled:J,margin:_e},$("slot",{name:"atlas"})),$("slot",null)))),E?$("style",null,E):null,N?$("link",{rel:"stylesheet",href:N}):null)}typeof window<"u"&&Tr(TR,"sequence-panel",AR,{shadow:!0,onConstruct(e){Object.defineProperty(e,"vault",{get(){return e._props.vault},set(t){e._props.vault=t}}),e._props={__registerPublicApi:t=>{Object.assign(e,t(e))}}}}),Ye(),qe(),Ye();var PR=({metadata:e=[],config:t,variation:i="table",labelWidth:n=16,bordered:s,labelStyle:a,showEmptyMessage:l,allowHtml:c,separator:h})=>{let m={separator:h},f=Ee(()=>{let y=(t||[]).reduce((C,_)=>[...C,..._.keys],[]),S={};for(let C of e){let _=C&&C.label?Object.values(C.label):[];for(let P of _)if(P&&P.length&&(y.indexOf(`metadata.${P[0]}`)!==-1||y.length===0)&&C){let I=`metadata.${P[0]}`;S[I]=S[I]?S[I]:[],S[I].push(C);break}}return S},[t,e]);return Object.keys(f).length===0&&l?$("slot",{name:"empty"}):t&&t.length?$("table",{"data-variation":i,"data-label-style":a,"data-bordered":s},$("slot",{slot:"header"}),$("tbody",null,t.map((y,S)=>{let C=[];for(let _ of y.keys)for(let P of f[_]||[])C.push($("div",{key:S+"__"+_},c?$("span",{dangerouslySetInnerHTML:{__html:An(P.value,m)}}):An(P.value,m)));return C.length===0?null:$("tr",{className:"metadata-row",key:S},$("td",{className:"metadata-key",style:n?{minWidth:n}:{}},c?$("span",{dangerouslySetInnerHTML:{__html:An(y.label,m)}}):An(y.label,m)),$("td",{className:"metadata-value"},C))})),$("slot",{name:"footer"})):$("table",{"data-variation":i,"data-label-style":a,"data-bordered":s},$("slot",{name:"header"}),$("tbody",null,e&&e.length?e.map((y,S)=>y?$("tr",{className:"metadata-row",key:S},$("td",{className:"metadata-key",style:n?{minWidth:n}:{}},c?$("span",{dangerouslySetInnerHTML:{__html:An(y.label,m)}}):An(y.label,m)),$("td",{className:"metadata-value"},c?$("span",{dangerouslySetInnerHTML:{__html:An(y.value,m)}}):An(y.value,m))):null):$("slot",{name:"empty-table"})),$("slot",{name:"footer"}))};function RR(e){let t=Sl(),i=e.vault||t||Ih(),[n]=ze(e.manifestId),[s]=ze(e.variation),[a]=ze(e.labelStyle),[l]=ze(e.separator),[c]=ze(e.labelWidth,{parse:kn}),[h]=ze(e.bordered,{parse:dt,defaultValue:!1}),[m]=ze(e.allowHtml,{parse:dt,defaultValue:!1}),[f]=ze(e.showEmptyMessage,{parse:dt,defaultValue:!1});return n?$(Je,null,$(hr,{vault:i},$(wl,{manifest:n},$(OR,{manifestId:n,variation:s,labelStyle:a,labelWidth:c,bordered:h,showEmptyMessage:f,allowHtml:m,separator:l})))):$("slot",{name:"no-manifest"})}function OR(e){let{manifest:t}=bl(e.manifestId);return $(PR,D(A({},e),{metadata:t==null?void 0:t.metadata}))}var IR=["manifest-id","config-id","variation","label-style","label-width","bordered","show-empty-message"];typeof window<"u"&&Tr(RR,"metadata-panel",IR,{shadow:!1,onConstruct(e){Object.defineProperty(e,"vault",{get(){return e._props.vault},set(t){e._props.vault=t}}),e._props={__registerPublicApi:t=>{Object.assign(e,t(e))}}}}),Ye(),qe(),Ye();function $0(e){var t;let i=hh(),n=Ut(),s=Ee(()=>i==null?void 0:i.items.find(h=>h.type==="Canvas"),[i]),a=Ee(()=>!!(i!=null&&i.items.find(h=>h.type==="Range")),[i]),l=e.selected&&e.selected===(i==null?void 0:i.id);function c(){var h,m;if(i&&e.onRangeClick){let f={isLeaf:!a};if(s){let[y,S]=(h=s.id)==null?void 0:h.split("#");f.selector=s.id,f.canvasId=y,f.fragment=S}else if(i){let y=Xy(n,i);if(y){let[S,C]=(m=y.id)==null?void 0:m.split("#");f.selector=y.id,f.canvasId=S,f.fragment=C}}if(f.selector)try{f.parsedSelector=Ch(f.selector)}catch{}e.onRangeClick(i,f)}}return i?$("ul",{className:"range-item-container","data-leaf":!a,"data-selected":l,"data-with-selector":((t=s==null?void 0:s.id)==null?void 0:t.indexOf("#"))!==-1,"data-range-id":i.id},i.label?$("li",{className:"range-split",onClick:c},$("span",{className:"range-label"},An(i.label))):null,a?$("div",{className:"range-nested-container"},i.items.map(h=>h.type==="Canvas"||h.type==="SpecificResource"||!h.id?null:$(ch,{key:h.id,range:h.id},$($0,{onRangeClick:e.onRangeClick,selected:e.selected})))):null):null}Ye(),qe();function LR(e){let t=dr(),i=Ut();if(!t)throw new Error("No manifest");let n=e.canvasId?_2(i,t,e.canvasId):e.selectedRange?i.get(e.selectedRange):void 0;return It(()=>{if(n&&e.autoScroll){let s=document.querySelector(`[data-range-id="${n.id}"]`);s&&s.scrollIntoView({block:"nearest",behavior:"auto"})}},[n]),!t||!t.structures.length?$("slot",{name:"no-range"}):$(Je,null,n?$("div",{className:"range-current"},An(n.label)):null,t.structures.map(s=>$(ch,{key:s.id,range:s.id},$($0,{selected:n==null?void 0:n.id,onRangeClick:e.onRangeClick}))))}qe();function $R(e){let t=Sl(),i=e.vault||t||Ih(),[n]=ze(e.manifestId),[s]=ze(e.canvasId),[a]=ze(e.selectedRange),[l]=ze(e.autoScroll,{parse:dt,defaultValue:!0}),[c,h]=Ne();if(It(()=>{e.__registerPublicApi&&e.__registerPublicApi(f=>(h(f),{}))},[]),!n)return $("slot",{name:"no-manifest"});function m(f,y){c&&c.dispatchEvent(new CustomEvent("range-change",{detail:{range:f,isLeaf:y.isLeaf,canvasId:y.canvasId,fragment:y.fragment,selector:y.selector,parsedSelector:y.parsedSelector}}))}return $(Je,null,$(hr,{vault:i},$(NR,{manifestId:n,canvasId:s,selectedRange:a,autoScroll:l,onRangeClick:m})))}function NR(e){let{manifest:t,isLoaded:i}=bl(e.manifestId);return!t||!i?null:$(wl,{manifest:t.id},$(LR,A({},e)))}var MR=["manifest-id","config-id","canvas-id","auto-scroll","selected-range"];typeof window<"u"&&Tr($R,"range-panel",MR,{shadow:!1,onConstruct(e){Object.defineProperty(e,"vault",{get(){return e._props.vault},set(t){e._props.vault=t}}),e._props={__registerPublicApi:t=>{Object.assign(e,t(e))}}}})})();/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const ku=window,mp=ku.ShadowRoot&&(ku.ShadyCSS===void 0||ku.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,vp=Symbol(),E1=new WeakMap;let z1=class{constructor(w,p,v){if(this._$cssResult$=!0,v!==vp)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=w,this.t=p}get styleSheet(){let w=this.o;const p=this.t;if(mp&&w===void 0){const v=p!==void 0&&p.length===1;v&&(w=E1.get(p)),w===void 0&&((this.o=w=new CSSStyleSheet).replaceSync(this.cssText),v&&E1.set(p,w))}return w}toString(){return this.cssText}};const ZO=O=>new z1(typeof O=="string"?O:O+"",void 0,vp),JO=(O,...w)=>{const p=O.length===1?O[0]:w.reduce((v,x,k)=>v+(R=>{if(R._$cssResult$===!0)return R.cssText;if(typeof R=="number")return R;throw Error("Value passed to 'css' function must be a 'css' function result: "+R+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(x)+O[k+1],O[0]);return new z1(p,O,vp)},eI=(O,w)=>{mp?O.adoptedStyleSheets=w.map(p=>p instanceof CSSStyleSheet?p:p.styleSheet):w.forEach(p=>{const v=document.createElement("style"),x=ku.litNonce;x!==void 0&&v.setAttribute("nonce",x),v.textContent=p.cssText,O.appendChild(v)})},C1=mp?O=>O:O=>O instanceof CSSStyleSheet?(w=>{let p="";for(const v of w.cssRules)p+=v.cssText;return ZO(p)})(O):O;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var Jd;const Pu=window,k1=Pu.trustedTypes,tI=k1?k1.emptyScript:"",A1=Pu.reactiveElementPolyfillSupport,op={toAttribute(O,w){switch(w){case Boolean:O=O?tI:null;break;case Object:case Array:O=O==null?O:JSON.stringify(O)}return O},fromAttribute(O,w){let p=O;switch(w){case Boolean:p=O!==null;break;case Number:p=O===null?null:Number(O);break;case Object:case Array:try{p=JSON.parse(O)}catch{p=null}}return p}},B1=(O,w)=>w!==O&&(w==w||O==O),ep={attribute:!0,type:String,converter:op,reflect:!1,hasChanged:B1},ap="finalized";let ro=class extends HTMLElement{constructor(){super(),this._$Ei=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$El=null,this._$Eu()}static addInitializer(w){var p;this.finalize(),((p=this.h)!==null&&p!==void 0?p:this.h=[]).push(w)}static get observedAttributes(){this.finalize();const w=[];return this.elementProperties.forEach((p,v)=>{const x=this._$Ep(v,p);x!==void 0&&(this._$Ev.set(x,v),w.push(x))}),w}static createProperty(w,p=ep){if(p.state&&(p.attribute=!1),this.finalize(),this.elementProperties.set(w,p),!p.noAccessor&&!this.prototype.hasOwnProperty(w)){const v=typeof w=="symbol"?Symbol():"__"+w,x=this.getPropertyDescriptor(w,v,p);x!==void 0&&Object.defineProperty(this.prototype,w,x)}}static getPropertyDescriptor(w,p,v){return{get(){return this[p]},set(x){const k=this[w];this[p]=x,this.requestUpdate(w,k,v)},configurable:!0,enumerable:!0}}static getPropertyOptions(w){return this.elementProperties.get(w)||ep}static finalize(){if(this.hasOwnProperty(ap))return!1;this[ap]=!0;const w=Object.getPrototypeOf(this);if(w.finalize(),w.h!==void 0&&(this.h=[...w.h]),this.elementProperties=new Map(w.elementProperties),this._$Ev=new Map,this.hasOwnProperty("properties")){const p=this.properties,v=[...Object.getOwnPropertyNames(p),...Object.getOwnPropertySymbols(p)];for(const x of v)this.createProperty(x,p[x])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(w){const p=[];if(Array.isArray(w)){const v=new Set(w.flat(1/0).reverse());for(const x of v)p.unshift(C1(x))}else w!==void 0&&p.push(C1(w));return p}static _$Ep(w,p){const v=p.attribute;return v===!1?void 0:typeof v=="string"?v:typeof w=="string"?w.toLowerCase():void 0}_$Eu(){var w;this._$E_=new Promise(p=>this.enableUpdating=p),this._$AL=new Map,this._$Eg(),this.requestUpdate(),(w=this.constructor.h)===null||w===void 0||w.forEach(p=>p(this))}addController(w){var p,v;((p=this._$ES)!==null&&p!==void 0?p:this._$ES=[]).push(w),this.renderRoot!==void 0&&this.isConnected&&((v=w.hostConnected)===null||v===void 0||v.call(w))}removeController(w){var p;(p=this._$ES)===null||p===void 0||p.splice(this._$ES.indexOf(w)>>>0,1)}_$Eg(){this.constructor.elementProperties.forEach((w,p)=>{this.hasOwnProperty(p)&&(this._$Ei.set(p,this[p]),delete this[p])})}createRenderRoot(){var w;const p=(w=this.shadowRoot)!==null&&w!==void 0?w:this.attachShadow(this.constructor.shadowRootOptions);return eI(p,this.constructor.elementStyles),p}connectedCallback(){var w;this.renderRoot===void 0&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(w=this._$ES)===null||w===void 0||w.forEach(p=>{var v;return(v=p.hostConnected)===null||v===void 0?void 0:v.call(p)})}enableUpdating(w){}disconnectedCallback(){var w;(w=this._$ES)===null||w===void 0||w.forEach(p=>{var v;return(v=p.hostDisconnected)===null||v===void 0?void 0:v.call(p)})}attributeChangedCallback(w,p,v){this._$AK(w,v)}_$EO(w,p,v=ep){var x;const k=this.constructor._$Ep(w,v);if(k!==void 0&&v.reflect===!0){const R=(((x=v.converter)===null||x===void 0?void 0:x.toAttribute)!==void 0?v.converter:op).toAttribute(p,v.type);this._$El=w,R==null?this.removeAttribute(k):this.setAttribute(k,R),this._$El=null}}_$AK(w,p){var v;const x=this.constructor,k=x._$Ev.get(w);if(k!==void 0&&this._$El!==k){const R=x.getPropertyOptions(k),M=typeof R.converter=="function"?{fromAttribute:R.converter}:((v=R.converter)===null||v===void 0?void 0:v.fromAttribute)!==void 0?R.converter:op;this._$El=k,this[k]=M.fromAttribute(p,R.type),this._$El=null}}requestUpdate(w,p,v){let x=!0;w!==void 0&&(((v=v||this.constructor.getPropertyOptions(w)).hasChanged||B1)(this[w],p)?(this._$AL.has(w)||this._$AL.set(w,p),v.reflect===!0&&this._$El!==w&&(this._$EC===void 0&&(this._$EC=new Map),this._$EC.set(w,v))):x=!1),!this.isUpdatePending&&x&&(this._$E_=this._$Ej())}async _$Ej(){this.isUpdatePending=!0;try{await this._$E_}catch(p){Promise.reject(p)}const w=this.scheduleUpdate();return w!=null&&await w,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var w;if(!this.isUpdatePending)return;this.hasUpdated,this._$Ei&&(this._$Ei.forEach((x,k)=>this[k]=x),this._$Ei=void 0);let p=!1;const v=this._$AL;try{p=this.shouldUpdate(v),p?(this.willUpdate(v),(w=this._$ES)===null||w===void 0||w.forEach(x=>{var k;return(k=x.hostUpdate)===null||k===void 0?void 0:k.call(x)}),this.update(v)):this._$Ek()}catch(x){throw p=!1,this._$Ek(),x}p&&this._$AE(v)}willUpdate(w){}_$AE(w){var p;(p=this._$ES)===null||p===void 0||p.forEach(v=>{var x;return(x=v.hostUpdated)===null||x===void 0?void 0:x.call(v)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(w)),this.updated(w)}_$Ek(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$E_}shouldUpdate(w){return!0}update(w){this._$EC!==void 0&&(this._$EC.forEach((p,v)=>this._$EO(v,this[v],p)),this._$EC=void 0),this._$Ek()}updated(w){}firstUpdated(w){}};ro[ap]=!0,ro.elementProperties=new Map,ro.elementStyles=[],ro.shadowRootOptions={mode:"open"},A1==null||A1({ReactiveElement:ro}),((Jd=Pu.reactiveElementVersions)!==null&&Jd!==void 0?Jd:Pu.reactiveElementVersions=[]).push("1.6.3");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var tp;const Ru=window,ao=Ru.trustedTypes,T1=ao?ao.createPolicy("lit-html",{createHTML:O=>O}):void 0,lp="$lit$",Cr=`lit$${(Math.random()+"").slice(9)}$`,j1="?"+Cr,iI=`<${j1}>`,fs=document,ua=()=>fs.createComment(""),ca=O=>O===null||typeof O!="object"&&typeof O!="function",D1=Array.isArray,nI=O=>D1(O)||typeof(O==null?void 0:O[Symbol.iterator])=="function",ip=`[ 	
\f\r]`,oa=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,P1=/-->/g,R1=/>/g,hs=RegExp(`>|${ip}(?:([^\\s"'>=/]+)(${ip}*=${ip}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),O1=/'/g,I1=/"/g,U1=/^(?:script|style|textarea|title)$/i,rI=O=>(w,...p)=>({_$litType$:O,strings:w,values:p}),ha=rI(1),gs=Symbol.for("lit-noChange"),qt=Symbol.for("lit-nothing"),L1=new WeakMap,ds=fs.createTreeWalker(fs,129,null,!1);function W1(O,w){if(!Array.isArray(O)||!O.hasOwnProperty("raw"))throw Error("invalid template strings array");return T1!==void 0?T1.createHTML(w):w}const sI=(O,w)=>{const p=O.length-1,v=[];let x,k=w===2?"<svg>":"",R=oa;for(let M=0;M<p;M++){const B=O[M];let Y,ne,A=-1,D=0;for(;D<B.length&&(R.lastIndex=D,ne=R.exec(B),ne!==null);)D=R.lastIndex,R===oa?ne[1]==="!--"?R=P1:ne[1]!==void 0?R=R1:ne[2]!==void 0?(U1.test(ne[2])&&(x=RegExp("</"+ne[2],"g")),R=hs):ne[3]!==void 0&&(R=hs):R===hs?ne[0]===">"?(R=x??oa,A=-1):ne[1]===void 0?A=-2:(A=R.lastIndex-ne[2].length,Y=ne[1],R=ne[3]===void 0?hs:ne[3]==='"'?I1:O1):R===I1||R===O1?R=hs:R===P1||R===R1?R=oa:(R=hs,x=void 0);const Ae=R===hs&&O[M+1].startsWith("/>")?" ":"";k+=R===oa?B+iI:A>=0?(v.push(Y),B.slice(0,A)+lp+B.slice(A)+Cr+Ae):B+Cr+(A===-2?(v.push(void 0),M):Ae)}return[W1(O,k+(O[p]||"<?>")+(w===2?"</svg>":"")),v]};class da{constructor({strings:w,_$litType$:p},v){let x;this.parts=[];let k=0,R=0;const M=w.length-1,B=this.parts,[Y,ne]=sI(w,p);if(this.el=da.createElement(Y,v),ds.currentNode=this.el.content,p===2){const A=this.el.content,D=A.firstChild;D.remove(),A.append(...D.childNodes)}for(;(x=ds.nextNode())!==null&&B.length<M;){if(x.nodeType===1){if(x.hasAttributes()){const A=[];for(const D of x.getAttributeNames())if(D.endsWith(lp)||D.startsWith(Cr)){const Ae=ne[R++];if(A.push(D),Ae!==void 0){const le=x.getAttribute(Ae.toLowerCase()+lp).split(Cr),lt=/([.?@])?(.*)/.exec(Ae);B.push({type:1,index:k,name:lt[2],strings:le,ctor:lt[1]==="."?aI:lt[1]==="?"?uI:lt[1]==="@"?cI:Iu})}else B.push({type:6,index:k})}for(const D of A)x.removeAttribute(D)}if(U1.test(x.tagName)){const A=x.textContent.split(Cr),D=A.length-1;if(D>0){x.textContent=ao?ao.emptyScript:"";for(let Ae=0;Ae<D;Ae++)x.append(A[Ae],ua()),ds.nextNode(),B.push({type:2,index:++k});x.append(A[D],ua())}}}else if(x.nodeType===8)if(x.data===j1)B.push({type:2,index:k});else{let A=-1;for(;(A=x.data.indexOf(Cr,A+1))!==-1;)B.push({type:7,index:k}),A+=Cr.length-1}k++}}static createElement(w,p){const v=fs.createElement("template");return v.innerHTML=w,v}}function lo(O,w,p=O,v){var x,k,R,M;if(w===gs)return w;let B=v!==void 0?(x=p._$Co)===null||x===void 0?void 0:x[v]:p._$Cl;const Y=ca(w)?void 0:w._$litDirective$;return(B==null?void 0:B.constructor)!==Y&&((k=B==null?void 0:B._$AO)===null||k===void 0||k.call(B,!1),Y===void 0?B=void 0:(B=new Y(O),B._$AT(O,p,v)),v!==void 0?((R=(M=p)._$Co)!==null&&R!==void 0?R:M._$Co=[])[v]=B:p._$Cl=B),B!==void 0&&(w=lo(O,B._$AS(O,w.values),B,v)),w}class oI{constructor(w,p){this._$AV=[],this._$AN=void 0,this._$AD=w,this._$AM=p}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(w){var p;const{el:{content:v},parts:x}=this._$AD,k=((p=w==null?void 0:w.creationScope)!==null&&p!==void 0?p:fs).importNode(v,!0);ds.currentNode=k;let R=ds.nextNode(),M=0,B=0,Y=x[0];for(;Y!==void 0;){if(M===Y.index){let ne;Y.type===2?ne=new va(R,R.nextSibling,this,w):Y.type===1?ne=new Y.ctor(R,Y.name,Y.strings,this,w):Y.type===6&&(ne=new hI(R,this,w)),this._$AV.push(ne),Y=x[++B]}M!==(Y==null?void 0:Y.index)&&(R=ds.nextNode(),M++)}return ds.currentNode=fs,k}v(w){let p=0;for(const v of this._$AV)v!==void 0&&(v.strings!==void 0?(v._$AI(w,v,p),p+=v.strings.length-2):v._$AI(w[p])),p++}}class va{constructor(w,p,v,x){var k;this.type=2,this._$AH=qt,this._$AN=void 0,this._$AA=w,this._$AB=p,this._$AM=v,this.options=x,this._$Cp=(k=x==null?void 0:x.isConnected)===null||k===void 0||k}get _$AU(){var w,p;return(p=(w=this._$AM)===null||w===void 0?void 0:w._$AU)!==null&&p!==void 0?p:this._$Cp}get parentNode(){let w=this._$AA.parentNode;const p=this._$AM;return p!==void 0&&(w==null?void 0:w.nodeType)===11&&(w=p.parentNode),w}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(w,p=this){w=lo(this,w,p),ca(w)?w===qt||w==null||w===""?(this._$AH!==qt&&this._$AR(),this._$AH=qt):w!==this._$AH&&w!==gs&&this._(w):w._$litType$!==void 0?this.g(w):w.nodeType!==void 0?this.$(w):nI(w)?this.T(w):this._(w)}k(w){return this._$AA.parentNode.insertBefore(w,this._$AB)}$(w){this._$AH!==w&&(this._$AR(),this._$AH=this.k(w))}_(w){this._$AH!==qt&&ca(this._$AH)?this._$AA.nextSibling.data=w:this.$(fs.createTextNode(w)),this._$AH=w}g(w){var p;const{values:v,_$litType$:x}=w,k=typeof x=="number"?this._$AC(w):(x.el===void 0&&(x.el=da.createElement(W1(x.h,x.h[0]),this.options)),x);if(((p=this._$AH)===null||p===void 0?void 0:p._$AD)===k)this._$AH.v(v);else{const R=new oI(k,this),M=R.u(this.options);R.v(v),this.$(M),this._$AH=R}}_$AC(w){let p=L1.get(w.strings);return p===void 0&&L1.set(w.strings,p=new da(w)),p}T(w){D1(this._$AH)||(this._$AH=[],this._$AR());const p=this._$AH;let v,x=0;for(const k of w)x===p.length?p.push(v=new va(this.k(ua()),this.k(ua()),this,this.options)):v=p[x],v._$AI(k),x++;x<p.length&&(this._$AR(v&&v._$AB.nextSibling,x),p.length=x)}_$AR(w=this._$AA.nextSibling,p){var v;for((v=this._$AP)===null||v===void 0||v.call(this,!1,!0,p);w&&w!==this._$AB;){const x=w.nextSibling;w.remove(),w=x}}setConnected(w){var p;this._$AM===void 0&&(this._$Cp=w,(p=this._$AP)===null||p===void 0||p.call(this,w))}}class Iu{constructor(w,p,v,x,k){this.type=1,this._$AH=qt,this._$AN=void 0,this.element=w,this.name=p,this._$AM=x,this.options=k,v.length>2||v[0]!==""||v[1]!==""?(this._$AH=Array(v.length-1).fill(new String),this.strings=v):this._$AH=qt}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(w,p=this,v,x){const k=this.strings;let R=!1;if(k===void 0)w=lo(this,w,p,0),R=!ca(w)||w!==this._$AH&&w!==gs,R&&(this._$AH=w);else{const M=w;let B,Y;for(w=k[0],B=0;B<k.length-1;B++)Y=lo(this,M[v+B],p,B),Y===gs&&(Y=this._$AH[B]),R||(R=!ca(Y)||Y!==this._$AH[B]),Y===qt?w=qt:w!==qt&&(w+=(Y??"")+k[B+1]),this._$AH[B]=Y}R&&!x&&this.j(w)}j(w){w===qt?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,w??"")}}class aI extends Iu{constructor(){super(...arguments),this.type=3}j(w){this.element[this.name]=w===qt?void 0:w}}const lI=ao?ao.emptyScript:"";class uI extends Iu{constructor(){super(...arguments),this.type=4}j(w){w&&w!==qt?this.element.setAttribute(this.name,lI):this.element.removeAttribute(this.name)}}class cI extends Iu{constructor(w,p,v,x,k){super(w,p,v,x,k),this.type=5}_$AI(w,p=this){var v;if((w=(v=lo(this,w,p,0))!==null&&v!==void 0?v:qt)===gs)return;const x=this._$AH,k=w===qt&&x!==qt||w.capture!==x.capture||w.once!==x.once||w.passive!==x.passive,R=w!==qt&&(x===qt||k);k&&this.element.removeEventListener(this.name,this,x),R&&this.element.addEventListener(this.name,this,w),this._$AH=w}handleEvent(w){var p,v;typeof this._$AH=="function"?this._$AH.call((v=(p=this.options)===null||p===void 0?void 0:p.host)!==null&&v!==void 0?v:this.element,w):this._$AH.handleEvent(w)}}class hI{constructor(w,p,v){this.element=w,this.type=6,this._$AN=void 0,this._$AM=p,this.options=v}get _$AU(){return this._$AM._$AU}_$AI(w){lo(this,w)}}const $1=Ru.litHtmlPolyfillSupport;$1==null||$1(da,va),((tp=Ru.litHtmlVersions)!==null&&tp!==void 0?tp:Ru.litHtmlVersions=[]).push("2.8.0");const H1=(O,w,p)=>{var v,x;const k=(v=p==null?void 0:p.renderBefore)!==null&&v!==void 0?v:w;let R=k._$litPart$;if(R===void 0){const M=(x=p==null?void 0:p.renderBefore)!==null&&x!==void 0?x:null;k._$litPart$=R=new va(w.insertBefore(ua(),M),M,void 0,p??{})}return R._$AI(O),R};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var np,rp;let ps=class extends ro{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var w,p;const v=super.createRenderRoot();return(w=(p=this.renderOptions).renderBefore)!==null&&w!==void 0||(p.renderBefore=v.firstChild),v}update(w){const p=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(w),this._$Do=H1(p,this.renderRoot,this.renderOptions)}connectedCallback(){var w;super.connectedCallback(),(w=this._$Do)===null||w===void 0||w.setConnected(!0)}disconnectedCallback(){var w;super.disconnectedCallback(),(w=this._$Do)===null||w===void 0||w.setConnected(!1)}render(){return gs}};ps.finalized=!0,ps._$litElement$=!0,(np=globalThis.litElementHydrateSupport)===null||np===void 0||np.call(globalThis,{LitElement:ps});const N1=globalThis.litElementPolyfillSupport;N1==null||N1({LitElement:ps});((rp=globalThis.litElementVersions)!==null&&rp!==void 0?rp:globalThis.litElementVersions=[]).push("3.3.3");/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const dI=O=>O.strings===void 0;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const q1={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4,EVENT:5,ELEMENT:6},Q1=O=>(...w)=>({_$litDirective$:O,values:w});class V1{constructor(w){}get _$AU(){return this._$AM._$AU}_$AT(w,p,v){this._$Ct=w,this._$AM=p,this._$Ci=v}_$AS(w,p){return this.update(w,p)}update(w,p){return this.render(...p)}}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const la=(O,w)=>{var p,v;const x=O._$AN;if(x===void 0)return!1;for(const k of x)(v=(p=k)._$AO)===null||v===void 0||v.call(p,w,!1),la(k,w);return!0},Ou=O=>{let w,p;do{if((w=O._$AM)===void 0)break;p=w._$AN,p.delete(O),O=w}while((p==null?void 0:p.size)===0)},G1=O=>{for(let w;w=O._$AM;O=w){let p=w._$AN;if(p===void 0)w._$AN=p=new Set;else if(p.has(O))break;p.add(O),gI(w)}};function pI(O){this._$AN!==void 0?(Ou(this),this._$AM=O,G1(this)):this._$AM=O}function fI(O,w=!1,p=0){const v=this._$AH,x=this._$AN;if(x!==void 0&&x.size!==0)if(w)if(Array.isArray(v))for(let k=p;k<v.length;k++)la(v[k],!1),Ou(v[k]);else v!=null&&(la(v,!1),Ou(v));else la(this,O)}const gI=O=>{var w,p,v,x;O.type==q1.CHILD&&((w=(v=O)._$AP)!==null&&w!==void 0||(v._$AP=fI),(p=(x=O)._$AQ)!==null&&p!==void 0||(x._$AQ=pI))};class mI extends V1{constructor(){super(...arguments),this._$AN=void 0}_$AT(w,p,v){super._$AT(w,p,v),G1(this),this.isConnected=w._$AU}_$AO(w,p=!0){var v,x;w!==this.isConnected&&(this.isConnected=w,w?(v=this.reconnected)===null||v===void 0||v.call(this):(x=this.disconnected)===null||x===void 0||x.call(this)),p&&(la(this,w),Ou(this))}setValue(w){if(dI(this._$Ct))this._$Ct._$AI(w,this);else{const p=[...this._$Ct._$AH];p[this._$Ci]=w,this._$Ct._$AI(p,this,0)}}disconnected(){}reconnected(){}}/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const vI=()=>new yI;let yI=class{};const sp=new WeakMap,bI=Q1(class extends mI{render(O){return qt}update(O,[w]){var p;const v=w!==this.G;return v&&this.G!==void 0&&this.ot(void 0),(v||this.rt!==this.lt)&&(this.G=w,this.dt=(p=O.options)===null||p===void 0?void 0:p.host,this.ot(this.lt=O.element)),qt}ot(O){var w;if(typeof this.G=="function"){const p=(w=this.dt)!==null&&w!==void 0?w:globalThis;let v=sp.get(p);v===void 0&&(v=new WeakMap,sp.set(p,v)),v.get(this.G)!==void 0&&this.G.call(this.dt,void 0),v.set(this.G,O),O!==void 0&&this.G.call(this.dt,O)}else this.G.value=O}get rt(){var O,w,p;return typeof this.G=="function"?(w=sp.get((O=this.dt)!==null&&O!==void 0?O:globalThis))===null||w===void 0?void 0:w.get(this.G):(p=this.G)===null||p===void 0?void 0:p.value}disconnected(){this.rt===this.lt&&this.ot(void 0)}reconnected(){this.ot(this.lt)}}),wI=JO`
  :host {
    position: relative;
    display: flex;
    justify-content: center;
    max-height: 100vh;
    max-width: 100vw;
  }

  .image-sequence {
    height: 100vh;
    width: 100%;
  }

  .image-sequence.interactive {
    cursor: grab;
  }

  .image-sequence.interactive.loading {
    cursor: wait;
  }

  .overlay {
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    top: 0;
    left: 0;
    height: 100%;
    width: 100%;
    background: rgba(0,0,0,0);
    color: white;
    transition: all 0.25s linear;
    z-index: 9999;
    pointer-events: none;
  }

  .overlay.visible {
    opacity: 1;
    pointer-events: auto;
  }

  .overlay:not(.visible) {
    opacity: 0;
    display: none;
  }

  .overlay:hover {
    background: rgba(0,0,0,0.6);
  }

  .overlay.loading.visible {
    animation: loading-overlay 1s infinite alternate;
  }

  .buffering-indicator {
    display: flex;
    align-items: center;
    justify-content: center;
    text-align: center;
    border-radius: 5px;
    height: 15%;
    width: 15%;
    background: rgba(0,0,0,0.6);
  }

  @keyframes loading-overlay {
    from {
      opacity: 0.6;
    }
    to {
      opacity: 1;
    }
  }

  .description {
    display: flex;
    flex-direction: column;
    justify-content: space-around;
    align-items: center;
    opacity: 0;
    transition: opacity 0.25s linear;
  }

  .description__icon {
    fill: white;
    height: 2em;
  }

  .overlay:hover .description {
    opacity: 1;
  }

  canvas {
    display: none;
    pointer-events: none;
    user-select: none;
    object-fit: contain;
    width: 100%;
    height: 100%;
    position: absolute;
    top: 0;
    left: 0;
  }

  canvas.visible {
    display: block;
  }

  canvas.fade-in {
    animation: fade-in 0.25s 1 linear;          
  }

  @keyframes fade-in {
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  }

  slot[name='placeholder-image'] img {
    display: block;
    pointer-events: none;
    opacity: 0;
    height: 100%;
    width: 100%;
    margin: 0px auto 0px;
    transition: opacity 0.25s linear;
    object-fit: contain;
  }

  slot[name='placeholder-image'] img.loading {
    opacity: 1;
    filter: brightness(0.4);
    animation: loading-image 1s linear infinite alternate;
  }

  @keyframes loading-image {
    from {
      filter: brightness(0.4);
    }
    to {
      filter: brightness(0.2);
    }
  }`;var so,Au,pa,cp,fa,hp,ga,dp,ma,pp,oo,Tu;class up extends ps{constructor(){super();cs(this,so);cs(this,pa);cs(this,fa);cs(this,ga);cs(this,ma);cs(this,oo);vn(this,"canvasRef",vI());this.description="Click and drag horizontally to rotate image",this.imageUrls=this.getAttribute("items").split(","),this.posterImageSrc=this.imageUrls.length>0?this.imageUrls[0]:"",this.isContinuous=this.getAttribute("continuous")==="true",this.isInteractive=this.getAttribute("interactive")==="true",this.didInteract=!1,this.isReversed=this.getAttribute("reverse")==="true",this.sequenceId=this.getAttribute("sequence-id");const p=.2;this.bufferSize=Math.ceil(this.imageUrls.length*p),this.blitting=null,this.images=Array(this.imageUrls.length).fill(null),this.requests=Array(this.imageUrls.length).fill(null),this.visible=!1,this.index=0,this.intrinsicHeight=0,this.intrinsicWidth=0,this.oldIndex=null,this.oldX=null,this.imageCount=this.imageUrls.length,this.isInteractive&&this.addEventListener("mousemove",this.handleMouseMove.bind(this))}get bufferedPct(){return Math.floor(this.images.filter((p,v)=>no(this,so,Au).includes(v)&&p!==null).length/this.bufferSize*100)}get someImagesLoaded(){return this.images.some(p=>p!==null)}connectedCallback(){super.connectedCallback();const p=(k,R)=>{k.forEach(M=>{M.isIntersecting&&(this.visible=!0,R.disconnect())})},v={root:null,threshold:.5};new IntersectionObserver(p,v).observe(this)}debounce(p,v=250,x=!1){let k=null;return function(){const R=this,M=arguments,B=function(){k=null,x||p.apply(R,M)},Y=x&&!k;clearTimeout(k),k=setTimeout(B,v),Y&&p.apply(R,M)}}handleMouseMove({buttons:p,clientX:v}){if(p){if(this.didInteract=!0,this.oldX){const x=v-this.oldX,k=Math.floor(Math.log(Math.abs(x)))||1;x>0?this.isReversed?this.previousImage(k):this.nextImage(k):x<0&&(this.isReversed?this.nextImage(k):this.previousImage(k))}this.oldX=v}else this.oldX=null}nextImage(p=1){const v=this.index+p>=this.imageCount?this.index+p-this.imageCount:this.index+p;this.index=v}willUpdate(p){if(p.has("rotateToIndex")&&this.rotateToIndex!==!1){const v=this.rotateToIndex-this.index+this.bufferSize/2,x=Array(v).fill(0).map((k,R)=>this.index+R+1);Mn(this,oo,Tu).call(this,x).then(this.animateRotation(this.rotateToIndex))}if(p.has("animationFrame")){if(!this.animationFrame||this.images[this.animationFrame]===null)return;Mn(this,ma,pp).call(this,this.images[this.animationFrame])}p.has("index")&&this.someImagesLoaded&&Mn(this,oo,Tu).call(this).then(()=>{this.animateRotation(this.index)}),p.has("visible")&&!this.visible&&Mn(this,oo,Tu).call(this).then(()=>Mn(this,ma,pp).call(this))}animateRotation(p){if(this.animationFrame===p)return;this.animationFrame=this.index;const v=setInterval(()=>{if(this.animationFrame===p&&(this.index=p,this.rotateToIndex=!1,this.synchronizeSequenceInstances()),this.rotateToIndex!==p){clearInterval(v);return}this.animationFrame+=1},this.transition)}previousImage(p=1){const v=this.index-p<0?this.imageCount+this.index-p:this.index-p;this.index=v}synchronizeSequenceInstances(){clearTimeout(this.updateTimer),this.updateTimer=setTimeout(()=>{document.querySelectorAll(`q-image-sequence[sequence-id="${this.sequenceId}"]`).forEach(v=>{parseInt(v.getAttribute("index"))!==this.index&&v.setAttribute("index",this.index)})},250)}render(){const p=this.isInteractive?ha`<div slot='overlay' class="overlay ${this.didInteract===!1?"visible":""}"><span class="description">
            <svg class="description__icon">
              <symbol id="rotation-icon" viewBox="0 0 24 24">
                <path d="M6.07426 4.68451L6.89234 4.68451L6.89234 6.34444C7.68861 5.65993 8.56396 5.09807 9.5184 4.65884C10.4728 4.21961 11.4791 4 12.5371 4C13.5952 4 14.6014 4.21106 15.5559 4.63317C16.5103 5.05528 17.3856 5.6086 18.1819 6.29311L18.1819 4.68451L19 4.68451L19 7.93593L15.8913 7.93593L15.8913 7.08029L17.7565 7.08029C16.9821 6.39578 16.1694 5.85388 15.3186 5.45458C14.4678 5.05528 13.5406 4.85564 12.5371 4.85564C11.5336 4.85564 10.6092 5.05528 9.76382 5.45458C8.91847 5.85388 8.10311 6.39578 7.31775 7.08029L9.18298 7.08029L9.18298 7.93593L6.07426 7.93593L6.07426 4.68451ZM6.09062 14.0794L7.8086 9.42473L9.05209 9.90389C9.24843 9.98375 9.42023 10.0978 9.56748 10.2461C9.71474 10.3945 9.81018 10.577 9.85381 10.7938L10.1156 12.1457L14.975 9.86966C15.3895 9.67572 15.8067 9.66431 16.2267 9.83544C16.6466 10.0066 16.9493 10.3089 17.1348 10.7424C17.3202 11.1759 17.3338 11.6123 17.1757 12.0515C17.0175 12.4908 16.7312 12.8073 16.3167 13.0013L13.7479 14.1992L13.9115 14.6099C13.9333 14.6555 13.9442 14.7069 13.9442 14.7639L13.9442 14.935L13.8461 17.7415C13.8352 18.0381 13.737 18.3005 13.5516 18.5287C13.3661 18.7569 13.1316 18.9109 12.848 18.9907L9.3466 19.9491C9.03027 20.0403 8.73031 20.009 8.4467 19.8549C8.1631 19.7009 7.95585 19.4699 7.82496 19.1619L6.12334 15.1575C6.04699 14.9864 6.00608 14.8067 6.00063 14.6184C5.99518 14.4302 6.02517 14.2505 6.09062 14.0794ZM6.97415 14.6099L8.83938 19.0079L12.848 17.9469L12.9953 14.4559L12.6189 13.6002L15.9076 12.0601C16.0931 11.9688 16.2185 11.8433 16.284 11.6836C16.3494 11.5239 16.3385 11.3471 16.2512 11.1531C16.164 10.9592 16.044 10.8308 15.8913 10.7681C15.7386 10.7053 15.5695 10.7196 15.3841 10.8109L9.41204 13.5831L8.88847 10.9478L8.38126 10.7595L6.97415 14.6099Z" />
              </symbol>
              <switch>
                <use xlink:href="#rotation-icon"></use>
              </switch>
            </svg>
            <span class="description__text">${this.description}</span>
          </span></div>`:"";return ha`<div class="image-sequence ${no(this,pa,cp)?"":"loading"} ${this.isInteractive?"interactive":""}">
        <slot name="loading-overlay">
          <div slot="loading-overlay" class='${no(this,pa,cp)?"":"visible"} loading overlay'>
            <div class="buffering-indicator">Loading Image Sequence&nbsp;(${this.bufferedPct}%)...</div>
            </div>
        </slot>
        <canvas ${bI(this.canvasRef)} height="${this.intrinsicHeight}" width="${this.intrinsicWidth}" class="${this.someImagesLoaded?"visible":""} ${this.didInteract?"":"fade-in"}" slot="images"></canvas>
        <slot name="overlay">
          ${p}
        </slot>
      </div>`}}so=new WeakSet,Au=function(){const p=this.images.length,v=p+this.index-Math.round(this.bufferSize/2);return Array(this.bufferSize).fill(0).map((x,k)=>(v+k)%p)},pa=new WeakSet,cp=function(){return this.images.filter((p,v)=>no(this,so,Au).includes(v)&&p!==null).length===this.bufferSize},fa=new WeakSet,hp=function(p,v){if(this.requests[v])return;const x=new Request(p),k=fetch(x).then(R=>R.blob()).then(R=>window.createImageBitmap(R)).then(R=>{this.intrinsicHeight===0&&(this.intrinsicHeight=R.height,this.intrinsicWidth=R.width),this.images[v]=R}).then(()=>{this.requests[v]=null,this.requestUpdate()}).catch(R=>{console.error(R)});return this.requests[v]=k,k},ga=new WeakSet,dp=function(p){this.context.drawImage(p,0,0)},ma=new WeakSet,pp=function(p){if(this.canvasRef.value){if(this.context??(this.context=this.canvasRef.value.getContext("2d")),p){window.cancelAnimationFrame(this.blitting),this.blitting=window.requestAnimationFrame(()=>Mn(this,ga,dp).call(this,p));return}if(!this.images[this.index]){Mn(this,fa,hp).call(this,this.imageUrls[this.index],this.index);return}window.cancelAnimationFrame(this.blitting),this.blitting=window.requestAnimationFrame(()=>Mn(this,ga,dp).call(this,this.images[this.index]))}},oo=new WeakSet,Tu=function(p){if(!this.images.some(k=>k===null))return Promise.all([]);const v=p??no(this,so,Au),x=this.images.map((k,R)=>{if(!v.includes(R)||k!==null)return null;const M=this.imageUrls[R];return Mn(this,fa,hp).call(this,M,R)}).filter(k=>k);return Promise.all(x)},vn(up,"styles",[wI]),vn(up,"properties",{animationFrame:{type:Number,state:!0},bufferSize:{type:Number,state:!0},didInteract:{type:Boolean,state:!0},images:{type:Array,state:!0},imageUrls:{attribute:"image-urls",type:String},index:{type:Number},intrinsicHeight:{type:Number,state:!0},intrinsicWidth:{type:Number,state:!0},rotateToIndex:{attribute:"rotate-to-index",type:Number},transition:{type:Number},visible:{type:Boolean,state:!0}});customElements.define("q-image-sequence",up);/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */class fp extends V1{constructor(w){if(super(w),this.et=qt,w.type!==q1.CHILD)throw Error(this.constructor.directiveName+"() can only be used in child bindings")}render(w){if(w===qt||w==null)return this.ft=void 0,this.et=w;if(w===gs)return w;if(typeof w!="string")throw Error(this.constructor.directiveName+"() called with a non-string value");if(w===this.et)return this.ft;this.et=w;const p=[w];return p.raw=p,this.ft={_$litType$:this.constructor.resultType,strings:p,values:[]}}}fp.directiveName="unsafeHTML",fp.resultType=1;const aa=Q1(fp);class Y1 extends ps{setupStyles(){let w=this.querySelector('style[slot="lightbox-styles"]');w&&w.sheet&&(this.adoptedStyleSheets=[w.sheet])}constructor(){super(),this.setupStyles(),this.setupFiguresData(),this.setupFullscreenButton(),this.setupNavigationButtons(),this.setupKeyboardControls()}get counterCurrent(){return this.querySelector("[data-lightbox-counter-current]")}get counterTotal(){return this.querySelector("[data-lightbox-counter-total]")}get fullscreenButton(){return this.querySelector("[data-lightbox-fullscreen]")}get nextButton(){return this.querySelector("[data-lightbox-next]")}get previousButton(){return this.querySelector("[data-lightbox-previous]")}get slides(){return this.querySelectorAll(".q-lightbox-slides__slide")}get slideIds(){return Array.from(this.slides).map(w=>w.id)}get currentSlide(){if(this.slides.length)return this.currentId?this.slides[this.currentSlideIndex]:this.slides[0]}get currentSlideIndex(){if(this.slides.length)return this.currentId?this.slideIds.findIndex(w=>w===this.currentId):0}get fullscreen(){return document.fullscreen||this.wrapper.classList.contains("quire-entry__lightbox--fullscreen")}get wrapper(){return document.querySelector(".quire-entry__lightbox")}enterFullscreen(){const w=this.renderRoot.firstElementChild;w.requestFullscreen?w.requestFullscreen():(this.wrapper.classList.add("quire-entry__lightbox--fullscreen"),document.body.style.position="fixed",document.body.style.top=`-${window.scrollY}px`)}exitFullscreen(){document.exitFullscreen?document.exitFullscreen():(this.wrapper.classList.remove("quire-entry__lightbox--fullscreen"),document.body.style.position="",document.body.style.top="")}next(){if(!this.slides.length)return;const w=this.currentSlideIndex+1,p=this.slideIds[w%this.slides.length];this.currentId=p}previous(){if(!this.slides.length)return;const w=this.currentSlideIndex-1,p=this.slideIds.slice(w)[0];this.currentId=p}_alignSlideData(w){const{aspect_ratio:p="widescreen",caption:v,credit:x,id:k,isSequence:R,label:M,mediaType:B}=w;return{...w,isAudio:B==="soundcloud",isVideo:B==="video"||B==="vimeo"||B==="youtube",aspectRatio:p}}_lightboxSlide(w){const{id:p,mediaType:v,figureElementContent:x,annotationsElementContent:k,aspectRatio:R,isVideo:M,isAudio:B,label:Y,labelHtml:ne,caption:A,captionHtml:D,credit:Ae,creditHtml:le}=w,lt=`q-lightbox-slides__element--${v}`,Ze=M?`q-lightbox-slides__element--video q-lightbox-slides__element--${R}`:"";return ha`<div class="q-lightbox-slides__slide" slot="slides" id="${p}">
      <div class="q-lightbox-slides__element ${lt} ${Ze} ${B?"q-lightbox-slides__element--audio":""}">
        ${aa(x)}
      </div>
      <div class="q-figure-slides__slide-ui">
        <div class="q-lightbox-slides__caption ${Y||A||Ae?"":"is-hidden"}">
          <span class="q-lightbox-slides__caption-label ${Y?"":"is-hidden"}">${aa(ne)}</span>
          <span class="q-lightbox-slides__caption-content ${A||Ae?"":"is-hidden"}">${D?aa(D):""} ${le?aa(le):""}</span>
        </div>
        ${aa(k??"")}
      </div>
    </div>`}setupFiguresData(){const w=this.querySelector('script[type="application/json"]'),p=JSON.parse(w.innerHTML);this.figures=p,p.forEach(v=>{console.log("Rendering",v.id);const x=this._alignSlideData(v);let k=document.createElement("template");H1(this._lightboxSlide(x),k.content);const R=k.content.cloneNode(!0);this.appendChild(R)})}setupFullscreenButton(){this.fullscreenButton&&this.fullscreenButton.addEventListener("click",()=>{this.toggleFullscreen()})}setupNavigationButtons(){!this.nextButton||!this.previousButton||(this.nextButton.addEventListener("click",()=>{this.next()}),this.previousButton.addEventListener("click",()=>{this.previous()}))}setupKeyboardControls(){document.addEventListener("keyup",({code:w})=>{if(this.slides.length>1)switch(w){default:break;case"ArrowRight":this.next();break;case"ArrowLeft":this.previous();break}})}toggleFullscreen(){this.updateFullscreenButton(),this.fullscreen?this.exitFullscreen():this.enterFullscreen()}updateCounterElements(){!this.counterCurrent||!this.counterTotal||(this.counterCurrent.innerText=this.currentSlideIndex+1,this.counterTotal.innerText=this.slides.length)}updateCurrentSlideElement(){this.currentSlide&&(this.slides.forEach(w=>{w.id!==this.currentId&&delete w.dataset.lightboxCurrent,[this.preloadNextId,this.preloadPrevId].includes(w.id)?w.dataset.lightboxPreload=!0:delete w.dataset.lightboxPreload}),this.currentSlide.dataset.lightboxCurrent=!0)}updateFullscreenButton(){this.fullscreenButton&&(this.fullscreenButton.dataset.lightboxFullscreen=!this.fullscreen)}render(){return this.slides.length?(this.currentId=this.slideIds[this.currentSlideIndex],this.preloadNextId=this.currentSlideIndex+1<this.slideIds.length?this.slideIds[this.currentSlideIndex+1]:void 0,this.preloadPrevId=this.currentSlideIndex-1>=0?this.slideIds[this.currentSlideIndex-1]:void 0,this.updateCurrentSlideElement(),this.updateCounterElements(),ha`
      <div class="q-lightbox">
        <slot name="lightbox-styles"></slot>
        <slot name="data"></slot>
        <div class="q-lightbox-slides">
          <slot name="slides"></slot>
        </div>
        <slot name="ui"></slot>
      </div>
    `):""}}vn(Y1,"properties",{currentId:{attribute:"current-id",type:String},preloadNextId:{attribute:"preload-next-id",type:String},preloadPrevId:{attribute:"preload-prev-id",type:String}});customElements.define("q-lightbox",Y1);class K1 extends ps{get closeButton(){return this.querySelector("[data-modal-close]")}get lightbox(){return this.querySelector("q-lightbox")}constructor(){super(),this.setupKeyboardControls(),this.setupModalTriggers()}close(){this.active=!1,this.currentId=null,this.updateLightboxCurrentId(),this.enableScrolling()}disableScrolling(){document.querySelector("html").style.overflow="hidden"}enableScrolling(){document.querySelector("html").style.overflow="auto"}getCurrentFigureId(w){const{target:p}=w;let v=p;for(;!v.matches("figure")&&!v.getAttribute("id");)v=v.parentNode;return v.getAttribute("id")}open(w){this.currentId=this.getCurrentFigureId(w),this.active=!0,this.updateLightboxCurrentId(),this.disableScrolling()}setupCloseButton(){this.closeButton&&this.closeButton.addEventListener("click",()=>{this.close()})}setupKeyboardControls(){document.addEventListener("keyup",({code:w})=>{this.active&&w==="Escape"&&this.close()})}setupModalTriggers(){document.querySelectorAll(".q-figure__modal-link").forEach(w=>{w.addEventListener("click",p=>{p.preventDefault(),this.open(p)})})}updateLightboxCurrentId(){this.lightbox&&this.lightbox.setAttribute("current-id",this.currentId)}render(){return this.dataset.modalActive=this.active,this.setupCloseButton(),ha`
      <div class="q-modal">
        <slot></slot>
      </div>
    `}}vn(K1,"properties",{active:{type:Boolean},currentId:{attribute:"current-id",type:String}});customElements.define("q-modal",K1);var yn;const _t=(yn=class{constructor(w){this.copyLinkButton=w.querySelector(".accordion-section__copy-link-button"),this.element=w,this.id=w.getAttribute("id"),this.globalExpand=document.querySelector(".global-accordion-expand-all"),this.globalCollapse=document.querySelector(".global-accordion-collapse-all"),this.tooltip=w.querySelector(".accordion-tooltip")}get parentAccordions(){return Array.from(_t.elements).filter(w=>w.contains(this.element)&&w!=this.element)}static setGlobalControls(){if(!(!!_t.globalCollapse&&!!_t.globalExpand))return;const p=this.globalControlsState,v=_t.elements.length,x=Array.from(_t.elements).filter(R=>R.getAttribute("open")===null).length,k=()=>{let R;switch(!0){case x===v:R="allClosed";break;case x===0:R="allOpen";break;default:R="mixed";break}return R};if(p!==k())switch(this.globalControlsState=k(),this.globalControlsState){case"allClosed":_t.globalExpand.classList.remove("visually-hidden"),_t.globalCollapse.classList.add("visually-hidden");break;case"allOpen":_t.globalExpand.classList.add("visually-hidden"),_t.globalCollapse.classList.remove("visually-hidden");break;default:_t.globalCollapse.classList.remove("visually-hidden"),_t.globalExpand.classList.remove("visually-hidden");break}}static setup(){_t.elements.length&&(_t.elements.forEach(w=>{new _t(w).init()}),_t.setGlobalControls())}addEventListeners(){this.copyLinkButton.addEventListener("click",this.copyLink.bind(this)),this.element.addEventListener("toggle",_t.setGlobalControls.bind(this)),_t.globalExpand&&_t.globalExpand.addEventListener("click",this.open.bind(this)),_t.globalCollapse&&_t.globalCollapse.addEventListener("click",this.close.bind(this))}close(){this.element.removeAttribute("open"),_t.setGlobalControls()}copyLink(){if(this.copying)return;this.copying=!0;const w=this.copyLinkButton.getAttribute("value"),{origin:p,pathname:v}=window.location;this.tooltip.classList.add("accordion-tooltip--active");try{const x=new URL(v+w,p);navigator.clipboard.writeText(x),window.history.replaceState({},"",x),setTimeout(()=>{this.tooltip.classList.remove("accordion-tooltip--active"),this.copying=!1},2e3)}catch(x){console.error("Error copying heading link: ",x)}}init(){this.addEventListeners(),this.setStateFromUrl()}open(){this.element.setAttribute("open",!0),_t.setGlobalControls()}setStateFromUrl(){const w=window.location.hash.replace(/^#/,"");if(!w)return;const p=document.querySelector(window.location.hash);(w===this.id||this.element.contains(p))&&(this.open(),this.parentAccordions&&this.parentAccordions.length&&this.parentAccordions.forEach(v=>v.setAttribute("open",!0)))}},vn(yn,"className","accordion-section"),vn(yn,"globalExpand",document.querySelector(".global-accordion-expand-all")),vn(yn,"globalCollapse",document.querySelector(".global-accordion-collapse-all")),vn(yn,"elements",document.querySelectorAll(`.${yn.className}`)),vn(yn,"partOfAccordion",w=>w.closest(`.${yn.className}`)),yn),xI=(O,w,p={})=>{const v={root:document.querySelector(".quire-entry__content"),rootMargin:"-50% 0% -50% 0%",threshold:0,...p},x=R=>{R.forEach(M=>{M.isIntersecting&&w()})};new IntersectionObserver(x,v).observe(O)},_I=({callback:O,interval:w=200,maxTries:p=10,tries:v=0,validate:x})=>{const k=()=>{if(v===p){console.error("Polling reached maximum number of attempts");return}v++,x()?O():setTimeout(k,w)};k()};function SI(O,w=null,p=null){const v=document.querySelector(".quire-navbar"),x=7,k=v?O-v.clientHeight-x:O-x;[document.documentElement,document.body.parentNode,document.body].forEach(M=>{M.scrollTop=k})}const yp=O=>{if(!O)return;O=O.replace(":","\\:"),O=O.replace(".","\\.");const w=document.querySelector(O);if(w){_t.partOfAccordion(w)&&new _t(w.closest(`.${_t.className}`)).setStateFromUrl();const p=w.getBoundingClientRect().top+window.scrollY;SI(p),setTimeout(()=>w.focus())}},X1=O=>({checked:O.checked,id:O.getAttribute("value"),input:O.getAttribute("type"),type:O.getAttribute("data-annotation-type")}),Z1=O=>{if(!O)return;const w=O.querySelector("canvas-panel"),p=O.querySelector("q-image-sequence"),v=O.querySelector("image-service");return w?w.getAttribute("canvas-id"):v?v.getAttribute("src"):p?p.getAttribute("sequence-id"):void 0},M1=O=>{const[w,p,v,x]=O.split(",").map(k=>parseInt(k.trim()));return{x:w,y:p,width:v,height:x}},gp=function({annotationIds:O=[],figureId:w,historyBehavior:p="push",region:v,sequence:x={}}){if(!w){console.error("goToFigureState called without an undefined figureId");return}const k=`#${w}`,R=`[slot="slides"][id="${w}"]`,M=document.querySelector(k),B=document.querySelector(R),Y=Z1(M||B);if(!M&&!B)return;const ne=B.closest("q-lightbox");if(ne.currentId=w,!Y)return;const D=[...document.querySelectorAll(`#${w} .annotations-ui__input, [slot="slides"][id="${w}"] .annotations-ui__input`)].map(Fe=>{const Be=Fe.getAttribute("data-annotation-id");return Fe.checked=O.includes(Be),X1(Fe)});_t.elements.forEach(Fe=>{Fe.contains(M)&&Fe.setAttribute("open",!0)}),J1(Y,{annotations:D,region:v||"reset",sequence:x});const Ae=new URL(window.location.pathname,window.location.origin);Ae.hash=w,yp(Ae.hash);const le=new URLSearchParams(O.map(Fe=>["annotation-id",encodeURIComponent(Fe)]));v&&le.set("region",encodeURIComponent(v)),Number.isInteger(parseInt(x.index))&&le.set("sequence-index",encodeURIComponent(x.index));const lt=le.toString(),Ze=[Ae.pathname];lt&&Ze.push(lt);const Et=[{},"",`${Ze.join("?")}${Ae.hash}`];p==="replace"?window.history.replaceState(...Et):window.history.pushState(...Et)},F1=O=>{const w=O.getAttribute("id"),p=Z1(O.closest(".q-figure, .q-lightbox-slides__slide")),v=document.querySelector("q-lightbox").contains(O),x=X1(O),{checked:k,input:R,type:M}=x;if(v){const B=document.querySelector(`#${w.split("lightbox-")[1]}`);B&&(B.checked=O.checked)}else{const B=document.querySelector(`#${["lightbox",w].join("-")}`);B&&(B.checked=O.checked)}if(R==="checkbox"&&M==="choice"){const B=O.closest("form"),Y=B.querySelectorAll(".annotations-ui__input[checked]");if(!k&&Y.length===1&&Y[0].setAttribute("disabled",!0),k){const ne=B.querySelector("[disabled]");ne&&ne.removeAttribute("disabled")}}J1(p,{annotations:[x]})},EI=(O,w)=>{const{checked:p,id:v,type:x}=w;switch(x){case"annotation":O.applyStyles(v,{opacity:+!!p});break;case"choice":_I({callback:()=>CI(O,w),validate:()=>!!O.makeChoice});break}},CI=(O,w)=>{const{checked:p,id:v,input:x}=w;O.setAttribute("choice-id",v),O.makeChoice(v,{deselect:!p,deselectOthers:x==="radio"})},kI=()=>{const O=document.querySelectorAll(".ref");for(const p of O){let v=p.getAttribute("data-annotation-ids");v=v.length?v.split(","):void 0;const x=p.getAttribute("data-figure-id"),k={index:parseInt(p.getAttribute("data-sequence-index")),transition:parseInt(p.getAttribute("data-sequence-transition"))},R=p.getAttribute("data-region");p.getAttribute("data-on-scroll")==="true"?xI(p,()=>gp({annotationIds:v,figureId:x,historyBehavior:"replace",region:R,sequence:k})):p.addEventListener("click",({target:B})=>gp({annotationIds:v,figureId:x,region:R,sequence:k}))}const w=document.querySelectorAll(".annotations-ui__input");for(const p of w)F1(p),p.addEventListener("click",({target:v})=>F1(v))},J1=(O,w)=>{const p=document.querySelectorAll(`canvas-panel[canvas-id="${O}"], image-service[src="${O}"], q-image-sequence[sequence-id="${O}"]`);p.length||console.error(`Failed to call update on canvas panel or image-service component with id ${O}. Element does not exist.`);const{annotations:v,region:x}=w;p.forEach(k=>{const R=k.tagName.toLowerCase()==="q-image-sequence";if(R&&AI(k,w),x&&!R){const M=M1(x&&x!=="reset"?x:k.getAttribute("region")),B={easing:k.easingFunctions().easeOutExpo,duration:2e3};setTimeout((()=>{k.transition(ne=>{ne.goToRegion(M,{transition:B})})})(),500)}Array.isArray(v)&&v.forEach(M=>EI(k,M))})},AI=(O,{sequence:w={}})=>{const{index:p,transition:v}=w,x=parseInt(O.getAttribute("index")),k=parseInt(p);if(Number.isInteger(k)&&k>=0&&x!==k){if(v){O.setAttribute("transition",v),O.setAttribute("rotate-to-index",k);return}O.setAttribute("rotate-to-index",!1),O.setAttribute("index",k)}};var ew=ew||{};ew.Widget=function(O){function w(v){if(p[v])return p[v].exports;var x=p[v]={exports:{},id:v,loaded:!1};return O[v].call(x.exports,x,x.exports,w),x.loaded=!0,x.exports}var p={};return w.m=O,w.c=p,w.p="",w(0)}([function(O,w,p){function v(X){return!!(X===""||X&&X.charCodeAt&&X.substr)}function x(X){return!!(X&&X.constructor&&X.call&&X.apply)}function k(X){return!(!X||X.nodeType!==1||X.nodeName.toUpperCase()!=="IFRAME")}function R(X){var re,ce=!1;for(re in Je)if(Je.hasOwnProperty(re)&&Je[re]===X){ce=!0;break}return ce}function M(X){var re,ce,ee;for(re=0,ce=Vi.length;re<ce&&(ee=X(Vi[re]),ee!==!1);re++);}function B(X){var re,ce,ee,Te="";for(X.substr(0,2)==="//"&&(X=window.location.protocol+X),ee=X.split("/"),re=0,ce=ee.length;re<ce&&re<3;re++)Te+=ee[re],re<2&&(Te+="/");return Te}function Y(X){return X.contentWindow?X.contentWindow:X.contentDocument&&"parentWindow"in X.contentDocument?X.contentDocument.parentWindow:null}function ne(X){var re,ce=[];for(re in X)X.hasOwnProperty(re)&&ce.push(X[re]);return ce}function A(X,re,ce){ce.callbacks[X]=ce.callbacks[X]||[],ce.callbacks[X].push(re)}function D(X,re){var ce,ee=!0;return re.callbacks[X]=[],M(function(Te){if(ce=Te.callbacks[X]||[],ce.length)return ee=!1,!1}),ee}function Ae(X,re,ce){var ee,Te,rt=Y(ce);return!!rt.postMessage&&(ee=ce.getAttribute("src").split("?")[0],Te=JSON.stringify({method:X,value:re}),ee.substr(0,2)==="//"&&(ee=window.location.protocol+ee),ee=ee.replace(/http:\/\/(w|wt).soundcloud.com/,"https://$1.soundcloud.com"),void rt.postMessage(Te,ee))}function le(X){var re;return M(function(ce){if(ce.instance===X)return re=ce,!1}),re}function lt(X){var re;return M(function(ce){if(Y(ce.element)===X)return re=ce,!1}),re}function Ze(X,re){return function(ce){var ee=x(ce),Te=le(this),rt=!ee&&re?ce:null,wi=ee&&!re?ce:null;return wi&&A(X,wi,Te),Ae(X,rt,Te.element),this}}function Et(X,re,ce){var ee,Te,rt;for(ee=0,Te=re.length;ee<Te;ee++)rt=re[ee],X[rt]=Ze(rt,ce)}function Fe(X,re,ce){return X+"?url="+re+"&"+Be(ce)}function Be(X){var re,ce,ee=[];for(re in X)X.hasOwnProperty(re)&&(ce=X[re],ee.push(re+"="+(re==="start_track"?parseInt(ce,10):ce?"true":"false")));return ee.join("&")}function Gt(X,re,ce){var ee,Te,rt=X.callbacks[re]||[];for(ee=0,Te=rt.length;ee<Te;ee++)rt[ee].apply(X.instance,ce);(R(re)||re===Ot.READY)&&(X.callbacks[re]=[])}function Qe(X){var re,ce,ee,Te,rt;try{ce=JSON.parse(X.data)}catch{return!1}return re=lt(X.source),ee=ce.method,Te=ce.value,(!re||jt(X.origin)===jt(re.domain))&&(re?(ee===Ot.READY&&(re.isReady=!0,Gt(re,Xi),D(Xi,re)),ee!==Ot.PLAY||re.playEventFired||(re.playEventFired=!0),ee!==Ot.PLAY_PROGRESS||re.playEventFired||(re.playEventFired=!0,Gt(re,Ot.PLAY,[Te])),rt=[],Te!==void 0&&rt.push(Te),void Gt(re,ee,rt)):(ee===Ot.READY&&ln.push(X.source),!1))}function jt(X){return X.replace(fe,"")}var bi,$,Oi,bn=p(1),Je=p(2),Xt=p(3),Ot=bn.api,Fi=bn.bridge,ln=[],Vi=[],Xi="__LATE_BINDING__",un="http://wt.soundcloud.test:9200/",fe=/^http(?:s?)/;window.addEventListener?window.addEventListener("message",Qe,!1):window.attachEvent("onmessage",Qe),O.exports=Oi=function(X,re,ce){if(v(X)&&(X=document.getElementById(X)),!k(X))throw new Error("SC.Widget function should be given either iframe element or a string specifying id attribute of iframe element.");re&&(ce=ce||{},X.src=Fe(un,re,ce));var ee,Te,rt=lt(Y(X));return rt&&rt.instance?rt.instance:(ee=ln.indexOf(Y(X))>-1,Te=new bi(X),Vi.push(new $(Te,X,ee)),Te)},Oi.Events=Ot,window.SC=window.SC||{},window.SC.Widget=Oi,$=function(X,re,ce){this.instance=X,this.element=re,this.domain=B(re.getAttribute("src")),this.isReady=!!ce,this.callbacks={}},bi=function(){},bi.prototype={constructor:bi,load:function(X,re){if(X){re=re||{};var ce=this,ee=le(this),Te=ee.element,rt=Te.src,wi=rt.substr(0,rt.indexOf("?"));ee.isReady=!1,ee.playEventFired=!1,Te.onload=function(){ce.bind(Ot.READY,function(){var ft,ms=ee.callbacks;for(ft in ms)ms.hasOwnProperty(ft)&&ft!==Ot.READY&&Ae(Fi.ADD_LISTENER,ft,ee.element);re.callback&&re.callback()})},Te.src=Fe(wi,X,re)}},bind:function(X,re){var ce=this,ee=le(this);return ee&&ee.element&&(X===Ot.READY&&ee.isReady?setTimeout(re,1):ee.isReady?(A(X,re,ee),Ae(Fi.ADD_LISTENER,X,ee.element)):A(Xi,function(){ce.bind(X,re)},ee)),this},unbind:function(X){var re,ce=le(this);ce&&ce.element&&(re=D(X,ce),X!==Ot.READY&&re&&Ae(Fi.REMOVE_LISTENER,X,ce.element))}},Et(bi.prototype,ne(Je)),Et(bi.prototype,ne(Xt),!0)},function(O,w){w.api={LOAD_PROGRESS:"loadProgress",PLAY_PROGRESS:"playProgress",PLAY:"play",PAUSE:"pause",FINISH:"finish",SEEK:"seek",READY:"ready",OPEN_SHARE_PANEL:"sharePanelOpened",CLICK_DOWNLOAD:"downloadClicked",CLICK_BUY:"buyClicked",ERROR:"error"},w.bridge={REMOVE_LISTENER:"removeEventListener",ADD_LISTENER:"addEventListener"}},function(O,w){O.exports={GET_VOLUME:"getVolume",GET_DURATION:"getDuration",GET_POSITION:"getPosition",GET_SOUNDS:"getSounds",GET_CURRENT_SOUND:"getCurrentSound",GET_CURRENT_SOUND_INDEX:"getCurrentSoundIndex",IS_PAUSED:"isPaused"}},function(O,w){O.exports={PLAY:"play",PAUSE:"pause",TOGGLE:"toggle",SEEK_TO:"seekTo",SET_VOLUME:"setVolume",NEXT:"next",PREV:"prev",SKIP:"skip"}}]);var tw={exports:{}};/**
 * lunr - http://lunrjs.com - A bit like Solr, but much smaller and not as bright - 2.3.9
 * Copyright (C) 2020 Oliver Nightingale
 * @license MIT
 */(function(O,w){(function(){var p=function(v){var x=new p.Builder;return x.pipeline.add(p.trimmer,p.stopWordFilter,p.stemmer),x.searchPipeline.add(p.stemmer),v.call(x,x),x.build()};p.version="2.3.9";/*!
 * lunr.utils
 * Copyright (C) 2020 Oliver Nightingale
 */p.utils={},p.utils.warn=function(v){return function(x){v.console&&console.warn&&console.warn(x)}}(this),p.utils.asString=function(v){return v==null?"":v.toString()},p.utils.clone=function(v){if(v==null)return v;for(var x=Object.create(null),k=Object.keys(v),R=0;R<k.length;R++){var M=k[R],B=v[M];if(Array.isArray(B)){x[M]=B.slice();continue}if(typeof B=="string"||typeof B=="number"||typeof B=="boolean"){x[M]=B;continue}throw new TypeError("clone is not deep and does not support nested objects")}return x},p.FieldRef=function(v,x,k){this.docRef=v,this.fieldName=x,this._stringValue=k},p.FieldRef.joiner="/",p.FieldRef.fromString=function(v){var x=v.indexOf(p.FieldRef.joiner);if(x===-1)throw"malformed field ref string";var k=v.slice(0,x),R=v.slice(x+1);return new p.FieldRef(R,k,v)},p.FieldRef.prototype.toString=function(){return this._stringValue==null&&(this._stringValue=this.fieldName+p.FieldRef.joiner+this.docRef),this._stringValue};/*!
 * lunr.Set
 * Copyright (C) 2020 Oliver Nightingale
 */p.Set=function(v){if(this.elements=Object.create(null),v){this.length=v.length;for(var x=0;x<this.length;x++)this.elements[v[x]]=!0}else this.length=0},p.Set.complete={intersect:function(v){return v},union:function(){return this},contains:function(){return!0}},p.Set.empty={intersect:function(){return this},union:function(v){return v},contains:function(){return!1}},p.Set.prototype.contains=function(v){return!!this.elements[v]},p.Set.prototype.intersect=function(v){var x,k,R,M=[];if(v===p.Set.complete)return this;if(v===p.Set.empty)return v;this.length<v.length?(x=this,k=v):(x=v,k=this),R=Object.keys(x.elements);for(var B=0;B<R.length;B++){var Y=R[B];Y in k.elements&&M.push(Y)}return new p.Set(M)},p.Set.prototype.union=function(v){return v===p.Set.complete?p.Set.complete:v===p.Set.empty?this:new p.Set(Object.keys(this.elements).concat(Object.keys(v.elements)))},p.idf=function(v,x){var k=0;for(var R in v)R!="_index"&&(k+=Object.keys(v[R]).length);var M=(x-k+.5)/(k+.5);return Math.log(1+Math.abs(M))},p.Token=function(v,x){this.str=v||"",this.metadata=x||{}},p.Token.prototype.toString=function(){return this.str},p.Token.prototype.update=function(v){return this.str=v(this.str,this.metadata),this},p.Token.prototype.clone=function(v){return v=v||function(x){return x},new p.Token(v(this.str,this.metadata),this.metadata)};/*!
 * lunr.tokenizer
 * Copyright (C) 2020 Oliver Nightingale
 */p.tokenizer=function(v,x){if(v==null||v==null)return[];if(Array.isArray(v))return v.map(function(Ae){return new p.Token(p.utils.asString(Ae).toLowerCase(),p.utils.clone(x))});for(var k=v.toString().toLowerCase(),R=k.length,M=[],B=0,Y=0;B<=R;B++){var ne=k.charAt(B),A=B-Y;if(ne.match(p.tokenizer.separator)||B==R){if(A>0){var D=p.utils.clone(x)||{};D.position=[Y,A],D.index=M.length,M.push(new p.Token(k.slice(Y,B),D))}Y=B+1}}return M},p.tokenizer.separator=/[\s\-]+/;/*!
 * lunr.Pipeline
 * Copyright (C) 2020 Oliver Nightingale
 */p.Pipeline=function(){this._stack=[]},p.Pipeline.registeredFunctions=Object.create(null),p.Pipeline.registerFunction=function(v,x){x in this.registeredFunctions&&p.utils.warn("Overwriting existing registered function: "+x),v.label=x,p.Pipeline.registeredFunctions[v.label]=v},p.Pipeline.warnIfFunctionNotRegistered=function(v){var x=v.label&&v.label in this.registeredFunctions;x||p.utils.warn(`Function is not registered with pipeline. This may cause problems when serialising the index.
`,v)},p.Pipeline.load=function(v){var x=new p.Pipeline;return v.forEach(function(k){var R=p.Pipeline.registeredFunctions[k];if(R)x.add(R);else throw new Error("Cannot load unregistered function: "+k)}),x},p.Pipeline.prototype.add=function(){var v=Array.prototype.slice.call(arguments);v.forEach(function(x){p.Pipeline.warnIfFunctionNotRegistered(x),this._stack.push(x)},this)},p.Pipeline.prototype.after=function(v,x){p.Pipeline.warnIfFunctionNotRegistered(x);var k=this._stack.indexOf(v);if(k==-1)throw new Error("Cannot find existingFn");k=k+1,this._stack.splice(k,0,x)},p.Pipeline.prototype.before=function(v,x){p.Pipeline.warnIfFunctionNotRegistered(x);var k=this._stack.indexOf(v);if(k==-1)throw new Error("Cannot find existingFn");this._stack.splice(k,0,x)},p.Pipeline.prototype.remove=function(v){var x=this._stack.indexOf(v);x!=-1&&this._stack.splice(x,1)},p.Pipeline.prototype.run=function(v){for(var x=this._stack.length,k=0;k<x;k++){for(var R=this._stack[k],M=[],B=0;B<v.length;B++){var Y=R(v[B],B,v);if(!(Y==null||Y===""))if(Array.isArray(Y))for(var ne=0;ne<Y.length;ne++)M.push(Y[ne]);else M.push(Y)}v=M}return v},p.Pipeline.prototype.runString=function(v,x){var k=new p.Token(v,x);return this.run([k]).map(function(R){return R.toString()})},p.Pipeline.prototype.reset=function(){this._stack=[]},p.Pipeline.prototype.toJSON=function(){return this._stack.map(function(v){return p.Pipeline.warnIfFunctionNotRegistered(v),v.label})};/*!
 * lunr.Vector
 * Copyright (C) 2020 Oliver Nightingale
 */p.Vector=function(v){this._magnitude=0,this.elements=v||[]},p.Vector.prototype.positionForIndex=function(v){if(this.elements.length==0)return 0;for(var x=0,k=this.elements.length/2,R=k-x,M=Math.floor(R/2),B=this.elements[M*2];R>1&&(B<v&&(x=M),B>v&&(k=M),B!=v);)R=k-x,M=x+Math.floor(R/2),B=this.elements[M*2];if(B==v||B>v)return M*2;if(B<v)return(M+1)*2},p.Vector.prototype.insert=function(v,x){this.upsert(v,x,function(){throw"duplicate index"})},p.Vector.prototype.upsert=function(v,x,k){this._magnitude=0;var R=this.positionForIndex(v);this.elements[R]==v?this.elements[R+1]=k(this.elements[R+1],x):this.elements.splice(R,0,v,x)},p.Vector.prototype.magnitude=function(){if(this._magnitude)return this._magnitude;for(var v=0,x=this.elements.length,k=1;k<x;k+=2){var R=this.elements[k];v+=R*R}return this._magnitude=Math.sqrt(v)},p.Vector.prototype.dot=function(v){for(var x=0,k=this.elements,R=v.elements,M=k.length,B=R.length,Y=0,ne=0,A=0,D=0;A<M&&D<B;)Y=k[A],ne=R[D],Y<ne?A+=2:Y>ne?D+=2:Y==ne&&(x+=k[A+1]*R[D+1],A+=2,D+=2);return x},p.Vector.prototype.similarity=function(v){return this.dot(v)/this.magnitude()||0},p.Vector.prototype.toArray=function(){for(var v=new Array(this.elements.length/2),x=1,k=0;x<this.elements.length;x+=2,k++)v[k]=this.elements[x];return v},p.Vector.prototype.toJSON=function(){return this.elements};/*!
 * lunr.stemmer
 * Copyright (C) 2020 Oliver Nightingale
 * Includes code from - http://tartarus.org/~martin/PorterStemmer/js.txt
 */p.stemmer=function(){var v={ational:"ate",tional:"tion",enci:"ence",anci:"ance",izer:"ize",bli:"ble",alli:"al",entli:"ent",eli:"e",ousli:"ous",ization:"ize",ation:"ate",ator:"ate",alism:"al",iveness:"ive",fulness:"ful",ousness:"ous",aliti:"al",iviti:"ive",biliti:"ble",logi:"log"},x={icate:"ic",ative:"",alize:"al",iciti:"ic",ical:"ic",ful:"",ness:""},k="[^aeiou]",R="[aeiouy]",M=k+"[^aeiouy]*",B=R+"[aeiou]*",Y="^("+M+")?"+B+M,ne="^("+M+")?"+B+M+"("+B+")?$",A="^("+M+")?"+B+M+B+M,D="^("+M+")?"+R,Ae=new RegExp(Y),le=new RegExp(A),lt=new RegExp(ne),Ze=new RegExp(D),Et=/^(.+?)(ss|i)es$/,Fe=/^(.+?)([^s])s$/,Be=/^(.+?)eed$/,Gt=/^(.+?)(ed|ing)$/,Qe=/.$/,jt=/(at|bl|iz)$/,bi=new RegExp("([^aeiouylsz])\\1$"),$=new RegExp("^"+M+R+"[^aeiouwxy]$"),Oi=/^(.+?[^aeiou])y$/,bn=/^(.+?)(ational|tional|enci|anci|izer|bli|alli|entli|eli|ousli|ization|ation|ator|alism|iveness|fulness|ousness|aliti|iviti|biliti|logi)$/,Je=/^(.+?)(icate|ative|alize|iciti|ical|ful|ness)$/,Xt=/^(.+?)(al|ance|ence|er|ic|able|ible|ant|ement|ment|ent|ou|ism|ate|iti|ous|ive|ize)$/,Ot=/^(.+?)(s|t)(ion)$/,Fi=/^(.+?)e$/,ln=/ll$/,Vi=new RegExp("^"+M+R+"[^aeiouwxy]$"),Xi=function(fe){var X,re,ce,ee,Te,rt,wi;if(fe.length<3)return fe;if(ce=fe.substr(0,1),ce=="y"&&(fe=ce.toUpperCase()+fe.substr(1)),ee=Et,Te=Fe,ee.test(fe)?fe=fe.replace(ee,"$1$2"):Te.test(fe)&&(fe=fe.replace(Te,"$1$2")),ee=Be,Te=Gt,ee.test(fe)){var ft=ee.exec(fe);ee=Ae,ee.test(ft[1])&&(ee=Qe,fe=fe.replace(ee,""))}else if(Te.test(fe)){var ft=Te.exec(fe);X=ft[1],Te=Ze,Te.test(X)&&(fe=X,Te=jt,rt=bi,wi=$,Te.test(fe)?fe=fe+"e":rt.test(fe)?(ee=Qe,fe=fe.replace(ee,"")):wi.test(fe)&&(fe=fe+"e"))}if(ee=Oi,ee.test(fe)){var ft=ee.exec(fe);X=ft[1],fe=X+"i"}if(ee=bn,ee.test(fe)){var ft=ee.exec(fe);X=ft[1],re=ft[2],ee=Ae,ee.test(X)&&(fe=X+v[re])}if(ee=Je,ee.test(fe)){var ft=ee.exec(fe);X=ft[1],re=ft[2],ee=Ae,ee.test(X)&&(fe=X+x[re])}if(ee=Xt,Te=Ot,ee.test(fe)){var ft=ee.exec(fe);X=ft[1],ee=le,ee.test(X)&&(fe=X)}else if(Te.test(fe)){var ft=Te.exec(fe);X=ft[1]+ft[2],Te=le,Te.test(X)&&(fe=X)}if(ee=Fi,ee.test(fe)){var ft=ee.exec(fe);X=ft[1],ee=le,Te=lt,rt=Vi,(ee.test(X)||Te.test(X)&&!rt.test(X))&&(fe=X)}return ee=ln,Te=le,ee.test(fe)&&Te.test(fe)&&(ee=Qe,fe=fe.replace(ee,"")),ce=="y"&&(fe=ce.toLowerCase()+fe.substr(1)),fe};return function(un){return un.update(Xi)}}(),p.Pipeline.registerFunction(p.stemmer,"stemmer");/*!
 * lunr.stopWordFilter
 * Copyright (C) 2020 Oliver Nightingale
 */p.generateStopWordFilter=function(v){var x=v.reduce(function(k,R){return k[R]=R,k},{});return function(k){if(k&&x[k.toString()]!==k.toString())return k}},p.stopWordFilter=p.generateStopWordFilter(["a","able","about","across","after","all","almost","also","am","among","an","and","any","are","as","at","be","because","been","but","by","can","cannot","could","dear","did","do","does","either","else","ever","every","for","from","get","got","had","has","have","he","her","hers","him","his","how","however","i","if","in","into","is","it","its","just","least","let","like","likely","may","me","might","most","must","my","neither","no","nor","not","of","off","often","on","only","or","other","our","own","rather","said","say","says","she","should","since","so","some","than","that","the","their","them","then","there","these","they","this","tis","to","too","twas","us","wants","was","we","were","what","when","where","which","while","who","whom","why","will","with","would","yet","you","your"]),p.Pipeline.registerFunction(p.stopWordFilter,"stopWordFilter");/*!
 * lunr.trimmer
 * Copyright (C) 2020 Oliver Nightingale
 */p.trimmer=function(v){return v.update(function(x){return x.replace(/^\W+/,"").replace(/\W+$/,"")})},p.Pipeline.registerFunction(p.trimmer,"trimmer");/*!
 * lunr.TokenSet
 * Copyright (C) 2020 Oliver Nightingale
 */p.TokenSet=function(){this.final=!1,this.edges={},this.id=p.TokenSet._nextId,p.TokenSet._nextId+=1},p.TokenSet._nextId=1,p.TokenSet.fromArray=function(v){for(var x=new p.TokenSet.Builder,k=0,R=v.length;k<R;k++)x.insert(v[k]);return x.finish(),x.root},p.TokenSet.fromClause=function(v){return"editDistance"in v?p.TokenSet.fromFuzzyString(v.term,v.editDistance):p.TokenSet.fromString(v.term)},p.TokenSet.fromFuzzyString=function(v,x){for(var k=new p.TokenSet,R=[{node:k,editsRemaining:x,str:v}];R.length;){var M=R.pop();if(M.str.length>0){var B=M.str.charAt(0),Y;B in M.node.edges?Y=M.node.edges[B]:(Y=new p.TokenSet,M.node.edges[B]=Y),M.str.length==1&&(Y.final=!0),R.push({node:Y,editsRemaining:M.editsRemaining,str:M.str.slice(1)})}if(M.editsRemaining!=0){if("*"in M.node.edges)var ne=M.node.edges["*"];else{var ne=new p.TokenSet;M.node.edges["*"]=ne}if(M.str.length==0&&(ne.final=!0),R.push({node:ne,editsRemaining:M.editsRemaining-1,str:M.str}),M.str.length>1&&R.push({node:M.node,editsRemaining:M.editsRemaining-1,str:M.str.slice(1)}),M.str.length==1&&(M.node.final=!0),M.str.length>=1){if("*"in M.node.edges)var A=M.node.edges["*"];else{var A=new p.TokenSet;M.node.edges["*"]=A}M.str.length==1&&(A.final=!0),R.push({node:A,editsRemaining:M.editsRemaining-1,str:M.str.slice(1)})}if(M.str.length>1){var D=M.str.charAt(0),Ae=M.str.charAt(1),le;Ae in M.node.edges?le=M.node.edges[Ae]:(le=new p.TokenSet,M.node.edges[Ae]=le),M.str.length==1&&(le.final=!0),R.push({node:le,editsRemaining:M.editsRemaining-1,str:D+M.str.slice(2)})}}}return k},p.TokenSet.fromString=function(v){for(var x=new p.TokenSet,k=x,R=0,M=v.length;R<M;R++){var B=v[R],Y=R==M-1;if(B=="*")x.edges[B]=x,x.final=Y;else{var ne=new p.TokenSet;ne.final=Y,x.edges[B]=ne,x=ne}}return k},p.TokenSet.prototype.toArray=function(){for(var v=[],x=[{prefix:"",node:this}];x.length;){var k=x.pop(),R=Object.keys(k.node.edges),M=R.length;k.node.final&&(k.prefix.charAt(0),v.push(k.prefix));for(var B=0;B<M;B++){var Y=R[B];x.push({prefix:k.prefix.concat(Y),node:k.node.edges[Y]})}}return v},p.TokenSet.prototype.toString=function(){if(this._str)return this._str;for(var v=this.final?"1":"0",x=Object.keys(this.edges).sort(),k=x.length,R=0;R<k;R++){var M=x[R],B=this.edges[M];v=v+M+B.id}return v},p.TokenSet.prototype.intersect=function(v){for(var x=new p.TokenSet,k=void 0,R=[{qNode:v,output:x,node:this}];R.length;){k=R.pop();for(var M=Object.keys(k.qNode.edges),B=M.length,Y=Object.keys(k.node.edges),ne=Y.length,A=0;A<B;A++)for(var D=M[A],Ae=0;Ae<ne;Ae++){var le=Y[Ae];if(le==D||D=="*"){var lt=k.node.edges[le],Ze=k.qNode.edges[D],Et=lt.final&&Ze.final,Fe=void 0;le in k.output.edges?(Fe=k.output.edges[le],Fe.final=Fe.final||Et):(Fe=new p.TokenSet,Fe.final=Et,k.output.edges[le]=Fe),R.push({qNode:Ze,output:Fe,node:lt})}}}return x},p.TokenSet.Builder=function(){this.previousWord="",this.root=new p.TokenSet,this.uncheckedNodes=[],this.minimizedNodes={}},p.TokenSet.Builder.prototype.insert=function(v){var x,k=0;if(v<this.previousWord)throw new Error("Out of order word insertion");for(var R=0;R<v.length&&R<this.previousWord.length&&v[R]==this.previousWord[R];R++)k++;this.minimize(k),this.uncheckedNodes.length==0?x=this.root:x=this.uncheckedNodes[this.uncheckedNodes.length-1].child;for(var R=k;R<v.length;R++){var M=new p.TokenSet,B=v[R];x.edges[B]=M,this.uncheckedNodes.push({parent:x,char:B,child:M}),x=M}x.final=!0,this.previousWord=v},p.TokenSet.Builder.prototype.finish=function(){this.minimize(0)},p.TokenSet.Builder.prototype.minimize=function(v){for(var x=this.uncheckedNodes.length-1;x>=v;x--){var k=this.uncheckedNodes[x],R=k.child.toString();R in this.minimizedNodes?k.parent.edges[k.char]=this.minimizedNodes[R]:(k.child._str=R,this.minimizedNodes[R]=k.child),this.uncheckedNodes.pop()}};/*!
 * lunr.Index
 * Copyright (C) 2020 Oliver Nightingale
 */p.Index=function(v){this.invertedIndex=v.invertedIndex,this.fieldVectors=v.fieldVectors,this.tokenSet=v.tokenSet,this.fields=v.fields,this.pipeline=v.pipeline},p.Index.prototype.search=function(v){return this.query(function(x){var k=new p.QueryParser(v,x);k.parse()})},p.Index.prototype.query=function(v){for(var x=new p.Query(this.fields),k=Object.create(null),R=Object.create(null),M=Object.create(null),B=Object.create(null),Y=Object.create(null),ne=0;ne<this.fields.length;ne++)R[this.fields[ne]]=new p.Vector;v.call(x,x);for(var ne=0;ne<x.clauses.length;ne++){var A=x.clauses[ne],D=null,Ae=p.Set.empty;A.usePipeline?D=this.pipeline.runString(A.term,{fields:A.fields}):D=[A.term];for(var le=0;le<D.length;le++){var lt=D[le];A.term=lt;var Ze=p.TokenSet.fromClause(A),Et=this.tokenSet.intersect(Ze).toArray();if(Et.length===0&&A.presence===p.Query.presence.REQUIRED){for(var Fe=0;Fe<A.fields.length;Fe++){var Be=A.fields[Fe];B[Be]=p.Set.empty}break}for(var Gt=0;Gt<Et.length;Gt++)for(var Qe=Et[Gt],jt=this.invertedIndex[Qe],bi=jt._index,Fe=0;Fe<A.fields.length;Fe++){var Be=A.fields[Fe],$=jt[Be],Oi=Object.keys($),bn=Qe+"/"+Be,Je=new p.Set(Oi);if(A.presence==p.Query.presence.REQUIRED&&(Ae=Ae.union(Je),B[Be]===void 0&&(B[Be]=p.Set.complete)),A.presence==p.Query.presence.PROHIBITED){Y[Be]===void 0&&(Y[Be]=p.Set.empty),Y[Be]=Y[Be].union(Je);continue}if(R[Be].upsert(bi,A.boost,function(Lu,wn){return Lu+wn}),!M[bn]){for(var Xt=0;Xt<Oi.length;Xt++){var Ot=Oi[Xt],Fi=new p.FieldRef(Ot,Be),ln=$[Ot],Vi;(Vi=k[Fi])===void 0?k[Fi]=new p.MatchData(Qe,Be,ln):Vi.add(Qe,Be,ln)}M[bn]=!0}}}if(A.presence===p.Query.presence.REQUIRED)for(var Fe=0;Fe<A.fields.length;Fe++){var Be=A.fields[Fe];B[Be]=B[Be].intersect(Ae)}}for(var Xi=p.Set.complete,un=p.Set.empty,ne=0;ne<this.fields.length;ne++){var Be=this.fields[ne];B[Be]&&(Xi=Xi.intersect(B[Be])),Y[Be]&&(un=un.union(Y[Be]))}var fe=Object.keys(k),X=[],re=Object.create(null);if(x.isNegated()){fe=Object.keys(this.fieldVectors);for(var ne=0;ne<fe.length;ne++){var Fi=fe[ne],ce=p.FieldRef.fromString(Fi);k[Fi]=new p.MatchData}}for(var ne=0;ne<fe.length;ne++){var ce=p.FieldRef.fromString(fe[ne]),ee=ce.docRef;if(Xi.contains(ee)&&!un.contains(ee)){var Te=this.fieldVectors[ce],rt=R[ce.fieldName].similarity(Te),wi;if((wi=re[ee])!==void 0)wi.score+=rt,wi.matchData.combine(k[ce]);else{var ft={ref:ee,score:rt,matchData:k[ce]};re[ee]=ft,X.push(ft)}}}return X.sort(function(ms,ya){return ya.score-ms.score})},p.Index.prototype.toJSON=function(){var v=Object.keys(this.invertedIndex).sort().map(function(k){return[k,this.invertedIndex[k]]},this),x=Object.keys(this.fieldVectors).map(function(k){return[k,this.fieldVectors[k].toJSON()]},this);return{version:p.version,fields:this.fields,fieldVectors:x,invertedIndex:v,pipeline:this.pipeline.toJSON()}},p.Index.load=function(v){var x={},k={},R=v.fieldVectors,M=Object.create(null),B=v.invertedIndex,Y=new p.TokenSet.Builder,ne=p.Pipeline.load(v.pipeline);v.version!=p.version&&p.utils.warn("Version mismatch when loading serialised index. Current version of lunr '"+p.version+"' does not match serialized index '"+v.version+"'");for(var A=0;A<R.length;A++){var D=R[A],Ae=D[0],le=D[1];k[Ae]=new p.Vector(le)}for(var A=0;A<B.length;A++){var D=B[A],lt=D[0],Ze=D[1];Y.insert(lt),M[lt]=Ze}return Y.finish(),x.fields=v.fields,x.fieldVectors=k,x.invertedIndex=M,x.tokenSet=Y.root,x.pipeline=ne,new p.Index(x)};/*!
 * lunr.Builder
 * Copyright (C) 2020 Oliver Nightingale
 */p.Builder=function(){this._ref="id",this._fields=Object.create(null),this._documents=Object.create(null),this.invertedIndex=Object.create(null),this.fieldTermFrequencies={},this.fieldLengths={},this.tokenizer=p.tokenizer,this.pipeline=new p.Pipeline,this.searchPipeline=new p.Pipeline,this.documentCount=0,this._b=.75,this._k1=1.2,this.termIndex=0,this.metadataWhitelist=[]},p.Builder.prototype.ref=function(v){this._ref=v},p.Builder.prototype.field=function(v,x){if(/\//.test(v))throw new RangeError("Field '"+v+"' contains illegal character '/'");this._fields[v]=x||{}},p.Builder.prototype.b=function(v){v<0?this._b=0:v>1?this._b=1:this._b=v},p.Builder.prototype.k1=function(v){this._k1=v},p.Builder.prototype.add=function(v,x){var k=v[this._ref],R=Object.keys(this._fields);this._documents[k]=x||{},this.documentCount+=1;for(var M=0;M<R.length;M++){var B=R[M],Y=this._fields[B].extractor,ne=Y?Y(v):v[B],A=this.tokenizer(ne,{fields:[B]}),D=this.pipeline.run(A),Ae=new p.FieldRef(k,B),le=Object.create(null);this.fieldTermFrequencies[Ae]=le,this.fieldLengths[Ae]=0,this.fieldLengths[Ae]+=D.length;for(var lt=0;lt<D.length;lt++){var Ze=D[lt];if(le[Ze]==null&&(le[Ze]=0),le[Ze]+=1,this.invertedIndex[Ze]==null){var Et=Object.create(null);Et._index=this.termIndex,this.termIndex+=1;for(var Fe=0;Fe<R.length;Fe++)Et[R[Fe]]=Object.create(null);this.invertedIndex[Ze]=Et}this.invertedIndex[Ze][B][k]==null&&(this.invertedIndex[Ze][B][k]=Object.create(null));for(var Be=0;Be<this.metadataWhitelist.length;Be++){var Gt=this.metadataWhitelist[Be],Qe=Ze.metadata[Gt];this.invertedIndex[Ze][B][k][Gt]==null&&(this.invertedIndex[Ze][B][k][Gt]=[]),this.invertedIndex[Ze][B][k][Gt].push(Qe)}}}},p.Builder.prototype.calculateAverageFieldLengths=function(){for(var v=Object.keys(this.fieldLengths),x=v.length,k={},R={},M=0;M<x;M++){var B=p.FieldRef.fromString(v[M]),Y=B.fieldName;R[Y]||(R[Y]=0),R[Y]+=1,k[Y]||(k[Y]=0),k[Y]+=this.fieldLengths[B]}for(var ne=Object.keys(this._fields),M=0;M<ne.length;M++){var A=ne[M];k[A]=k[A]/R[A]}this.averageFieldLength=k},p.Builder.prototype.createFieldVectors=function(){for(var v={},x=Object.keys(this.fieldTermFrequencies),k=x.length,R=Object.create(null),M=0;M<k;M++){for(var B=p.FieldRef.fromString(x[M]),Y=B.fieldName,ne=this.fieldLengths[B],A=new p.Vector,D=this.fieldTermFrequencies[B],Ae=Object.keys(D),le=Ae.length,lt=this._fields[Y].boost||1,Ze=this._documents[B.docRef].boost||1,Et=0;Et<le;Et++){var Fe=Ae[Et],Be=D[Fe],Gt=this.invertedIndex[Fe]._index,Qe,jt,bi;R[Fe]===void 0?(Qe=p.idf(this.invertedIndex[Fe],this.documentCount),R[Fe]=Qe):Qe=R[Fe],jt=Qe*((this._k1+1)*Be)/(this._k1*(1-this._b+this._b*(ne/this.averageFieldLength[Y]))+Be),jt*=lt,jt*=Ze,bi=Math.round(jt*1e3)/1e3,A.insert(Gt,bi)}v[B]=A}this.fieldVectors=v},p.Builder.prototype.createTokenSet=function(){this.tokenSet=p.TokenSet.fromArray(Object.keys(this.invertedIndex).sort())},p.Builder.prototype.build=function(){return this.calculateAverageFieldLengths(),this.createFieldVectors(),this.createTokenSet(),new p.Index({invertedIndex:this.invertedIndex,fieldVectors:this.fieldVectors,tokenSet:this.tokenSet,fields:Object.keys(this._fields),pipeline:this.searchPipeline})},p.Builder.prototype.use=function(v){var x=Array.prototype.slice.call(arguments,1);x.unshift(this),v.apply(this,x)},p.MatchData=function(v,x,k){for(var R=Object.create(null),M=Object.keys(k||{}),B=0;B<M.length;B++){var Y=M[B];R[Y]=k[Y].slice()}this.metadata=Object.create(null),v!==void 0&&(this.metadata[v]=Object.create(null),this.metadata[v][x]=R)},p.MatchData.prototype.combine=function(v){for(var x=Object.keys(v.metadata),k=0;k<x.length;k++){var R=x[k],M=Object.keys(v.metadata[R]);this.metadata[R]==null&&(this.metadata[R]=Object.create(null));for(var B=0;B<M.length;B++){var Y=M[B],ne=Object.keys(v.metadata[R][Y]);this.metadata[R][Y]==null&&(this.metadata[R][Y]=Object.create(null));for(var A=0;A<ne.length;A++){var D=ne[A];this.metadata[R][Y][D]==null?this.metadata[R][Y][D]=v.metadata[R][Y][D]:this.metadata[R][Y][D]=this.metadata[R][Y][D].concat(v.metadata[R][Y][D])}}}},p.MatchData.prototype.add=function(v,x,k){if(!(v in this.metadata)){this.metadata[v]=Object.create(null),this.metadata[v][x]=k;return}if(!(x in this.metadata[v])){this.metadata[v][x]=k;return}for(var R=Object.keys(k),M=0;M<R.length;M++){var B=R[M];B in this.metadata[v][x]?this.metadata[v][x][B]=this.metadata[v][x][B].concat(k[B]):this.metadata[v][x][B]=k[B]}},p.Query=function(v){this.clauses=[],this.allFields=v},p.Query.wildcard=new String("*"),p.Query.wildcard.NONE=0,p.Query.wildcard.LEADING=1,p.Query.wildcard.TRAILING=2,p.Query.presence={OPTIONAL:1,REQUIRED:2,PROHIBITED:3},p.Query.prototype.clause=function(v){return"fields"in v||(v.fields=this.allFields),"boost"in v||(v.boost=1),"usePipeline"in v||(v.usePipeline=!0),"wildcard"in v||(v.wildcard=p.Query.wildcard.NONE),v.wildcard&p.Query.wildcard.LEADING&&v.term.charAt(0)!=p.Query.wildcard&&(v.term="*"+v.term),v.wildcard&p.Query.wildcard.TRAILING&&v.term.slice(-1)!=p.Query.wildcard&&(v.term=""+v.term+"*"),"presence"in v||(v.presence=p.Query.presence.OPTIONAL),this.clauses.push(v),this},p.Query.prototype.isNegated=function(){for(var v=0;v<this.clauses.length;v++)if(this.clauses[v].presence!=p.Query.presence.PROHIBITED)return!1;return!0},p.Query.prototype.term=function(v,x){if(Array.isArray(v))return v.forEach(function(R){this.term(R,p.utils.clone(x))},this),this;var k=x||{};return k.term=v.toString(),this.clause(k),this},p.QueryParseError=function(v,x,k){this.name="QueryParseError",this.message=v,this.start=x,this.end=k},p.QueryParseError.prototype=new Error,p.QueryLexer=function(v){this.lexemes=[],this.str=v,this.length=v.length,this.pos=0,this.start=0,this.escapeCharPositions=[]},p.QueryLexer.prototype.run=function(){for(var v=p.QueryLexer.lexText;v;)v=v(this)},p.QueryLexer.prototype.sliceString=function(){for(var v=[],x=this.start,k=this.pos,R=0;R<this.escapeCharPositions.length;R++)k=this.escapeCharPositions[R],v.push(this.str.slice(x,k)),x=k+1;return v.push(this.str.slice(x,this.pos)),this.escapeCharPositions.length=0,v.join("")},p.QueryLexer.prototype.emit=function(v){this.lexemes.push({type:v,str:this.sliceString(),start:this.start,end:this.pos}),this.start=this.pos},p.QueryLexer.prototype.escapeCharacter=function(){this.escapeCharPositions.push(this.pos-1),this.pos+=1},p.QueryLexer.prototype.next=function(){if(this.pos>=this.length)return p.QueryLexer.EOS;var v=this.str.charAt(this.pos);return this.pos+=1,v},p.QueryLexer.prototype.width=function(){return this.pos-this.start},p.QueryLexer.prototype.ignore=function(){this.start==this.pos&&(this.pos+=1),this.start=this.pos},p.QueryLexer.prototype.backup=function(){this.pos-=1},p.QueryLexer.prototype.acceptDigitRun=function(){var v,x;do v=this.next(),x=v.charCodeAt(0);while(x>47&&x<58);v!=p.QueryLexer.EOS&&this.backup()},p.QueryLexer.prototype.more=function(){return this.pos<this.length},p.QueryLexer.EOS="EOS",p.QueryLexer.FIELD="FIELD",p.QueryLexer.TERM="TERM",p.QueryLexer.EDIT_DISTANCE="EDIT_DISTANCE",p.QueryLexer.BOOST="BOOST",p.QueryLexer.PRESENCE="PRESENCE",p.QueryLexer.lexField=function(v){return v.backup(),v.emit(p.QueryLexer.FIELD),v.ignore(),p.QueryLexer.lexText},p.QueryLexer.lexTerm=function(v){if(v.width()>1&&(v.backup(),v.emit(p.QueryLexer.TERM)),v.ignore(),v.more())return p.QueryLexer.lexText},p.QueryLexer.lexEditDistance=function(v){return v.ignore(),v.acceptDigitRun(),v.emit(p.QueryLexer.EDIT_DISTANCE),p.QueryLexer.lexText},p.QueryLexer.lexBoost=function(v){return v.ignore(),v.acceptDigitRun(),v.emit(p.QueryLexer.BOOST),p.QueryLexer.lexText},p.QueryLexer.lexEOS=function(v){v.width()>0&&v.emit(p.QueryLexer.TERM)},p.QueryLexer.termSeparator=p.tokenizer.separator,p.QueryLexer.lexText=function(v){for(;;){var x=v.next();if(x==p.QueryLexer.EOS)return p.QueryLexer.lexEOS;if(x.charCodeAt(0)==92){v.escapeCharacter();continue}if(x==":")return p.QueryLexer.lexField;if(x=="~")return v.backup(),v.width()>0&&v.emit(p.QueryLexer.TERM),p.QueryLexer.lexEditDistance;if(x=="^")return v.backup(),v.width()>0&&v.emit(p.QueryLexer.TERM),p.QueryLexer.lexBoost;if(x=="+"&&v.width()===1||x=="-"&&v.width()===1)return v.emit(p.QueryLexer.PRESENCE),p.QueryLexer.lexText;if(x.match(p.QueryLexer.termSeparator))return p.QueryLexer.lexTerm}},p.QueryParser=function(v,x){this.lexer=new p.QueryLexer(v),this.query=x,this.currentClause={},this.lexemeIdx=0},p.QueryParser.prototype.parse=function(){this.lexer.run(),this.lexemes=this.lexer.lexemes;for(var v=p.QueryParser.parseClause;v;)v=v(this);return this.query},p.QueryParser.prototype.peekLexeme=function(){return this.lexemes[this.lexemeIdx]},p.QueryParser.prototype.consumeLexeme=function(){var v=this.peekLexeme();return this.lexemeIdx+=1,v},p.QueryParser.prototype.nextClause=function(){var v=this.currentClause;this.query.clause(v),this.currentClause={}},p.QueryParser.parseClause=function(v){var x=v.peekLexeme();if(x!=null)switch(x.type){case p.QueryLexer.PRESENCE:return p.QueryParser.parsePresence;case p.QueryLexer.FIELD:return p.QueryParser.parseField;case p.QueryLexer.TERM:return p.QueryParser.parseTerm;default:var k="expected either a field or a term, found "+x.type;throw x.str.length>=1&&(k+=" with value '"+x.str+"'"),new p.QueryParseError(k,x.start,x.end)}},p.QueryParser.parsePresence=function(v){var x=v.consumeLexeme();if(x!=null){switch(x.str){case"-":v.currentClause.presence=p.Query.presence.PROHIBITED;break;case"+":v.currentClause.presence=p.Query.presence.REQUIRED;break;default:var k="unrecognised presence operator'"+x.str+"'";throw new p.QueryParseError(k,x.start,x.end)}var R=v.peekLexeme();if(R==null){var k="expecting term or field, found nothing";throw new p.QueryParseError(k,x.start,x.end)}switch(R.type){case p.QueryLexer.FIELD:return p.QueryParser.parseField;case p.QueryLexer.TERM:return p.QueryParser.parseTerm;default:var k="expecting term or field, found '"+R.type+"'";throw new p.QueryParseError(k,R.start,R.end)}}},p.QueryParser.parseField=function(v){var x=v.consumeLexeme();if(x!=null){if(v.query.allFields.indexOf(x.str)==-1){var k=v.query.allFields.map(function(B){return"'"+B+"'"}).join(", "),R="unrecognised field '"+x.str+"', possible fields: "+k;throw new p.QueryParseError(R,x.start,x.end)}v.currentClause.fields=[x.str];var M=v.peekLexeme();if(M==null){var R="expecting term, found nothing";throw new p.QueryParseError(R,x.start,x.end)}switch(M.type){case p.QueryLexer.TERM:return p.QueryParser.parseTerm;default:var R="expecting term, found '"+M.type+"'";throw new p.QueryParseError(R,M.start,M.end)}}},p.QueryParser.parseTerm=function(v){var x=v.consumeLexeme();if(x!=null){v.currentClause.term=x.str.toLowerCase(),x.str.indexOf("*")!=-1&&(v.currentClause.usePipeline=!1);var k=v.peekLexeme();if(k==null){v.nextClause();return}switch(k.type){case p.QueryLexer.TERM:return v.nextClause(),p.QueryParser.parseTerm;case p.QueryLexer.FIELD:return v.nextClause(),p.QueryParser.parseField;case p.QueryLexer.EDIT_DISTANCE:return p.QueryParser.parseEditDistance;case p.QueryLexer.BOOST:return p.QueryParser.parseBoost;case p.QueryLexer.PRESENCE:return v.nextClause(),p.QueryParser.parsePresence;default:var R="Unexpected lexeme type '"+k.type+"'";throw new p.QueryParseError(R,k.start,k.end)}}},p.QueryParser.parseEditDistance=function(v){var x=v.consumeLexeme();if(x!=null){var k=parseInt(x.str,10);if(isNaN(k)){var R="edit distance must be numeric";throw new p.QueryParseError(R,x.start,x.end)}v.currentClause.editDistance=k;var M=v.peekLexeme();if(M==null){v.nextClause();return}switch(M.type){case p.QueryLexer.TERM:return v.nextClause(),p.QueryParser.parseTerm;case p.QueryLexer.FIELD:return v.nextClause(),p.QueryParser.parseField;case p.QueryLexer.EDIT_DISTANCE:return p.QueryParser.parseEditDistance;case p.QueryLexer.BOOST:return p.QueryParser.parseBoost;case p.QueryLexer.PRESENCE:return v.nextClause(),p.QueryParser.parsePresence;default:var R="Unexpected lexeme type '"+M.type+"'";throw new p.QueryParseError(R,M.start,M.end)}}},p.QueryParser.parseBoost=function(v){var x=v.consumeLexeme();if(x!=null){var k=parseInt(x.str,10);if(isNaN(k)){var R="boost must be numeric";throw new p.QueryParseError(R,x.start,x.end)}v.currentClause.boost=k;var M=v.peekLexeme();if(M==null){v.nextClause();return}switch(M.type){case p.QueryLexer.TERM:return v.nextClause(),p.QueryParser.parseTerm;case p.QueryLexer.FIELD:return v.nextClause(),p.QueryParser.parseField;case p.QueryLexer.EDIT_DISTANCE:return p.QueryParser.parseEditDistance;case p.QueryLexer.BOOST:return p.QueryParser.parseBoost;case p.QueryLexer.PRESENCE:return v.nextClause(),p.QueryParser.parsePresence;default:var R="Unexpected lexeme type '"+M.type+"'";throw new p.QueryParseError(R,M.start,M.end)}}},function(v,x){O.exports=x()}(this,function(){return p})})()})(tw);var TI=tw.exports;const PI=XO(TI);class RI{constructor(w){this.contentList=w,this.index=this.buildIndex(w)}buildIndex(w){return PI(function(){this.field("abstract"),this.field("content"),this.field("contributor"),this.field("subtitle"),this.field("title"),this.field("url"),this.ref("url"),w.forEach(p=>{this.add(p)})})}search(w){return this.index.search(w).map(v=>this.contentList.find(({url:x})=>x===v.ref))}}window.toggleMenu=()=>{const O=document.getElementById("site-menu"),w=document.querySelector(".side-by-side > .quire-entry__image-wrap > .quire-entry__image"),p=O.getAttribute("aria-expanded");O.classList.toggle("is-expanded",!O.classList.contains("is-expanded")),p==="true"?(w&&w.classList.remove("menu_open"),O.setAttribute("aria-expanded","false")):(w&&w.classList.add("menu_open"),O.setAttribute("aria-expanded","true"))};window.toggleSearch=()=>{let O=document.getElementById("js-search"),w=document.getElementById("js-search-input"),p=O.getAttribute("aria-expanded");O.classList.toggle("is-active",!O.classList.contains("is-active")),p==="true"?O.setAttribute("aria-expanded","false"):(w.focus(),O.setAttribute("aria-expanded","true"))};window.search=()=>{let w=document.getElementById("js-search-input").value,p=window.QUIRE_SEARCH,v=document.getElementById("js-search-results-list"),x=document.getElementById("js-search-results-template");if(w.length>=3){let M=p.search(w);R(M)}function k(){v.innerText=""}function R(M){k(),M.forEach(B=>{let Y=document.importNode(x.content,!0),ne=Y.querySelector(".js-search-results-item"),A=Y.querySelector(".js-search-results-item-title"),D=Y.querySelector(".js-search-results-item-type"),Ae=Y.querySelector(".js-search-results-item-length");ne.href=B.url,A.textContent=B.title,D.textContent=B.type,Ae.textContent=B.length,v.appendChild(Y)})}};function OI(O){const w=O.target.closest("a"),p=w.hash;w.pathname.includes(window.location.pathname)&&(O.preventDefault(),window.location.hash=p),yp(p)}function II(){const w='a[href*="#"]'+['[href="#"]','[href="#0"]',".accordion-section__heading-link",".q-figure__modal-link"].map(v=>`:not(${v})`).join("");document.querySelectorAll(w).forEach(v=>{v.addEventListener("click",OI)})}function LI(){document.getElementById("container").classList.remove("no-js"),navigator.userAgent.match(/(iPad|iPhone|iPod)/i),navigator.userAgent.match(/android/i),$I(),II()}function $I(){const O=document.getElementById("js-search").dataset.searchIndex;if(!O){console.warn("Search data url is undefined");return}fetch(O).then(async w=>{const{ok:p,statusText:v,url:x}=w;if(!p){console.warn(`Search data ${v.toLowerCase()} at ${x}`);return}const k=await w.json();window.QUIRE_SEARCH=new RI(k)})}function NI(O){const w={month:"long"},p=O.getMonth();let v;[4,5,6].includes(p)?v=O.toLocaleDateString("en-US",w).replace(/[^A-Za-z]+/,""):(v=v===8?"Sept":O.toLocaleDateString("en-US",w).slice(0,3),v+=".");const x=O.getDate(),k=O.getFullYear();return[x,v,k].join(" ")}function MI(){const O=document.querySelectorAll(".cite-current-date"),w=NI(new Date);O.forEach(p=>{p.innerHTML=w})}function FI(O,w){const p=parseInt(getComputedStyle(document.documentElement).getPropertyValue("--gap")),v=O.getBoundingClientRect(),x=w.getBoundingClientRect(),k=x.left-v.left,R=v.right-x.right,M=v.width/2;R>0?O.style.transform=`translateX(-${M+R+p}px)`:k>0&&(O.style.transform=`translateX(-${M-k-p}px)`)}function zI(){let O=document.querySelectorAll(".expandable [aria-expanded]");for(let w=0;w<O.length;w++)O[w].addEventListener("click",p=>{p.stopPropagation(),p.target.getAttribute("aria-expanded")==="false"?p.target.setAttribute("aria-expanded","true"):p.target.setAttribute("aria-expanded","false");let x=p.target.parentNode.querySelector(".quire-citation__content");x&&(x.getAttribute("hidden"),typeof x.getAttribute("hidden")=="string"?x.removeAttribute("hidden"):x.setAttribute("hidden","hidden"),FI(x,document.documentElement))});document.addEventListener("click",w=>{let p=w.target.parentNode;if(p&&!(p.classList.contains("quire-citation")||p.classList.contains("quire-citation__content"))){let v=document.querySelectorAll(".quire-citation__button"),x=document.querySelectorAll(".quire-citation__content");if(!x)return;for(let k=0;k<x.length;k++){if(!v[k])return;v[k].setAttribute("aria-expanded","false"),x[k].setAttribute("hidden","hidden")}}})}function BI(){MI(),zI()}function jI(){const O=new URL(window.location),w=[...new Set(O.searchParams.keys())];return Object.fromEntries(w.map(p=>[p,O.searchParams.getAll(p).map(decodeURIComponent)]))}LI();window.addEventListener("load",()=>{BI(),yp(window.location.hash);const O=jI();_t.setup(),kI(),window.location.hash&&gp({figureId:window.location.hash.replace(/^#/,""),annotationIds:O["annotation-id"],region:O.region?O.region[0]:null,sequence:{index:O["sequence-index"]?O["sequence-index"][0]:null}})});
//# sourceMappingURL=index-bd39d11b.js.map
